{"version":3,"sources":["../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/AAModelLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/AnimationCtrl.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/AnimationTrack.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/audioManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/AwardInfoLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BackHomeLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BackLifeLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BackMaplLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/BaseLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BaseUILayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/beHaviorComponent.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BlessLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BlessResultLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/blockArrow.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/BoxColliderUtil.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BoxMonsterLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/BtnLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1011.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/bullet10170.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/bullet10180.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/bullet10190.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/bullet10200.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1021.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1031.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1041.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1042.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1051.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1052.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1061.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1071.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1081.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1091.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1101.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1102.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1103.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet1111.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/bullet1112.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet12.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet13.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet14.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/bullet16.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet17.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet18.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet19.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet20.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet21.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet22.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet4.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet5.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet6.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet8.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/bullet/Bullet9.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/BulletSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/BuyLifeLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/ChapterLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/utils/file:/E:/MyWork/MowingGame/code/assets/scripts/utils/cocosUtil.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/comeShine.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/conf.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/data/file:/E:/MyWork/MowingGame/code/assets/scripts/game/data/constants.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/utils/file:/E:/MyWork/MowingGame/code/assets/scripts/utils/CountTimeUtil.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/CronCtr.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/DaySignLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/DayTaskLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/common/file:/E:/MyWork/MowingGame/code/assets/scripts/common/debugLogMgr.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/designManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/devModel.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/DialogEffect.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/EnergyLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/eventManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/feiBiao.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/utils/file:/E:/MyWork/MowingGame/code/assets/scripts/utils/FileUtils.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/GameCtrl.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/file:/E:/MyWork/MowingGame/code/assets/scripts/game/GameLaunch.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/GameMemoryStorage.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/gameStorage.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/GParam.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/GuessGameLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/GuessResultLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/H5AdSdk4399.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/H5AdSdkTelegram.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/HandLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/HeroLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/Hint.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/HintSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/HomeLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/http.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/ItemLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/layerManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/LetterLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/LevelLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/LoadingLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/file:/E:/MyWork/MowingGame/code/assets/scripts/localization.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/localStorageManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/data/file:/E:/MyWork/MowingGame/code/assets/scripts/game/data/localText.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/LuckyDrawLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/MainLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/MapLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/mapModel.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/MapSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/MapWrap.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/md5.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster12.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster13.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster21.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster22.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster23.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster3.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster4.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster5.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster6.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/monsters/Monster9.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/MonsterSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/MoreGameLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/MotionStreakAssemblerUtil.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/MotionStreakUtil.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/data/file:/E:/MyWork/MowingGame/code/assets/scripts/game/data/msgac.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/MsgBoxLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/common/file:/E:/MyWork/MowingGame/code/assets/scripts/common/myLog.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/NodePoolUtil.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/NoticeLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/NumSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/PatrolFastLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/PatrolLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/PauseLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/other/file:/E:/MyWork/MowingGame/code/assets/scripts/game/other/physicsGroup.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/file:/E:/MyWork/MowingGame/code/assets/scripts/game/engine/PhysicsWorld.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/Player.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/playerModel.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/ProgressCtrl.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/Prop.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/Prop1001.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/Prop1002.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/Prop101.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/Prop201.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/prop/Prop701.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/PropInfoLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/PropInfoLayer2.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/PropItemPrefab.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/PropSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/PyramidDrawLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/RedPointLogicMgr.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/common/file:/E:/MyWork/MowingGame/code/assets/scripts/common/redPointManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/RenderChildBatch.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/game/manager/resManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/RewardItemLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/RewardLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/RewardRedBoxLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/RewardSkinLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/base/ScrollViewUtil.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/sdk/file:/E:/MyWork/MowingGame/code/assets/scripts/sdk/sdkManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/ServerCtr.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/other/file:/E:/MyWork/MowingGame/code/assets/scripts/game/other/serverMsg.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/SettingLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/SettlementLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/ShareLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/shader/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/shader/ShineColor.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/ShopLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/common/file:/E:/MyWork/MowingGame/code/assets/scripts/common/SingleInstance.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill1.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill10.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill11.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill2.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill3.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill4.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill5.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill6.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill7.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill8.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/skill/Skill9.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/SkillSelectLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/SkillSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/SkinChangeLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/TargetPos.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/targetPos2.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/hint/targetPos3.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/TimeCtr.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/TopUILayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/TowerFloorLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/TowerLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/TowerRoleLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/TransLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/tyqAdManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/layer/TyqBaseLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/tyqConstants.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/manager/tyqLayerManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/layer/TyqMoreGameLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/manager/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/cocos/manager/tyqResManager.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/tyqSDK.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/tyqSDKConfig.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/file:/E:/MyWork/MowingGame/code/assets/scripts/game/model/UserData.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/utils/file:/E:/MyWork/MowingGame/code/assets/scripts/utils/utilTools.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/layer/VipLayer.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/platform/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/platform/Vivo.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon1.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon2.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon3.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon4.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon5.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon6.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon7.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/item/weapon/Weapon8.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/file:/E:/MyWork/MowingGame/code/assets/scripts/game/compoment/sys/WeaponSystem.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/platform/wechat/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/platform/wechat/wechat.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/utils/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/utils/weHttp.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/utils/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/utils/weNetworkMgr.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/network/wmsocket.ts","../../file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/platform/wechat/file:/E:/MyWork/MowingGame/code/assets/scripts/tyqSDK/platform/wechat/WXCustomAd.ts"],"names":["ccclass","_decorator","property","_inheritsLoose","_proto","onLoad","_BaseLayer","onEnable","onDisable","onDestroy","initUI","processEvent","ac","data","onButtonClick","node","name","BaseLayer","args","_this","spineSkeleton","animationComponent","lastAni","lastLoop","animationEndCallback","this","getComponent","sp","Skeleton","getComponentInChildren","Animation","on","EventType","FINISHED","animationFinished","setSpineSkeletonNode","setAnimationNode","pauseAnimation","paused","resumeAnimation","eventName","animationState","playAnimation","isLoop","completeCb","loop","setAnimation","setCompleteListener","play","playAnimationOnce","endCb","Promise","resolve","reject","_this2","undefined","animation","Component","duration","time","g","v","vx","vy","endY","aniFlag","targetPos","endCallback","startShowThrow","cb","Tween","stopAllByTarget","radian","utilTools","getFloatValue","angleToRadian","Math","random","PI","cos","sin","position","y","startBeiSaiEr","cocosUtil","convertToWorldSpace","mapModel","mapLayer","coinIconNode","moveTargetUpdate","dt","convertToNodeSpace","playerPos","player","x","nodePos","getPosition","Vec2","distance","direction","subtract","normalize","dis","multiplyScalar","add","showThrowUpdate","pos","setPosition","dx","tween","by","v3","easing","delay","call","start","update","AudioManager","musicAudioSource","effectAudioSource","audioClips","musicVolume","effectVolume","musicName","setMusicAudioSource","audioSource","setEffectAudioSource","initData","getSaveData","now","loadAllAudio","onProgress","onComplete","resManager","loadAssetByBundleDir","constants","bundles","audio","AudioClip","percent","item","assetArr","i","asset","loadAudios","pathArr","loadAssetByPathArr","loadAudio","path","loadAsset","err","_this3","getMusiceVolume","setMusicVolume","val","round","volume","pause","playMusic","_context","getAudioClip","clip","playing","stop","gameOnShow","force","myLog","state","getEffectVolume","setEffectVolume","playEffect","effectName","_context2","playOneShot","_this4","_instance","instance","setItemLayer","getNodeByPath","layerData","awardArr","refreshAwardItem","bind","localize","layers","AwardInfoLayer","catName","common","itemUI","award","setPropItem","find","onClickBtnSure","closeLayer","onClickBg","uiNode","isShowBannerAd","tweenScaleIn2","BackHomeLayer","onClickBtnGoOn","onClickBtnExit","serverMsg","send","msgac","mapLeave","timeNode","diamondNumNode","UserData","getInstance","mapData","designManager","config","backLifeCount","mapSystem","backlifeCount","doSettlement","to","scale","tyqAdManager","getChannel","Channel","H5_4399","onClickBtnClose","setString","union","repeat","backLifeDiamond","baoshi","setRenderableColor","Color","RED","WHITE","BackLifeLayer","localizeAnim","roleBackLife","backLife","onClickBtnAd","sdkManager","openAd","st","onClickBtnDiamond","createNotice","localizeManager","_localize","useBaoShi","BackMapLayer","mapId","layerCb","layerName","layerId","pathNodeObj","Map","resLoader","ResLoader","autoReleaseAsset","preLoadAssetConfigArr","eventArr","openUpdateSecond","updateSecondInterval","openAllBtnInteractive","openBtnLongPress","btnLongTrigTime","btnLognTrigTimeCount","btnLongTrigCount","btnLongNode","addPathNode","DesignResolutionHeight","view","setDesignResolutionSize","ResolutionPolicy","FIXED_HEIGHT","chooseDesignResolution","screen1","getVisibleSize","width","height","FIXED_WIDTH","addButtonListener","refreshRedPoint","clearInterval","setInterval","updateSecond","playerModel","isRecordAd","tyqSDK","showBannerAd","eventManager","refreshLocalization","refreshDebugPannel","refreshMapFightWindow","removeEventArr","off","hideBannerAd","HomeLayer","releaseAllAsset","set","chs","children","len","length","pNode","get","screenAdapterBG","isValid","widget","Widget","enabled","getScreenBgAdapterScale","scaleX","getScale","scaleY","setScale","screenAdapterUI","getScreenAdapterScale","Button","preOnButtonClick","Node","TOUCH_START","preOnButtonTouchStart","TOUCH_MOVE","preOnButtonTouchMove","TOUCH_END","preOnButtonTouchEnd","TOUCH_CANCEL","preOnButtonTouchCancel","ScrollView","indexOf","ScrollViewUtil","addComponent","max","ch","btn","top","substring","remain","key","toLocaleUpperCase","hasPlayAudio","preOnButtonLongClick","btnNode","event","target","touch","openPropInfoLayer2","id","num","getPropNumById","obj","openLayer","PropInfoLayer2","isShowingLayer","layerManager","showHintLayer","msg","hintLayer","active","hideHintLayer","openMsgBoxLayer","hint","MsgBoxLayer","openAwardGetLayer","RewardLayer","propArr","notMoveAni","openAwardInfoLayer","setRoleSkin","roleNode","skin","getHeroSkin","setSkin","playAudioEffect","delayTime","scheduleOnce","audioManager","showCb","openSingleLayer","baseLayer","prefab","addAsset","forEach","assetConfig","destroy","addEventArr","arr","preProcessEvent","ac2KeyObj","showLackItem","itemId","itemRow","getRowById","tableName","prop","localText","lackItemHint","format","showGetItem","content","scrollViewSetData","scrollViewNode","refreshItemFunc","resetPos","itemTween","scrollViewUtil","setData","index","scrollViewAddData","pushData","scrollViewRefreshList","refreshList","scrollViewRefreshItemUI","refreshIndex","scrollViewRefreshItemUIByIndex","scrollViewRemoveItemUI","removeByIndex","scrollViewRemoveItemUIByIndex","scrollViewScrollToEnd","scrollToEnd","scrollViewScrollToItemUI","scrollViewScrollToIndex","scrollToIndex","setProgressBar","progressBar","ProgressBar","progress","setNumString","formatNum","addComponentOnce","ItemLayer","setNumItemLayer","push","itemLayer","iconNode","bgNode","numNode","row","e","icon","type","weapon","weaponid","setSpriteFrame2","quality","shakeScreen","tweenShakeNode","getPopLayerParentNode","removeRenderBatch","parent","renderChildBatch","removeRootItemNode","addRenderBatch","addRootItemNode","info","label","Label","string","rich","RichText","setSpriteFrame","bundleName1","sprite","Sprite","bundleName","split","loadSpriteFrame","spriteFrame","_this5","setSpineData","skeleton","spine","spinePath","loadSpineData","skeletonData","_this6","setSpineData2","_this7","isGoOn","_initializerDefineProperty","isShowBanner","getScreenScale","resolute","getDesignResolutionSize","toast","addTopUILayer","layer","Prefab","message","instantiate","onClickClose","stringToArr","str","endIndex","fitScrollView","curview","minHeigth","maxHeigth","windowSize","UITransform","min","fitNodeWidget","posy","z","console","log","notResetPos","setImageCustomSize","size","newWidth","newHeight","addButtonHander","btnComponent","com","hander","customEventData","transition","Transition","SCALE","eventHander","EventHandler","component","handler","clickEvents","showGetReward","rewardArr","element","propData","Id","playCoinFlyAnim","Num","count","iconpath","startPos","endPos","r","iconSize","getCirclePoints","map","coin","self","addChild","repeatForever","midPos","calcDistance","idx","randomScope","points","radians","unshift","pos1","pos2","xdiff","ydiff","pow","configurable","enumerable","writable","initializer","tooltip","isClick","tyqSDKConfig","isOpenBeHavior","WECHAT","strategy","Wechat","isShareBehavior","SpriteFrame","reportShareBehavior","currentShow","assetType","Texture2D","bundle","assetManager","getBundle","loadAssetFunc","load","finish","total","loadBundle","retBundle","_curBlessId","_curBlessNum","NeedBlessNum","_curAutoIndex","_curIndex","propView","btnlayer","_BaseUILayer","wearDrop","initList","btnBless","selectListNode","initSelectData","blessPropNode","tishiText","BlessLayer","getChildByName","getPropSort","dataArr","iswear","curprop","wearIndex","scrollView","initItem","PropItemPrefab","setView","Type_HideNum","Type_UnTouch","Type_Grey","selectProp","itemData","propid","convertToWorldSpaceAR","addSelectProp","startp","propBlessLayer","propItem","unSelectProp","p","convertToNodeSpaceAR","curProp","needCoinLabel","needIcon","blessId","showResultProp","selectBtnNode","BlessResultLayer","removeAllChildren","showLight","showPropInfo","propData2","atk","attrIcon","wwqVec","attrNumLab","formatNumString","color","colors","blue","parseColor","attrlabel","hp","green","propNameLab","propSystem","cat","vars","isShow","resultLight","UIOpacity","opacity","blessAction","coinNum","checkAndUseBaoshi","cheackAndUseCoin","blessProp","clearBlessLayer","eventSendCustomEvent","getPropId","addDayTaskNum","RewardItemLayer","propId","adCoin","adDiamond","allBlessProp","result","autoBlessAction","closeBless","onSelectBtnClick","onSelectItemClick","parseInt","selectcurbg","BaseUILayer","startAnimal","attrNumLab1","attrNodebg","hide","show","title","monster","outVec1","init","extraObj","tf","bodyNode","recycleSelf","angle","vec2XAngle","executeInEditMode","Enum","physicsGroup","worldPoints","worldAabb","Rect","contactColliderObj","contactBeginCb","contactEndCb","collider","contactEnd","getContactKey","uuid","updateCollider","aabb","offset","wp0","wp1","wp2","wp3","transformMat4ToPoints","worldMatrix","minX","maxX","minY","maxY","setContactBegin","setContactEnd","contactBegin","key1","key2","collider1","collider2","_createClass","_offset","_size","Size","DEFAULT","getIndexs","canRefresh","refreshCount","itemUIArr","getItemArr","refreshSelectItem","refreshBtnsLayer","getChildByPath","localizeImg","btnRefresh","carTime","yin","limitNode","refreshSelectLayer","skillItem","propIds","diamond","getFirstIdByType","starLayer","lv","starNode","icon2Node","design","maxLv","getSelectItemArr","carGoldNum","carGold","carDiamond","addHpPercent","onClickBtnRefresh","onClickBtnGetAd","weaponSystem","addWeapon","skill","skillSystem","addSkill","skill2","addSkill2","getProp","onClickBtnGet","bolInit","intCheckTime","runTime","runTimeLast","setStart","nodeLight","xscale","yscale","setStop","toHEX","toLowerCase","isDestroyInNoShow","speed","bulletUtil","timeCount","contactItemArr","isFollow","rotateSpeed","vec3Obj","outVec3","BoxCollider2D","Contact2DType","BEGIN_CONTACT","END_CONTACT","group","startWorldPos","getFacePlayerDirection","clone","bullet","radianToAngle","atan2","unscheduleAllCallbacks","bulletUtilStr","contactBulletTime","setDirection","selfCollider","otherCollider","contactItem","MONSTER","tag","Monster","PLAYER","contactEnmeyCanHide","dam","atkPercentAdd","ceil","hitWithDam","getShineColor","MONSTER_BULLET","Bullet","splice","shineColor","contactNotHide","outScreenCanRecyle","outScreenNotRecycle","bulletSystem","recycleBulletNode","recycleSelfEnd","getFollowTargetPos","vec3CopyVal","canMove","moveStop","radian1","radian2","dr","maxDr","abs","Vec3","rotateZ","ZERO","lastDirection","arriveTargetPos","afterDirection","forArr","timeGap","isInScreenVisible","floatRadian","subNum","hintSystem","addHint","HintNames","hit2","animationCtrl","AnimationCtrl","bulletId","addBullet","tweenFadeOut","getSkill2RangeAddScale","isAtOnce","tweenScaleOut","moveSpeed","yinTimeCount","moveDis","feiBiao","PLAYER_BULLET","hasScheduled","getSkill2BulletSpeedAddPercent","getSkill2AtkAddPercent","floor","isOutScreenReflex","tweenScaleIn","negative","mirrorReflex","isX","outScreenX","visibleHalfSize","outScreenY","outWallX","wallLayer","wallRightVal","wallLeftVal","outWallY","wallTopVal","wallBottomVal","invokeClass","frameColor","initScale","uiOpacity","frameLayer","onUpdate","ratio","frameNode","hasTweenPlay","targetDis","radianSpeed","shotTimeCount","setUpDownTween","isOpen","startShot","schedule","shot","macro","REPEAT_FOREVER","unschedule","maxSpeed","getMoveSpeed","targetPos2","convertToWorldSpaceWithPos","activeInHierarchy","atkCd","targetNode","fireNode","fireAtk","getMinDisTargetNode","aniCtrl","startColliderAni","bodyNodeTf","setBodyWidth","direction1","direction2","turnSpeed","tweenBlink","createSmallBullet","heightWidthRatio","maxFollowDis","updateAngleAndDis","getCircleDirectionArr","boom1","idBulletLayerObj","bulletLayer","bulletLayer2","waitAddArr","getBulletLayerNameById","getBulletLayerById","NodePoolUtil","bulletPrefabObj","loadBulletPrefab","nodePoolUtil","tmpFunc","itemNode","bulletNode","getNode","forVisibleMonsterBullet","recycleAllBulletNodeById","recycleNode","updateLogic","shift","skillLifeNum","mapRefreshSkill","PageView","_curPageId","_curOpenLevel","_curRewardList","getTable","openLevel","mapItem","pageContent","ChapterLayer","level","getLevelData","ReceiveState","mapPage","scrollToPage","setPage","getLevelByScrollIndex","curMap","tishiLabel","tishiLabel2","updateBtnState","rewardLayer","rewardItem","leveldata","btn1","interactable","btn2","RedPointLogicMgr","ins","setRPointView","Time","white","scrowPage","_curPageIdx","curPageIdx","myScrollPage","nextIdx","getNextIdx","getPages","onGetReward","curRewardArr","tobePropItem","getRewardProp","setLevelData","onGetRewardDouble","backHome","String","prototype","Object","defineProperty","getAroundPos","minRadius","maxRadius","isWorld","radius","getLeavePos","X","Y","getRectPos","minWidth","minHeight","maxWidth","maxHeight","r1","weight","r2","r3","r4","getRowByWeight","rad","srcVec3","interval","repeatNum","getSectorDirectionArr","da","topArr","downArr","dir1","dir2","concat","p2","startRadian","orignPos","getVisibleOrigin","anchorX","anchorY","tweenHitScale","tweenScaleShake","quat1","Quat","fromEuler","quat2","quat3","rotation","tweenBubbling","waitTimeAsync","setTimeout","getScreenMidWorldPos","nodeChangeParent","tweenUIShow","tweenBounceAction","tweenFallDown","setNodePositionY","tweenTopFadeOut","tweenScaleEffect","tweenFlyToPos","quat","getQuatByAngleZ","t1","t2","setRotation","parallel","tweenTopRightPao","callbck","dx1","ds","tweenRotate","tweenUpDown","dy","tweenFadeIn","tweenBreath","tweenShake","isRepeat","tweenRet","isAndroid","sys","platform","Platform","ANDROID","isDesktopBrowser","DESKTOP_BROWSER","isIos","IOS","isWechatGame","WECHAT_GAME","addKeyDownListener","sender","input","Input","KEY_DOWN","designSize","frameSize","getFrameSize","safeAreaRect","getSafeAreaRect","safeAreaMarginTop","intiScreenAdapterWidthScale","initScreenBgAdapterWidthScale","fh","fw","adapterWidth","retScale","screenAdapterScale","screenBgAdapterScale","isCenter","transform","isRecursion","renderable","UIRenderer","temp","getRenderableColor","getColorByHEX","hex","setButtonEnabled","toFixed","setNodePositionX","drawCurvePath","end","curveness","cp","tweenArr","curx","cury","t","quadraticBezier","sequence","p0","p1","k","monsterId","monsterSystem","createMonster","GLoginState","mrtgd_WsUrl","mrtgd_HttpUrl","mrtgd_jjws_WsUrl","mrtgd_jjws_HttpUrl","StickPack","Heartbeat","UserLogin","UserRegister","AntiAddiction","SensitiveWordsCheck","SaveUserRecord","GetRegionData","GetRegionList","SaveUserRecordAll","UploadAvatar","GetUserDataByKey","ReqWxSession","ReqSendAuthCode","ReqPhoneLogin","SetFriendCode","GetFriendVal","GetRankInfo","GetInviteCode","GetInviteCodeReward","GetInviteLevelReward","PushInviteProcess","IsRankOpen","GetSomeonePlayerInfo","GetMidAutumnRank","SetMidAutumnRank","GetWorldBossRank","SetWorldBossRank","PushWorldBossSettle","SetWorldBossPlayerStatus","GetWorldBossPlayerStatus","GetEmpireSpotData","ActionEmpireSpot","SaveHead","ServerIsNew","ServerIsOld","ResSuccess","ResFail","DataTypeInt","DataTypeString","DataTypeBoolean","DataTypeObject","ServerEventHead","Http_isAlive","gameName","animations","standBy","attack","hit","die","appear","walk","audioNames","home","win","dayAct","energy","exp","magnet","bomb","box1","box2","boxMonsterCoin","equip","propTypes","mapTypes","main","tower","materials","shineColorSpine","monsterTypes","elite","boss","monsterIds","boxMonster","skillTypes","hammer","disk","times","minute","houre","day","lang","skill2System","expLv","expType","heroLevel","suit","draw","weaponOpt","towerFloor","dayTask","daySign","energyAward","CNTM","vip","share","monsterTimeAdd","localization","font","ui","loading","LoadingLayer","NoticeLayer","MainLayer","MapLayer","MapFightLayer","SkillSelectLayer","PauseLayer","LuckyDrawLayer","LevelLayer","SettlementLayer","HandLayer","TransLayer","BoxMonsterLayer","TowerLayer","TowerFloorLayer","TowerRoleLayer","DayTaskLayer","EnergyLayer","DaySignLayer","LetterLayer","SkinChangeLayer","VipLayer","ShareLayer","BuyLifeLayer","PropInfoLayer","MoreGameLayer","HeroLayer","ShopLayer","SettingLayer","PatrolLayer","PatrolFastLayer","GuessGameLayer","GuessResultLayer","PyramidDrawLayer","RewardSkinLayer","RewardRedBoxLayer","saveTimeGap","purple","weaponNum","skill1Num","skill2Num","skillNum","backLifeMax","towerBeginId","chapterBoxNum","_time","_callFun","getTimeStr","setTime","callFun","updateTime","msgArr","msgArrIdx","isPutEnable","testTimeDelta","CronCtr","director","GNetCmd","toString","onHeartbeat","respSaveUserRecord","reqHeartBeat","startHeartbeat","WmSocket","Http","httpPost","getUrl","httpUrl","GNetConst","res","TimeCtr","GetInstance","UpdateServerTime","serverTime","connect","ServerCtr","loginState","loginFail","status","loginWithAccount","noYet","ReInit","UpdateServerTimeByHeartbeat","lastHeartbeatTime","ServerTime","isConnected","emit","wxLoginBegin","heartbeatCheck","error","cheatLevel","hasOwnProperty","sendMultiMsg","token","jsonData","saveDataToCloud","Date","getTime","dataVersion","uploadAllRecord","JSON","stringify","warn","awardDay","titleImg","titleLabel","hasLabel","noLabel","fastSginLabel","getAwardLabel","tipLabel","itemLayer2","OPPO_MINI_GAME","daySignObj","notBox","startTime","patchNode","hasGet","awardDayArr","refreshFinalAwardLayer","refreshBoxLayer","lockNode","finalAward","signWithDay","double","addPropArrByDesign","onClickBtnGetAward","onClickBtnPatch","targetDay","onClickBtnBox","onClickExtraAward","addPropByDesign","daySignFinalAward","flagArr","taskListNode","closeBtnText","hintNode","titleNode","overDay","refreshTopLayer","tb","task","sortArr","task1","task2","row1","row2","info1","getTaskInfoById","info2","v1","needNum","v2","getAward","refreshTaskItem","actNum","shineNode","openNode","flag","getAwardFlag","dayTaskObj","awardFlagArr","awardItem","propNum","btnGet","btnGo","doneNode","taskDoge","$freeDraw","overDayRet","onClickBoxItem","addPropNum","onClickBtnGo","taskGo","jumpLayer","onClickAwardItem","logLabel","logMessages","originalLog","d","params","join","updateLogDisplay","toLocaleTimeString","DesignManager","tb2Arr","tb2Obj","tbType2Arr","loadAllDesignTable","JsonAsset","tbName","json","tbData","initTable","releaseAsset","val2","getAllTables","getRowsByType","getLastRow","window","barNode","contentNode","handNode","rowArr","energyItem","energyObjRefresh","refreshShowList","listNode","targetItemUI","getEnergyAwardInfoById","award1","my","scrollToOffset","energyObjRefreshRet","stopAutoScroll","scrollToTop","refreshTimeNode","refreshItemUIArr","refrshProgress","energyObj","endTime","hour","lastRow","lastNum","shineNode1","lockNode1","hasGetNode1","shineNode2","lockNode2","hasGetNode2","award2","onClickAwardItem1","onClickAwardItem2","onClickBar","EventManager","acList","tmpArr","offWithSender","isLog","notMyLog","joystick","READ_FILE_TYPE","FileUtils","openLocalFile","accept","callback","inputEl","document","getElementById","createElement","setAttribute","style","body","appendChild","onchange","files","file","click","readLocalFile","readType","reader","FileReader","onload","readyState","DONE","DATA_URL","readAsDataURL","TEXT","readAsText","BINARY","readAsBinaryString","ARRAYBUFFER","readAsArrayBuffer","saveForBrowser","textToWrite","fileNameToSaveAs","cc","isBrowser","textFileAsBlob","Blob","downloadLink","download","innerHTML","webkitURL","href","createObjectURL","URL","display","saveDataForNative","fullPath","model","isNative","myjsb","MyFileUtils","writeDataToFile","joystickNode","blockNode","orignPosition","touchStart","touchMove","touchEnd","touchCancel","location","getUILocation","sendTouchEvent","debugCount","debugTimer","isCounting","isInDevelopmentEnvironment","getCurGameVersion","then","version","ver","layer1","layerHint","layerDebugLog","AudioSource","loadingName","noticeName","getEnterUrlQuery","onMessageEvent","showNotice","globalTouchStart","value","isLogin","ctr","cmd","shareObj","friendNum","friendCnt","friendData","parse","friendAdNum","videoCalCnt","friendPassNum","friendPassCnt","regionDataList","nickName","reqRegionData","wxRes","openid","localStorageManager","openId","uid","serverDataVersion","dataVersionFlag","serverData","regionId","openLayerRet","showNoticeRet","isOpenDev","onClickBtnTest","assets","resetCounter","checkCount","onClickBtnHintClose","getItem","localStorage","setItem","encrypt","removeItem","keys","memory","decrypt","publicKey","isEncrypt","GameStorage","Key","GameKey","GetRawKey","replace","getStorage","GameMemoryStorage","getInt","def","n","Number","setInt","setIntMemory","getBoolean","setBoolean","is","setBooleanMemory","getString","getStringDisk","getIntDisk","setStringDisk","setStringMemory","getObject","setObject","sendObject","setObjectMemory","clear","list","clearByKey","gameKey","getStringArrayByKey","list2","values","getObjectArrayByKey","getAll","isFirst","oldKey","spliceDatas","datas","xtbl","star","debris","partner","score","skill_skr","skill_skr_attr","skill_star","skill_star_attr","setAll","arguments","MapWrap","_onlyArgument","toList","_curSelectGuess","_curSelectBet","_index","_dtTime","_isStartRun","initGuess","stone1","items","selectBetNode","armNodeGuess","selectGuess","selectGuessNode","removeFromParent","guessLayer","onSelectBet","selectItem","onSelectBtn","curBet","checkUseProp","openResult","guessSprite","stoneDraw","multiplier","myGuess","otherGuess","selectBet","_propItem","_RewardLayer","curGuess","guessItem1","selfNodeGuess","guessNameSprite","resultNode","rewardNode","result1","showYanhua","propdata","doubleGet","showRewardedAd","successCb","h5api","playAd","code","checkDownUrl","transformPipeline","append","done","output","url","dw","downloader","_downloaders","dbbin","register","options","includes","checkbin","H5AdSdk4399","blockId","ad","tgInit","Adsgram","description","H5AdSdkTelegram","globalTouchStartRet","_propNodeList","_isSort","cloLabel","atkIcon","hpIcon","myEquip","btnSort","btnUpgrade","propNodeLeft","propNodeRight","updateProp","updateDropData","initWearDrop","attackLabel","lifeLabel","life","checkPropCanBless","mask","RPointMask","RPM_BlessProp","subPath","sortbtn","heroSk","wearProp","Type_UnWear","getPropList","sort","a","b","equipDataA","equipDataB","Type_ToWear","checkThisPropBestToWear","RedpointPos","right","updateRedPoint","propLayer","propSort","openBless","onClickBtnSkin","targetPos3","hit1","hit3","hit4","hit5","hit6","hit7","blockArrow","comeShine","hintUtil","worldPos","recycleHintNode","nameLayerObj","namePrefabObj","hintLayer2","getHintLayerNameById","getHintLayerByName","nameLayer","Hint","toggles","togglesLock","_PageLayer","jumpLayerData","tabMainRedPointNode","tabEnergyRedPointNode","btn1Label","btn2Label","btn3Label","btn4Label","btn5Label","getSwitchValue","RPM_PropWear","channel","ChannelFlag","WECHAT_JJWS","reqGetFriendVal","urlParmas","reqSetFriendCode","homeHideMenu","mapEnter","mapHand","hasEnergyAward","enterMapWithMapId","isWin","addTowerMapFloor","floorRow","getPatrolState","hasLetterAward","hasDaySignAward","hasDayTaskAward","hasVipAward","grayscale","clickEvent","selectPage","commonResRefresh","layerNode","onClickBtnPartol","openTowerFloorLayer","onClickBtnDaySign","jumpLayerRet","TopUILayer","showRewardItem","mapEnterRet","loadMapRes","homeHideMenuRet","onClickBtnHit","ShineColor","startShine","xhr","failCb","XMLHttpRequest","onreadystatechange","respone","responseText","rsp","open","timeout","onerror","itemUIFreeArr","idItemUIObj","layerJS","isFrameLoad","hideAllItems","addRenderChildBatch","RenderChildBatch","frameAddItem","addItem","setFrameLoad","frameLoad","getItemUIById","getItemUIByIndex","forShowItemUI","loadAndRefreshItemUIByItem","refreshItemUIByItem","refreshItemUIByItemUI","refreshItemUIById","removeItemUIByIndex","tmpItemUI","removeItemUIByItemUI","removeItemUIById","refreshUI","LayerManager","openingLayerMap","openedLayerMap","layerNameIdArrMap","loadCommonLayers","prefabArr","addRef","noticeLayer","setDebugLog","txt","addLayerNameId","removeLayerNameId","openSuccessCb","idArr","layerParams","layerPath","loadAssetConfigArr","refreshPropItem","isLetterAward","iconIndex","selectBtn","getCurMap","mapName","mapInfo","chooseMap","setCurMap","percentNode","flagNode","progressLength","startGap","designResProgress","designResPercent","bundleArrProgress","bundleArrPercent","bundleLoadingTime","bundleLoadingMaxTime","layerProgress","layerPercent","spriteFrameArr","isLogined","collectAllSpriteFrame","initGame","initSDK","loginWithoutAccount","onClickLoginBtn","loadDesignRes","loadLocalizationConfig","loadBundles","logoNode","$localization","loadCommonLayerRes","releaseAllSpriteFrame","decRef","bundleArr","loadBundleArr","initLocalization","openHomeLayer","misc_cat","localizeName","localizeInfo","localizeFormat","_localizeFormat","Localization","_langIndex","_myFonts","node2ResInfo","node2FontSize","_localization","text","txtLang","loc_parse_string","startsWith","langObj","fontarr","fontpath","_loop","temLang","la","navigator","language","set_language","toggle_index","richText","editBox","getPathInHierarchy","fontSize","useSystemFont","retText","localz","misc","oriText","parsed","parsedText","strObj","strings","respath","bdname","bd","bdinfo","getAssetInfo","_uuid","lastIndexOf","bSuccess","line","parsed_line","control","_c","_c_name","_c_val","_c_gather","_s_gather","_s_ref","str_parts","str_it","char","charAt","LocalStorageManager","uidKey","openIdKey","getKey","getGameData","setGameData","clickGameStart","adAwardHint","noRewardAd","noAd","defaultError","itemGet","timeCd","cd","propGet","point","energyTimeHint","ci","daySignHasGet","daySignOutdate","daySignNoLeave","dayIndex","daySignFinalAwardHint","notHas","equipSuccess","full","wei","ge","notGet","weaponEquipAdd","coinGetHint","lackDiamond","circleNodeNum","choseNum","choseArr","starShineArr","starShineIndex","showChoseIndex","showChoseItemUI","startCircle","circleEnd","btnStart","coinLayer","coinNumNode","resultUILayer","resultBgNode","resultItemLayer","resultItemNode","resultBtnSure","pdNode","lastItemNode","initItemArr","showArr","forceChoseArr","weaponArr","copyObj","skillArr","canBreakthrough","skill2Arr","getRandomItemByArr","randomArr","getRowByItem","uiIndex","getCatNameByItem","startAnimation","waterfall","circleShineAnimation","totalShineAnimation","choseNumAnimation","startShineStarCircle","posArr","skinName","initStarShineItemUI","addNextStarShine","startShowChoseItem","showChoseResult","outItemUI","playerAddItem","getWeaponInfoByType","getSkillInfoByType","getSkill2InfoByType","itemTransform","itemHeight","refreshResultItemUI","yinNode","_loop2","opacityTime","_this8","sideNode","sideShineNode","sideOpacity","_loop3","mapLeaveRet","onClickBtnStart","emailRedPointNode","daySignRedPointNode","dayTaskRedPointNode","vipRedPointNode","duihuanBg","chapterBoxRedPointNode","btnShare","videoPlayer","shurukuang","btnRedBoxLabel","btnShareLabel","map_nameLabel","btnDaySignLabel","btnPyramidLabel","btnDayTaskLabel","btnGuessLabel","btnPortalLabel","btnSkinChangeLabel","btnSkinLabel","btnEquipComposeLabel","btnVipLabel","zjbxwzLabel","btnGo_ksyxLabel","timeLabel","roleLv","qingdianLock","taksLock","caiquanLock","onClickBtnDuihuan","onClickBtnCloseTuihuan","onClickBtnTuihuan","tishi","strArr","EditBox","curPath","VideoPlayer","remoteURL","WECHAT_MRTGD","hasChapterBoxAward","getTimeStrChinese","btnset","btnEmail","_isShowOpenLevel","initMapLevel","role","isHaveProp","btnRedBox","isaction","power","usePower","showUseAnimal","onClickBtnMap","onClickBtnChapter","chapter","onClickBtnSet","onClickBtnDayTask","onClickBtnGuess","onClickBtnPyramid","onClickOpenLayer","onClickBtnLetter","onClickBtnEquipCompose","onClickBtnSkinChange","onClickBtnVip","onClickBtnShare","fightCapNode","gameCtrl","expProgress","expLvNode","expBarColorArr","expBarColorIndex","expBarShineColor","expLvUpCount","killMonsterNumNode","bossHpLayer","bossDamProgressBar","bossHpProgress","skillBombIcon","skillBombAd","skillBombNum","skillBombCd","btnSkillHeal","skillHealIcon","skillHealAd","skillHealNum","skillHealCd","skillMagnetAd","skillMagnetNum","skillLifeAd","monsterNumNode","showNumNode","playerPosNode","expNumNode","GameCtrl","mapFightLayer","MapSystem","Player","MonsterSystem","BulletSystem","numSystem","NumSystem","SkillSystem","WeaponSystem","HintSystem","PropSystem","setCompoments","loadSaveMapData","popBuyLifeLayer","getPopBuyLifeTime","saveDataBefore","popLayer","eventLevelStart","refreshExpLayer","refreshBossHpLayer","refreshResLayer","refreshSkillLayer","mapRefreshSkillRet","hpMax","healAdCount","useSkillHeal","isBreath","bossMonster","bossSubHp","pStart","pEnd","killMonsterNum","current","expNum","check","skillAllNum","onSkillSelect","upgradeAddHpPercent","lvCount","gameFightPause","gameFightResume","timeStr","fightPause","fightResume","commonResRefreshRet","loadSaveData","weaponData","skillData","monsterData","saveDataBeforeRet","onClickBtnSkillBomb","useSkillBomb","onClickBtnSkillHeal","onClickBtnSkillMagnet","useSkillMagnet","onClickBtnSkillLife","onClickBtnPause","onClickBtnSkillSelectLayer","onClickBtnResume","onClickBtnBoss","onClickBtnLuckyDraw","onClickBtnAccountClear","clearAccountData","onClickBtnMonsterAdd","monsterAddFlag","MapModel","mapFightCamera","cameraOrthoHeight","expPool","expTypeRow","equipIdArr","mapLevelArr","mapLevelType","mapLevelArr_Backup","monsterPrefabObj","dataRadius","destroyRadius","visibleSize","screen","getResolutionPolicy","Camera","orthoHeight","curDrop","weaponId","getTowerRoleProInfo","propRow","$towerWeaponId","loadMapFightLayer","mapRow","createMapLevelArr","mapLevel","createCount","progressCb","loadMonsterAndBulletRes","onePercent","monsterPercent","bulletPercent","otherPercent","tmpFunc2","loadMonsterPrefabArr","loadBulletRes","loadOtherRes","weaponPrefabArr","wRow","bg","wall","arr2","arr3","pathArr2","pathArr3","parseDesignPropArr","reward","mapFightBgLayer","staticNode","bombAnimationCtrl","warnAnimationCtrl","skillBombAniCtrl","bossPosHintAnimationCtrl","boxHintNode","boxArrowNode","pauseVal","wallShineNode","wallTopNode","wallBottomNode","wallLeftNode","wallRightNode","wallCenterPos","stopTimeCount","expTimeCount","killMonsterCount","nineForArr","refreshCamera","createExp","addProp","initMapFightBg","initWallLayer","refreshMapBgLayer","posX","posY","centerPos","showWallLayer","bossDead","hideWallLayer","isBoss","reward4","reward5","prop1","prop2","levelData","isBest","bestTime","eventLevelEnd","showInterstitialAd","minDis","minDisNode","forVisibleMonster","distancePlayer","forVisiblePropCollider","propNode","propPos","tmpDis","startWarning","aniName","cameraMove","hitArr","waitHit","hitInfo","batchHitMonster","monsterDead","isProb","expProb","expMin","expMax","woodBoxKillNum","ret","isIt","getPropNums","skillPropAddMult","aliveMonsterNum","minNum","maxNum","propProbArr","prob","propIdArr","propNumArr","addExp","addCoin","adjustInWall","hWidth","hHeight","vWidth","vHeight","bottom","left","refreshWallSideVal","shineOpacity","camera","texture","RenderTexture","reset","targetTexture","root","frameMove","stopMove","expSpeed","updatePhysicsWorld","physicsWorld","step","updateBoxHintLayer","minProp","forAllPropById","halfWidth","halfHeight","hasFull","getRowsByWeightAndNum","lateUpdate","material","getMaterial","uvOffset","setProperty","array","_objects","js","createMap","has","toArray","isNumberKey","rets","callBack","rforEach","objects","to_zerofilled_hex","substr","fF","c","fG","fH","fI","bytes_to_int32","str_to_bytes","retval","charCodeAt","tmp","encodeURIComponent","j","databytes","constructor","Array","chars_to_bytes","org_len","tail","int64_to_bytes","h0","h1","h2","h3","_add","n1","n2","updateRun","nf","sin32","dw32","b32","places","ptr","ra","ta","int128le_to_hex","speedCutPrecent","isPauseMove","canFace","hpProgress","isSpine","touchPlayerTimeCount","targetDirection","nodeScale","hpScale","bodyNodeScale","vec3Temp","raycastDis","sideRadian","monsterUtil","tempMoveCount","hasNum","tempPos","isStop","hpProgressNode","setBodySkin","sk","removeShineColorMaterial","atkP","hpP","addRow","refreshHpLayer","monsterStr","recycleMonsterNode","contactBeginPlayer","touchPlayer","touchTime","contactEndPlayer","playerForceMove","movePos","monsterForceMove","monsterPos","speedCutDuration","resetSpeedCutPrecent","materialPath","selfDead","damColor2","damColor1","addNum","getBulletDirection","getInfoPosition","infoNode","infoPos","getDirection","dir","mp","colliderArr","PhysicsSystem2D","testPoint","move","minDisPlayer","useSkill","startSkillLogic","otherCollider1","otherCollider2","otherCollider3","resetColliders","skill1Tag","getSkill1Tag","useSkill1","useSkill2","useSkill3","bulletId2","bulletId3","getComponents","resetCollider","bulletId1","direction3","otherColliderOffset","otherColliderSize","resetOtherCollider","attackWithSkill1","attackWithSkill2","numCount","useSkill4","idMonsterLayerObj","monsterCreateArr","bossCreateInfo","monsterNum","showMonsterNum","refreshMonsterShow","createMonsterLogic","forAliveMonster","createMonsterWithInfo","destroyCount","showCount","hideCount","showNum","aliveNum","monsterNode","isData","updateMapLevel","removeIdArr","hasWarn","createNum","createTime","getMonsterLayerNameById","getMonsterLayerById","monsterLayer","getMonsterNumByType","killMonsterFunc","refreshAudioLayer","hideCustomRectCenterAd","showCustomRectCenterAd","audioIconOpen","audioIconClose","onClickBtnHome","onClickBtnAudio","QUAD_INDICES","_normal","_vec2","normal","out","MotionStreakAssemblerUtil","createData","comp","renderData","requestRenderData","dataLength","resize","tmpVec3","cur","stroke","tx","ty","difx","dify","minSeg","MotionStreakUtil","Point","setPoint","fadeTime","indexCount","vertexCount","updateRenderDataCache","cr","cg","ca","prev","setDir","findLast","next","tmpX","tmpY","u","_val","updateWorldVertexAllData","stride","floatStride","dataList","vData","chunk","vb","createQuadIndices","indexOffset","meshBuffer","Uint16Array","l","passDirty","updatePass","nodeDirty","updateNode","textureDirty","updateTexture","getRenderMaterial","hashDirty","updateHash","updateRenderData","updateColor","fillBuffers","renderer","vertexOffset","vert","bufferId","vid","ib","iData","setDirty","MotionStreakAssemblerManager","getAssembler","Assembler","_points","_proto2","_UIRenderer","_flushAssembler","assembler","_assembler","_renderData","_updateColor","_render","render","commitComp","globalTouchMove","globalTouchEnd","saveDataAfter","playerMsgStart","playerMsgEnd","mapMsgStart","mapMsgEnd","redPointEvent","MyLog","writeLog","w","apply","debug","freeNodeArr","itemNodeArr","use","recycleAllNode","forEachUseNode","contentLayer","textPool","textItem","maxContentWidth","minContentWidth","contentBGAdd","orignHeight","spaceY","fadeIn","fadeOut","speedY","speedOpacity","moveDy","fadeOutNode","NodePool","put","noticeShow","overflow","Overflow","NONE","SHRINK","moveY","backArr","lastNode","_rewardArr","getPatrolRewardByTime","towerPressTime","propIten","addPropLayer","Type_UnKnow","onGetRewardTili","quickEarn","onGetRewardVideo","initBtnPatrol","addCoinlabel","towerCoin","addExplabel","towerExp","curPatrolTimelabel","getPatrolTime","maxPatrolTimelabel","towerTop","getPatrolReward","curTime","btnPatrol","CountTimeUtil","onGetRewardNormal","getCurPatrolData","weaponItemLayer","skill1ItemLayer","skill2ItemLayer","paramsKeys","tyq_more_game_level","showDelayFullVideo","refreshWeaponLayer","refreshSkill1Layer","refreshSkill2Layer","refreshItem","icon2","PhysicsWorld","cellSize","posToColliderArr","getPosKey","forColliderRectKeyArr","rect","addIntoPosToColliderArr","collectCollider","BoxColliderUtil","doIntersection","collisionMatrix","Intersection2D","polygonPolygon","hpMaxOrign","effectAnimationCtrl","lightShine","monsterArr","wallCollider","Collider2D","roleSpeed","addHpMaxPercent","lastHpMax","nowHpMax","addHp","GREEN","getSkill2DamSubPercent","addMonster","removeMonster","WALL","touchWall","joystickRet","getSkill2PlayerSpeedAddPercent","nowPos","spd","PlayerModel","secondInterval","saveTime","skillFreeRefreshCount","vipObj","playerData","timeStrToDate","fight","openSecondInterval","onSaveData","taskObj","awardObj","setHours","setMinutes","setSeconds","setMilliseconds","adNum","dayAward","onceObj","dayNum","idAwardObj","clearGameData","sendToUINotice","addVipAdNum","startLoadProgress","aniNode","propUtil","isFollowPlayer","followSpeed","contactPlayer","notContact","autoGet","contactStart","doDisPlayerGet","getSkill2PropGetAddDis","playerGetProp","recyclePropNode","animationTrack","AnimationTrack","_propId","_propFlag","_weaponLv","weaponLv","weaponOptLvEffect","propInfoLab","Type_ShowType","btnWear","unWearProp","suitId","suit_id","suitNode","suitData","suitNameLab","suitNum","getSuitNum","getColor","color1","color2","atkStr3","effectAtk_3","effectHP_3","suitAttr3","atkStr5","effectAtk_5","effectHP_5","suitAttr5","initBtnInfo","setWearProp","onClose","fun","openInfo","numLabel","greybg","typeIcon","Type_OnlyIcon","Type_BigIcon","bgWidth","bgHeight","changeBg","resPath","Type_Bless","idPropLayerObj","idPrefabObj","getPropLayerNameById","getPropLayerById","Prop","getSkill2AddExp","addcoin","getSkill2AddCoin","getSkillCompomentByType","skillUtil","exObj","creatTower","forVisiblePropContact","forAllPropContact","parseFloat","_endIndex","_drawItemArr","_isDoubleDraw","initItems","initItemState","drawItem","$pyramidState","coinLabel","$pyramidDrawTime","itemsIndex","getDrawIndex","setPyramidState","isHero","startDraw","doubleDraw","reg","RED_POINT_NAME","INVALID_VALUE","_redPointMask","_waitSends","_waitChecks","_updateHandler","_unlockMasks","_targets","_targetWraps","_masks","updateCheck","updateVisit","checkState","initEvent","stopUpdate","test","onCMSGRPValueSetting","updateState","nodes","targetIt","cMask","maskIt","effectType","posType","loginOut","sendValueSettingMsg","forceStop","GParam","sendValuesSettingMsgs","timingCheck","_","param","rp","checkIndex","startUpdate","RPM_Client","checkBestPropToWear","mask_value","maskIter","red","uiTransform","Main","getMaskRedpointState","masks","getRedPointByLayer","needSave","layerObj","setRedPointByLayer","hasRedPointValue","isArray","addRedPointValue","removeRedPointValue","rpIndex","clearRedPointLayer","SingleInstance","path2RenderArr","rootNodeArr","pauseRender","rootPath","renderArr","_realRender","child","removeRender","updateAssembler","batch","postUpdateAssembler","_renderFlag","ResManager","lastPercent","assetPercents","loadAssetByBundleDirs","dirArr","loadDir","nameArr","assetConfigArr","isAddRef","loadedAssetArr","loadedAsset","SkeletonData","showReward","listLayer","yanhua","itemProp","proplayer","onClickVideoGet","vertical","gapX","gapY","paddingLeft","paddingRight","paddingTop","paddingBottom","contentTransform","viewNode","viewWidth","viewHeight","viewTransform","itemUITransform","itemUIWidth","itemUIHeight","startPosX","startPosY","viewNum","changeNum","maxLines","frameUpdateArr","frameTime","game","getFrameRate","itemArr","setDataFlag","startIndex","stopIndex","contentLayout","Layout","spacingX","spacingY","contentWidth","contentHeight","onScrolling","renderItemArr","hideIndex","recycleItem","needUpdate","startFrameUpdate","createNode","showTween","tn","clearAllItems","refreshItemIndex","refreshItemArr","layoutItemArr","line2","resizeContentNode","lastItem","maxOffset","getMaxScrollOffset","getScrollOffset","insertData","pIndex","isScrollEnd","scrollToBottom","scrollToRight","SdkManager","$videoCalCnt","getShareUid","query","ServerState","Normal","New","Hot","Maintain","serverId","account","password","authCode","avatar","regionList","serverList","InitServerCtr","addDataVersion","CheckIsHaveAccount","CheckHaveDataById","UpdateRegions","regions","UpdateServers","servers","GetServerData","GetStateIcon","GetLastNewServer","did","reqConnect","reqRegister","reqLogin","reqLoginByAccount","reqRegionList","ServerId","shareUserId","reqCloudSaveManual","wx","login","success","loginResult","jscode","fail","errMsg","wxLogin","getWxLoginResult","userInfo","avatarUrl","UnloadAvatarUrl","ServerMsg","textMusic","textSound","textTitle","textClose","langItem","toggleContainer","langIndex","texnode","isMusic","isEffect","musicToggle","Toggle","isChecked","effectToggle","ToggleContainer","toggleItems","onMusicCheck","onSoundCheck","onSingleToggleCheck","toggle","winAniCtrl","winMapNameNode","failAniCtrl","failMapNameNode","winTitleNode","bestTimeNode","lineNode","itemLayerBg","itemLayerNode","btnDouble","btnDoublePos","btnSure","btnSurePos","$friendPassCnt","newNode","onClickBtnDouble","tabLayer","tabArr","choseTabIndex","tabItem","refreshTabLayer","refreshListLayer","remainNum","shareDayNum","shareDayDiamond","refreshShareItem","infoLayer1","infoLayer2","infoLayer3","nowNum","normalNode","choseNode","textNode","onClickTabItem","_median","uiRenderer","orignMaterial","vColor","customMaterial","setMaterialProperty","cache","_materialCache","getMaterialInstance","uRate","passes","getHandle","setUniform","v4","uColor","setMaterialInstance","rate","Material","_mangheType","_curState","_isDrawIng","gaojiProp","mangItem","num1","extra2","$drawNormalNum","num2","extra1","$drawGradeNum","btnManghe","pageView","mangheSpine","timeScale","animalFinish","arr1","layer2","onClickChangeManghe","initVideoBtn","btnVideo","tenCard","btnSingle","onceCard","tenCard2","onceCard2","onOnceCard","showChouAnimale","cancelButtonTouch","getDrawItem","onTenCard","getReward","isEnougth","getCurrentPageIndex","updatebtnState","checkShowGaoji","drawFinish","onBtnClickSure","getDuration","getSkill2DurationAddPercent","getAtkCd","getSkill2AtkCdSubPercent","PLAYER_BULLET2","isShoting","robotBullet","forceDestroy","startShoting","towerBulletArr","isShowing","bulletArr","showDisks","hideDisks","throwFire","extrObj","initBulletScale","selectItemLayer","hasSelect","btnGetAll","textHint","allHint","showDelayInterstitialAd","refreshInfoLayer","refreshInfoNode","refreshFreeNode","refreshSkill1Item","refreshSkill2Item","refreshWeaponItem","btnDoubleSelect","selectEffect","bg2Node","starItemUI","starLv","starIcon","starIcon2","yinIcon","combLayer","breakthrough","skillId","sInfo","skillRow","onClickBtnGetAll","tempFunc","doSelectItem","goNext","isYin","isDouble","starNode2","selectEffect2","onClickSelectItem","onClickBtnDoubleSelect","hasOpenScheculeAddHp","getSkillNodeNameByType","Skill","playerHpAdd","getSkill2Val","sinfo","listResetPos","btnEquip","btnGoGet","choseId","heroSkin","refreshSkinItem","rank","getPropById","onClickSkinItem","onClickBtnGoGet","onClickBtnEquip","body2Opacity","urls","diffServerTime","isRunServerTime","loginTime","curSystemDate","InitTimeCtr","getScheduler","updateTimer","RequestTime","isOk","request","statusText","ontimeout","setRequestHeader","initLayout","updateData","clearBtn","showNode","powerLabel","energyMax","baoshiLabel","lvLabel","expBar","roleExp","getNextLevelExp","tiliLabel","getCountTime","checkPowerTime","saveData","clearData","remove","adenergy","floorLayer","getTowerMapInfo","f","maxFloor","refreshFloorItem","nowFloor","onClickBtnRole","onClickFloorItem","qianShouNode","dianJvNode","xieZiNode","nianChouNode","paoDangRenNode","btnsLayer","needHand","startQianShouUpdate","startDianJvUpdate","startXieziUpdate","startNianChouUpdate","startPaoDangRenUpdate","resume","onClickBtnTower","propItemUIArr","atkNode","hpNode","weaponList","costPropIcon","costPropNum","emptyNode","setPropItemIcon","setWeaponbLv","$towerWeaponIdArr","getWeaponLv","lvNode","onClickPropItem","onClickWeaponItem","onClickBtnOpt","towerWeaponAddLv","blackNode","processBar","process","TyqAdManager","customAdSizeObj","horizontal","grid","adShowType","bannerAdShowing","showBannerCount","shareTime","shareListenerSuccess","shareListenerFail","openID","videoCallBack","videoCallBackFail","shareopenID","_delayTime","bannerSize","getEnterOptionsSync","shareGameSync","showAppMessage","shareAppMessage","getOpenID","initAdIds","showShareMenu","withShareTicket","menus","onHide","wxOnHide","onShow","wxOnShow","bannerIds","tyq_ad_banners","_bannerAdUnitId","interstitialIds","tyq_ad_interstitial","_interstitialAdUnitId","customRectIds","tyq_ad_custom_rect","WXCustomAd","_customc_rect_adunit","customVIds","tyq_ad_custom_v","_customc_v_adunit","customHIds","tyq_ad_custom_h","_customc_h_adunit","rewardedIds","tyq_ad_rewarded","_rewardedVideoAdUnitId","preLoadBanner","createRewardedVideoAd","ANDROID_233","ANDROID_4399","rewardedVideoAdCallBack","rewardedVideoAdFailCallBack","mode","action","targetAction","pagePath","targetPagePath","adClickUpload","adShowTypes","bannerAndCustomAd","showBannerTurns","native","reflection","callStaticMethod","VIVO_MINI_GAME","isForce","isBannerAdShowing","interstitialAd","showFullRewarded","failcb","createCustomAd","EType","centerX","centerY","hideCustomAd","showCustomVerticalLeftRightAd","hideCustomVerticalLeftRightAd","showCustomHorizontalTopAd","hideCustomHorizontalTopAd","showCustomAd","adSize","adId","hideCustomAllAd","hideAllAd","operation","inviteUser","forceVideo","isCloseAd","showRewardVideoAd","rewardedAd","isSuccess","VivoManager","tyqLayerManager","paths","tyqSDKBundle","TyqMoreGameLayer","TyqLayerManager","tyqConstants","tyqResManager","priority","lastBannerShow","_TyqBaseLayer","tyq_banner_touch","TyqBaseLayer","TyqResManager","TyqSDKAppVersion","TyqSDK","switch_info","master_switch","_playTime","_gameLevel","item_openId","item_watermark","_watermark","_onlineTime","weixin_ads_data","wxGameIconData","levelCount","timeDiff","shareCallback","setLogOpen","setAppVersion","WECHAT_Box4399","GNetConf","wsUrl","appId","apiKey","server","initOpenId","current_time_stamp","getTimeStamp","jumpIconData","appid","imgUrl","Game","EVENT_HIDE","collectPlayeTime","EVENT_SHOW","urlQuery","ads_id","source_openid","pull_in_ads_id","watermark","appVersion","df","getConfigProbability","elapsed","duration_time","nonce_str","randomStr","time_stamp","app_version","NetworkMgr","xhrPost","wxIconData","wxJumpData","collectClickEventGame","weixin_ads_id","event_id","strLen","$chars","maxPos","pwd","isSecond","randOpenId","s","hexDigits","collectLevelInfo","eventType","adType","stata","play_time","game_level","isLogOpen","optionalParams","forceShow","tyq_banner_turns","tyq_custom_v_switch","tyq_custom_h_switch","gird","setCustomRectAdSize","setCustomHorizontalAdSize","setCustomVerticalAdSize","setCustomGridAdSize","eventNames","rewardedAdStart","rewardedAdSuccess","onShowLoadingLayer","enterLoadingLayer","onShowHomeLayer","enterHomeLayer","tyq_show_main_layer","addLevelCount","startLevel","tyq_reward_level","tyq_level_count","onShowSettlementLayer","showMoreGameLayer","closeCb","gameVersion","AppSecret","tyq_ad_custom_rect_switch","$localKey","$time","$roleLv","$roleExp","$power","_maxPower","_powerRevoverTime","$powerTime","$baoShi","$optStone","$dayAct","$coin","$mapHand","_attack","_life","$curMap","$openLevel","$levelData","$mapData","$propData","$wearProp","$playerData","$patrolStartTime","$patrolRewardProp","$patrolRewardPropArr","$heroSkin","$towerWeaponLvObj","$towerMapIdObj","_drawAllWeight","_drawAllSureWeight","onInit","loadServerData","setBaseConfig","afterLoadData","getLocalData","energyRecoverTime","updateRoleAtkHp","setConfig","basicGem","basicGold","havenum","nextFloor","useOptStone","useDayAct","useEnergy","useCoin","roleData","suitInfo","getSuitPercentAdd","getSuitId","atkAdd","hpAdd","suitAttr","optRow","isEnter","nextdata","mapid","setPropWearById","autoWearProp","checkWearProp","setPropById","checkChapterCanReward","isWear","Level","nextId","ld","propData1","showGetAnimal","node1","positon","resetAccount","mixin","drawType","isBichou","drawData","NaN","extra","rand","passTime","getCoin","towerItem","drawCount","skinID","resources","parseData","getRandomSign","taskArr","taskIndex","loadNextTask","valToPercent","fixNum","isM","hours","mins","seconds","isSce","isHour","keyArr","toLocaleLowerCase","compareFunc","item1","item2","isOrign","isInt","dv","date","getDate","canRepeat","totalWeight","tmpRow","isRemove","choseVip","infoLayer","nextRow","choseRow","btnGetBox1","hasGet1","btnGetBox2","hasGet2","onClickBtnGetBox1","onClickBtnGetBox2","onClickBtnLeft","onClickBtnRight","onClickBtnBox1","onClickBtnBox2","vivo","bannerAd","nativeAd","videoPosId","bannerPosId","interstitialPosId","nativePosId","setKeepScreenOn","bol","qg","keepSrceenOn","complete","authorize_code","authorize","authorize_token","getProfile","_token","exitApplication","vibrateLong","vibrateShort","systemInfo","platformVersionCode","videoAd","adObj","isInVideo","posId","onError","errCode","adshow","adLoad","createBannerAd","onSize","offLoad","offError","offClose","addestroy","offSize","createInterstitialAd","adShow","createNativeAd","resS","adList","reportAdShow","clickNativeAd","reportAdClick","desNativeAd","getSetting","cbOK","cbFail","getSystemInfoSync","lightNode","forward","outV3","parentPos","weaponUtil","isFixedPos","vipRow","atkByDart","atkTime","atkByShot","back","atkByFist","atkDis","getDisTargetNode","moveMaxFar","atkByStick","targetForceMoveBack","getCalPosition","isFixedDirection","eobj","isHitPass","atkEnd","directionArr","loadWeaponPrefab","weaponLayer","Weapon","weaponNode","global","wechat","isWxAuthorize","userInfoButton","rewardedVideoAd","RiconAD","LiconAD","gridAd","gridAdCunt","GameRecorder","startListener","resumeListener","pauseListener","stopListener","errorListener","abortListener","timeUpdateListener","gameClub","feedbackButton","showListener","hideListener","_bannerAdObjList","_bannerShowIndex","_bannerTimer","_bannerAdRefreshTimeOutId","_curRewardVideoAdUnitId","_shareValue","_rewardValue","_latticeAdUnitId","_RIconAdunit","_LIconAdunit","mainBannerAD","_userInfoButtonData","_feedbackButtonData","_bannerSize","_gameClubSize","_closeRewardVideoListener","preLoadAd","createBanner","bannerObj","adUnitId","adIntervals","windowWidth","windowHeight","onResize","wetchatLogin","wccode","wcencrypted","wciv","encryptedData","iv","cbDone","isSupportedAPI","authSetting","createUserInfoButton","destroyAuthorizeBtn","onTapUserInfoButton","onTap","cbOk","getUserInfo","withCredentials","userResult","Error","wxGetSetting","sysInfo","screenWidth","screenHeight","button","lineHeight","backgroundColor","textAlign","borderRadius","_title","_imageUrl","_query","imageUrl","refreshTime","showBannerNext","clearTimeout","destroyBannerAd","successShowCb","closeListener","isEnded","closeRewardVideo","rewardedVideoAdOnLoadListener","rewardedVideoAdOnErrorListener","shareValue","rewardValue","isRewardBehavior","adunit","sceneID","onErrorListener","_this9","onCloseListener","interstitialAdOnLoadListener","createGameClubButton","pixelRatio","showGameClub","hideGameClub","postMessage","getOpenDataContext","createFeedbackButton","image","onTapFeedbackButton","showFeedbackButton","hideFeedbackButton","getGameRecorder","registerRecordScreenEvent","_this10","currentTime","startRecordScreen","pauseRecordScreen","resumeRecordScreen","stopRecordScreen","abortRecordScreen","abort","createGameRecorderShareButton","callbak","onShowListener","offShow","onHideListener","offHide","navigateToMiniProgram","_appId","_path","envVersion","api","showModal","exitMiniProgram","showToast","getSystemInfo","aldSendEvent","objOrStr","createIconAd","styleItemArray","appNameHidden","borderWidth","borderColor","createGameIcon","starTop","_this11","showIconAd","_this12","createGridAd","adTheme","gridCount","_this13","showGridAd","hideGridAd","bool","http","_timeOut","_httpUrl","_apiKey","post","route","mid","dataStr","createSign","onHttpError","checkRespone","post2","MsgToString","strToDES3","signstr","MD5","decodeURIComponent","md5encode","core_md5","olda","oldb","oldc","oldd","md5_ff","md5_gg","md5_hh","md5_ii","safe_add","md5_cmn","q","bit_rol","lsw","cnt","binarray","hex_tab","binl2hex","bin","str2binl","instring","hexcase","rstr2hex","fromCharCode","binl2rstr","binl_md5","rstr2binl","rstr_md5","str2rstr_utf8","extraUrl","GHttpClient","requestURL","networkMgr","messageList","limitMessageNum","timer","isLock","_dealHeadListener","_encryptRule","_encryptCode","_intervalTime","_errorServerCode","_successCode","_errorRestartGameCode","_errorNetCode","_overTime","_uid","lastMessage","_route","head","netPackage","NetworkPackage","failCallBack","startTimer","sendMessage","_respone","jsdecrypt","succeedResponeBody","succeedResponeHead","clearTimer","deleteMessageListItem","checkNextMessage","checkErrorCode","restartGame","resultStr","getErrorCodeMeaning","sendNum","_data","isCheck","errorNum","errStr","checkPackage","tip","pack","codes","lock","eventHandlers","isWsConnect","ws","wxws","msgBuff","addListener","onReconnect","respStickPack","sendStickPack","getGuid","getTotalLen","sendSP","close","ws_connect","NATIVE","WebSocket","onopen","onmessage","onMessage","onclose","resp","respJson","netdata","ontTimeLimit","slice","setadunit","rectid","hid","oneid","_customc_one_adunit","extraId","SDKVersion","_ads","_waits","compareVersion","getPos","fixed","filter","destroyCustomAd","h","sc_w","winSize","sc_h"],"mappings":"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","file":"all.js","sourcesContent":["import { _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ModelLayer')\r\nexport class ModelLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, AnimationState, Component, Node, sp, _decorator } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AnimationCtrl')\r\nexport class AnimationCtrl extends Component {\r\n\r\n    spineSkeleton: sp.Skeleton;\r\n    animationComponent: Animation;\r\n\r\n    lastAni: string;\r\n    lastLoop: boolean;\r\n\r\n    animationEndCallback: Function;\r\n\r\n    onLoad() {\r\n        if (!this.spineSkeleton) {\r\n            this.spineSkeleton = this.getComponent(sp.Skeleton);\r\n        }\r\n        if (!this.spineSkeleton) {\r\n            this.spineSkeleton = this.getComponentInChildren(sp.Skeleton);\r\n        }\r\n\r\n        if (!this.spineSkeleton) {\r\n            this.animationComponent = this.getComponent(Animation);\r\n        }\r\n        if (!this.animationComponent) {\r\n            this.animationComponent = this.getComponentInChildren(Animation);\r\n        }\r\n        if (this.animationComponent) {\r\n            this.animationComponent.on(Animation.EventType.FINISHED, this.animationFinished, this);\r\n        }\r\n    }\r\n\r\n    setSpineSkeletonNode(node: Node) {\r\n        this.spineSkeleton = node.getComponent(sp.Skeleton);\r\n    }\r\n    setAnimationNode(node: Node) {\r\n        this.animationComponent = node.getComponent(Animation);\r\n    }\r\n\r\n    pauseAnimation() {\r\n        if (!this.spineSkeleton) {\r\n            return;\r\n        }\r\n        this.spineSkeleton.paused = true;\r\n    }\r\n    resumeAnimation() {\r\n        if (!this.spineSkeleton) {\r\n            return;\r\n        }\r\n        this.spineSkeleton.paused = false;\r\n    }\r\n\r\n    animationFinished(eventName: string, animationState: AnimationState) {\r\n        if (eventName == Animation.EventType.FINISHED) {\r\n            if (this.animationEndCallback) {\r\n                this.animationEndCallback(animationState.name);\r\n            }\r\n        }\r\n    }\r\n\r\n    playAnimation(name: string, isLoop: boolean = true, completeCb?: Function) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n\r\n        if (this.spineSkeleton) {\r\n            this.spineSkeleton.loop = isLoop;\r\n            this.spineSkeleton.setAnimation(0, name, isLoop);\r\n            if (completeCb) {\r\n                this.spineSkeleton.setCompleteListener(() => {\r\n                    // 每次循环结束都会回调\r\n                    completeCb(name);\r\n                });\r\n            } else {\r\n                // 置空回调\r\n                this.spineSkeleton.setCompleteListener(null);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.animationComponent) {\r\n            this.animationEndCallback = completeCb;\r\n            this.animationComponent.play(name);\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    async playAnimationOnce(name: string, endCb?: Function) {\r\n        return new Promise((resolve, reject) => {\r\n            if (!name) {\r\n                resolve();\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n                return;\r\n            }\r\n            if (this.spineSkeleton) {\r\n                if (this.lastAni == undefined) {\r\n                    this.lastAni = this.spineSkeleton.animation;\r\n                }\r\n                if (this.lastLoop == undefined) {\r\n                    this.lastLoop = this.spineSkeleton.loop;\r\n                }\r\n            }\r\n\r\n            this.playAnimation(name, false, () => {\r\n                if (this.spineSkeleton) {\r\n                    this.playAnimation(this.lastAni, this.lastLoop);\r\n                    this.lastAni = undefined;\r\n                    this.lastLoop = undefined;\r\n                }\r\n                resolve();\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, v3, Vec2, Vec3, _decorator, Tween } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { mapModel } from '../../model/mapModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AnimationTrack')\r\nexport class AnimationTrack extends Component {\r\n\r\n    duration: number = 0.6;\r\n    time: number = 0;\r\n\r\n    // 重力加速度\r\n    g: number = -2000;\r\n    // 初速度\r\n    v: number = 800;\r\n    vx: number = 0;\r\n    vy: number = 0;\r\n    endY: number = 0;\r\n\r\n    aniFlag: number = 0;\r\n\r\n    targetPos: Vec3;\r\n\r\n    endCallback: Function;\r\n\r\n    startShowThrow(cb?: Function) {\r\n        this.endCallback = cb;\r\n        this.aniFlag = 1;\r\n        Tween.stopAllByTarget(this.node);\r\n\r\n        // 抛出角度\r\n        let radian = utilTools.getFloatValue(utilTools.angleToRadian(75), utilTools.angleToRadian(85));\r\n        if (Math.random() > 0.5) {\r\n            radian = Math.PI - radian;\r\n        }\r\n\r\n        this.v = 800 + 200 * Math.random();\r\n        this.vx = this.v * Math.cos(radian);\r\n        this.vy = this.v * Math.sin(radian);\r\n\r\n        this.endY = this.node.position.y - 20 - 50 * Math.random();\r\n    }\r\n\r\n    startBeiSaiEr() {\r\n        this.aniFlag = 2;\r\n\r\n        this.targetPos = cocosUtil.convertToWorldSpace(mapModel.mapLayer.coinIconNode);\r\n    }\r\n\r\n    moveTargetUpdate(dt: number) {\r\n        let targetPos = cocosUtil.convertToNodeSpace(this.node, this.targetPos);\r\n        let playerPos = mapModel.player.node.position;\r\n        targetPos.x += playerPos.x;\r\n        targetPos.y += playerPos.y;\r\n        let nodePos = this.node.getPosition();\r\n        if (Vec2.distance(nodePos, targetPos) <= 20) {\r\n            if (this.endCallback) {\r\n                this.endCallback();\r\n            }\r\n            return;\r\n        }\r\n        let direction = targetPos.subtract(nodePos).normalize();\r\n        let dis = dt * 1500;\r\n        direction.multiplyScalar(dis);\r\n        nodePos.add(direction);\r\n        this.node.position = nodePos;\r\n    }\r\n\r\n    showThrowUpdate(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        pos.x += this.vx * dt;\r\n        pos.y += this.vy * dt;\r\n        this.vy += this.g * dt;\r\n        this.node.setPosition(pos);\r\n        if (pos.y <= this.endY) {\r\n            this.aniFlag = 0;\r\n            let time = 0.1;\r\n            let dy = 40;\r\n            let dx = 15;\r\n            if (this.vx < 0) {\r\n                dx = -dx;\r\n            }\r\n            tween(this.node).by(time, { position: v3(dx, dy) }, { easing: \"quadOut\" })\r\n                .by(time, { position: v3(dx, -dy) }, { easing: \"quadIn\" })\r\n                .delay(0.5 + 0.3 * Math.random()).call(() => {\r\n                    this.startBeiSaiEr();\r\n                }).start();\r\n        }\r\n    }\r\n\r\n    update(dt: number) {\r\n        switch (this.aniFlag) {\r\n            case 1:\r\n                this.showThrowUpdate(dt);\r\n                break;\r\n            case 2:\r\n                this.moveTargetUpdate(dt);\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { AudioClip, AudioSource } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { constants } from \"../data/constants\";\r\nimport { resManager } from \"./resManager\";\r\n\r\nclass AudioManager {\r\n\r\n    private static _instance: AudioManager;\r\n    private constructor() { };\r\n    public static get instance(): AudioManager {\r\n        if (!this._instance) {\r\n            this._instance = new AudioManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    musicAudioSource: AudioSource;\r\n    effectAudioSource: AudioSource;\r\n\r\n    audioClips: any = {};\r\n\r\n    musicVolume: number = 1;\r\n    effectVolume: number = 1;\r\n    musicName: string = \"\";\r\n\r\n    setMusicAudioSource(audioSource: AudioSource) {\r\n        this.musicAudioSource = audioSource;\r\n    }\r\n\r\n    setEffectAudioSource(audioSource: AudioSource) {\r\n        this.effectAudioSource = audioSource;\r\n    }\r\n\r\n    initData(data: any) {\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n\r\n        if (data.musicVolume != undefined) {\r\n            this.musicVolume = data.musicVolume;\r\n        }\r\n\r\n        if (data.effectVolume != undefined) {\r\n            this.effectVolume = data.effectVolume;\r\n        }\r\n\r\n    }\r\n\r\n    getSaveData(now: Date) {\r\n        let data: any = {};\r\n        data.musicVolume = this.musicVolume;\r\n        data.effectVolume = this.effectVolume;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadAllAudio(onProgress?: Function, onComplete?: Function) {\r\n        resManager.loadAssetByBundleDir(constants.bundles.audio,\r\n            \"\", AudioClip, (percent: number, item: any) => {\r\n                if (percent > 0.96) {\r\n                    // 解决提前回调百分百导致的音频资源还未缓存到audioClips\r\n                    percent = 0.96;\r\n                }\r\n                if (onProgress) {\r\n                    onProgress(percent);\r\n                }\r\n            }, (assetArr: any) => {\r\n                for (let i in assetArr) {\r\n                    let asset = assetArr[i];\r\n                    let name = asset.name;\r\n                    if (!name) {\r\n                        continue;\r\n                    }\r\n                    this.audioClips[name] = asset;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete();\r\n                }\r\n            });\r\n    }\r\n\r\n    loadAudios(pathArr: any, onProgress?: Function, onComplete?: Function) {\r\n        resManager.loadAssetByPathArr(constants.bundles.audio, pathArr, AudioClip, (percent: number) => {\r\n            if (percent > 0.96) {\r\n                // 解决提前回调百分百导致的音频资源还未缓存到audioClips\r\n                percent = 0.96;\r\n            }\r\n            if (onProgress) {\r\n                onProgress(percent);\r\n            }\r\n        }, (assetArr: any) => {\r\n            for (let i in assetArr) {\r\n                let asset = assetArr[i];\r\n                let name = asset.name;\r\n                if (!name) {\r\n                    continue;\r\n                }\r\n                this.audioClips[name] = asset;\r\n            }\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n        });\r\n    }\r\n\r\n    loadAudio(path: string, onComplete?: Function) {\r\n        resManager.loadAsset(constants.bundles.audio, path, AudioClip, null, (err: any, asset: AudioClip) => {\r\n            if (err) {\r\n                if (onComplete) {\r\n                    onComplete();\r\n                }\r\n                return;\r\n            }\r\n            this.audioClips[asset.name] = asset;\r\n            if (onComplete) {\r\n                onComplete(asset);\r\n            }\r\n        });\r\n    }\r\n\r\n    getMusiceVolume(): number {\r\n        return this.musicVolume;\r\n    }\r\n    setMusicVolume(val: number) {\r\n        val = Math.round(val * 1000) / 1000;\r\n        this.musicVolume = val;\r\n        this.musicAudioSource.volume = val;\r\n\r\n        if (val <= 0) {\r\n            this.musicAudioSource.pause();\r\n            return;\r\n        }\r\n        this.playMusic(this.musicName);\r\n    }\r\n    async playMusic(musicName: string) {\r\n        if (!musicName) {\r\n            return;\r\n        }\r\n        this.musicName = musicName;\r\n        if (this.musicVolume <= 0) {\r\n            return;\r\n        }\r\n        let clip: any = await this.getAudioClip(musicName);\r\n        if (!clip) {\r\n            return;\r\n        }\r\n        if (this.musicAudioSource.playing) {\r\n            if (this.musicAudioSource.clip == clip) {\r\n                return;\r\n            }\r\n            this.musicAudioSource.stop();\r\n        }\r\n        this.musicAudioSource.clip = clip;\r\n        this.musicAudioSource.loop = true;\r\n        this.musicAudioSource.play();\r\n    }\r\n\r\n    gameOnShow(force: boolean = false) {\r\n        if (!this.musicAudioSource || this.musicVolume <= 0) {\r\n            return;\r\n        }\r\n        myLog.i(\"===========gameOnShow:\", this.musicAudioSource.playing, this.musicAudioSource.state);\r\n        if (!this.musicAudioSource.playing || force) {\r\n            myLog.i(\"=======call playing\");\r\n            this.musicAudioSource.play();\r\n        }\r\n    }\r\n\r\n    getEffectVolume(): number {\r\n        return this.effectVolume;\r\n    }\r\n    setEffectVolume(val: number) {\r\n        val = Math.round(val * 1000) / 1000;\r\n        this.effectVolume = val;\r\n        this.effectAudioSource.volume = val;\r\n    }\r\n    async playEffect(effectName: string) {\r\n        if (!effectName || this.effectVolume <= 0) {\r\n            return;\r\n        }\r\n        let clip: any = await this.getAudioClip(effectName);\r\n        if (!clip) {\r\n            return;\r\n        }\r\n        this.effectAudioSource.playOneShot(clip);\r\n    }\r\n\r\n    getAudioClip(name: string) {\r\n        return new Promise((resolve) => {\r\n            let clip = this.audioClips[name];\r\n            if (clip) {\r\n                resolve(clip);\r\n                return;\r\n            }\r\n            this.loadAudio(name, (clip: AudioClip) => {\r\n                resolve(clip);\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport const audioManager = AudioManager.instance;\r\n","import { find, _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport {constants} from \"db://assets/scripts/game/data/constants\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AwardInfoLayer')\r\nexport class AwardInfoLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setItemLayer(this.getNodeByPath(\"ui/itemLayer\"), this.layerData.awardArr, this.refreshAwardItem.bind(this));\r\n        this.getNodeByPath(\"ui/titleLabel\").localize(\"text\",constants.layers.AwardInfoLayer);\r\n        this.getNodeByPath(\"ui/btnSure/text\").localize(\"btnSure\", constants.catName.common);\r\n    }\r\n\r\n    refreshAwardItem(itemUI: any, award: any) {\r\n        this.setPropItem(award[0], find(\"icon\", itemUI), award[1], find(\"bg\", itemUI), find(\"num\", itemUI));\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnSure() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBg() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { msgac } from '../../data/msgac';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport {constants} from \"db://assets/scripts/game/data/constants\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BackHomeLayer')\r\nexport class BackHomeLayer extends BaseLayer {\r\n\r\n    uiNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.uiNode = this.getNodeByPath(\"ui\");\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        cocosUtil.tweenScaleIn2(this.uiNode);\r\n        this.getNodeByPath(\"ui/info\").localize(\"info\",constants.layers.BackHomeLayer);\r\n        this.getNodeByPath(\"ui/titleLabel\").localize(\"title\",constants.layers.BackHomeLayer);\r\n        this.getNodeByPath(\"ui/btns/btnExit/exitLabel\").localize(\"exit\",constants.layers.BackHomeLayer);\r\n        this.getNodeByPath(\"ui/btns/btnGoOn/goOnLabel\").localize(\"goOn\",constants.layers.BackHomeLayer);\r\n\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGoOn() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnExit() {\r\n        this.closeLayer();\r\n        serverMsg.send(msgac.mapLeave);\r\n    }\r\n\r\n}\r\n\r\n","import { Color, Node, tween, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { localText } from '../../data/localText';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport {localizeManager} from \"db://assets/scripts/localization\";\r\nimport {constants} from \"db://assets/scripts/game/data/constants\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BackLifeLayer')\r\nexport class BackLifeLayer extends BaseLayer {\r\n\r\n    timeNode: Node;\r\n    time: number = 9;\r\n\r\n    diamondNumNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.timeNode = this.getNodeByPath(\"ui/time/time\");\r\n        this.diamondNumNode = this.getNodeByPath(\"ui/btns/btnDiamond/info/num\");\r\n        this.isShowBannerAd = true;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        UserData.getInstance().mapData = null;\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        if (designManager.config.backLifeCount > 0 && mapModel.mapSystem.backlifeCount >= designManager.config.backLifeCount) {\r\n            // 复活次数已达上限\r\n            mapModel.mapSystem.doSettlement(false);\r\n            this.closeLayer();\r\n            return;\r\n        }\r\n        tween(this.timeNode).delay(0.2).to(0.6, { scale: v3(1.3, 1.3, 1) }).call(() => {\r\n            this.time--;\r\n            if (this.time < 0) {\r\n                this.time = 0;\r\n                if (tyqAdManager.getChannel() == Channel.H5_4399) {\r\n                    this.onClickBtnClose()\r\n                }\r\n            }\r\n            this.setString(this.timeNode, this.time);\r\n        }).to(0.6, { scale: v3(1, 1, 1) }).union().repeat(10).start();\r\n\r\n        this.setString(this.diamondNumNode, \"x\" + designManager.config.backLifeDiamond);\r\n        if (UserData.getInstance().baoshi < designManager.config.backLifeDiamond) {\r\n            cocosUtil.setRenderableColor(this.diamondNumNode, Color.RED);\r\n        } else {\r\n            cocosUtil.setRenderableColor(this.diamondNumNode, Color.WHITE);\r\n        }\r\n\r\n        this.getNodeByPath(\"ui/btns/btnAd/freeReviveLabel\").localize(\"btnFreeRevive\",constants.layers.BackLifeLayer);\r\n        this.getNodeByPath(\"ui/info\").localize(\"info\",constants.layers.BackLifeLayer);\r\n        this.getNodeByPath(\"ui/title\").localizeAnim();\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    roleBackLife() {\r\n        mapModel.mapSystem.backlifeCount++;\r\n        mapModel.player.backLife();\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnClose() {\r\n        mapModel.mapSystem.doSettlement(false);\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnAd() {\r\n        sdkManager.openAd(\"复活\", (st: number) => {\r\n            if (st == 1) {\r\n                this.roleBackLife();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnDiamond() {\r\n        if (UserData.getInstance().baoshi < designManager.config.backLifeDiamond) {\r\n            this.createNotice(localizeManager._localize(null,\"lackDiamond\",constants.layers.BackLifeLayer));\r\n            return;\r\n        }\r\n        UserData.getInstance().useBaoShi(-designManager.config.backLifeDiamond, true);\r\n        this.roleBackLife();\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator } from 'cc';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport {constants} from \"db://assets/scripts/game/data/constants\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BackMapLayer')\r\nexport class BackMapLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.getNodeByPath(\"ui/titleLabel\").localize(\"title\",constants.layers.BackMapLayer);\r\n        this.getNodeByPath(\"ui/info\").localize(\"info\",constants.layers.BackMapLayer);\r\n        this.getNodeByPath(\"ui/btns/btnClose/closeLabel\").localize(\"btnCancel\",constants.layers.BackMapLayer);\r\n        this.getNodeByPath(\"ui/btns/btnSure/sureLabel\").localize(\"btnSure\",constants.layers.BackMapLayer);\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnClose() {\r\n        UserData.getInstance().mapData = null;\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnSure() {\r\n        let mapId = UserData.getInstance().mapData.mapModel.mapId;\r\n        this.layerCb(mapId);\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","\r\nimport { Button, Component, EventTouch, find, Label, Node, Prefab, ProgressBar, ResolutionPolicy, RichText, ScrollView, sp, Sprite, SpriteFrame, v3, view, Widget } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { layerManager } from '../../manager/layerManager';\r\nimport { AssetConfig, ResLoader, resManager } from '../../manager/resManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { ItemLayer } from './ItemLayer';\r\nimport { ScrollViewUtil } from './ScrollViewUtil';\r\n\r\nexport class BaseLayer extends Component {\r\n\r\n    public layerName: string = \"DefaultLayer\";\r\n\r\n    // 展示界面携带的数据和回调\r\n    public layerData: any = {};\r\n    public layerCb: Function = null;\r\n    public layerId: number = -1;\r\n\r\n    // {路径:节点对象}\r\n    public pathNodeObj: Map<string, Node> = new Map();\r\n\r\n    // 资源管理类\r\n    private resLoader: ResLoader = new ResLoader();\r\n    // 是否开启内存管理\r\n    public autoReleaseAsset: boolean = false;\r\n\r\n    // 特定预加载的资源\r\n    public preLoadAssetConfigArr: AssetConfig[];\r\n\r\n    // 监听事件\r\n    private eventArr: any;\r\n\r\n    // 控制是否打开秒级的update\r\n    public openUpdateSecond: boolean = false;\r\n    private updateSecondInterval: any;\r\n\r\n    // 按钮是否响应点击\r\n    public openAllBtnInteractive: boolean = true;\r\n\r\n    // 按钮长按功能开关\r\n    public openBtnLongPress: boolean = false;\r\n    // 多长时间后开始触发\r\n    private btnLongTrigTime: number = 0.5;\r\n    private btnLognTrigTimeCount: number = 0;\r\n    // 触发次数统计\r\n    private btnLongTrigCount: number = 0;\r\n    // 长按按钮节点对象\r\n    private btnLongNode: Node = null;\r\n\r\n    // 控制是否显示banner广告\r\n    isShowBannerAd: boolean = false;\r\n\r\n    onLoad() {\r\n        // // 背景适配\r\n        // let bgNode = find(\"bg\", this.node);\r\n        // this.screenAdapterBG(bgNode);\r\n        // let bgNode2 = find(\"bg2\", this.node);\r\n        // this.screenAdapterBG(bgNode2);\r\n\r\n        // // ui适配\r\n        // let uiNode = find(\"ui\", this.node);\r\n        // this.screenAdapterUI(uiNode);\r\n        // let uiNode2 = find(\"ui2\", this.node);\r\n        // this.screenAdapterUI(uiNode2);\r\n\r\n        this.addPathNode(this.node, \"\");\r\n\r\n        // this.DesignResolutionHeight()\r\n    }\r\n\r\n    DesignResolutionHeight() {\r\n        view.setDesignResolutionSize(720, 1660, ResolutionPolicy.FIXED_HEIGHT)\r\n        myLog.i(\"-----ResolutionPolicy.FIXED_HEIGHT\")\r\n    }\r\n\r\n    chooseDesignResolution() {\r\n        //    let resolute = view.getDesignResolutionSize()\r\n        let screen1 = view.getVisibleSize()\r\n        if (screen1.width / screen1.height > 720 / 1280) {\r\n            view.setDesignResolutionSize(720, 1280, ResolutionPolicy.FIXED_HEIGHT)\r\n            myLog.i(\"choose  ResolutionPolicy.FIXED_HEIGHT\")\r\n        } else {\r\n            myLog.i(\"choose  ResolutionPolicy.FIXED_WIDTH\")\r\n            view.setDesignResolutionSize(720, 1280, ResolutionPolicy.FIXED_WIDTH)\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        this.addButtonListener(this.node);\r\n        this.initUI();\r\n        this.refreshRedPoint();\r\n\r\n        if (this.openUpdateSecond) {\r\n            if (this.updateSecondInterval) {\r\n                clearInterval(this.updateSecondInterval);\r\n            }\r\n            this.updateSecondInterval = setInterval(() => {\r\n                this.updateSecond();\r\n            }, 1000);\r\n            this.updateSecond();\r\n        }\r\n\r\n        if (this.isShowBannerAd && !playerModel.isRecordAd) {\r\n            tyqSDK.showBannerAd()\r\n        }\r\n\r\n        eventManager.on(msgac.refreshRedPoint, this.refreshRedPoint, this);\r\n        eventManager.on(msgac.refreshLocalization, this.refreshLocalization, this);\r\n        eventManager.on(msgac.refreshDebugPannel, this.refreshDebugPannel, this);\r\n\r\n        // 战斗画布勾选Align Canvas With Screen后，需要注册刷新相机位置事件\r\n        eventManager.on(msgac.refreshMapFightWindow, this.refreshMapFightWindow, this);\r\n\r\n        eventManager.send(msgac.refreshLocalization)\r\n    }\r\n\r\n\r\n\r\n    updateSecond() {\r\n\r\n    }\r\n\r\n    refreshRedPoint() {\r\n\r\n    }\r\n\r\n    refreshLocalization(){\r\n\r\n    }\r\n\r\n    refreshDebugPannel(){\r\n\r\n    }\r\n\r\n    refreshMapFightWindow() {\r\n        \r\n    }\r\n\r\n    initUI() {\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        this.removeEventArr(this.eventArr);\r\n\r\n        eventManager.off(msgac.refreshRedPoint, this.refreshRedPoint, this);\r\n        eventManager.off(msgac.refreshLocalization,this.refreshLocalization,this)\r\n\r\n        if (this.updateSecondInterval) {\r\n            clearInterval(this.updateSecondInterval);\r\n            this.updateSecondInterval = undefined;\r\n        }\r\n        if (this.isShowBannerAd) {\r\n            tyqSDK.hideBannerAd()\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n        switch (this.layerName) {\r\n            case constants.layers.HomeLayer:\r\n                // 这些UI不释放资源\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n        if (this.autoReleaseAsset) {\r\n            this.resLoader.releaseAllAsset();\r\n        }\r\n    }\r\n\r\n    addPathNode(node: Node, path: string) {\r\n        if (node != this.node) {\r\n            this.pathNodeObj.set(path, node);\r\n        }\r\n        if (path) {\r\n            path += \"/\";\r\n        }\r\n        let chs = node.children;\r\n        for (let i = 0, len = chs.length; i < len; i++) {\r\n            let pNode = chs[i];\r\n            this.addPathNode(pNode, path + pNode.name);\r\n        }\r\n    }\r\n\r\n    getNodeByPath(path: string): Node {\r\n        let node = this.pathNodeObj.get(path);\r\n        if (node) {\r\n            return node;\r\n        }\r\n\r\n        node = find(path, this.node);\r\n        if (node) {\r\n            this.pathNodeObj.set(path, node);\r\n            return node;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 缩放背景图，达到满屏显示，背景图部分内容超出屏幕也没事\r\n     * @param node 背景图节点\r\n     */\r\n    screenAdapterBG(node: Node) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let widget = node.getComponent(Widget);\r\n        if (widget) {\r\n            widget.enabled = false;\r\n        }\r\n        let scale = cocosUtil.getScreenBgAdapterScale();\r\n        let scaleX = node.getScale().x;\r\n        let scaleY = node.getScale().y;\r\n        node.setScale(v3(scaleX * scale, scaleY * scale, 1));\r\n    }\r\n\r\n    /**\r\n     * 缩放UI，达到屏幕适配，ui上的全部内容在屏幕内显示，如果是全屏UI，ui节点如果有widget，缩放后依然有效\r\n     * @param node ui根节点\r\n     */\r\n    screenAdapterUI(node: Node) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let scale = cocosUtil.getScreenAdapterScale();\r\n        let scaleX = node.getScale().x;\r\n        let scaleY = node.getScale().y;\r\n        node.setScale(v3(scaleX * scale, scaleY * scale, 1));\r\n    }\r\n\r\n    addButtonListener(node: Node) {\r\n        if (node.getComponent(Button)) {\r\n            node.on(\"click\", this.preOnButtonClick, this);\r\n            if (this.openBtnLongPress) {\r\n                node.on(Node.EventType.TOUCH_START, this.preOnButtonTouchStart, this);\r\n                node.on(Node.EventType.TOUCH_MOVE, this.preOnButtonTouchMove, this);\r\n                node.on(Node.EventType.TOUCH_END, this.preOnButtonTouchEnd, this);\r\n                node.on(Node.EventType.TOUCH_CANCEL, this.preOnButtonTouchCancel, this);\r\n            }\r\n        }\r\n        if (node.getComponent(ScrollView)) {\r\n            let name = node.name;\r\n            if (name.indexOf(\"NoUtil\") == -1 && !node.getComponent(ScrollViewUtil)) {\r\n                node.addComponent(ScrollViewUtil);\r\n            }\r\n        }\r\n        // if (node.getComponent(Label)) {\r\n        //     let label = node.getComponent(Label);\r\n        //     label.useSystemFont = true;\r\n        // }\r\n        // if (node.getComponent(RichText)) {\r\n        //     let richText = node.getComponent(RichText);\r\n        //     richText.useSystemFont = true;\r\n        // }\r\n\r\n        let chs = node.children;\r\n        for (let i = 0, max = chs.length; i < max; i++) {\r\n            let ch = chs[i];\r\n            this.addButtonListener(ch);\r\n        }\r\n\r\n    };\r\n\r\n    preOnButtonClick(btn: any) {\r\n        if (!this.openAllBtnInteractive) {\r\n            return;\r\n        }\r\n        if (this.openBtnLongPress && this.btnLongTrigCount > 0) {\r\n            this.btnLongTrigCount = 0;\r\n            return;\r\n        }\r\n\r\n        let node = btn.node;\r\n        let name = node.name;\r\n        myLog.i(this.layerName + \" onButtonClick \" + name);\r\n\r\n        if (this[\"onButtonClick\"]) {\r\n            this[\"onButtonClick\"](node, node.name);\r\n        }\r\n\r\n        if (name.length >= 2) {\r\n            let top = name.substring(0, 1);\r\n            let remain = name.substring(1, name.length);\r\n            let key = \"onClick\" + top.toLocaleUpperCase() + remain;\r\n            if (this[key]) {\r\n                this[key](node);\r\n            }\r\n        }\r\n\r\n        if (!node.hasPlayAudio) {\r\n            // 如果还没播放按钮音效，就播放通用按钮音效\r\n        }\r\n    }\r\n\r\n    preOnButtonLongClick(btnNode: Node) {\r\n        if (!this.openAllBtnInteractive) {\r\n            return;\r\n        }\r\n\r\n        let name = btnNode.name;\r\n        myLog.i(this.layerName + \" onButtonLongClick \" + name);\r\n        if (this[\"onButtonLongClick\"]) {\r\n            return this[\"onButtonLongClick\"](btnNode, name);\r\n        }\r\n\r\n        if (name.length >= 2) {\r\n            let top = name.substring(0, 1);\r\n            let remain = name.substring(1, name.length);\r\n            let key = \"onLongClick\" + top.toLocaleUpperCase() + remain;\r\n            if (this[key]) {\r\n                return this[key](btnNode);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    preOnButtonTouchStart(event: EventTouch) {\r\n        let btnNode = event.target;\r\n        let touch = event.touch;\r\n        this.btnLongNode = btnNode;\r\n        this.btnLognTrigTimeCount = 0;\r\n        this.btnLongTrigCount = 0;\r\n    }\r\n\r\n    preOnButtonTouchMove(event: EventTouch) {\r\n\r\n    }\r\n\r\n    preOnButtonTouchEnd(event: EventTouch) {\r\n        this.btnLongNode = null;\r\n    }\r\n\r\n    preOnButtonTouchCancel(event: EventTouch) {\r\n        this.btnLongNode = null;\r\n    }\r\n\r\n    openPropInfoLayer2(id: number, num: number = undefined) {\r\n        if (num == undefined) {\r\n            num = UserData.getInstance().getPropNumById(id);\r\n        }\r\n        let obj = {\r\n            id: id,\r\n            num: num\r\n        };\r\n        this.openLayer(constants.layers.PropInfoLayer2, obj);\r\n    }\r\n\r\n    isShowingLayer(layerName: string) {\r\n        return layerManager.isShowingLayer(layerName);\r\n    }\r\n\r\n    showHintLayer(msg: string, cb?: Function) {\r\n        let hintLayer = find(\"Canvas/hintLayer\");\r\n        hintLayer.active = true;\r\n        // @ts-ignore\r\n        hintLayer.cb = cb;\r\n        this.setString(find(\"ui/hint\", hintLayer), msg);\r\n    }\r\n    hideHintLayer() {\r\n        let hintLayer = find(\"Canvas/hintLayer\");\r\n        hintLayer.active = false;\r\n        // @ts-ignore\r\n        if (hintLayer.cb) {\r\n            // @ts-ignore\r\n            hintLayer.cb();\r\n        }\r\n    }\r\n\r\n    openMsgBoxLayer(hint: string) {\r\n        let obj = {\r\n            hint: hint\r\n        };\r\n        this.openLayer(constants.layers.MsgBoxLayer, obj);\r\n    }\r\n\r\n    openAwardGetLayer(awardArr: any) {\r\n        if (!awardArr || awardArr.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        this.openLayer(constants.layers.RewardLayer, { propArr: awardArr, notMoveAni: true });\r\n    }\r\n\r\n    openAwardInfoLayer(awardArr: any) {\r\n        if (!awardArr || awardArr.length <= 0) {\r\n            return;\r\n        }\r\n        this.openLayer(constants.layers.AwardInfoLayer, { awardArr: awardArr });\r\n    }\r\n\r\n    setRoleSkin(roleNode: Node, id: number = 0) {\r\n        let skin = UserData.getInstance().getHeroSkin(id);\r\n        roleNode.getComponent(sp.Skeleton).setSkin(skin);\r\n    }\r\n\r\n    playAudioEffect(name: string, btnNode?: any, delayTime?: number) {\r\n        if (!delayTime) {\r\n            delayTime = 0;\r\n        }\r\n        if (cocosUtil.isValid(btnNode)) {\r\n            btnNode.hasPlayAudio = true;\r\n        }\r\n        this.scheduleOnce(() => {\r\n            audioManager.playEffect(name);\r\n            if (cocosUtil.isValid(btnNode)) {\r\n                btnNode.hasPlayAudio = undefined;\r\n            }\r\n        }, delayTime)\r\n    }\r\n\r\n    onClickBtnClose(node: Node) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    openLayer(layerName: string, data?: any, cb?: Function, showCb?: Function) {\r\n        // 默认每个弹窗只允许同时显示一个\r\n        if (typeof (data) == \"function\") {\r\n            cb = data;\r\n            data = null;\r\n        }\r\n\r\n        layerManager.openSingleLayer(layerName, data, cb, (baseLayer: BaseLayer, prefab: Prefab) => {\r\n            if (baseLayer.autoReleaseAsset && baseLayer.resLoader) {\r\n                baseLayer.resLoader.addAsset(prefab);\r\n                if (baseLayer.preLoadAssetConfigArr) {\r\n                    baseLayer.preLoadAssetConfigArr.forEach((assetConfig: AssetConfig) => {\r\n                        if (assetConfig.asset) {\r\n                            baseLayer.resLoader.addAsset(assetConfig.asset);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    closeLayer(layerId?: number | string) {\r\n        if (!layerId) {\r\n            layerId = this.layerId;\r\n        }\r\n        if (layerId && layerId != -1) {\r\n            layerManager.closeLayer(layerId);\r\n            eventManager.send(msgac.refreshMapFightWindow);\r\n            return;\r\n        }\r\n        this.node.destroy();\r\n        eventManager.send(msgac.refreshMapFightWindow);\r\n    }\r\n\r\n    addEventArr(arr: any) {\r\n        this.eventArr = arr;\r\n        for (let i in arr) {\r\n            let val = arr[i];\r\n            if (!val) {\r\n                continue;\r\n            }\r\n            eventManager.on(val, this.preProcessEvent, this);\r\n        }\r\n    }\r\n\r\n    removeEventArr(arr: any) {\r\n        for (let i in arr) {\r\n            let val = arr[i];\r\n            if (!val) {\r\n                continue;\r\n            }\r\n            eventManager.off(val, this.preProcessEvent, this);\r\n        }\r\n    }\r\n\r\n    preProcessEvent(event: any) {\r\n        let ac = event.ac;\r\n        let data = event.data;\r\n        let key = msgac.ac2KeyObj[ac] + \"Ret\";\r\n        if (this[key]) {\r\n            this[key].call(this, data);\r\n        }\r\n        this.processEvent(ac, data);\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n\r\n    }\r\n\r\n    showLackItem(itemId: number) {\r\n        let itemRow = designManager.getRowById(constants.tableName.prop, itemId);\r\n        if (!itemRow) {\r\n            return;\r\n        }\r\n        this.createNotice(localText.lackItemHint.format(itemRow.name));\r\n    }\r\n\r\n    showGetItem(itemId: number, num: number) {\r\n        // let itemRow = designManager.getRowById(constants.tableName.item, itemId);\r\n        // this.createNotice(localText.textObj.itemGet.format(itemRow.name, num));\r\n    }\r\n\r\n    createNotice(content) {\r\n        layerManager.createNotice(content);\r\n    }\r\n\r\n    scrollViewSetData(scrollViewNode: Node, arr: any, refreshItemFunc?: Function, resetPos: boolean = true, itemTween: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.setData(arr, (itemUI: Node, item: any, index: number) => {\r\n            if (refreshItemFunc) {\r\n                refreshItemFunc(itemUI, item, index);\r\n            }\r\n            this.addButtonListener(itemUI);\r\n        }, resetPos, itemTween);\r\n    }\r\n    scrollViewAddData(scrollViewNode: Node, arr: any, resetPos: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.pushData(arr, resetPos);\r\n    }\r\n    scrollViewRefreshList(scrollViewNode: Node) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.refreshList();\r\n    }\r\n    scrollViewRefreshItemUI(scrollViewNode: Node, itemUI: Node, item?: any) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.refreshIndex(itemUI[\"index\"], item);\r\n    }\r\n    scrollViewRefreshItemUIByIndex(scrollViewNode: Node, index: number, item?: any) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.refreshIndex(index, item);\r\n    }\r\n    scrollViewRemoveItemUI(scrollViewNode: Node, itemUI: Node, resetPos: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.removeByIndex(itemUI[\"index\"], resetPos);\r\n    }\r\n    scrollViewRemoveItemUIByIndex(scrollViewNode: Node, index: number, resetPos: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.removeByIndex(index, resetPos);\r\n    }\r\n    scrollViewScrollToEnd(scrollViewNode: Node, time?: number) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.scrollToEnd(time);\r\n    }\r\n    scrollViewScrollToItemUI(scrollViewNode: Node, itemUI: Node, time?: number) {\r\n        this.scrollViewScrollToIndex(scrollViewNode, itemUI[\"index\"], time);\r\n    }\r\n    scrollViewScrollToIndex(scrollViewNode: Node, index: number, time?: number) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil || index == undefined) {\r\n            return;\r\n        }\r\n        scrollViewUtil.scrollToIndex(index);\r\n    }\r\n\r\n    setProgressBar(progressBar: Node | ProgressBar, percent: number) {\r\n        if (progressBar instanceof Node) {\r\n            progressBar = progressBar.getComponent(ProgressBar);\r\n        }\r\n        if (progressBar) {\r\n            progressBar.progress = percent;\r\n        }\r\n    }\r\n\r\n    setNumString(node: Node, num: any) {\r\n        num = cocosUtil.formatNum(num);\r\n        this.setString(node, num);\r\n    }\r\n\r\n    setItemLayer(node: Node, arr: any, cb?: Function) {\r\n        let itemLayer = cocosUtil.addComponentOnce(node, ItemLayer);\r\n        itemLayer.initUI(this, arr, cb);\r\n    }\r\n\r\n    setNumItemLayer(node: Node, num: number, cb?: Function) {\r\n        let arr = [];\r\n        for (let i = 0; i < num; i++) {\r\n            arr.push(i + 1);\r\n        }\r\n        let itemLayer = node.getComponent(ItemLayer);\r\n        if (!itemLayer) {\r\n            itemLayer = node.addComponent(ItemLayer);\r\n        }\r\n        itemLayer.initUI(this, arr, (itemUI: Node, item: any, index: number) => {\r\n            if (cb) {\r\n                cb(itemUI, item, index);\r\n            }\r\n        });\r\n    }\r\n\r\n    setPropItem(id: number, iconNode: Node, num: number = 0, bgNode?: Node, numNode?: Node) {\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        if (!row) {\r\n            myLog.e(\"setPropItem error id:\" + id);\r\n        }\r\n        let icon = \"prop/\" + row.icon;\r\n        if (row.type == 11) {\r\n            let wRow = designManager.getRowById(constants.tableName.weapon, row.weaponid);\r\n            icon = \"weapon/\" + wRow.icon;\r\n        }\r\n        this.setSpriteFrame2(iconNode, icon);\r\n        if (bgNode) {\r\n            this.setSpriteFrame2(bgNode, \"prop/propbg\" + row.quality);\r\n        }\r\n        if (num > 0 && numNode) {\r\n            this.setString(numNode, \"x\" + num);\r\n        }\r\n    }\r\n\r\n    // 屏幕振动\r\n    shakeScreen() {\r\n        cocosUtil.tweenShakeNode(layerManager.getPopLayerParentNode());\r\n    }\r\n\r\n    removeRenderBatch(node: Node) {\r\n        let itemLayer = node.parent.getComponent(ItemLayer);\r\n        if (itemLayer && itemLayer.renderChildBatch) {\r\n            itemLayer.renderChildBatch.removeRootItemNode(node);\r\n        }\r\n    }\r\n\r\n    addRenderBatch(node: Node) {\r\n        let itemLayer = node.parent.getComponent(ItemLayer);\r\n        if (itemLayer && itemLayer.renderChildBatch) {\r\n            itemLayer.renderChildBatch.addRootItemNode(node);\r\n        }\r\n    }\r\n\r\n    setString(node: Node, info: any) {\r\n        if (!node) {\r\n            myLog.e(\"setString error:node is null\", info);\r\n            return;\r\n        }\r\n        info = info + \"\";\r\n        let label = node.getComponent(Label);\r\n        if (label) {\r\n            label.string = info;\r\n            return;\r\n        }\r\n\r\n        let rich = node.getComponent(RichText);\r\n        if (rich) {\r\n            rich.string = info;\r\n            return;\r\n        }\r\n    }\r\n\r\n    setSpriteFrame(node: Node, name: string, showCb?: Function, bundleName1 = constants.bundles.icon) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let sprite = node.getComponent(Sprite);\r\n        if (!cocosUtil.isValid(sprite)) {\r\n            return;\r\n        }\r\n        sprite.enabled = false;\r\n        node[\"loadName\"] = name;\r\n\r\n        let bundleName = bundleName1;\r\n        let d = name.split(\"_\");\r\n        let path = d[0] + \"/\" + name;\r\n        let arr = name.split(\"|\");\r\n        if (arr.length >= 2) {\r\n            bundleName = arr[0];\r\n            path = arr[1];\r\n        }\r\n\r\n        resManager.loadSpriteFrame(bundleName, path, (err, spriteFrame: SpriteFrame) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(sprite)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(spriteFrame);\r\n            }\r\n            sprite.enabled = true;\r\n            sprite.spriteFrame = spriteFrame;\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    setSpriteFrame2(node: Node, name: string, showCb?: Function, bundleName1 = constants.bundles.icon) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let sprite = node.getComponent(Sprite);\r\n        if (!cocosUtil.isValid(sprite)) {\r\n            return;\r\n        }\r\n        sprite.enabled = false;\r\n        node[\"loadName\"] = name;\r\n\r\n        let bundleName = bundleName1;\r\n        let path = name\r\n\r\n        resManager.loadSpriteFrame(bundleName, path, (err, spriteFrame: SpriteFrame) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(sprite)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(spriteFrame);\r\n            }\r\n            sprite.enabled = true;\r\n            sprite.spriteFrame = spriteFrame;\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    setSpineData(node: Node, name: string, showCb?: Function) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let skeleton = node.getComponent(sp.Skeleton);\r\n        if (!cocosUtil.isValid(skeleton)) {\r\n            return;\r\n        }\r\n        skeleton.enabled = false;\r\n        node[\"loadName\"] = name;\r\n        let bundleName = constants.bundles.spine;\r\n        let spinePath = name + \"/\" + name;\r\n\r\n        resManager.loadSpineData(bundleName, spinePath, (err, skeletonData: sp.SkeletonData) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(skeleton)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(skeletonData);\r\n            }\r\n            skeleton.enabled = true;\r\n            skeleton.skeletonData = skeletonData;\r\n            if (showCb) {\r\n                showCb(skeleton);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    setSpineData2(node: Node, bundleName, name: string, showCb?: Function) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let skeleton = node.getComponent(sp.Skeleton);\r\n        if (!cocosUtil.isValid(skeleton)) {\r\n            return;\r\n        }\r\n        skeleton.enabled = false;\r\n        node[\"loadName\"] = name;\r\n        let spinePath = name\r\n\r\n        resManager.loadSpineData(bundleName, spinePath, (err, skeletonData: sp.SkeletonData) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(skeleton)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(skeletonData);\r\n            }\r\n            skeleton.enabled = true;\r\n            skeleton.skeletonData = skeletonData;\r\n            if (showCb) {\r\n                showCb(skeleton);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    update(dt: number) {\r\n        if (this.openBtnLongPress && this.btnLongNode) {\r\n            this.btnLognTrigTimeCount += dt;\r\n            if (this.btnLognTrigTimeCount >= this.btnLongTrigTime) {\r\n                let isGoOn = this.preOnButtonLongClick(this.btnLongNode);\r\n                this.btnLongTrigCount++;\r\n                if (!isGoOn) {\r\n                    // 默认只会触发一次\r\n                    this.btnLongNode = null;\r\n                    this.btnLognTrigTimeCount = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Button, Component, Node, Prefab, Sprite, SpriteFrame, tween, UITransform, v3, view, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { layerManager } from '../../manager/layerManager';\r\nimport { ResLoader, resManager } from '../../manager/resManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { ScrollViewUtil } from '../base/ScrollViewUtil';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BaseUILayer')\r\nexport class BaseUILayer extends Component {\r\n\r\n    // 资源管理类\r\n    private resLoader: ResLoader = new ResLoader();\r\n\r\n    public layerId: number = -1;\r\n    public layerData: any = {};\r\n\r\n    @property\r\n    isShowBanner: Boolean = false;\r\n\r\n    onLoad() {\r\n        // super.onLoad();\r\n        // this.initLayout()\r\n    }\r\n\r\n    onEnable() {\r\n        if (this.isShowBanner && !playerModel.isRecordAd) {\r\n            //  myLog.i(\"展示banner\")\r\n            tyqSDK.showBannerAd()\r\n        }\r\n    }\r\n\r\n\r\n    getScreenScale() {\r\n        let screen1 = view.getVisibleSize()\r\n        let resolute = view.getDesignResolutionSize()\r\n        let scale = 1\r\n        if (screen1.width / screen1.height <= 720 / 1280) {\r\n            scale = screen1.width / resolute.width\r\n        } else {\r\n            scale = screen1.height / resolute.height\r\n        }\r\n        return scale\r\n    }\r\n\r\n    toast(content) {\r\n        layerManager.createNotice(content);\r\n    }\r\n\r\n    onDisable() {\r\n        if (this.isShowBanner) {\r\n            tyqSDK.hideBannerAd()\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n    }\r\n\r\n    setSpriteFrame2(node: Node, name: string, showCb?: Function, bundleName1 = constants.bundles.icon) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let sprite = node.getComponent(Sprite);\r\n        if (!cocosUtil.isValid(sprite)) {\r\n            return;\r\n        }\r\n        sprite.enabled = false;\r\n        node[\"loadName\"] = name;\r\n\r\n        let bundleName = bundleName1;\r\n        let path = name\r\n\r\n        resManager.loadSpriteFrame(bundleName, path, (err, spriteFrame: SpriteFrame) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(sprite)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            this.resLoader.addAsset(spriteFrame);\r\n            sprite.enabled = true;\r\n            sprite.spriteFrame = spriteFrame;\r\n            if (showCb) {\r\n                showCb(sprite.node);\r\n            }\r\n        });\r\n    }\r\n\r\n    openLayer(layerName: string, data?: any, cb?: Function, showCb?: Function) {\r\n        // 默认每个弹窗只允许同时显示一个\r\n        if (typeof (data) == \"function\") {\r\n            cb = data;\r\n            data = null;\r\n        }\r\n        layerManager.openSingleLayer(layerName, data, cb, (baseLayer: BaseUILayer, prefab: Prefab) => {\r\n            if (baseLayer.resLoader && prefab) {\r\n                baseLayer.resLoader.addAsset(prefab);\r\n            }\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    addTopUILayer(layerName) {\r\n        resManager.loadAsset(constants.bundles.layer, layerName, Prefab, null, (err, prefab) => {\r\n            if (err) {\r\n                myLog.e(\"LayerManager.openLayer error:\" + err.message, layerName, err);\r\n                return;\r\n            }\r\n\r\n\r\n            let node = cocosUtil.instantiate(prefab);\r\n            let com = node.getComponent(layerName) || node.addComponent(layerName);\r\n\r\n            // 添加到节点上后，会马上触发onLoad和onEnable回调，而start方法是在首次执行update之前被调用\r\n            node.parent = this.node;\r\n        });\r\n    }\r\n\r\n    onClickClose() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    closeLayer(layerId?: number | string) {\r\n        if (!layerId) {\r\n            layerId = this.layerId;\r\n        }\r\n        if (layerId && layerId != -1) {\r\n            layerManager.closeLayer(layerId);\r\n            return;\r\n        }\r\n        this.node.destroy();\r\n    }\r\n\r\n    stringToArr(str: string) {\r\n        let index = str.indexOf(\"[\")\r\n        let endIndex = str.indexOf(\"]\")\r\n        let newStr = str.substring(index + 1, endIndex)\r\n        return newStr.split(\",\")\r\n    }\r\n\r\n    fitScrollView(curview: Node, minHeigth, maxHeigth) {\r\n        let windowSize = view.getVisibleSize();\r\n        let resolute = view.getDesignResolutionSize()\r\n        let scale = 1\r\n        if (windowSize.width / windowSize.height <= 720 / 1280) {\r\n            scale = windowSize.width / resolute.width\r\n        } else {\r\n            scale = windowSize.height / resolute.height\r\n        }\r\n        curview.getComponent(UITransform).height = Math.min(maxHeigth, minHeigth + (windowSize.height / scale / 2 - 1280 / 2))\r\n    }\r\n\r\n    fitNodeWidget(node: Node, posy) {\r\n        let windowSize = view.getVisibleSize();\r\n        let resolute = view.getDesignResolutionSize()\r\n        let scale = 1\r\n        if (windowSize.width / windowSize.height <= 720 / 1280) {\r\n            scale = windowSize.width / resolute.width\r\n        } else {\r\n            scale = windowSize.height / resolute.height\r\n        }\r\n        node.position = v3(node.position.x, 0 - windowSize.height / scale / 2 + posy, node.position.z)\r\n        console.log(\"fitNodeWidget \" + node.name, node.position.y)\r\n    }\r\n\r\n    scrollViewSetData(scrollViewNode: Node, arr: any, refreshItemFunc?: Function, data?: any, notResetPos?: boolean) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.setData(arr, (itemUI: Node, item: any, index: number) => {\r\n            if (refreshItemFunc) {\r\n                refreshItemFunc(itemUI, item, index, data);\r\n            }\r\n            //  this.addButtonListener(itemUI);\r\n        });\r\n    }\r\n\r\n    setImageCustomSize(node: Node, size) {\r\n        let width = node.getComponent(UITransform).width\r\n        let height = node.getComponent(UITransform).height\r\n        let scale = Math.min(size / width, size / height)\r\n        let newWidth = width * scale\r\n        let newHeight = height * scale\r\n        node.getComponent(UITransform).width = newWidth\r\n        node.getComponent(UITransform).height = newHeight\r\n        //node.scale = v3(scale, scale, 1)\r\n    }\r\n\r\n    addButtonHander(btnComponent: Node | Button, target: Node, com: string, hander: string, customEventData?: any) {\r\n        if (btnComponent instanceof Button) {\r\n        } else {\r\n            if (btnComponent.getComponent(Button)) {\r\n                btnComponent = btnComponent.getComponent(Button)\r\n            } else {\r\n                btnComponent = btnComponent.addComponent(Button);\r\n            }\r\n        }\r\n        btnComponent.transition = Button.Transition.SCALE;\r\n        let eventHander = new Component.EventHandler();\r\n        eventHander.target = target;\r\n        eventHander.component = com;\r\n        eventHander.handler = hander;\r\n        eventHander.customEventData = customEventData;\r\n        btnComponent.clickEvents = [eventHander];\r\n    }\r\n\r\n    showGetReward(rewardArr) {\r\n        audioManager.playEffect(\"coin\")\r\n\r\n        rewardArr.forEach((element, index) => {\r\n            let propData = designManager.getRowById(constants.tableName.prop, element.Id)\r\n            let icon = \"prop/\" + propData.icon\r\n            if (propData.type == 11) {\r\n                let weaponData = designManager.getRowById(constants.tableName.weapon, propData.weaponid)\r\n                icon = \"weapon/\" + weaponData.icon\r\n            }\r\n            if (propData.type == 1) {\r\n                this.playCoinFlyAnim(8, icon, v3(0, 60, 0), v3(200, 600, 0), 40)\r\n            } else if (propData.type == 10) {\r\n                this.playCoinFlyAnim(8, icon, v3(0, -60, 0), v3(-300, 600, 0), 40)\r\n            } else if (propData.type == 9) {\r\n                this.playCoinFlyAnim(8, icon, v3(0, -60, 0), v3(50, 600, 0), 40)\r\n            } else if (propData.type == 8 || propData.type == 11 || propData.type == 17) {\r\n                this.playCoinFlyAnim(element.Num, icon, v3(0, 0, 0), v3(-150, -600, 0), 20, 100, index * 0.02)\r\n            } else {\r\n                this.playCoinFlyAnim(8, icon, v3(0, 0, 0), v3(-150, -600, 0), 20, 100, index * 0.01)\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**金币落袋具体实现方法 */\r\n    protected playCoinFlyAnim(count: number, iconpath, startPos, endPos, r: number = 50, iconSize = 0, delay = 0) {\r\n        //金币分散成圆\r\n\r\n        let points = this.getCirclePoints(r, startPos, count);\r\n        let coinNodeList = points.map(pos => {\r\n            var coin = new Node(\"Sprite\");\r\n            coin.addComponent(Sprite);\r\n            if (iconSize > 0) {\r\n                let self = this\r\n                let fun = function (sprite) {\r\n                    self.setImageCustomSize(sprite, iconSize)\r\n                }\r\n                this.setSpriteFrame2(coin, iconpath, fun)\r\n            } else {\r\n                this.setSpriteFrame2(coin, iconpath)\r\n            }\r\n            coin.layer = this.node.layer\r\n            // cc.find('Canvas').addChild(coin);\r\n            this.node.addChild(coin);\r\n            coin.setPosition(pos.x, pos.y, 0);\r\n            coin.scale = v3(0, 0, 0)\r\n            tween(coin).to(0.2, { scale: v3(1.2, 1.2, 1.2) }).to(0.2, { scale: v3(1, 1, 1) }).union().repeatForever().start()\r\n            return {\r\n                node: coin,\r\n                startPos: startPos,\r\n                midPos: pos,\r\n                endPos: endPos,\r\n                dis: this.calcDistance(pos, endPos)\r\n            }\r\n        })\r\n\r\n        //执行动作\r\n        let i = 0;\r\n        coinNodeList.forEach((item, idx) => {\r\n            i++;\r\n            tween(item.node)\r\n                .to(0.15, { position: v3(item.midPos.x, item.midPos.y, 0) })//初始位置\r\n                .delay(idx * 0.05 + 0.5 + delay)\r\n                .to(0.35, { position: v3(item.endPos.x, item.endPos.y, 0) })//终点\r\n                .call(() => {\r\n                    item.node.destroy();\r\n                })\r\n                .union()\r\n                .start()\r\n        });\r\n    }\r\n\r\n    protected getCirclePoints(r: number, pos, count: number, randomScope: number = 50) {\r\n        let points = []\r\n        for (let i = 0; i < count; i++) {\r\n            let radians = (Math.PI / 180) * Math.round(360 / count)\r\n            let x = pos.x + r * Math.sin(radians * i)\r\n            let y = pos.y + r * Math.cos(radians * i)\r\n            points.unshift(v3(x + Math.random() * randomScope, y + Math.random() * randomScope, 0))\r\n        }\r\n        return points\r\n    }\r\n\r\n    /**\r\n* 已知两点求距离\r\n* @param {cc.Vec2} pos1\r\n* @param {cc.Vec2} pos2\r\n*/\r\n    public calcDistance(pos1, pos2) {\r\n        let xdiff = pos1.x - pos2.x;\r\n        let ydiff = pos1.y - pos2.y;\r\n        let dis = Math.pow((xdiff * xdiff + ydiff * ydiff), 0.5);\r\n        return dis;\r\n    };\r\n}\r\n\r\n","import { assetManager, Component, SpriteFrame, Texture2D, _decorator, Node, Sprite } from \"cc\";\r\nimport { Wechat } from \"./platform/wechat/wechat\";\r\nimport { Channel, tyqAdManager } from \"./tyqAdManager\";\r\nimport { tyqSDKConfig } from \"./tyqSDKConfig\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('beHaviorComponent')\r\nexport class beHaviorComponent extends Component {\r\n\r\n    @property({ type: Node }) icon: Node = null;\r\n    @property({ tooltip: \"广告业务1：系统分配，0：自定义\" }) strategy = 1;\r\n    @property({ tooltip: \"强制0：广告，1分享，strategy == 1时才生效\" }) currentShow = 0;\r\n\r\n    private isClick = false\r\n    onEnable() {\r\n    }\r\n\r\n    start() {\r\n        if (!tyqSDKConfig.isOpenBeHavior) {\r\n            console.log(\"beHaviorComponent destroy\")\r\n            this.destroy()\r\n            return\r\n        }\r\n\r\n        this.node.on(Node.EventType.TOUCH_START, () => {\r\n            console.log(\"beHaviorComponent 点击\")\r\n            this.isClick = true\r\n        }, this);\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            return\r\n        }\r\n        if (this.strategy == 1) {\r\n            if (Wechat.isShareBehavior()) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 0)\r\n            }\r\n        } else {\r\n            if (this.currentShow == 1) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 0)\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            return\r\n        }\r\n        if (this.strategy == 1) {\r\n            if (Wechat.isShareBehavior()) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 0)\r\n            }\r\n        } else {\r\n            if (this.currentShow == 1) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 0)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n   * 从bundle中加载某个资源，优先使用缓存中的\r\n   * @param bundleName bundle名称\r\n   * @param path 资源路径\r\n   * @param assetType 资源类型\r\n   * @param onProgress 加载进度回调\r\n   * @param onComplete 加载完成回调\r\n   */\r\n    loadAsset(bundleName: string, path: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        if (assetType == SpriteFrame) {\r\n            path += \"/spriteFrame\";\r\n        } else if (assetType == Texture2D) {\r\n            path += \"/texture\";\r\n        }\r\n        let bundle = assetManager.getBundle(bundleName);\r\n        if (bundle && bundle.get(path, assetType)) {\r\n            if (onComplete) {\r\n                onComplete(null, bundle.get(path, assetType));\r\n            }\r\n            return;\r\n        }\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.load(path, assetType, (finish: number, total: number) => {\r\n                if (onProgress) {\r\n                    onProgress(finish / total);\r\n                }\r\n            }, (err, asset) => {\r\n                if (err) {\r\n                    console.log(\"ResManager.loadAsset error:\" + err.message, \"bundleName:\" + bundleName, \"path:\" + path, err);\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(null, asset);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n\r\n}","import { instantiate, Label, Node, Prefab, RichText, tween, UIOpacity, UITransform, v3, _decorator, find } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { localizeManager } from '../../../localization';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BlessLayer')\r\nexport class BlessLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具选择容器\" }) propBlessLayer: Node[] = [];\r\n    @property({ type: Node, tooltip: \"道具结果容器\" }) BlessResultLayer: Node = null;\r\n\r\n    @property({ type: Prefab, tooltip: \"道具节点\" }) propItem: Prefab = null;\r\n\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) propView: Node = null;\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) scrollView: Node = null;\r\n    @property({ type: Node }) resultLight: Node = null;\r\n    @property({ type: Node, tooltip: \"合成按钮\" }) btnBless: Node = null;\r\n    @property({ type: Node }) btnlayer: Node = null;\r\n    @property({ type: Node }) blessPropNode: Node = null;\r\n\r\n    @property({ type: Node }) attrIcon: Node = null;\r\n    @property({ type: Label }) attrlabel: Label = null;\r\n    @property({ type: Label }) propNameLab: Label = null;\r\n    @property({ type: Label }) attrNumLab: Label = null;\r\n    @property({ type: RichText }) tishiText: RichText = null;\r\n\r\n    @property({ type: Node }) selectListNode: Node = null;\r\n    @property({ type: Node }) selectBtnNode: Node = null;\r\n\r\n    @property({ type: Label }) needCoinLabel: Label = null;\r\n\r\n\r\n    @property({ type: Node }) needIcon: Node = null;\r\n\r\n\r\n    _curBlessId = 0\r\n    _curBlessNum = 0\r\n\r\n    NeedBlessNum = 3\r\n\r\n    onLoad() {\r\n        this.fitScrollView(this.propView, 320, 600)\r\n        this.fitNodeWidget(this.btnlayer, 30)\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        eventManager.on(msgac.wearDrop, this.initList, this);\r\n        this.btnBless.active = false\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n        eventManager.off(msgac.wearDrop, this.initList, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.selectListNode.active = false\r\n        this._curIndex = 0\r\n        this.initSelectData()\r\n        this.blessPropNode.active = false\r\n        this.tishiText.string = \"\"\r\n\r\n        find(\"btnBless/Label\",this.node).localize(\"btnQuickSelect\",constants.layers.BlessLayer);\r\n        this.btnBless.getChildByName(\"Label\").localize(\"btnBless\",constants.layers.BlessLayer);\r\n        find(\"selectlistbg/selectallbg/Label\",this.node).localize(\"all\",constants.layers.BlessLayer);\r\n        find(\"selectbtnbg/selectcurbg/Label\",this.node).localize(\"all\",constants.layers.BlessLayer);\r\n        find(\"selectbtnbg/Label\",this.node).localize(\"filter\",constants.layers.BlessLayer);\r\n        find(\"herobg/k/Label\",this.node).localize(\"myEquip\",constants.layers.BlessLayer);\r\n    }\r\n\r\n    initList() {\r\n        let arr = UserData.getInstance().getPropSort()\r\n        let dataArr = []\r\n        if (this._curIndex == 0) {\r\n            arr.forEach(element => {\r\n                // let num = (this._curBlessId == element.id) ? element.num - this._curBlessNum : element.num\r\n                if (this._curBlessId == element.id || this._curBlessId <= 0) {\r\n                    let curprop = designManager.getRowById(constants.tableName.prop, element.id)\r\n                    if (curprop.quality < 5) {\r\n                        let num = element.num\r\n                        for (let i = 0; i < num; i++) {\r\n                            dataArr.push([element.id, element.iswear == 1 && i == 0, i < this._curBlessNum])\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            arr.forEach(element => {\r\n                // let num = (this._curBlessId == element.id) ? element.num - this._curBlessNum : element.num\r\n                if (this._curBlessId == element.id || this._curBlessId <= 0) {\r\n                    let curprop = designManager.getRowById(constants.tableName.prop, element.id)\r\n                    if (curprop.wearIndex == this._curIndex && curprop.quality < 5) {\r\n                        let num = element.num\r\n                        for (let i = 0; i < num; i++) {\r\n                            dataArr.push([element.id, element.iswear == 1 && i == 0, i < this._curBlessNum])\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        this.scrollViewSetData(this.scrollView, dataArr, this.initItem, [this._curBlessId])\r\n    }\r\n\r\n    initItem(itemUI: Node, item: any, index: number, data) {\r\n        if (item[0] == data[0] || data[0] == 0) {\r\n            itemUI.getComponent(PropItemPrefab).setView(item[0], 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n        } else {\r\n            itemUI.getComponent(PropItemPrefab).setView(item[0], 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_Grey)\r\n        }\r\n        itemUI.getChildByName(\"wear\").active = item[1]\r\n        itemUI.getChildByName(\"gou\").active = item[2]\r\n        if (item[2]) {\r\n            itemUI.getChildByName(\"grayMask\").active = true\r\n        }\r\n        itemUI.getComponent(PropItemPrefab).setScale(125)\r\n    }\r\n\r\n    selectProp(event) {\r\n\r\n        let itemData = event.target.item\r\n        if (itemData[2]) {\r\n            return\r\n        }\r\n        if (this._curBlessNum >= this.NeedBlessNum) {\r\n            this.toast(localizeManager._localize(null,`tipMaterialsEnough`,constants.layers.BlessLayer))\r\n            return\r\n        }\r\n        let propid = itemData[0]\r\n        let pos = event.target.parent.getComponent(UITransform).convertToWorldSpaceAR(event.target.position)\r\n        if (propid != this._curBlessId && this._curBlessId != 0) {\r\n            return\r\n        }\r\n\r\n        this.addSelectProp(propid, 1, pos)\r\n    }\r\n\r\n    addSelectProp(propid, num = 1, startp = null) {\r\n        this._curBlessId = propid\r\n        for (let index = 0; index < num; index++) {\r\n            let item = this.propBlessLayer[this._curBlessNum].getChildByName(\"prop\")\r\n            if (item == null) {\r\n                item = instantiate(this.propItem)\r\n                item.position = v3(0, 0, 0)\r\n                item.name = \"prop\"\r\n                this.propBlessLayer[this._curBlessNum].addChild(item)\r\n                item.getComponent(PropItemPrefab).setScale(120)\r\n            }\r\n            item.on(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n            item.active = true\r\n            item.getComponent(PropItemPrefab).setView(propid, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n\r\n            if (startp) {\r\n                let p = this.propBlessLayer[this._curBlessNum].getComponent(UITransform).convertToNodeSpaceAR(startp)\r\n                item.position = p\r\n                tween(item).to(0.2, { position: v3(0, 0, 0) }).start()\r\n            }\r\n\r\n            this._curBlessNum += 1\r\n        }\r\n\r\n        if (this._curBlessNum < this.NeedBlessNum) {\r\n            for (let index = this._curBlessNum; index < this.NeedBlessNum; index++) {\r\n                let item = this.propBlessLayer[index].getChildByName(\"prop\")\r\n                if (item == null) {\r\n                    item = instantiate(this.propItem)\r\n                    item.position = v3(0, 0, 0)\r\n                    item.name = \"prop\"\r\n                    this.propBlessLayer[index].addChild(item)\r\n                    item.getComponent(PropItemPrefab).setScale(120)\r\n                    //   item.on(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n                }\r\n                item.active = true\r\n                item.getComponent(PropItemPrefab).setView(propid, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_Grey)\r\n            }\r\n            this.btnBless.active = false\r\n        } else {\r\n            this.btnBless.active = true\r\n        }\r\n\r\n        let curProp = designManager.getRowById(constants.tableName.prop, this._curBlessId)\r\n        // if(curProp.quality ==1){\r\n        this.needCoinLabel.string = \"x\" + designManager.config[\"compose\" + curProp.quality]\r\n        if (curProp.quality == 4) {\r\n            this.setSpriteFrame2(this.needIcon, \"prop/prop_diamond2\")\r\n        } else {\r\n            this.setSpriteFrame2(this.needIcon, \"prop/prop_coin1\")\r\n        }\r\n        //  }\r\n        if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n            this.showResultProp([curProp.blessId])\r\n        }\r\n        this.selectBtnNode.active = this._curBlessNum <= 0\r\n        this.initList()\r\n    }\r\n\r\n    showResultProp(...propid) {\r\n\r\n        this.BlessResultLayer.removeAllChildren()\r\n        if (propid) {\r\n            propid.forEach(element => {\r\n                let item = instantiate(this.propItem)\r\n                item.getComponent(PropItemPrefab).setView(element, 1, PropItemPrefab.Type_HideNum)\r\n                item.getComponent(PropItemPrefab).setScale(130)\r\n                item.position = v3(0, 0, 0)\r\n                // item.getComponent(Button).clickEvents = []\r\n                this.BlessResultLayer.addChild(item)\r\n            });\r\n            this.showLight(this.BlessResultLayer.children.length > 0)\r\n            this.blessPropNode.active = this.BlessResultLayer.children.length > 0\r\n            this.showPropInfo()\r\n            if (this.BlessResultLayer.children.length <= 0) {\r\n                this.tishiText.string = \"\"\r\n            }\r\n        } else {\r\n            this.showLight(false)\r\n            this.blessPropNode.active = false\r\n            this.tishiText.string = \"\"\r\n        }\r\n    }\r\n\r\n    showPropInfo() {\r\n        if (this._curBlessId <= 0) {\r\n            return\r\n        }\r\n        let propData = designManager.getRowById(constants.tableName.prop, this._curBlessId)\r\n        if (propData == null) {\r\n            return\r\n        }\r\n        if (propData && propData.blessId && propData.blessId > 0) {\r\n            var propData2 = designManager.getRowById(constants.tableName.prop, propData.blessId)\r\n        }\r\n\r\n        if (propData.atk > 0) {\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_gj\", null, constants.bundles.wwqVec)\r\n            this.attrNumLab.string = \"\" + cocosUtil.formatNumString(propData2.atk)\r\n            this.attrNumLab.color = constants.colors.blue.parseColor()\r\n            this.attrlabel.string = `${localizeManager._localize(null,`atk`,constants.catName.common)} ` + \"\" + cocosUtil.formatNumString(propData.atk)\r\n        } else if (propData.hp > 0) {\r\n            this.attrNumLab.string = \"\" + cocosUtil.formatNumString(propData2.hp)\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_sm\", null, constants.bundles.wwqVec)\r\n            this.attrlabel.string = `${localizeManager._localize(null,`hp`,constants.catName.common)} ` + \"\" + cocosUtil.formatNumString(propData.hp)\r\n            this.attrNumLab.color = constants.colors.green.parseColor()\r\n        }\r\n        this.propNameLab.string = \"\" + localizeManager._localize(null,`name${propData2.id}`,constants.catName.propSystem);\r\n        if (this.NeedBlessNum - this._curBlessNum <= 0) {\r\n            this.tishiText.string = \"\"\r\n        } else {\r\n            let propColor = [\"N\", \"R\", \"SR\", \"SSR\", \"UR\"]\r\n            let propColor2 = [\"#818ca0\", \"#38ff38\", \"#328adc\", \"#ff48d7\", \"#ffb848\"]\r\n            // this.tishiText.string = \"<color=#ffffff>需要材料：\" + (this.NeedBlessNum - this._curBlessNum) + \"x</color><color=\" + propColor2[propData.quality - 1] + \">\" + propColor[propData.quality - 1] + \"</color><color=#ffffff>\" + propData.name + \"</color>\"\r\n            this.tishiText.node.localize({cat:constants.layers.BlessLayer, key:\"tishiText\",vars:[this.NeedBlessNum - this._curBlessNum, propColor2[propData.quality - 1], localizeManager._localize(null,`q${propData.quality}`,constants.catName.propSystem), localizeManager._localize(null,`name${propData.id}`,constants.catName.propSystem)]})\r\n        }\r\n    }\r\n\r\n    showLight(isShow) {\r\n        this.resultLight.active = false\r\n        if (isShow) {\r\n            this.resultLight.active = true\r\n            tween(this.resultLight.getComponent(UIOpacity)).stop()\r\n            tween(this.resultLight.getComponent(UIOpacity)).to(0.7, { opacity: 0 }).to(0.4, { opacity: 255 }).union().repeatForever().start()\r\n        }\r\n    }\r\n\r\n    unSelectProp() {\r\n        this._curBlessNum--\r\n        let item = this.propBlessLayer[this._curBlessNum].getChildByName(\"prop\")\r\n\r\n        if (this._curBlessNum <= 0) {\r\n            this._curBlessId = 0\r\n            for (let index = 0; index < this.NeedBlessNum; index++) {\r\n                let item = this.propBlessLayer[index].getChildByName(\"prop\")\r\n                if (item) {\r\n                    item.active = false\r\n                    item.off(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n                }\r\n            }\r\n            this.showResultProp()\r\n            //  return\r\n        } else if (item) {\r\n            //  item.active = false\r\n            //  item.off(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n            if (this._curBlessId > 0) {\r\n                item.active = true\r\n                item.getComponent(PropItemPrefab).setView(this._curBlessId, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_Grey)\r\n            }\r\n        }\r\n        this.btnBless.active = false\r\n        this.selectBtnNode.active = this._curBlessNum <= 0\r\n        this.initList()\r\n    }\r\n\r\n    blessAction() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (this._curBlessNum < this.NeedBlessNum) {\r\n            this.toast(localizeManager._localize(null,`tipMateriaNotEnough`,constants.layers.BlessLayer))\r\n            return\r\n        }\r\n        let curProp = designManager.getRowById(constants.tableName.prop, this._curBlessId)\r\n        if (curProp) {\r\n            let coinNum = designManager.config[\"compose\" + curProp.quality] || 100\r\n            if (((curProp.quality == 4 && UserData.getInstance().checkAndUseBaoshi(coinNum, true)) || (curProp.quality != 4 && UserData.getInstance().cheackAndUseCoin(coinNum, true)))) {\r\n                if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n                    UserData.getInstance().blessProp(this._curBlessId, curProp.blessId, 0 - this._curBlessNum)\r\n                    this.showResultProp([curProp.blessId])\r\n                    this.clearBlessLayer()\r\n                    this.showResultProp()\r\n                    this.initList()\r\n                    tyqSDK.eventSendCustomEvent(\"合成装备成功\")\r\n                    this.openLayer(constants.layers.BlessResultLayer, { blessId: curProp.id, getPropId: curProp.blessId });\r\n                    playerModel.addDayTaskNum(9);\r\n                }\r\n            } else {\r\n                if (curProp.quality != 4) {\r\n                    tyqSDK.eventSendCustomEvent(\"合成装备金币不足\")\r\n                    this.toast(localizeManager._localize(null,`noGlod`,constants.catName.common))\r\n                    this.openLayer(constants.layers.RewardItemLayer, { propId: 101, num: designManager.config.adCoin })\r\n                } else {\r\n                    tyqSDK.eventSendCustomEvent(\"合成装备钻石不足\")\r\n                    this.toast(localizeManager._localize(null,`noDiamond`,constants.catName.common))\r\n                    this.openLayer(constants.layers.RewardItemLayer, { propId: 801, num: designManager.config.adDiamond })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    clearBlessLayer() {\r\n        this._curBlessId = 0\r\n        this._curBlessNum = 0\r\n        this.tishiText.string = \"\"\r\n        this.propBlessLayer[0].removeAllChildren()\r\n        this.propBlessLayer[1].removeAllChildren()\r\n        this.propBlessLayer[2].removeAllChildren()\r\n    }\r\n\r\n    allBlessProp() {\r\n        let arr = UserData.getInstance().propData\r\n        let result = []\r\n        for (let index = 0; index < arr.length; index++) {\r\n            if (arr[index].num >= this.NeedBlessNum) {\r\n                let curProp = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n                    result.push(curProp.blessId)\r\n                    UserData.getInstance().blessProp(arr[index].id, curProp.blessId, 0 - this.NeedBlessNum)\r\n                }\r\n            }\r\n        }\r\n\r\n        this.showResultProp(result)\r\n        this.clearBlessLayer()\r\n        this.initList()\r\n    }\r\n\r\n    _curAutoIndex = 0\r\n    autoBlessAction() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let arr = UserData.getInstance().propData\r\n        if (this._curBlessId > 0) {\r\n            if (this._curBlessNum < this.NeedBlessNum) {\r\n                for (let i = this._curAutoIndex + 1; i < arr.length + this._curAutoIndex + 1; i++) {\r\n                    let index = i % arr.length\r\n                    if (arr[index].id == this._curBlessId && arr[index].num - this._curBlessNum > 0) {\r\n                        let curprop = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                        if (curprop.quality < 5) {\r\n                            this._curAutoIndex = index\r\n                            this.addSelectProp(arr[index].id, Math.min(arr[index].num - this._curBlessNum, this.NeedBlessNum - this._curBlessNum))\r\n                            return\r\n                        }\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                for (let i = this._curAutoIndex + 1; i < arr.length + this._curAutoIndex + 1; i++) {\r\n                    let index = i % arr.length\r\n                    if (arr[index].num >= this.NeedBlessNum) {\r\n                        let curprop = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                        if (curprop.quality < 5) {\r\n                            this.clearBlessLayer()\r\n                            this._curAutoIndex = index\r\n                            this.addSelectProp(arr[index].id, this.NeedBlessNum)\r\n                            return\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = this._curAutoIndex + 1; i < arr.length + this._curAutoIndex + 1; i++) {\r\n                let index = i % arr.length\r\n                if (arr[index].num >= this.NeedBlessNum) {\r\n                    let curprop = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                    if (curprop.quality < 5) {\r\n                        this.clearBlessLayer()\r\n                        this._curAutoIndex = index\r\n                        this.addSelectProp(arr[index].id, this.NeedBlessNum)\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.toast(localizeManager._localize(null,`tipNoEquip`,constants.layers.BlessLayer))\r\n    }\r\n\r\n    closeBless() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.closeLayer()\r\n    }\r\n\r\n    onSelectBtnClick() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.selectListNode.active = !this.selectListNode.active\r\n        this.setSpriteFrame2(this.selectBtnNode.getChildByName(\"jianxia\"), this.selectListNode.active ? \"heroLayer/jianshang\" : \"heroLayer/jianxia\", null, constants.bundles.wwqVec)\r\n    }\r\n\r\n    _curIndex = 0\r\n    onSelectItemClick(event, data) {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this._curIndex = parseInt(data)\r\n        this.onSelectBtnClick()\r\n        this.initSelectData()\r\n    }\r\n\r\n    initSelectData() {\r\n        let selectcurbg = this.selectBtnNode.getChildByName(\"selectcurbg\")\r\n        if (this._curIndex == 0) {\r\n            selectcurbg.getChildByName(\"propicon\").active = false\r\n            selectcurbg.getChildByName(\"Label\").active = true\r\n        } else {\r\n            selectcurbg.getChildByName(\"propicon\").active = true\r\n            selectcurbg.getChildByName(\"Label\").active = false\r\n            this.setSpriteFrame2(selectcurbg.getChildByName(\"propicon\"), \"heroLayer/propicon\" + this._curIndex, null, constants.bundles.wwqVec)\r\n        }\r\n        this.initList()\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator, Node, Prefab, instantiate, v3, Button, tween, UIOpacity, UITransform, Label, RichText, Quat } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { localizeManager } from '../../../localization';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BlessResultLayer')\r\nexport class BlessResultLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具选择容器\" }) propBlessLayer: Node[] = [];\r\n    @property({ type: Node, tooltip: \"道具结果容器\" }) BlessResultLayer: Node = null;\r\n\r\n    @property({ type: Prefab, tooltip: \"道具节点\" }) propItem: Prefab = null;\r\n\r\n    @property({ type: Node }) btnlayer: Node = null;\r\n    @property({ type: Label }) propNameLab: Label = null;\r\n    @property({ type: Node }) attrIcon: Node = null;\r\n    @property({ type: Label }) attrlabel: Label = null;\r\n    @property({ type: Label }) attrNumLab1: Label = null;\r\n    @property({ type: Label }) attrNumLab: Label = null;\r\n\r\n    @property({ type: Node }) attrNodebg: Node = null;\r\n\r\n    @property({ type: Node }) title: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        myLog.i(\"BlessResultLayer onLoad\")\r\n        this.fitNodeWidget(this.btnlayer, 0)\r\n    }\r\n\r\n    \r\n\r\n    onEnable() {\r\n        myLog.i(\"BlessResultLayer onEnable\")\r\n        super.onEnable();\r\n        let blessId = this.layerData.blessId\r\n        let getPropId = this.layerData.getPropId\r\n        for (let i = 0; i < 3; i++) {\r\n            let item = instantiate(this.propItem)\r\n            item.position = i == 2 ? v3(0, 0, 0) : v3(0, 10, 0)\r\n            item.name = \"prop\"\r\n            this.propBlessLayer[i].addChild(item)\r\n            item.getComponent(PropItemPrefab).setScale(120)\r\n            item.getComponent(PropItemPrefab).setView(blessId, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n        }\r\n        this.startAnimal()\r\n\r\n        let propData = designManager.getRowById(constants.tableName.prop, blessId)\r\n        let propData2 = designManager.getRowById(constants.tableName.prop, getPropId)\r\n\r\n        this.propNameLab.node.localize(constants.catName.propSystem, `name${propData.id}`);\r\n        // this.propNameLab.string = propData.name\r\n\r\n        if (propData.atk > 0) {\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_gj\", null, constants.bundles.wwqVec)\r\n            this.attrNumLab.string = \"+\" + propData2.atk\r\n            this.attrNumLab.color = constants.colors.blue.parseColor()\r\n            this.attrlabel.string = localizeManager._localize(null,`atk`,constants.catName.common);\r\n            this.attrNumLab1.string = \"\" + propData.atk\r\n        } else if (propData.hp > 0) {\r\n            this.attrNumLab.string = \"+\" + propData2.hp\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_sm\", null, constants.bundles.wwqVec)\r\n            this.attrlabel.string = localizeManager._localize(null,`hp`,constants.catName.common);\r\n            this.attrNumLab.color = constants.colors.green.parseColor()\r\n            this.attrNumLab1.string = \"\" + propData.hp\r\n        }\r\n\r\n        this.attrNodebg.active = false\r\n    }\r\n\r\n    startAnimal() {\r\n        // let quat: Quat = new Quat();\r\n        // let quat2: Quat = new Quat();\r\n        // Quat.fromEuler(quat, 0, 30, 0);\r\n        // Quat.fromEuler(quat2, 0, -30, 0);\r\n        tween(this.propBlessLayer[0]).delay(1).to(0.1, { position: v3(15, 268, 0) }).hide().start()\r\n        tween(this.propBlessLayer[1]).delay(1).to(0.1, { position: v3(15, 268, 0) }).hide().start()\r\n        let getPropId = this.layerData.getPropId\r\n        let item = this.propBlessLayer[2].getChildByName(\"prop\")\r\n        let self = this\r\n        tween(this.propBlessLayer[2]).delay(1).hide().delay(0.8).call(function () {\r\n            item.getComponent(PropItemPrefab).setView(getPropId, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n            self.attrNodebg.active = true\r\n            self.btnlayer.active = true\r\n        }).show().set({ scale: v3(0, 0, 0) }).to(0.2, { scale: v3(1, 1, 1) }).start()\r\n        tween(this.attrNodebg).delay(1.8).to(0.1, { scale: v3(1.2, 1.2, 1.2) }).to(0.1, { scale: v3(1, 1, 1) }).start()\r\n\r\n        tween(this.attrIcon).hide().delay(1.9).show().start()\r\n        tween(this.propNameLab.node).hide().delay(1.9).show().start()\r\n        tween(this.attrNumLab.node).hide().delay(2.1).show().start()\r\n        tween(this.attrNumLab1.node).hide().delay(2.1).show().start()\r\n        tween(this.title).hide().delay(1.7).show().start()\r\n\r\n        // tween(this.propBlessLayer[0]).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.3,{position:v3(15,268, 0)}).start()\r\n        // tween(this.propBlessLayer[1]).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.3,{position:v3(15,268, 0)}).start()\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.btnlayer.active = false\r\n    }\r\n\r\n    closeBless() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.closeLayer()\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, Tween, UITransform, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Monster } from '../monsters/Monster';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('blockArrow')\r\nexport class blockArrow extends Component {\r\n\r\n    hint: Hint;\r\n    monster: Monster;\r\n\r\n    outVec1: Vec3 = v3(0, 0, 0);\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        this.monster = this.hint.extraObj.monster;\r\n        let duration = this.hint.extraObj.duration;\r\n        let dis = this.hint.extraObj.dis;\r\n\r\n        let tf = this.hint.bodyNode.getComponent(UITransform);\r\n        tf.width = 120;\r\n\r\n        Tween.stopAllByTarget(tf);\r\n        tween(tf).to(duration, { width: dis }).call(() => {\r\n            this.hint.recycleSelf();\r\n        }).start();\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        // 角度\r\n        mapModel.player.node.getPosition(this.outVec1).subtract(this.monster.node.position);\r\n        this.node.angle = cocosUtil.vec2XAngle(this.outVec1);\r\n\r\n        // 位置\r\n        this.node.position = this.monster.node.position;\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, Enum, Rect, Size, Vec2, _decorator } from 'cc';\r\nimport { EDITOR } from 'cc/env';\r\nimport { physicsGroup } from '../other/physicsGroup';\r\nconst { ccclass, property, executeInEditMode } = _decorator;\r\n\r\n@ccclass('BoxColliderUtil')\r\n@executeInEditMode(true)\r\nexport class BoxColliderUtil extends Component {\r\n\r\n    @property\r\n    protected _offset = new Vec2();\r\n    @property\r\n    get offset() {\r\n        return this._offset;\r\n    }\r\n    set offset(v) {\r\n        this._offset = v;\r\n    }\r\n\r\n    @property\r\n    private _size = new Size(1, 1);\r\n    @property\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    set size(v) {\r\n        this._size = v;\r\n    }\r\n\r\n    @property\r\n    tag = 0;\r\n\r\n    @property({ type: Enum(physicsGroup) })\r\n    group = physicsGroup.DEFAULT;\r\n\r\n    @property\r\n    isSync = false;\r\n\r\n    public worldPoints = [\r\n        new Vec2(),\r\n        new Vec2(),\r\n        new Vec2(),\r\n        new Vec2(),\r\n    ];\r\n\r\n    public worldAabb = new Rect();\r\n\r\n    contactColliderObj: any = {};\r\n    contactBeginCb: Function;\r\n    contactEndCb: Function;\r\n\r\n    onDisable() {\r\n        // 通知碰撞中的碰撞结束了\r\n        for (let i in this.contactColliderObj) {\r\n            let collider = this.contactColliderObj[i];\r\n            if (!collider) {\r\n                continue;\r\n            }\r\n            this.contactEnd(collider);\r\n        }\r\n    }\r\n\r\n    private getContactKey(collider: BoxColliderUtil) {\r\n        return this.uuid + \"_\" + collider.uuid;\r\n    }\r\n\r\n    updateCollider() {\r\n        const aabb = this.worldAabb;\r\n        aabb.x = this.offset.x - this.size.width * 0.5;\r\n        aabb.y = this.offset.y - this.size.height * 0.5;\r\n        aabb.width = this.size.width;\r\n        aabb.height = this.size.height;\r\n\r\n        const wp0 = this.worldPoints[0];\r\n        const wp1 = this.worldPoints[1];\r\n        const wp2 = this.worldPoints[2];\r\n        const wp3 = this.worldPoints[3];\r\n\r\n        aabb.transformMat4ToPoints(this.node.worldMatrix, wp0, wp1, wp2, wp3);\r\n\r\n        let minX = Math.min(wp0.x, wp1.x, wp2.x, wp3.x);\r\n        let maxX = Math.max(wp0.x, wp1.x, wp2.x, wp3.x);\r\n        let minY = Math.min(wp0.y, wp1.y, wp2.y, wp3.y);\r\n        let maxY = Math.max(wp0.y, wp1.y, wp2.y, wp3.y);\r\n\r\n        aabb.x = minX;\r\n        aabb.y = minY;\r\n        aabb.width = maxX - minX;\r\n        aabb.height = maxY - minY;\r\n    }\r\n\r\n    setContactBegin(cb: Function) {\r\n        this.contactBeginCb = cb;\r\n    }\r\n    setContactEnd(cb: Function) {\r\n        this.contactEndCb = cb;\r\n    }\r\n\r\n    contactBegin(collider: BoxColliderUtil) {\r\n        const key1 = this.getContactKey(collider);\r\n        const key2 = collider.getContactKey(this);\r\n        if (!this.contactColliderObj[key1]) {\r\n            this.contactColliderObj[key1] = collider;\r\n            if (this.contactBeginCb) {\r\n                this.contactBeginCb(this, collider);\r\n            }\r\n        }\r\n\r\n        if (!collider.contactColliderObj[key2]) {\r\n            collider.contactColliderObj[key2] = this;\r\n            if (collider.contactBeginCb) {\r\n                collider.contactBeginCb(collider, this);\r\n            }\r\n        }\r\n    }\r\n    contactEnd(collider: BoxColliderUtil) {\r\n        const key1 = this.getContactKey(collider);\r\n        const key2 = collider.getContactKey(this);\r\n\r\n        let collider1 = this.contactColliderObj[key1];\r\n        if (collider1 && collider1 == collider) {\r\n            this.contactColliderObj[key1] = undefined;\r\n            if (this.contactEndCb) {\r\n                this.contactEndCb(this, collider);\r\n            }\r\n        }\r\n\r\n        let collider2 = collider.contactColliderObj[key2];\r\n        if (collider2 && collider2 == this) {\r\n            collider.contactColliderObj[key2] = undefined;\r\n            if (collider.contactEndCb) {\r\n                collider.contactEndCb(collider, this);\r\n            }\r\n        }\r\n    }\r\n\r\n    update() {\r\n        // @ts-ignore\r\n        if (!EDITOR || cc.GAME_VIEW) {\r\n            return;\r\n        }\r\n        if (!this.isSync) {\r\n            return;\r\n        }\r\n        let boxCollider = null;\r\n        let colliderArr = this.getComponents(BoxCollider2D);\r\n        for (let i = 0; i < colliderArr.length; i++) {\r\n            let collider = colliderArr[i];\r\n            if (collider.tag == this.tag) {\r\n                boxCollider = collider;\r\n                break;\r\n            }\r\n        }\r\n        if (!boxCollider) {\r\n            return;\r\n        }\r\n\r\n        this.offset.x = boxCollider.offset.x;\r\n        this.offset.y = boxCollider.offset.y;\r\n\r\n        this.size.width = boxCollider.size.width;\r\n        this.size.height = boxCollider.size.height;\r\n    }\r\n\r\n}\r\n\r\n","import { Button, Color, find, Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { localizeManager } from '../../../localization';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BoxMonsterLayer')\r\nexport class BoxMonsterLayer extends BaseLayer {\r\n\r\n    getIndexs: any = {};\r\n    canRefresh: boolean = true;\r\n    refreshCount: number = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let itemUIArr = this.getNodeByPath(\"ui/bg/itemLayer\").children;\r\n        let arr = this.getItemArr();\r\n\r\n        itemUIArr.forEach((node: any, index: number) => {\r\n            let item = arr[index];\r\n            node.item = item;\r\n            node.index = index;\r\n            this.refreshSelectItem(node, item, index);\r\n        });\r\n\r\n        this.refreshBtnsLayer();\r\n\r\n        this.node.getChildByPath(\"ui/title/text\").localizeImg();\r\n        this.node.getChildByPath(\"ui/bg/btnRefresh/text\").localizeImg();\r\n\r\n    }\r\n\r\n    refreshBtnsLayer() {\r\n        let btnRefresh = this.getNodeByPath(\"ui/bg/btnRefresh\");\r\n        btnRefresh.getComponent(Button).enabled = true;\r\n        if (this.canRefresh && this.refreshCount < designManager.config.carTime) {\r\n            cocosUtil.setRenderableColor(btnRefresh, Color.WHITE, true);\r\n        } else {\r\n            cocosUtil.setRenderableColor(btnRefresh, constants.colors.yin.parseColor(), true);\r\n            btnRefresh.getComponent(Button).enabled = false;\r\n        }\r\n\r\n        let limitNode = this.getNodeByPath(\"ui/bg/btnRefresh/limit\");\r\n        this.setString(limitNode, \"(%d/%d)\".format(this.refreshCount, designManager.config.carTime));\r\n    }\r\n\r\n    refreshSelectLayer() {\r\n        let itemUIArr = this.getNodeByPath(\"ui/bg/itemLayer\").children;\r\n        itemUIArr.forEach((node: any, index: number) => {\r\n            this.refreshSelectItem(node, node.item, node.index);\r\n        });\r\n    }\r\n\r\n    refreshSelectItem(itemUI: Node, item: any, index: number) {\r\n        find(\"hasGet/icon\",itemUI)?.localizeImg();\r\n        find(\"propItem/btnGet/text\",itemUI)?.localizeImg();\r\n        find(\"btnGetAd/text\",itemUI)?.localizeImg();\r\n\r\n        let skillItem = find(\"skillItem\", itemUI);\r\n        let propItem = find(\"propItem\", itemUI);\r\n        if (skillItem) {\r\n            skillItem.active = false;\r\n        }\r\n        propItem.active = false;\r\n\r\n        find(\"hasGet\", itemUI).active = this.getIndexs[index] ? true : false;\r\n\r\n        if (item.name == constants.tableName.prop) {\r\n            propItem.active = true;\r\n            let row = designManager.getRowById(constants.tableName.prop, item.id);\r\n            let info = localizeManager._localize(null,`info${row.id}`,constants.catName.propSystem);\r\n            if (item.id == constants.propIds.coin || item.id == constants.propIds.diamond) {\r\n                // info = localText.propGet.format(item.num, row.name);\r\n                info = localizeManager._localize(null,{cat:constants.catName.common, key:`propGet`, vars:[localizeManager._localize(null,`name${row.id}`,constants.catName.propSystem), item.num]});\r\n            }\r\n            this.setString(find(\"info\", propItem), info);\r\n        } else {\r\n            skillItem.active = true;\r\n            let info = item.info;\r\n            let id = designManager.getFirstIdByType(item.type);\r\n            if (info) {\r\n                id = info.id + 1;\r\n            }\r\n            let row = designManager.getRowById(item.name, id);\r\n\r\n            this.setSpriteFrame(find(\"icon\", skillItem), row.icon);\r\n\r\n            let starLayer = find(\"starLayer\", skillItem);\r\n            this.setNumItemLayer(starLayer, row.lv, (starNode: Node) => {\r\n                let iconNode = find(\"icon\", starNode);\r\n                let icon2Node = find(\"icon2\", starNode);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    iconNode.active = false;\r\n                    icon2Node.active = true;\r\n                } else {\r\n                    iconNode.active = true;\r\n                    icon2Node.active = false;\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    getItemArr() {\r\n        let arr = mapModel.mapSystem.getSelectItemArr();\r\n        arr.forEach((item: any) => {\r\n            if (item.name == constants.tableName.prop) {\r\n                // 随机金币\r\n                item.id = constants.propIds.coin\r\n                item.num = utilTools.getFloatValue(designManager.config.carGoldNum[0], designManager.config.carGoldNum[1], true);\r\n            }\r\n        });\r\n\r\n        // 金币\r\n        arr.push({\r\n            name: constants.tableName.prop,\r\n            id: constants.propIds.coin,\r\n            num: designManager.config.carGold\r\n        });\r\n        // 钻石\r\n        arr.push({\r\n            name: constants.tableName.prop,\r\n            id: constants.propIds.diamond,\r\n            num: designManager.config.carDiamond\r\n        });\r\n        // 回血\r\n        arr.push({\r\n            name: constants.tableName.prop,\r\n            id: constants.propIds.addHpPercent\r\n        });\r\n\r\n        return arr;\r\n\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnRefresh() {\r\n        sdkManager.openAd(\"宝箱怪换一批\", (st: number) => {\r\n            if (st == 1) {\r\n                this.refreshCount++;\r\n                this.initUI();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnGetAd(node: any) {\r\n        sdkManager.openAd(\"宝箱怪奖励\", (st: number) => {\r\n            if (st == 1) {\r\n                let item = node.parent.item;\r\n                switch (item.name) {\r\n                    case constants.tableName.weapon:\r\n                        mapModel.weaponSystem.addWeapon(item.type);\r\n                        break;\r\n                    case constants.tableName.skill:\r\n                        mapModel.skillSystem.addSkill(item.type);\r\n                        break;\r\n                    case constants.tableName.skill2:\r\n                        mapModel.skillSystem.addSkill2(item.type);\r\n                        break;\r\n                    case constants.tableName.prop:\r\n                        mapModel.propSystem.getProp(item.id, item.num);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                this.canRefresh = false;\r\n                let index = node.parent.index;\r\n                this.getIndexs[index] = 1;\r\n                this.refreshSelectLayer();\r\n                this.refreshBtnsLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnGet(node: any) {\r\n        let item = node.parent.parent.item;\r\n        let index = node.parent.parent.index;\r\n        mapModel.propSystem.getProp(item.id, item.num);\r\n        this.getIndexs[index] = 1;\r\n        this.refreshSelectLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, Label,  Node, Sprite, _decorator, UITransform, v3, Tween } from 'cc';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BtnLayer')\r\nexport class BtnLayer extends Component {\r\n\r\n    bolInit = false\r\n    intCheckTime = 1\r\n    runTime: 0;\r\n    runTimeLast: 0;\r\n    tween: Tween<Node>;\r\n\r\n    @property({ type: Label, tooltip: \"发光\" }) light: Node = null;\r\n\r\n    onLoad() {\r\n        this.bolInit = false;\r\n        this.runTime = 0;\r\n        this.runTimeLast = 0;\r\n        this.intCheckTime = 1;\r\n        this.tween = null;\r\n        this.node.getChildByName(\"light\").active = false\r\n\r\n    }\r\n\r\n    setStart() {\r\n        if (this.node.parent && this.tween == null) {\r\n            this.runTime = 0;\r\n            this.runTimeLast = 0;\r\n            if (this.node.getComponent(Sprite).spriteFrame == null)\r\n                this.node.getComponent(Sprite).spriteFrame = this.node.parent.getComponent(Sprite).spriteFrame;\r\n                \r\n            this.node.getComponent(UITransform).width = this.node.parent.getComponent(UITransform).width;\r\n            this.node.getComponent(UITransform).height = this.node.parent.getComponent(UITransform).height;\r\n\r\n            //光放大\r\n            let nodeLight = this.node.getChildByName(\"light\");\r\n            let xscale = this.node.parent.getComponent(UITransform).width / nodeLight.getComponent(UITransform).width;\r\n            let yscale = this.node.parent.getComponent(UITransform).height / nodeLight.getComponent(UITransform).height;\r\n            let scale = Math.max(xscale, yscale);\r\n            nodeLight.scale = v3(scale,scale,1);\r\n            this.node.getChildByName(\"light\").active =true\r\n\r\n            this.tween = tween(nodeLight).show().set({ position: v3(-(this.node.parent.getComponent(UITransform).width + nodeLight.getComponent(UITransform).width) * 0.5, 0) }).to(0.8, { position: v3((this.node.parent.getComponent(UITransform).width + nodeLight.getComponent(UITransform).width) * 0.5, 0, 0) }).hide().delay(0.2 + Math.random() * 0.5).union().repeatForever();\r\n            this.tween.start();\r\n        }\r\n    }\r\n\r\n    setStop() {\r\n        if (this.tween) {\r\n            this.tween.stop();\r\n            this.tween = null;\r\n            this.node.getChildByName(\"light\").active =false\r\n            this.node.getChildByName(\"light\").position = v3(-(this.node.parent.getComponent(UITransform).width + this.node.getChildByName(\"light\").getComponent(UITransform).width) * 0.5, 0,0);\r\n        }\r\n    };\r\n\r\n    update(dt) {\r\n        this.runTime += dt;\r\n        // if(!this.bolInit)\r\n        // {\r\n        //     this.bolInit = true;\r\n        //     this.setStart();\r\n        // }\r\n        if (this.runTime > this.intCheckTime) {\r\n            this.runTime = 0;\r\n            if (this.node.parent.getComponent(Sprite).color.toHEX(\"#rrggbb\").toLowerCase() == \"ffffff\") {\r\n                this.setStart();\r\n            }\r\n            else this.setStop();\r\n        }\r\n    }\r\n}\r\n\r\n","import { BoxCollider2D, Collider2D, Component, Contact2DType, find, Node, Tween, v3, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from '../monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Bullet')\r\nexport class Bullet extends Component {\r\n\r\n    id: number;\r\n    row: any;\r\n    direction: Vec3;\r\n    isDestroyInNoShow: boolean;\r\n    extraObj: any;\r\n\r\n    speed: number;\r\n    atk: number;\r\n\r\n    bodyNode: Node;\r\n    collider: BoxCollider2D;\r\n    bulletUtil: any;\r\n\r\n    timeCount: number;\r\n\r\n    contactItemArr: any;\r\n\r\n    // 是否是跟踪子弹，默认是跟踪玩家\r\n    isFollow: boolean = false;\r\n    // 跟踪转速\r\n    rotateSpeed: number = Math.PI / 3;\r\n\r\n    // Vec3集中缓存\r\n    vec3Obj = {\r\n        targetPos: v3(0, 0, 0),\r\n        direction: v3(0, 0, 0),\r\n\r\n        outVec3: v3(0, 0, 0),\r\n    };\r\n\r\n    onLoad() {\r\n        this.collider = this.node.getComponent(BoxCollider2D);\r\n        if (this.collider) {\r\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n            this.collider.on(Contact2DType.END_CONTACT, this.contactEnd, this);\r\n        }\r\n        this.bodyNode = find(\"body\", this.node);\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    init(id: number, group: number, startWorldPos?: Vec3, direction?: Vec3, extraObj?: any) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n\r\n        if (this.collider) {\r\n            this.collider.group = group;\r\n            this.collider.enabled = true;\r\n        }\r\n        this.id = id;\r\n        this.extraObj = extraObj;\r\n\r\n        if (!startWorldPos) {\r\n            // 默认起始位置为玩家位置\r\n            startWorldPos = cocosUtil.convertToWorldSpace(mapModel.player.node);\r\n        }\r\n        let pos = cocosUtil.convertToNodeSpace(this.node, startWorldPos);\r\n        this.node.setPosition(pos);\r\n\r\n        if (!direction) {\r\n            // 默认朝向玩家\r\n            direction = this.getFacePlayerDirection();\r\n        }\r\n        if (direction.x == 0 && direction.y == 0) {\r\n            direction.x = 1;\r\n        }\r\n        this.direction = direction.clone().normalize();\r\n\r\n        let row = designManager.getRowById(constants.tableName.bullet, id);\r\n        this.row = row;\r\n        this.speed = row.speed;\r\n        this.atk = row.atk;\r\n\r\n        let angle = utilTools.radianToAngle(Math.atan2(this.direction.y, this.direction.x));\r\n        this.node.angle = angle;\r\n\r\n        this.timeCount = 0;\r\n        this.isFollow = false;\r\n        this.contactItemArr = [];\r\n        this.isDestroyInNoShow = false;\r\n        Tween.stopAllByTarget(this.node);\r\n        this.unscheduleAllCallbacks();\r\n\r\n        try {\r\n            let bulletUtilStr = this.node.name;\r\n            switch (this.node.name) {\r\n                case \"bullet1011\":\r\n                case \"bullet1012\":\r\n                    bulletUtilStr = \"bullet1011\";\r\n                    break;\r\n                case \"bullet1021\":\r\n                case \"bullet1022\":\r\n                    bulletUtilStr = \"bullet1021\";\r\n                    break;\r\n                case \"bullet1041\":\r\n                case \"bullet1043\":\r\n                    bulletUtilStr = \"bullet1041\";\r\n                    break;\r\n                case \"bullet1042\":\r\n                case \"bullet1044\":\r\n                    bulletUtilStr = \"bullet1042\";\r\n                    break;\r\n                case \"bullet1051\":\r\n                case \"bullet1053\":\r\n                    bulletUtilStr = \"bullet1051\";\r\n                    break;\r\n                case \"bullet1052\":\r\n                case \"bullet1054\":\r\n                    bulletUtilStr = \"bullet1052\";\r\n                    break;\r\n                case \"bullet1061\":\r\n                case \"bullet1062\":\r\n                    bulletUtilStr = \"bullet1061\";\r\n                    break;\r\n                case \"bullet1081\":\r\n                case \"bullet1082\":\r\n                    bulletUtilStr = \"bullet1081\";\r\n                    break;\r\n                case \"bullet1091\":\r\n                case \"bullet1092\":\r\n                    bulletUtilStr = \"bullet1091\";\r\n                    break;\r\n                case \"bullet1101\":\r\n                case \"bullet1104\":\r\n                    bulletUtilStr = \"bullet1101\";\r\n                    break;\r\n                case \"bullet1102\":\r\n                case \"bullet1105\":\r\n                    bulletUtilStr = \"bullet1102\";\r\n                    break;\r\n                case \"bullet1103\":\r\n                case \"bullet1106\":\r\n                    bulletUtilStr = \"bullet1103\";\r\n                    break;\r\n                case \"bullet1111\":\r\n                case \"bullet1113\":\r\n                    bulletUtilStr = \"bullet1111\";\r\n                    break;\r\n                case \"bullet1112\":\r\n                case \"bullet1114\":\r\n                    bulletUtilStr = \"bullet1112\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            let bulletUtil = cocosUtil.addComponentOnce(this, bulletUtilStr); // 非特殊子弹，这里就会捕获错误，不执行后续\r\n            bulletUtil.unscheduleAllCallbacks();\r\n            this.bulletUtil = bulletUtil;\r\n            // @ts-ignore\r\n            bulletUtil.init(this);\r\n            if (bulletUtil.contactBulletTime && bulletUtil.contactBulletTime> 0) {\r\n                this.extraObj[\"speedCutDuration\"] = bulletUtil.contactBulletTime;\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getFacePlayerDirection() {\r\n        let pos = this.node.getPosition();\r\n        return mapModel.player.node.getPosition().subtract(pos);\r\n    }\r\n\r\n    setDirection(direction: Vec3) {\r\n        this.direction = direction.normalize();\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        let contactItem = null;\r\n        if (otherCollider.group == physicsGroup.MONSTER && otherCollider.tag == 0) {\r\n            contactItem = otherCollider.getComponent(Monster);\r\n        } else if (otherCollider.group == physicsGroup.PLAYER) {\r\n            contactItem = mapModel.player;\r\n        }\r\n        if (contactItem) {\r\n            // 子弹打到敌方\r\n            if (this.contactEnmeyCanHide()) {\r\n                this.recycleSelf();\r\n            } else {\r\n                if (this.contactItemArr.indexOf(contactItem) == -1) {\r\n                    this.contactItemArr.push(contactItem);\r\n                    contactItem.contactBulletTime = 0;\r\n                }\r\n            }\r\n            if (this.bulletUtil && this.bulletUtil.contactBegin) {\r\n                this.bulletUtil.contactBegin(otherCollider.node);\r\n            }\r\n            let dam = this.atk;\r\n            if (this.extraObj && this.extraObj.atkPercentAdd > 0) {\r\n                dam = dam * (1 + this.extraObj.atkPercentAdd);\r\n                dam = Math.ceil(dam);\r\n            }\r\n            contactItem.hitWithDam(dam, this.getShineColor(), this.extraObj);\r\n            audioManager.playEffect(this.row.audio);\r\n        }\r\n\r\n        // 玩家子弹打敌方子弹\r\n        if (otherCollider.group == physicsGroup.MONSTER_BULLET) {\r\n            let bullet = otherCollider.getComponent(Bullet);\r\n            if (bullet.contactEnmeyCanHide()) {\r\n                bullet.recycleSelf();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    contactEnd(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        let contactItem = null;\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            contactItem = otherCollider.getComponent(Monster);\r\n        } else if (otherCollider.group == physicsGroup.PLAYER) {\r\n            contactItem = mapModel.player;\r\n        }\r\n        if (contactItem) {\r\n            let index = this.contactItemArr.indexOf(contactItem);\r\n            if (index != -1) {\r\n                this.contactItemArr.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    getShineColor() {\r\n        if (this.bulletUtil && this.bulletUtil.shineColor) {\r\n            return this.bulletUtil.shineColor;\r\n        }\r\n    }\r\n\r\n    // 碰到敌人是否消失\r\n    contactEnmeyCanHide() {\r\n        if (this.bulletUtil && this.bulletUtil.contactNotHide) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // 飞到屏幕外，是否可以销毁\r\n    outScreenCanRecyle() {\r\n        if (this.bulletUtil && this.bulletUtil.outScreenNotRecycle) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.bulletSystem.recycleBulletNode(this.node);\r\n        if (this.bulletUtil && this.bulletUtil.recycleSelfEnd) {\r\n            this.bulletUtil.recycleSelfEnd();\r\n        }\r\n        Tween.stopAllByTarget(this.node);\r\n        Tween.stopAllByTarget(this.bodyNode);\r\n        this.unscheduleAllCallbacks();\r\n        if (this.bulletUtil) {\r\n            this.bulletUtil.unscheduleAllCallbacks();\r\n        }\r\n\r\n    }\r\n\r\n    getFollowTargetPos() {\r\n        if (this.bulletUtil && this.bulletUtil.targetPos) {\r\n            return cocosUtil.vec3CopyVal(this.vec3Obj.targetPos, this.bulletUtil.targetPos);\r\n        }\r\n        // 默认跟踪玩家\r\n        return cocosUtil.vec3CopyVal(this.vec3Obj.targetPos, mapModel.player.node.position);\r\n    }\r\n\r\n    update(dt: number) {\r\n        let canMove = true;\r\n        if (this.bulletUtil && this.bulletUtil.moveStop) {\r\n            canMove = false;\r\n        }\r\n        if (this.speed <= 0) {\r\n            canMove = false;\r\n        }\r\n        if (canMove) {\r\n            let dis = this.speed * dt;\r\n            let pos = this.node.position;\r\n            if (this.isFollow) {\r\n                // 根据转速，慢慢调整角度\r\n                let targetPos = this.getFollowTargetPos();\r\n                let direction = targetPos.subtract(pos).normalize();\r\n                let radian1 = Math.atan2(direction.y, direction.x);\r\n                if (radian1 < 0) {\r\n                    radian1 += Math.PI * 2;\r\n                }\r\n                let radian2 = Math.atan2(this.direction.y, this.direction.x);\r\n                if (radian2 < 0) {\r\n                    radian2 += Math.PI * 2;\r\n                }\r\n                let dr = this.rotateSpeed * dt;\r\n                let maxDr = Math.abs(radian1 - radian2);\r\n                if (dr > maxDr) {\r\n                    dr = maxDr;\r\n                }\r\n                if (radian1 > radian2) {\r\n                    if (radian1 - radian2 > Math.PI) {\r\n                        dr = -dr;\r\n                    }\r\n                } else {\r\n                    if (radian2 - radian1 < Math.PI) {\r\n                        dr = -dr;\r\n                    }\r\n                }\r\n                this.direction = Vec3.rotateZ(this.vec3Obj.outVec3, this.direction, Vec3.ZERO, dr);\r\n                let angle = utilTools.radianToAngle(Math.atan2(this.direction.y, this.direction.x));\r\n                this.node.angle = angle;\r\n            } else {\r\n                let angle = utilTools.radianToAngle(Math.atan2(this.direction.y, this.direction.x));\r\n                this.node.angle = angle;\r\n            }\r\n\r\n            let lastDirection = null;\r\n            if (this.bulletUtil && this.bulletUtil.targetPos && this.bulletUtil.arriveTargetPos) {\r\n                // 需要判断是否到达目的地\r\n                let targetPos = this.getFollowTargetPos();\r\n                lastDirection = targetPos.subtract(pos);\r\n            }\r\n\r\n            pos.add(cocosUtil.vec3CopyVal(this.vec3Obj.direction, this.direction).multiplyScalar(dis));\r\n            this.node.position = pos;\r\n\r\n            if (lastDirection) {\r\n                let targetPos = this.getFollowTargetPos();\r\n                let afterDirection = targetPos.subtract(pos);\r\n                let afterAngle = utilTools.radianToAngle(Vec2.angle(lastDirection, afterDirection));\r\n                if (afterAngle > 90) {\r\n                    // 到达目的地\r\n                    this.bulletUtil.arriveTargetPos();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.contactItemArr.length > 0) {\r\n            utilTools.forArr(this.contactItemArr, (contactItem: any) => {\r\n                contactItem.contactBulletTime += dt;\r\n                let timeGap = 0.5;\r\n                if (this.bulletUtil && this.bulletUtil.contactBulletTime > 0) {\r\n                    timeGap = this.bulletUtil.contactBulletTime;\r\n                }\r\n                if (contactItem.contactBulletTime >= timeGap) {\r\n                    contactItem.contactBulletTime = 0;\r\n                    contactItem.hitWithDam(this.atk, this.getShineColor(), this.extraObj);\r\n                    audioManager.playEffect(this.row.audio);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.timeCount += dt;\r\n        if (this.timeCount >= 2 && this.outScreenCanRecyle() && !mapModel.isInScreenVisible(this.node)) {\r\n            this.recycleSelf();\r\n        }\r\n    }\r\n}\r\n\r\n","import { Component, tween, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-锤子\r\n@ccclass('bullet1011')\r\nexport class bullet1011 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 重力加速度\r\n    g: number = -800;\r\n    // 初速度\r\n    v: number = 800;\r\n\r\n    vx: number = 0;\r\n    vy: number = 0;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        tween(this.node).by(1, { angle: 360 }).repeatForever().start();\r\n\r\n        // 抛射角度\r\n        let floatRadian = Math.PI / 15;\r\n        let radian = utilTools.getFloatValue(Math.PI / 2 - floatRadian, Math.PI / 2 + floatRadian);\r\n\r\n        this.vx = this.v * Math.cos(radian);\r\n        this.vy = this.v * Math.sin(radian);\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        pos.x += this.vx * dt;\r\n        pos.y += this.vy * dt;\r\n        this.vy += this.g * dt;\r\n        this.node.setPosition(pos);\r\n        if (!mapModel.isInScreenVisible(this.node)) {\r\n            this.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj)) {\r\n            this.bullet.extraObj.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 炮弹巨人-跟踪子弹\r\n@ccclass('bullet10170')\r\nexport class bullet10170 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.rotateSpeed = Math.PI / 4 + Math.random() * Math.PI / 2;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = true;\r\n        }, 0.4 + Math.random() * 0.2);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = false;\r\n        }, 2.5 + Math.random() * 0.5);\r\n\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 显示爆炸特效\r\n        mapModel.hintSystem.addHint(HintNames.hit2, cocosUtil.convertToWorldSpace(this.bullet.node));\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪-光波\r\n@ccclass('bullet10180')\r\nexport class bullet10180 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪-水滴\r\n@ccclass('bullet10190')\r\nexport class bullet10190 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        let bulletId = this.bullet.extraObj;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n            // 变成泥浆\r\n            mapModel.bulletSystem.addBullet(bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.8);\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Color, Component, UIOpacity, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪-泥浆\r\n@ccclass('bullet10200')\r\nexport class bullet10200 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    contactBulletTime: number = 1;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    shineColor: Color = \"#2AA32A\".parseColor();\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n        this.node.angle = 0;\r\n\r\n        this.animationCtrl.playAnimation(\"ani\", true);\r\n        this.getComponent(UIOpacity).opacity = 255;\r\n        this.node.scale = v3(1, 1, 1);\r\n        let scale = this.bullet.extraObj;\r\n        if (scale > 0) {\r\n            this.node.scale = v3(scale, scale, 1);\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            cocosUtil.tweenFadeOut(this.node, 1, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, 2);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, v3, Vec3, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-转盘\r\n@ccclass('bullet1021')\r\nexport class bullet1021 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    direction: Vec3;\r\n\r\n    // 转速\r\n    speed: number = -Math.PI * 1.5;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        let direction = this.bullet.extraObj.direction;\r\n        this.direction = direction;\r\n\r\n        let scale = this.getScale();\r\n        this.node.setScale(v3(scale, scale, 1));\r\n        tween(this.node).by(0.6, { angle: -360 }).repeatForever().start();\r\n\r\n        this.show();\r\n\r\n        this.bullet.extraObj.endCb(this.bullet);\r\n    }\r\n\r\n    getScale() {\r\n        let scale = 1 + mapModel.skillSystem.getSkill2RangeAddScale();\r\n        return scale;\r\n    }\r\n\r\n    hide(isAtOnce: boolean = false) {\r\n        if (isAtOnce) {\r\n            this.bullet.recycleSelf();\r\n            return;\r\n        }\r\n        cocosUtil.tweenScaleOut(this.node, 0.5, () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n    }\r\n\r\n    show() {\r\n        let scale = this.getScale();\r\n        this.node.setScale(v3(0, 0, 0));\r\n        this.node.active = true;\r\n        tween(this.node).to(0.5, { scale: v3(scale, scale, 1) }).start();\r\n    }\r\n\r\n    update(dt: number) {\r\n        // 围绕玩家进行旋转\r\n        let radian = this.speed * dt;\r\n        Vec3.rotateZ(this.direction, this.direction, Vec3.ZERO, radian);\r\n        let playerPos = mapModel.player.node.position.clone();\r\n        playerPos.add(this.direction);\r\n        this.node.position = playerPos;\r\n    }\r\n}\r\n\r\n","import { Component, tween, UITransform, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-飞镖\r\n@ccclass('bullet1031')\r\nexport class bullet1031 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    moveSpeed: number;\r\n    yinTimeCount: number;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveSpeed = 1200;\r\n        this.yinTimeCount = 0;\r\n\r\n        tween(this.node).by(0.2, { angle: -360 }).repeatForever().start();\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        this.moveSpeed -= 30;\r\n        let moveDis = this.moveSpeed * dt;\r\n        let direction = this.bullet.direction.clone().multiplyScalar(moveDis);\r\n        pos.add(direction);\r\n        this.node.setPosition(pos);\r\n\r\n        this.yinTimeCount += dt;\r\n        if (this.yinTimeCount > 0.2) {\r\n            this.yinTimeCount = 0;\r\n            let tf = this.bullet.bodyNode.getComponent(UITransform);\r\n            let extraObj = {\r\n                width: tf.width,\r\n                height: tf.height,\r\n            };\r\n            mapModel.hintSystem.addHint(HintNames.feiBiao, cocosUtil.convertToWorldSpace(this.node), this.node.angle, extraObj);\r\n        }\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj)) {\r\n            this.bullet.extraObj.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-油桶\r\n@ccclass('bullet1041')\r\nexport class bullet1041 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.node.angle = 0;\r\n\r\n        tween(this.node).by(0.6, { angle: -360 }).repeatForever().start();\r\n        let targetPos = this.bullet.extraObj.targetPos;\r\n        tween(this.node).to(0.6, { position: targetPos }, { easing: \"quadOut\" }).call(() => {\r\n            this.bullet.recycleSelf();\r\n            // 燃烧火焰\r\n            mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node), null, this.bullet.extraObj.time);\r\n        }).start();\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Color, Component, tween, v3, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-油桶-火焰\r\n@ccclass('bullet1042')\r\nexport class bullet1042 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 0.5;\r\n\r\n    shineColor: Color = \"#FF1313\".parseColor();\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.node.setScale(v3(0.3, 0.3, 1));\r\n        let scale = this.getScale();\r\n        tween(this.node).to(0.06, { scale: v3(scale, scale, 1) }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            tween(this.node).to(0.15, { scale: v3(0, 0, 1) }).call(() => {\r\n                this.bullet.recycleSelf();\r\n            }).start();\r\n        }, this.bullet.extraObj);\r\n\r\n    }\r\n\r\n    getScale() {\r\n        let scale = 1 + mapModel.skillSystem.getSkill2RangeAddScale();\r\n        return scale;\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-导弹\r\n@ccclass('bullet1051')\r\nexport class bullet1051 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    hasScheduled: boolean;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.hasScheduled = false;\r\n\r\n        this.bullet.speed = this.bullet.speed * (1 + mapModel.skillSystem.getSkill2BulletSpeedAddPercent());\r\n    }\r\n\r\n    contactBegin() {\r\n        if (this.hasScheduled) {\r\n            return;\r\n        }\r\n        this.hasScheduled = true;\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n            // 爆炸\r\n            mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.15);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-导弹-爆炸\r\n@ccclass('bullet1052')\r\nexport class bullet1052 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 保证只算一次伤害\r\n    contactBulletTime: number = 6;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        let atk = this.bullet.atk * (1 + mapModel.skillSystem.getSkill2AtkAddPercent());\r\n        this.bullet.atk = Math.floor(atk);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-科技球\r\n@ccclass('bullet1061')\r\nexport class bullet1061 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    isOutScreenReflex: boolean;\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.isOutScreenReflex = false;\r\n\r\n        cocosUtil.tweenScaleIn(this.node, 0.5);\r\n\r\n        tween(this.node).by(0.6, { angle: 360 }).repeatForever().start();\r\n        this.scheduleOnce(() => {\r\n            cocosUtil.tweenScaleOut(this.node, 0.5, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, this.bullet.extraObj.time);\r\n\r\n    }\r\n\r\n    contactBegin() {\r\n        if (this.isOutScreenReflex) {\r\n            return;\r\n        }\r\n        // 打到怪物，反方向随机角度\r\n        let direction = this.bullet.direction.negative();\r\n        let radian = utilTools.angleToRadian(60);\r\n        radian = utilTools.getFloatValue(-radian, radian);\r\n        Vec3.rotateZ(direction, direction, Vec3.ZERO, radian);\r\n        this.bullet.setDirection(direction);\r\n    }\r\n\r\n    mirrorReflex(isX: boolean, force: boolean = false) {\r\n        if (this.isOutScreenReflex && !force) {\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = true;\r\n        // 碰到屏幕边缘，做镜面反射\r\n        if (isX) {\r\n            this.bullet.direction.x *= -1;\r\n            return;\r\n        }\r\n        this.bullet.direction.y *= -1;\r\n    }\r\n\r\n    outScreenX(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.x - pos.x) >= mapModel.visibleHalfSize.width;\r\n    }\r\n\r\n    outScreenY(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.y - pos.y) >= mapModel.visibleHalfSize.height;\r\n    }\r\n\r\n    outWallX(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.x >= mapModel.mapSystem.wallRightVal || pos.x <= mapModel.mapSystem.wallLeftVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    outWallY(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.y >= mapModel.mapSystem.wallTopVal || pos.y <= mapModel.mapSystem.wallBottomVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    update(dt: number) {\r\n        let playerPos = mapModel.player.node.position;\r\n        let pos = this.node.position;\r\n        if (this.outScreenX(pos, playerPos)) {\r\n            this.mirrorReflex(true);\r\n            return;\r\n        }\r\n        if (this.outWallX(pos)) {\r\n            this.mirrorReflex(true, true);\r\n            return;\r\n        }\r\n        if (this.outScreenY(pos, playerPos)) {\r\n            this.mirrorReflex(false);\r\n            return;\r\n        }\r\n        if (this.outWallY(pos)) {\r\n            this.mirrorReflex(false, true);\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = false;\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj.invokeClass)) {\r\n            this.bullet.extraObj.invokeClass.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Color, Component, find, Node, tween, Tween, UIOpacity, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-力场\r\n@ccclass('bullet1071')\r\nexport class bullet1071 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 1;\r\n\r\n    lv: number;\r\n    shineColor: Color;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        let lv = this.bullet.extraObj.lv;\r\n        this.lv = lv;\r\n\r\n        let frameColor = \"#22D600\".parseColor();\r\n        if (lv == constants.design.maxLv) {\r\n            frameColor = \"#FF00F5\".parseColor();\r\n        }\r\n        this.shineColor = frameColor;\r\n        this.initScale();\r\n\r\n        Tween.stopAllByTarget(this.bullet.bodyNode);\r\n        let uiOpacity = this.bullet.bodyNode.getComponent(UIOpacity);\r\n        uiOpacity.opacity = 0;\r\n        tween(uiOpacity).to(2, { opacity: 255 }).start();\r\n\r\n        cocosUtil.setRenderableColor(this.bullet.bodyNode, frameColor);\r\n        let frameLayer = find(\"frameLayer\", this.node);\r\n        let time = 0.8;\r\n        cocosUtil.setRenderableColor(frameLayer, frameColor);\r\n            Tween.stopAllByTarget(frameLayer);\r\n            this.scheduleOnce(() => {\r\n                tween(frameLayer).call(() => {\r\n                    frameLayer.getComponent(UIOpacity).opacity = 255;\r\n                    frameLayer.angle = Math.random() * 360;\r\n                }).to(1, { scale: v3(1, 1, 1) }, {\r\n                    onUpdate: (node: Node, ratio: number) => {\r\n                        frameLayer.getComponent(UIOpacity).opacity = 255 * (1- ratio*0.7);\r\n                    }\r\n                }).union().repeatForever().start();\r\n            });\r\n        \r\n        utilTools.forArr(frameLayer.children, (frameNode: Node, index: number) => {\r\n            frameNode.active = false;\r\n            cocosUtil.setRenderableColor(frameNode, frameColor);\r\n            Tween.stopAllByTarget(frameNode);\r\n            this.scheduleOnce(() => {\r\n                tween(frameNode).call(() => {\r\n                    frameNode.active = true;\r\n                    frameNode.scale = v3(0, 0, 1);\r\n                    frameNode.getComponent(UIOpacity).opacity = 255;\r\n                    frameNode.angle = Math.random() * 360;\r\n                }).to(time * 4, { scale: v3(0.8, 0.8, 1) }).to(time, { scale: v3(1, 1, 1) }, {\r\n                    onUpdate: (node: Node, ratio: number) => {\r\n                        frameNode.getComponent(UIOpacity).opacity = 255 * (1 - ratio);\r\n                    }\r\n                }).union().repeatForever().start();\r\n            }, index * time * 1.25);\r\n        });\r\n\r\n        this.bullet.extraObj.endCb(this);\r\n    }\r\n\r\n    initScale() {\r\n        let scale = 0.8 + this.lv * 0.4;\r\n        scale += mapModel.skillSystem.getSkill2RangeAddScale();\r\n        this.node.scale = v3(scale, scale, 1);\r\n    }\r\n\r\n    update() {\r\n        // 跟随玩家移动\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        this.node.setPosition(playerPos);\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        this.unscheduleAllCallbacks();\r\n        utilTools.forArr(find(\"frameLayer\", this.node).children, (frameNode: Node) => {\r\n            Tween.stopAllByTarget(frameNode);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-闪电\r\n@ccclass('bullet1081')\r\nexport class bullet1081 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-钻头\r\n@ccclass('bullet1091')\r\nexport class bullet1091 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    isOutScreenReflex: boolean;\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.isOutScreenReflex = false;\r\n\r\n        this.bullet.speed = this.bullet.speed * (1 + mapModel.skillSystem.getSkill2BulletSpeedAddPercent());\r\n        let atk = this.bullet.atk * (1 + mapModel.skillSystem.getSkill2AtkAddPercent());\r\n        this.bullet.atk = Math.floor(atk);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n        }, this.bullet.extraObj.time);\r\n\r\n    }\r\n\r\n    mirrorReflex(isX: boolean, force: boolean = false) {\r\n        if (this.isOutScreenReflex && !force) {\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = true;\r\n        // 碰到边缘，做镜面反射\r\n        if (isX) {\r\n            this.bullet.direction.x *= -1;\r\n            return;\r\n        }\r\n        this.bullet.direction.y *= -1;\r\n    }\r\n\r\n    outScreenX(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.x - pos.x) >= mapModel.visibleHalfSize.width;\r\n    }\r\n\r\n    outScreenY(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.y - pos.y) >= mapModel.visibleHalfSize.height;\r\n    }\r\n\r\n    outWallX(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.x >= mapModel.mapSystem.wallRightVal || pos.x <= mapModel.mapSystem.wallLeftVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    outWallY(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.y >= mapModel.mapSystem.wallTopVal || pos.y <= mapModel.mapSystem.wallBottomVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    update(dt: number) {\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n        if (this.outScreenX(pos, playerPos)) {\r\n            this.mirrorReflex(true);\r\n            return;\r\n        }\r\n        if (this.outWallX(pos)) {\r\n            this.mirrorReflex(true, true);\r\n            return;\r\n        }\r\n        if (this.outScreenY(pos, playerPos)) {\r\n            this.mirrorReflex(false);\r\n            return;\r\n        }\r\n        if (this.outWallY(pos)) {\r\n            this.mirrorReflex(false, true);\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = false;\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj.invokeClass)) {\r\n            this.bullet.extraObj.invokeClass.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, macro, tween, Tween, v3, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-轰炸机\r\n@ccclass('bullet1101')\r\nexport class bullet1101 extends Component {\r\n\r\n    bullet: Bullet;\r\n    hasTweenPlay: boolean = false;\r\n\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    // 轰炸机等级\r\n    lv: number;\r\n    targetDis: number = 260;\r\n\r\n    // 转速\r\n    radianSpeed: number;\r\n    radian: number;\r\n\r\n    shotTimeCount: number;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.radianSpeed = 0;\r\n\r\n        this.setUpDownTween(true);\r\n\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        playerPos.x += 80;\r\n        playerPos.y += 80;\r\n        this.node.setPosition(playerPos);\r\n\r\n        this.lv = this.bullet.extraObj.lv;\r\n        this.bullet.extraObj.endCb(this);\r\n    }\r\n\r\n    setUpDownTween(isOpen: boolean) {\r\n        if (isOpen) {\r\n            if (!this.hasTweenPlay) {\r\n                this.hasTweenPlay = true;\r\n                tween(this.node).by(1, { position: v3(0, 20, 0) }).by(1, { position: v3(0, -20, 0) }).union().repeatForever().start();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.hasTweenPlay) {\r\n            this.hasTweenPlay = false;\r\n            Tween.stopAllByTarget(this.node);\r\n        }\r\n    }\r\n\r\n    startShot(duration: number) {\r\n        this.radianSpeed = Math.PI * 2 / duration;\r\n        // 随机一个开始角度\r\n        this.radian = Math.random() * Math.PI * 2;\r\n        // 每隔一定时间发射一枚子弹\r\n        this.schedule(this.shot, 0.1 - this.lv * 0.01, macro.REPEAT_FOREVER);\r\n        // duration后，停止轰炸\r\n        this.scheduleOnce(() => {\r\n            this.radianSpeed = 0;\r\n            this.unschedule(this.shot);\r\n        }, duration);\r\n    }\r\n\r\n    shot() {\r\n        let pos = v3(this.targetDis + (Math.random() - 0.5) * 50, 0, 0);\r\n        Vec3.rotateZ(pos, pos, Vec3.ZERO, this.radian + (Math.random() - 0.5) * utilTools.angleToRadian(20));\r\n        let targetPos = mapModel.player.node.getPosition().add(pos);\r\n\r\n        // 发射角度\r\n        let direction = targetPos.clone().subtract(this.node.getPosition());\r\n        let radian = (Math.random() - 0.5) * utilTools.angleToRadian(180);\r\n        Vec3.rotateZ(direction, direction, Vec3.ZERO, radian);\r\n        mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node), direction, targetPos);\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        if (pos.x > playerPos.x) {\r\n            this.node.scale = v3(-1, 1, 1);\r\n        } else {\r\n            this.node.scale = v3(1, 1, 1);\r\n        }\r\n\r\n        // 目标位置\r\n        playerPos.x += 80;\r\n        playerPos.y += 80;\r\n\r\n        let speed = 0;\r\n        let dis = Vec2.distance(pos, playerPos);\r\n        if (dis > 5) {\r\n            speed = dis * 2;\r\n            let maxSpeed = mapModel.player.getMoveSpeed() * 1.5;\r\n            if (speed > maxSpeed) {\r\n                speed = maxSpeed;\r\n            }\r\n        }\r\n        if (this.hasTweenPlay && dis <= 30) {\r\n            speed = 0;\r\n        }\r\n        if (speed > 0) {\r\n            this.setUpDownTween(false);\r\n            let direction = playerPos.subtract(pos).normalize();\r\n            direction.multiplyScalar(dt * speed);\r\n            pos.add(direction);\r\n            this.node.setPosition(pos);\r\n        } else {\r\n            this.setUpDownTween(true);\r\n        }\r\n\r\n        if (this.radianSpeed > 0) {\r\n            this.radian -= this.radianSpeed * dt;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, macro, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-轰炸机-子弹\r\n@ccclass('bullet1102')\r\nexport class bullet1102 extends Component {\r\n\r\n    bullet: Bullet;\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    targetPos: Vec3;\r\n    hint: any;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.targetPos = this.bullet.extraObj;\r\n        this.hint = null;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = true;\r\n            this.bullet.rotateSpeed = Math.PI * 6;\r\n        }, 0.02 + Math.random() * 0.02);\r\n\r\n        mapModel.hintSystem.addHint(HintNames.targetPos2, cocosUtil.convertToWorldSpaceWithPos(this.node, this.targetPos), 0, (hint: any) => {\r\n            if (!cocosUtil.isValid(this) || !this.node.activeInHierarchy) {\r\n                hint.recycleSelf();\r\n                return;\r\n            }\r\n            this.hint = hint;\r\n        });\r\n\r\n        this.schedule((dt: number) => {\r\n            let speed = this.bullet.speed;\r\n            speed -= 20;\r\n            if (speed < 200) {\r\n                speed = 200;\r\n            }\r\n            this.bullet.speed = speed;\r\n            if (Vec2.distance(this.targetPos, this.node.getPosition()) <= 100) {\r\n                this.arriveTargetPos();\r\n            }\r\n        }, 0.1, macro.REPEAT_FOREVER);\r\n    }\r\n\r\n    arriveTargetPos() {\r\n        this.bullet.recycleSelf();\r\n        if (cocosUtil.isValid(this.hint)) {\r\n            this.hint.hint.recycleSelf();\r\n        }\r\n        // 爆炸\r\n        mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-轰炸机-子弹爆炸\r\n@ccclass('bullet1103')\r\nexport class bullet1103 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 保证只算一次伤害\r\n    contactBulletTime: number = 6;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, macro, tween, Tween, v3, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nimport { Node } from 'cc';\r\nimport { find } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-炮塔\r\n@ccclass('bullet1111')\r\nexport class bullet1111 extends Component {\r\n\r\n    bullet: Bullet;\r\n    hasTweenPlay: boolean = false;\r\n\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    // 炮塔等级\r\n    lv: number;\r\n    targetDis: number = 260;\r\n\r\n    // 转速\r\n    radianSpeed: number;\r\n    radian: number;\r\n\r\n    shotTimeCount: number;\r\n\r\n    timeCount: number; \r\n    atkCd: number; //攻击间隔\r\n\r\n    direction: Vec3;\r\n    targetNode: Node;\r\n\r\n    fireNode: Node;\r\n\r\n    fireAtk: number; // 炮塔发射子弹的攻击力\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.fireNode = find(\"fire\", this.node);\r\n\r\n        this.node.angle = 0;\r\n        this.radianSpeed = 0;\r\n\r\n        this.timeCount = 0;\r\n        cocosUtil.tweenScaleIn(this.node, 0.5);\r\n\r\n        this.setUpDownTween(true);\r\n\r\n        this.lv = this.bullet.extraObj.lv;\r\n        this.fireAtk = this.bullet.extraObj.atk;\r\n\r\n        this.scheduleOnce(() => {\r\n            cocosUtil.tweenScaleOut(this.node, 0.5, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, this.bullet.extraObj.time);\r\n\r\n        this.schedule(()=>{\r\n            this.shot();\r\n        }, this.bullet.extraObj.atkCd,macro.REPEAT_FOREVER, 0);\r\n    }\r\n\r\n    setUpDownTween(isOpen: boolean) {\r\n        if (isOpen) {\r\n            if (!this.hasTweenPlay) {\r\n                this.hasTweenPlay = true;\r\n                tween(this.node).to(0.3, { scale: v3(0.9, 1.1, 1) }).to(0.5, { scale: v3(1.2, 0.89, 1) }).union().repeatForever().start();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.hasTweenPlay) {\r\n            this.hasTweenPlay = false;\r\n            Tween.stopAllByTarget(this.node);\r\n        }\r\n    }\r\n\r\n    shot() {\r\n        let extraObj = {\r\n            atk: this.fireAtk,\r\n        }\r\n        mapModel.bulletSystem.addBullet(this.bullet.id+1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.fireNode), this.direction, extraObj);\r\n    }\r\n\r\n    update(dt:number){\r\n        // 找出距离最近的怪物或木箱\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode(this.node.position);\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        this.targetNode = targetNode;\r\n        let pos1 = cocosUtil.convertToWorldSpace(this.node);\r\n        let pos2 = cocosUtil.convertToWorldSpace(targetNode);\r\n        // // 左右情况  会导致上面tween失效\r\n        // let scale = this.node.getScale();\r\n        // if (pos1.x <= pos2.x) {\r\n        //     this.node.setScale(v3(Math.abs(scale.x), scale.y, scale.z));\r\n        //     this.leftOrRight = 1;\r\n        // } else {\r\n        //     this.node.setScale(v3(-Math.abs(scale.x), scale.y, scale.z));\r\n        //     this.leftOrRight = -1;\r\n        // }\r\n\r\n        // 瞄准最近怪物\r\n        pos2.subtract(pos1);\r\n        this.direction = pos2;\r\n        let angle = utilTools.radianToAngle(Math.atan2(pos2.y, pos2.x));\r\n        this.node.angle = 0;\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj.invokeClass)) {\r\n            this.bullet.extraObj.invokeClass.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-炮塔-子弹-普通\r\n@ccclass('bullet1112')\r\nexport class bullet1112 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet){\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.atk = this.bullet.extraObj.atk;\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, Tween, tween, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-大闪电球分出来的小闪电球\r\n@ccclass('bullet12')\r\nexport class bullet12 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        tween(this.bullet.node).by(4, { angle: -360 }).repeatForever().start();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, Vec2, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-静态扳手\r\n@ccclass('bullet13')\r\nexport class bullet13 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n\r\n    // 电极扳手\r\n    bulletId: number = 1010;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n\r\n        this.bullet.node.angle = 0;\r\n\r\n        let targetPos = this.bullet.extraObj;\r\n        let dis = Vec2.distance(this.bullet.node.getPosition(), targetPos);\r\n        let time = dis / this.bullet.speed;\r\n\r\n        tween(this.bullet.node).by(time, { angle: 360 }).start();\r\n        tween(this.bullet.node).to(time, { position: targetPos }).call(() => {\r\n            this.bullet.recycleSelf();\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.bullet.node));\r\n        }).start();\r\n\r\n        mapModel.hintSystem.addHint(HintNames.targetPos, cocosUtil.convertToWorldSpaceWithPos(this.bullet.node, targetPos), 0, time);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, Tween, UIOpacity, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-电极扳手\r\n@ccclass('bullet14')\r\nexport class bullet14 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n    contactNotHide: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n        this.bullet.node.angle = 0;\r\n\r\n        let uiOpacity = this.bullet.getComponent(UIOpacity);\r\n        if (uiOpacity) {\r\n            uiOpacity.opacity = 255;\r\n        }\r\n\r\n        if (!this.aniCtrl) {\r\n            this.aniCtrl = this.bullet.addComponent(AnimationCtrl);\r\n        }\r\n        this.aniCtrl.playAnimation(\"bashou\", true, () => {\r\n            this.startColliderAni();\r\n        });\r\n        this.startColliderAni();\r\n\r\n        this.scheduleOnce(() => {\r\n            cocosUtil.tweenFadeOut(this.bullet.node, 1, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, 2.6);\r\n\r\n    }\r\n\r\n    startColliderAni() {\r\n        Tween.stopAllByTarget(this.bullet.collider.size);\r\n        Tween.stopAllByTarget(this.bullet.collider.offset);\r\n        this.bullet.collider.size.width = 80;\r\n        this.bullet.collider.size.height = 80;\r\n        this.bullet.collider.offset.y = 0;\r\n        tween(this.bullet.collider.size).delay(0.55).to(0.05, { width: 500, height: 180 }).delay(0.3).to(0.05, { width: 80, height: 80 }).start();\r\n        tween(this.bullet.collider.offset).delay(0.55).to(0.05, { y: -30 }).delay(0.3).to(0.05, { y: 0 }).start();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 葱-满级-甩出的子弹\r\n@ccclass('bullet16')\r\nexport class bullet16 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 如来神掌\r\n@ccclass('bullet17')\r\nexport class bullet17 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = true;\r\n    contactNotHide: boolean = true;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.collider.enabled = false;\r\n        this.scheduleOnce(() => {\r\n            this.bullet.collider.enabled = true;\r\n        }, 0.2);\r\n        this.bullet.node.angle = this.bullet.extraObj;\r\n        let aniCtrl = this.addComponent(AnimationCtrl);\r\n        aniCtrl.playAnimation(\"2\", false, () => {\r\n            mapModel.bulletSystem.recycleBulletNode(this.node);\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-锤子-普通\r\n@ccclass('bullet18')\r\nexport class bullet18 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n    contactNotHide: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n        this.bullet.node.angle = 0;\r\n\r\n        this.aniCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.aniCtrl.playAnimation(\"3\", false, () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-锤子-高级\r\n@ccclass('bullet19')\r\nexport class bullet19 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n    contactNotHide: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n        this.bullet.node.angle = 0;\r\n        this.bullet.collider.enabled = false;\r\n\r\n        let scale = 1;\r\n        if (this.bullet.extraObj && this.bullet.extraObj.scale > 0) {\r\n            scale = this.bullet.extraObj.scale;\r\n        }\r\n        this.node.setScale(v3(scale, scale, 1));\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.collider.enabled = true;\r\n        }, 0.1);\r\n\r\n        this.aniCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n        this.aniCtrl.playAnimation(\"4\", false, () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, find, UITransform, _decorator } from 'cc';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-激光枪-普通\r\n@ccclass('bullet20')\r\nexport class bullet20 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = true;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 1;\r\n\r\n    bodyNodeTf: UITransform;\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.bodyNodeTf = find(\"body\", this.node).getComponent(UITransform);\r\n\r\n        this.bullet.extraObj.invokeClass(bullet);\r\n    }\r\n\r\n    setBodyWidth(width: number) {\r\n        this.bodyNodeTf.width = width;\r\n        this.bullet.collider.size.width = width - 15;\r\n        this.bullet.collider.offset.x = (width - 15) * 0.5 - 13;\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, UITransform, _decorator } from 'cc';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-激光枪-高级\r\n@ccclass('bullet21')\r\nexport class bullet21 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = true;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 1;\r\n\r\n    bodyNodeTf: UITransform;\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.bodyNodeTf = find(\"body\", this.node).getComponent(UITransform);\r\n\r\n        this.bullet.extraObj.invokeClass(bullet);\r\n    }\r\n\r\n    setBodyWidth(width: number) {\r\n        this.bodyNodeTf.width = width;\r\n        this.bullet.collider.size.width = width - 15;\r\n        this.bullet.collider.offset.x = (width - 15) * 0.5 - 24;\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, Component, find, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-魔法弩\r\n@ccclass('bullet22')\r\nexport class bullet22 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        find(\"body\", this.node).getComponent(Animation).play(\"ani\");\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 狙击手-跟踪子弹\r\n@ccclass('bullet4')\r\nexport class bullet4 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.rotateSpeed = Math.PI;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = true;\r\n        }, 0.3);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = false;\r\n        }, 3);\r\n\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 显示爆炸特效\r\n        mapModel.hintSystem.addHint(HintNames.hit2, cocosUtil.convertToWorldSpace(this.bullet.node));\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, macro, tween, UIOpacity, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 狙击手-大子弹\r\n@ccclass('bullet5')\r\nexport class bullet5 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    moveStop: boolean = false;\r\n\r\n    direction1: Vec3;\r\n    direction2: Vec3;\r\n\r\n    bulletId = 1005;\r\n    // 小子弹产生的角度转速\r\n    turnSpeed: number = Math.PI / 3;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.node.setScale(v3(1, 1, 1));\r\n        let uiOpacity = this.bullet.getComponent(UIOpacity);\r\n        if (uiOpacity) {\r\n            uiOpacity.opacity = 255;\r\n        }\r\n        this.moveStop = true;\r\n\r\n        let dx = 200;\r\n        if (this.bullet.direction.x < 0) {\r\n            dx = -dx;\r\n        }\r\n        tween(this.bullet.node).by(0.3, { position: v3(dx, 0, 0) }, { easing: \"quadOut\" }).call(() => {\r\n            this.moveStop = false;\r\n            this.bullet.direction = mapModel.player.node.getPosition().subtract(this.bullet.node.getPosition()).normalize();\r\n            cocosUtil.tweenBlink(this.bullet.node, 0.5);\r\n            // 开始不断产生小子弹\r\n            this.direction1 = v3(0, 1, 0);\r\n            this.direction2 = v3(0, -1, 0);\r\n            this.schedule(this.createSmallBullet, 0.2, macro.REPEAT_FOREVER);\r\n        }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            this.unschedule(this.createSmallBullet);\r\n            cocosUtil.tweenScaleOut(this.bullet.node, 0.2, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, 6);\r\n\r\n    }\r\n\r\n    createSmallBullet(dt: number) {\r\n        let radian = dt * this.turnSpeed;\r\n        let startPos = cocosUtil.convertToWorldSpace(this.bullet.node);\r\n        Vec3.rotateZ(this.direction1, this.direction1, Vec3.ZERO, radian);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, startPos, this.direction1);\r\n\r\n        Vec3.rotateZ(this.direction2, this.direction2, Vec3.ZERO, radian);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, startPos, this.direction2);\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 电锯人-齿轮\r\n@ccclass('bullet6')\r\nexport class bullet6 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        tween(this.bullet.node).by(0.5, { angle: -360 }).repeatForever().start();\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, find, Node, UITransform, Vec2, _decorator } from 'cc';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-闪电\r\n@ccclass('bullet8')\r\nexport class bullet8 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    moveStop: boolean = false;\r\n\r\n    bodyNode: Node;\r\n    heightWidthRatio: number = 207 / 440;\r\n\r\n    // 最大跟踪长度\r\n    maxFollowDis: number = 600;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n\r\n        this.bodyNode = find(\"body\", this.bullet.node);\r\n\r\n        this.updateAngleAndDis();\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n        }, 2.3);\r\n\r\n    }\r\n\r\n    updateAngleAndDis() {\r\n        // 角度\r\n        let direction = this.bullet.getFacePlayerDirection();\r\n        let angle = utilTools.radianToAngle(Math.atan2(direction.y, direction.x));\r\n        this.bullet.node.angle = angle;\r\n\r\n        // 长度\r\n        let dis = Vec2.distance(this.bullet.node.getPosition(), mapModel.player.node.getPosition()) + 40;\r\n        if (dis > this.maxFollowDis) {\r\n            dis = this.maxFollowDis;\r\n        }\r\n        this.bodyNode.getComponent(UITransform).width = dis;\r\n        this.bodyNode.getComponent(UITransform).height = this.heightWidthRatio * dis;\r\n        this.bullet.getComponent(BoxCollider2D).offset.x = dis - 50;\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.updateAngleAndDis();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, v3, Vec2, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-大闪电球\r\n@ccclass('bullet9')\r\nexport class bullet9 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = false;\r\n    contactNotHide: boolean = true;\r\n\r\n    bulletId: number = 1008;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.timeCount = 0;\r\n\r\n        this.moveStop = true;\r\n\r\n        let time = 0.7;\r\n        this.bullet.node.setScale(v3(0.1, 0.1, 1));\r\n        tween(this.bullet.node).to(time, { scale: v3(1.5, 1.5, 1) }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.direction = this.bullet.getFacePlayerDirection().normalize();\r\n            let playerPos = mapModel.player.node.getPosition();\r\n            let dis = Vec2.distance(playerPos, this.bullet.node.getPosition());\r\n            let time = dis / this.bullet.speed;\r\n            tween(this.bullet.node).to(time, { position: playerPos }).call(() => {\r\n                this.bullet.recycleSelf();\r\n                // 生成一圈小子弹\r\n                let p = this.bullet.node.getPosition();\r\n                let arr = cocosUtil.getCircleDirectionArr(10);\r\n                p = cocosUtil.convertToWorldSpaceWithPos(this.bullet.node, p);\r\n                utilTools.forArr(arr, (direction: any) => {\r\n                    mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n                });\r\n                // 爆炸特效\r\n                mapModel.hintSystem.addHint(HintNames.boom1, p);\r\n            }).start();\r\n        }, time);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, Prefab, UITransform, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { physicsGroup } from '../../other/physicsGroup';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Bullet } from '../item/bullet/Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BulletSystem')\r\nexport class BulletSystem extends BaseLayer {\r\n\r\n    // 按照子弹id进行UI分层\r\n    idBulletLayerObj: any = {};\r\n\r\n    bulletLayer: Node;\r\n    bulletLayer2: Node;\r\n\r\n    waitAddArr: any = [];\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.bulletLayer = this.node;\r\n        this.bulletLayer2 = find(\"bulletLayer2\", this.node.parent);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getBulletLayerNameById(id: number) {\r\n        return \"bulletLayer\" + id;\r\n    }\r\n\r\n    getBulletLayerById(id: number) {\r\n        let row = designManager.getRowById(constants.tableName.bullet, id);\r\n        let bulletLayer = this.idBulletLayerObj[id];\r\n        if (!bulletLayer) {\r\n            bulletLayer = new Node(this.getBulletLayerNameById(id));\r\n            bulletLayer.addComponent(UITransform);\r\n            bulletLayer.setPosition(0, 0);\r\n\r\n            switch (row.prefab) {\r\n                case \"bullet1042\": // 油桶燃烧-普通\r\n                case \"bullet1044\": // 油桶燃烧-高级\r\n                case \"bullet1071\": // 力场\r\n                case \"bullet10200\": // 泥浆\r\n                    bulletLayer.parent = this.bulletLayer2;\r\n                    break;\r\n                default:\r\n                    bulletLayer.parent = this.bulletLayer;\r\n                    break;\r\n            }\r\n\r\n            this.idBulletLayerObj[id] = bulletLayer;\r\n\r\n            let nodePoolUtil = bulletLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(mapModel.bulletPrefabObj[row.prefab]);\r\n        }\r\n        return bulletLayer;\r\n    }\r\n\r\n    loadBulletPrefab(path: string) {\r\n        return new Promise((resolve, reject) => {\r\n            resManager.loadAsset(constants.bundles.bullet, path, Prefab, null, (err, prefab) => {\r\n                if (err) {\r\n                    reject();\r\n                    return;\r\n                }\r\n                resolve(prefab);\r\n            });\r\n        });\r\n    }\r\n\r\n    async addBullet(id: number, group: number, startWorldPos?: Vec3, direction?: Vec3, extraObj?: any) {\r\n        if (id==526) {\r\n            console.log(\"产生炮塔\")\r\n        }\r\n        let nodePoolUtil = this.getBulletLayerById(id).getComponent(NodePoolUtil);\r\n        let row = designManager.getRowById(constants.tableName.bullet, id);\r\n        let tmpFunc = () => {\r\n            if (!cocosUtil.isValid(nodePoolUtil)) {\r\n                return;\r\n            }\r\n            if (!nodePoolUtil.itemNode) {\r\n                nodePoolUtil.init(mapModel.bulletPrefabObj[row.prefab]);\r\n            }\r\n            if (!nodePoolUtil.node.activeInHierarchy) {\r\n                let bullet: any = {};\r\n                bullet.id = id;\r\n                bullet.group = group;\r\n                bullet.startWorldPos = startWorldPos;\r\n                bullet.direction = direction;\r\n                bullet.extraObj = extraObj;\r\n                this.waitAddArr.push(bullet);\r\n                return;\r\n            }\r\n            let bulletNode = nodePoolUtil.getNode();\r\n            let bullet: Bullet = cocosUtil.addComponentOnce(bulletNode, Bullet);\r\n            bullet.init(id, group, startWorldPos, direction, extraObj);\r\n\r\n        };\r\n\r\n        if (!mapModel.bulletPrefabObj[row.prefab]) {\r\n            let prefab: any = await this.loadBulletPrefab(row.prefab);\r\n            mapModel.bulletPrefabObj[row.prefab] = prefab;\r\n        }\r\n        tmpFunc();\r\n    }\r\n\r\n    // 遍历屏幕范围内的怪物子弹\r\n    forVisibleMonsterBullet(cb: (bullet: Bullet) => void) {\r\n        utilTools.forArr(this.node.children, (bulletLayer: Node) => {\r\n            utilTools.forArr(bulletLayer.children, (bulletNode: Node) => {\r\n                if (!bulletNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(bulletNode)) {\r\n                    return;\r\n                }\r\n                let bullet = bulletNode.getComponent(Bullet);\r\n                if (bullet.collider && bullet.collider.group == physicsGroup.MONSTER_BULLET) {\r\n                    cb(bullet);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    recycleAllBulletNodeById(id: number) {\r\n        let name = this.getBulletLayerNameById(id);\r\n        let bulletLayer = find(name, this.bulletLayer);\r\n        if (bulletLayer) {\r\n            utilTools.forArr(bulletLayer.children, (node: Node) => {\r\n                node.getComponent(Bullet).recycleSelf();\r\n            });\r\n        }\r\n        bulletLayer = find(name, this.bulletLayer2);\r\n        if (bulletLayer) {\r\n            utilTools.forArr(bulletLayer.children, (node: Node) => {\r\n                node.getComponent(Bullet).recycleSelf();\r\n            });\r\n        }\r\n    }\r\n\r\n    recycleBulletNode(bulletNode: Node) {\r\n        let bullet = bulletNode.getComponent(Bullet);\r\n        let nodePoolUtil = this.getBulletLayerById(bullet.id).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(bulletNode);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        let bullet = this.waitAddArr.shift();\r\n        if (bullet) {\r\n            this.addBullet(bullet.id, bullet.group, bullet.startWorldPos, bullet.direction, bullet.extraObj);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BuyLifeLayer')\r\nexport class BuyLifeLayer extends BaseLayer {\r\n\r\n    diamondNumNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.diamondNumNode = this.getNodeByPath(\"ui/btns/btnDiamond/info/num\");\r\n        this.isShowBannerAd = true;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        UserData.getInstance().mapData = null;\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setString(this.diamondNumNode, \"x\" + designManager.config.backLifeDiamond);\r\n    }\r\n\r\n    onClickBtnDiamond() {\r\n        UserData.getInstance().useBaoShi(-designManager.config.backLifeDiamond);\r\n        playerModel.skillLifeNum++;\r\n        this.closeLayer();\r\n        eventManager.send(msgac.mapRefreshSkill);\r\n    }\r\n\r\n    onClickBtnAd() {\r\n        sdkManager.openAd(\"购买复活\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillLifeNum++;\r\n                this.closeLayer();\r\n                eventManager.send(msgac.mapRefreshSkill);\r\n            }\r\n        });\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator, Node, instantiate, Label, PageView, Sprite, Layout, v3, Prefab, Button } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr, RPointMask } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { msgac } from '../../data/msgac';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 每个章节可领取的奖励数量\r\nconst MAX_RewardsNum = 3;\r\n\r\n@ccclass('ChapterLayer')\r\nexport class ChapterLayer extends BaseUILayer {\r\n    @property({ type: Node, tooltip: \"地图名字\" }) mapName: Node = null;\r\n    @property({ type: Node, tooltip: \"地图节点\" }) mapItem: Node = null;\r\n    @property({ type: Node, tooltip: \"pageView\" }) pageContent: Node = null;\r\n    @property({ type: Node, tooltip: \"选择按钮\" }) selectBtn: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"地图详情\" }) rewardLayer: Node = null;\r\n\r\n    @property({ type: PageView, tooltip: \"地图\" }) mapPage: PageView = null;\r\n\r\n    @property({ type: Prefab, tooltip: \"奖励节点\" }) rewardItem: Prefab = null;\r\n\r\n    @property({ type: Label, tooltip: \"提示1\" }) tishiLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"提示2\" }) tishiLabel2: Label = null;\r\n\r\n    @property({ type: Node, tooltip: \"单倍奖励\" }) btn1: Node = null;\r\n    @property({ type: Node, tooltip: \"双倍奖励\" }) btn2: Node = null;\r\n\r\n\r\n    _curPageId = 0\r\n    _curOpenLevel = 1\r\n    _curRewardList = []\r\n    _curIndex = 0\r\n\r\n    onLoad() {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        // let curMap = UserData.getInstance().getCurMap()\r\n        // this._curOpenLevel = curMap\r\n        // this.setSpriteFrame2(this.mapName, \"homeLayer/map_name\" + (mapData[curMap - 1].id), null, constants.bundles.wwqVec)\r\n        // this.mapName.localize(`name${mapData[curMap - 1].id}`,constants.catName.mapSystem);\r\n        for (let index = 0; index < MAX_RewardsNum*UserData.getInstance().openLevel; index++) {\r\n            let item = instantiate(this.mapItem)\r\n            this.pageContent.addChild(item)\r\n            // item.getChildByName(\"timeLabel\").getComponent(Label).string = (index * 5 + 5) + \"分钟\"\r\n            // item.getChildByName(\"chapterNum\").getComponent(Label).string = \"第\" + curMap + \"章\"\r\n            item.getChildByName(\"timeLabel\").localize({cat:constants.layers.ChapterLayer, key:\"timeLabel\", vars:[index%MAX_RewardsNum * 5 + 5]});\r\n            item.getChildByName(\"chapterNum\").localize({cat:constants.layers.ChapterLayer, key:\"chapterNum\", vars:[Math.floor(index/MAX_RewardsNum)+1]});\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.node.getChildByPath(\"Label\").localize(\"awardTxt\", constants.layers.ChapterLayer);\r\n        // let curMap = UserData.getInstance().getCurMap() - 1\r\n        // // this.setPage(curMap)\r\n        // let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        for(let i = 0; i < MAX_RewardsNum*UserData.getInstance().openLevel;i++){\r\n            let level = Math.floor(i/MAX_RewardsNum)+1;\r\n            let leveldata = UserData.getInstance().getLevelData(level)\r\n            // if (leveldata.Time >= ((i%MAX_RewardsNum+1) * 5 ) * 60) {\r\n                if (leveldata.ReceiveState[i%MAX_RewardsNum] == 0) {\r\n                    this.mapPage.scrollToPage(i)\r\n                    this.setPage(i, level)\r\n                    this._curOpenLevel = level;\r\n                    return\r\n                }\r\n            // }\r\n        }\r\n\r\n        this.mapPage.scrollToPage(0)\r\n        this.setPage(0,1)\r\n    }\r\n\r\n    getLevelByScrollIndex(index:number){\r\n        return Math.floor(index/MAX_RewardsNum)+1;\r\n    }\r\n\r\n    /**\r\n     * 设置界面\r\n     * @param index 对应关卡等级中的生存时间索引，5分钟-1，10分钟-2，通关-3\r\n     * @param level 关卡等级\r\n     */\r\n    setPage(index, level) {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        let curMap = level\r\n        let children = this.pageContent.children\r\n        for (let i = 0; i < children.length; i++) {\r\n            let element = children[i];\r\n            element.getChildByName(\"light\").active = i == index\r\n            if (i == index) {\r\n                element.scale = v3(1, 1, 1)\r\n            } else {\r\n                element.scale = v3(0.8, 0.8, 1)\r\n            }\r\n        }\r\n\r\n        // this.tishiLabel.string = \"生存超过\" + (index * 5 + 5) + \"分钟\"\r\n        // this.tishiLabel2.string = \"生存超过\" + (index * 5 + 5) + \"分钟才可领取\"\r\n        this.tishiLabel.node.localize({cat:constants.layers.ChapterLayer, key:\"tips1\", vars:[index * 5 + 5]});\r\n        this.tishiLabel2.node.localize({cat:constants.layers.ChapterLayer, key:\"tips2\", vars:[index * 5 + 5]});\r\n\r\n        this._curIndex = index\r\n        this._curOpenLevel = level;\r\n        this._curRewardList = mapData[curMap - 1][\"reward\" + (index + 1)]\r\n\r\n        //  this._curRewardList.push([204,1000])\r\n        this.updateBtnState()\r\n        this.rewardLayer.removeAllChildren()\r\n        for (let i = 0; i < this._curRewardList.length; i++) {\r\n            let element = this._curRewardList[i];\r\n            //  let dataArr = this.stringToArr(element)\r\n            let item = instantiate(this.rewardItem)\r\n            item.position = v3(0, 0, 0)\r\n            this.rewardLayer.addChild(item)\r\n            item.getComponent(PropItemPrefab).setView(element[0], element[1])\r\n        }\r\n    }\r\n\r\n    updateBtnState() {\r\n        // let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        let leveldata = UserData.getInstance().getLevelData(this._curOpenLevel);\r\n        this.btn1.getComponent(Button).interactable = false\r\n        this.btn2.getComponent(Button).interactable = false\r\n\r\n        this.btn2.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n        this.btn1.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n\r\n        this.btn2.getChildByName(\"Label\").localize(\"getDouble\", constants.catName.common);\r\n\r\n        RedPointLogicMgr.ins().setRPointView(this.btn1,null,false)\r\n        if (leveldata.Time >= ((this._curIndex+1) * 5) * 60) {\r\n            if (leveldata.ReceiveState[this._curIndex] == 0) {\r\n                this.btn1.getComponent(Button).interactable = true\r\n                this.btn1.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n                // this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n                this.btn1.getChildByName(\"Label\").localize(\"get\", constants.catName.common);\r\n                RedPointLogicMgr.ins().setRPointView(this.btn1,null,true)\r\n            } else {\r\n                // this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"已领取\"\r\n                this.btn1.getChildByName(\"Label\").localize(\"hasGet\", constants.catName.common);\r\n            }\r\n            if (leveldata.ReceiveState[this._curIndex] < 2) {\r\n                this.btn2.getComponent(Button).interactable = true\r\n                this.btn2.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n            }\r\n        } else {\r\n            // this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n            this.btn1.getChildByName(\"Label\").localize(\"get\", constants.catName.common);\r\n        }\r\n    }\r\n\r\n    scrowPage(event) {\r\n        myLog.i(\"event \", event)\r\n        this.setPage(event._curPageIdx%MAX_RewardsNum, this.getLevelByScrollIndex(event.curPageIdx))\r\n    }\r\n\r\n    myScrollPage() {\r\n        let nextIdx = this.mapPage.curPageIdx+1;\r\n        let getNextIdx = ()=> {\r\n            let levelData = UserData.getInstance().getLevelData(this.getLevelByScrollIndex(nextIdx));\r\n            if (levelData.ReceiveState[nextIdx%MAX_RewardsNum] == 0 || nextIdx == this.mapPage.getPages().length-1) {\r\n                return nextIdx;\r\n            }else{\r\n                nextIdx++;\r\n                getNextIdx();\r\n            }\r\n        }\r\n        this.mapPage.scrollToPage(getNextIdx(),1);\r\n    }\r\n\r\n    onGetReward() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let curRewardArr = UserData.getInstance().tobePropItem(this._curRewardList)\r\n        UserData.getInstance().getRewardProp(curRewardArr, 1)\r\n        this.showGetReward(curRewardArr)\r\n        let leveldata = UserData.getInstance().getLevelData(this._curOpenLevel)\r\n        leveldata.ReceiveState[this._curIndex] = 1\r\n        UserData.getInstance().setLevelData(leveldata)\r\n        this.updateBtnState()\r\n        this.scheduleOnce(this.myScrollPage,0.5);\r\n        eventManager.send(msgac.refreshRedPoint);\r\n     //   RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n    }\r\n\r\n    onGetRewardDouble() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        sdkManager.openAd(\"章节宝箱双倍领取\" + (this._curIndex * 5 + 5) + \"分钟\", (st: number) => {\r\n            if (st == 1) {\r\n                let curRewardArr = UserData.getInstance().tobePropItem(this._curRewardList)\r\n\r\n                UserData.getInstance().getRewardProp(curRewardArr, 2)\r\n                this.showGetReward(curRewardArr)\r\n\r\n                let leveldata = UserData.getInstance().getLevelData(this._curOpenLevel)\r\n                leveldata.ReceiveState[this._curIndex] = 2\r\n                UserData.getInstance().setLevelData(leveldata)\r\n                this.updateBtnState()\r\n                this.scheduleOnce(this.myScrollPage,0.5);\r\n                eventManager.send(msgac.refreshRedPoint);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    onDisable() {\r\n    }\r\n\r\n    onDestroy() {\r\n    }\r\n\r\n    backHome() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        myLog.i(\"backHome\")\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        this.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Button, Color, Component, Input, input, instantiate, isValid, Node, Quat, sys, tween, Tween, UIOpacity, UIRenderer, UITransform, v3, Vec2, Vec3, view } from \"cc\";\r\nimport { utilTools } from \"./utilTools\";\r\n\r\n// 拓展String.parseColor方法\r\nString.prototype.parseColor = function () {\r\n    let color = new Color(this);\r\n\r\n    return color;\r\n}\r\n\r\nObject.defineProperty(Node.prototype, \"opacity\", {\r\n    // 表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性，默认值为false。\r\n    configurable: true,\r\n    // 表示能否通过for in循环访问属性，默认值为false\r\n    enumerable: true,\r\n    // 3.writable：表示能否修改属性的值。默认值为false。\r\n    // 4.value：包含这个属性的数据值。默认值为undefined。\r\n    get() {\r\n        let op = cocosUtil.addComponentOnce(this, UIOpacity);\r\n        return op.opacity;\r\n    },\r\n    set(p: number) {\r\n        let op = cocosUtil.addComponentOnce(this, UIOpacity);\r\n        op.opacity = p;\r\n    }\r\n});\r\n\r\n\r\nexport const cocosUtil = {\r\n\r\n    /**\r\n     * 以node为中心的圆环区域内的随机点\r\n     * @param minRadius 最小半径\r\n     * @param maxRadius 最大半径\r\n     * @param isWorld 是否转为世界坐标，默认：是node坐标系下\r\n     */\r\n    getAroundPos(node: Node, minRadius: number, maxRadius: number, isWorld: boolean = false) {\r\n        let radius = utilTools.getFloatValue(minRadius, maxRadius, true);\r\n        let radian = Math.random() * Math.PI * 2;\r\n        let pos = v3(radius, 0, 0);\r\n        Vec3.rotateZ(pos, pos, Vec3.ZERO, radian);\r\n\r\n        pos = node.getPosition().add(pos);\r\n        if (isWorld) {\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(node, pos);\r\n        }\r\n\r\n        return pos;\r\n    },\r\n\r\n    /**\r\n     * 获取偏移node，x，y距离的点\r\n     * @param X x轴偏移量\r\n     * @param Y y轴偏移量\r\n     * @param isWorld 是否转为世界坐标，默认：是node坐标系下\r\n     */\r\n    getLeavePos(node: Node, X:number, Y:number, isWorld: boolean = false){\r\n        let pos = v3(X,Y,0);\r\n        pos = node.getPosition().add(pos);\r\n        if (isWorld) {\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(node, pos);\r\n        }\r\n        return pos;\r\n    },\r\n\r\n    /**\r\n     * 以node为中心的矩形环区域内的随机点\r\n     * @param node 参考节点\r\n     * @param minWidth 最小宽度\r\n     * @param minHeight 最小高度\r\n     * @param maxWidth 最大宽度\r\n     * @param maxHeight 最大高度\r\n     * @param isWorld 是否转为世界坐标，默认：是node坐标系下\r\n     */\r\n    getRectPos(node: Node, minWidth: number, minHeight: number, maxWidth?: number, maxHeight?: number, isWorld: boolean = false) {\r\n        if (!maxWidth) {\r\n            maxWidth = minWidth + 10;\r\n        }\r\n        if (!maxHeight) {\r\n            maxHeight = minHeight + 10;\r\n        }\r\n        // 分割成4个矩形\r\n        let arr = [];\r\n        // 上\r\n        let r1: any = {};\r\n        r1.x = -maxWidth * 0.5;\r\n        r1.y = minHeight * 0.5;\r\n        r1.width = maxWidth;\r\n        r1.height = (maxHeight - minHeight) * 0.5;\r\n        r1.weight = r1.width * r1.height;\r\n        arr.push(r1);\r\n\r\n        // 下\r\n        let r2: any = {};\r\n        r2.x = r1.x;\r\n        r2.y = -maxHeight * 0.5;\r\n        r2.width = r1.width;\r\n        r2.height = r1.height;\r\n        r2.weight = r1.weight;\r\n        arr.push(r2);\r\n\r\n        // 左\r\n        let r3: any = {};\r\n        r3.x = -maxWidth * 0.5;\r\n        r3.y = -minHeight * 0.5;\r\n        r3.width = (maxWidth - minWidth) * 0.5;\r\n        r3.height = minHeight;\r\n        r3.weight = r3.width * r3.height;\r\n        arr.push(r3);\r\n\r\n        // 右\r\n        let r4: any = {};\r\n        r4.x = minWidth * 0.5;\r\n        r4.y = r3.y;\r\n        r4.width = r3.width;\r\n        r4.height = r3.height;\r\n        r4.weight = r3.weight;\r\n        arr.push(r4);\r\n\r\n        let r = utilTools.getRowByWeight(arr);\r\n        let x = r.x + Math.random() * r.width;\r\n        let y = r.y + Math.random() * r.height;\r\n\r\n        let pos = v3(x, y);\r\n        pos = node.getPosition().add(pos);\r\n        if (isWorld) {\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(node, pos);\r\n        }\r\n\r\n        return pos;\r\n    },\r\n\r\n    /**\r\n     * 得到与x轴正方向的夹角，取值范围：0~360度\r\n     * @param pos \r\n     */\r\n    vec2XAngle(pos: Vec2 | Vec3): number {\r\n        let rad = Math.atan2(pos.y, pos.x);\r\n        if (rad < 0) {\r\n            rad += Math.PI * 2;\r\n        }\r\n        let angle = utilTools.radianToAngle(rad);\r\n\r\n        return angle;\r\n    },\r\n\r\n    vec3CopyVal(outVec3: Vec3, srcVec3: Vec3) {\r\n        outVec3.x = srcVec3.x;\r\n        outVec3.y = srcVec3.y;\r\n        outVec3.z = srcVec3.z;\r\n\r\n        return outVec3;\r\n    },\r\n\r\n    schedule(com: Component, cb: Function, interval: number, repeatNum: number, delayTime: number = 0, isAtOnce: boolean = false) {\r\n        com.schedule(cb, interval, repeatNum, delayTime);\r\n        if (isAtOnce) {\r\n            cb();\r\n        }\r\n    },\r\n\r\n    addComponentOnce(item: Node | Component, name: any): any {\r\n        let com = item.getComponent(name);\r\n        if (!com) {\r\n            com = item.addComponent(name);\r\n        }\r\n        return com;\r\n    },\r\n\r\n    /**\r\n     * 以direction为中间方向，angle为间隔角度，获取num数量的，长度为radius的向量\r\n     * @param direction 基准方向\r\n     * @param angle 角度值\r\n     * @param num 个数，包括基准向量\r\n     * @param radius 向量长度\r\n     */\r\n    getSectorDirectionArr(direction: Vec3, angle: number, num: number, radius: number = 1) {\r\n        direction = direction.clone().normalize().multiplyScalar(radius);\r\n        if (num <= 1) {\r\n            return [direction];\r\n        }\r\n\r\n        let da = Math.floor(num / 2);\r\n        let radian = utilTools.angleToRadian(angle);\r\n        let topArr = [];\r\n        let downArr = [];\r\n        for (let i = da; i >= 1; i--) {\r\n            let dir1 = new Vec3(0, 0, 0);\r\n            let dr = radian * i;\r\n            Vec3.rotateZ(dir1, direction, Vec3.ZERO, dr);\r\n            topArr.push(dir1);\r\n\r\n            let dir2 = new Vec3(0, 0, 0);\r\n            dr = -radian * (da + 1 - i);\r\n            Vec3.rotateZ(dir2, direction, Vec3.ZERO, dr);\r\n            downArr.push(dir2);\r\n        }\r\n\r\n        topArr.push(direction);\r\n        let arr = topArr.concat(downArr);\r\n\r\n        return arr;\r\n    },\r\n\r\n    /**\r\n     * 获取num个围成方向为圆圈的，长度为radius的向量\r\n     * @param pos 圆心点\r\n     * @param num 个数\r\n     * @param radius 向量长度\r\n     */\r\n    getCircleDirectionArr(num: number, radius: number = 1) {\r\n        let r = Math.PI * 2 / num;\r\n        let p2 = v3(radius, 0, 0);\r\n        let arr = [];\r\n        // 随机起始角度\r\n        let startRadian = Math.random() * Math.PI * 2;\r\n        for (let i = 0; i < num; i++) {\r\n            let radian = startRadian + r * i;\r\n            let direction = v3(0, 0, 0)\r\n            direction = Vec3.rotateZ(direction, p2.clone(), Vec3.ZERO, radian);\r\n            arr.push(direction);\r\n        }\r\n\r\n        return arr;\r\n    },\r\n\r\n    isInScreenVisible(node: Node): boolean {\r\n        if (!node || !node.parent) {\r\n            return false;\r\n        }\r\n        let orignPos = view.getVisibleOrigin();\r\n        let pos = cocosUtil.convertToWorldSpace(node);\r\n        let height = view.getVisibleSize().height;\r\n        let width = view.getVisibleSize().width;\r\n        let tf = node.getComponent(UITransform);\r\n        // 考虑锚点\r\n        if (pos.x + (1 - tf.anchorX) * tf.width > orignPos.x\r\n            && pos.x - tf.anchorX * tf.width < width + orignPos.x\r\n            && pos.y + (1 - tf.anchorY) * tf.height > orignPos.y\r\n            && pos.y - tf.anchorY * tf.height < height + orignPos.y) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    tweenScaleOut(node: Node, time: number, endCb: Function) {\r\n        tween(node).to(time, { scale: v3(0, 0, 0) }).call(() => {\r\n            endCb();\r\n        }).start();\r\n    },\r\n\r\n    // 受击缩放特效\r\n    tweenHitScale(node: Node, time: number = 0.1, endCb?: Function) {\r\n        Tween.stopAllByTarget(node);\r\n        let scale = node.getScale();\r\n        tween(node)\r\n            .to(time, { scale: v3(scale.x * 0.95, scale.y * 1.1, 1) })\r\n            .to(time * 2, { scale: v3(scale.x, scale.y * 0.9, 1) })\r\n            .to(time * 2, { scale: v3(scale.x * 0.95, scale.y * 1.1, 1) })\r\n            .to(time, { scale: v3(scale.x, scale.y, 1) })\r\n            .call(() => {\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            })\r\n            .start();\r\n    },\r\n\r\n    tweenScaleShake(node: Node, endCb?: Function) {\r\n        let angle = 10;\r\n        let quat1 = new Quat();\r\n        Quat.fromEuler(quat1, 0, 0, angle);\r\n        let quat2 = new Quat();\r\n        Quat.fromEuler(quat2, 0, 0, -angle);\r\n        let quat3 = new Quat();\r\n        Quat.fromEuler(quat3, 0, 0, 0);\r\n\r\n        tween(node)\r\n            .to(0.3, { scale: v3(1.3, 1.3, 1) })\r\n            .to(0.2, { rotation: quat1 })\r\n            .to(0.4, { rotation: quat2 })\r\n            .to(0.2, { rotation: quat3 })\r\n            .to(0.2, { scale: v3(1, 1, 1) })\r\n            .call(() => {\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            }).start();\r\n    },\r\n\r\n    instantiate(node: any) {\r\n        return instantiate(node);\r\n    },\r\n\r\n    // 快速呼吸效果\r\n    tweenBubbling(node: Node) {\r\n        Tween.stopAllByTarget(node);\r\n        node.setScale(v3(0.4, 0.4, 1));\r\n        tween(node).to(0.5, {\r\n            scale: v3(1, 1, 1)\r\n        }).to(0.5, {\r\n            scale: v3(0.4, 0.4, 1)\r\n        }).union().repeatForever().start();\r\n    },\r\n\r\n    /**\r\n     * 异步等待一段时间后，才会往下执行，不会造成阻塞\r\n     * @param com 组件基类\r\n     * @param time 等待时间，单位：秒\r\n     */\r\n    waitTimeAsync(com: Component | number, time?: number) {\r\n        return new Promise((resolve) => {\r\n            if (typeof (com) == \"number\") {\r\n                setTimeout(() => {\r\n                    resolve();\r\n                }, com * 1000);\r\n            } else {\r\n                com.scheduleOnce(() => {\r\n                    resolve();\r\n                }, time);\r\n            }\r\n        });\r\n    },\r\n\r\n    getScreenMidWorldPos() {\r\n        let size = view.getVisibleSize();\r\n        let pos = v3(size.width * 0.5, size.height * 0.5, 0);\r\n\r\n        return pos;\r\n    },\r\n\r\n    nodeChangeParent(node: Node, parent: Node) {\r\n        if (!this.isValid(node) || !this.isValid(parent)) {\r\n            return;\r\n        }\r\n        let pos = cocosUtil.convertToWorldSpace(node);\r\n        node.parent = parent;\r\n        pos = cocosUtil.convertToNodeSpace(node, pos);\r\n        node.setPosition(pos);\r\n    },\r\n\r\n    tweenUIShow(node: Node) {\r\n        Tween.stopAllByTarget(node);\r\n        let scale = node.getScale();\r\n        node.setScale(v3(0.5, 0.5, 1));\r\n        tween(node).to(0.1, {\r\n            scale: scale\r\n        }).start();\r\n    },\r\n\r\n    // 软弹簧效果\r\n    tweenBounceAction(node: Node) {\r\n        Tween.stopAllByTarget(node);\r\n        let scaleX = node.getScale().x;\r\n        let scaleY = node.getScale().y;\r\n        tween(node)\r\n            .to(0.15, { scale: v3(scaleX * 0.4, scaleY * 1.2, 1) }, { easing: 'bounceInOut' })\r\n            .to(0.15, { scale: v3(scaleX * 1.4, scaleY * 0.8, 1) }, { easing: 'bounceInOut' })\r\n            .to(0.2, { scale: v3(scaleX, scaleY, 1) }, { easing: 'smooth' })\r\n            .delay(0.7)\r\n            .union()\r\n            .repeatForever()\r\n            .start();\r\n    },\r\n\r\n    // 节点抖动\r\n    tweenShakeNode(node: Node) {\r\n        let time = 0.1;\r\n        tween(node)\r\n            .to(time, { position: v3(5, -5) })\r\n            .to(time, { position: v3(-5, 5) })\r\n            .to(time, { position: v3(5, 5) })\r\n            .to(time, { position: v3(-5, -5) })\r\n            .to(time, { position: v3(0, 0) })\r\n            .start();\r\n    },\r\n\r\n    // 往下掉落的效果\r\n    tweenFallDown(node: Node, endCb?: Function) {\r\n        node.setScale(0.5, 0.5, 1);\r\n        let pos = node.getPosition();\r\n        cocosUtil.setNodePositionY(node, pos.y + 100);\r\n        tween(node).to(0.3, {\r\n            position: pos\r\n        }).to(0.2, {\r\n            scale: v3(1, 1, 1)\r\n        }).call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 显现后，往上移动并慢慢隐去\r\n    tweenTopFadeOut(node: Node, endCb?: Function) {\r\n        let uiOpacity = node.getComponent(UIOpacity);\r\n        if (!uiOpacity) {\r\n            uiOpacity = node.addComponent(UIOpacity);\r\n        }\r\n        uiOpacity.opacity = 255;\r\n        node.setScale(1, 1, 1);\r\n        tween(node)\r\n            .to(0.05, {\r\n                scale: v3(1.2, 1.2, 1)\r\n            })\r\n            .to(0.1, {\r\n                scale: v3(1, 1, 1)\r\n            })\r\n            .by(0.5, {\r\n                position: v3(0, 40)\r\n            })\r\n            .by(1, {\r\n                position: v3(0, 0)\r\n            }, {\r\n                onUpdate(target: Node, ratio: number) {\r\n                    uiOpacity.opacity = (1 - ratio) * 255;\r\n                }\r\n            }).union().call(() => {\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            }).start();\r\n    },\r\n\r\n    // 放大再缩小的一个效果\r\n    tweenScaleEffect(node: Node, time?: number, endCb?: Function) {\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        node.setScale(1, 1, 1);\r\n        tween(node).to(time, {\r\n            scale: v3(1.5, 1.5, 1)\r\n        }).to(time, {\r\n            scale: v3(1, 1, 1)\r\n        }).call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 边旋转，边飞向目标位置\r\n    async tweenFlyToPos(node: Node, pos: Vec3, endCb?: Function) {\r\n        Tween.stopAllByTarget(node);\r\n\r\n        return new Promise((resolve, reject) => {\r\n            let time = 0.5;\r\n\r\n            let angle = 360;\r\n            let quat = cocosUtil.getQuatByAngleZ(angle);\r\n\r\n            let t1 = tween(node).to(time, {\r\n                position: pos\r\n            });\r\n\r\n            let t2 = tween(node).by(time, {\r\n                rotation: quat\r\n            }, {\r\n                easing: \"quadOut\",\r\n                onUpdate(target: Node, ratio: number) {\r\n                    node.setRotation(cocosUtil.getQuatByAngleZ(angle * ratio));\r\n                }\r\n            });\r\n\r\n            tween(node).parallel(t1, t2).call(() => {\r\n                node.setRotation(cocosUtil.getQuatByAngleZ(0));\r\n                resolve();\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            }).start();\r\n        });\r\n    },\r\n\r\n    // 往右上方做类似抛物线运动\r\n    tweenTopRightPao(node: Node, callbck?: Function) {\r\n        let dx1 = 40;\r\n        let dx2 = 40;\r\n        let dy1 = 100;\r\n        let dy2 = -80;\r\n        dx1 += Math.random() * 20;\r\n        node.setScale(v3(1, 1, 1));\r\n        tween(node)\r\n            .by(0.3, {\r\n                position: v3(dx1, dy1)\r\n            }, {\r\n                easing: \"quadOut\", onUpdate: (target: Node, ratio: number) => {\r\n                    let ds = 0.5 * ratio;\r\n                    node.setScale(v3(1 + ds, 1 + ds, 1));\r\n                }\r\n            })\r\n            .by(0.3, {\r\n                position: v3(dx2, dy2)\r\n            }, {\r\n                easing: \"quadIn\", onUpdate: (target: Node, ratio: number) => {\r\n                    let ds = 0.5 * ratio;\r\n                    node.setScale(v3(1.5 - ds, 1.5 - ds, 1));\r\n                }\r\n            })\r\n            .union()\r\n            .call(() => {\r\n                if (callbck) {\r\n                    callbck();\r\n                }\r\n            }).start();\r\n    },\r\n\r\n    // 从小到放大\r\n    tweenScaleIn(node: Node, time?: number, endCb?: Function) {\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        node.setScale(0, 0, 1);\r\n        tween(node).to(time, {\r\n            scale: v3(1, 1, 1)\r\n        }).call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 从小到放大，再恢复到原始大小\r\n    tweenScaleIn2(node: Node, time?: number, endCb?: Function) {\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        node.setScale(0, 0, 1);\r\n        tween(node).to(time, {\r\n            scale: v3(1.3, 1.3, 1)\r\n        }).to(time / 2, {\r\n            scale: v3(1, 1, 1)\r\n        }).union().call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 闪烁动画\r\n    tweenBlink(node: Node, time?: number, cb?: Function) {\r\n        if (!time) {\r\n            time = 0.5;\r\n        }\r\n        let uiOpacity = this.addComponentOnce(node, UIOpacity);\r\n        uiOpacity.opacity = 255;\r\n        tween(uiOpacity).to(time, {\r\n            opacity: 80\r\n        }).to(time, {\r\n            opacity: 255\r\n        }).call(() => {\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        }).union().repeatForever().start();\r\n    },\r\n\r\n    // 循环旋转动画\r\n    tweenRotate(node: Node, time?: number) {\r\n        if (!time) {\r\n            time = 2;\r\n        }\r\n        let angle = 360;\r\n        let quat = cocosUtil.getQuatByAngleZ(angle);\r\n        tween(node).by(time, { rotation: quat }, {\r\n            easing: \"linear\",\r\n            onUpdate: (target: Node, ratio: number) => {\r\n                let da = angle * ratio;\r\n                target.setRotation(cocosUtil.getQuatByAngleZ(da));\r\n            }\r\n        }).repeatForever().start();\r\n    },\r\n\r\n    // 上下漂浮\r\n    tweenUpDown(node: Node, dy?: number, time?: number) {\r\n        if (!dy) {\r\n            dy = 6;\r\n        }\r\n        if (!time) {\r\n            time = 1.5;\r\n        }\r\n        let pos1 = node.getPosition();\r\n        pos1.y += dy;\r\n        let pos2 = node.getPosition();\r\n        tween(node).to(time, {\r\n            position: pos1\r\n        }).to(time, {\r\n            position: pos2\r\n        }).union().repeatForever().start();\r\n    },\r\n\r\n    // 淡入动画\r\n    async tweenFadeIn(node: Node, time?: number, cb?: Function) {\r\n        return new Promise((resolve, reject) => {\r\n            if (!time) {\r\n                time = 1;\r\n            }\r\n            let uiOpacity = this.addComponentOnce(node, UIOpacity);\r\n            uiOpacity.opacity = 0;\r\n            tween(uiOpacity).to(time, {\r\n                opacity: 255\r\n            }).call(() => {\r\n                resolve();\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n            }).start();\r\n        });\r\n    },\r\n\r\n    // 淡出动画\r\n    async tweenFadeOut(node: Node, time?: number, cb?: Function) {\r\n        return new Promise((resolve, reject) => {\r\n            if (!time) {\r\n                time = 1.5;\r\n            }\r\n            let uiOpacity = this.addComponentOnce(node, UIOpacity);\r\n            uiOpacity.opacity = 255;\r\n            tween(uiOpacity).to(time, {\r\n                opacity: 0\r\n            }).call(() => {\r\n                resolve();\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n            }).start();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 放大缩小呼吸效果\r\n     * @param node 节点\r\n     * @param time 缩放时长，单位：秒\r\n     * @param scale 缩放大小\r\n     */\r\n    tweenBreath(node: Node, time?: number, scale?: number) {\r\n        if (!time) {\r\n            time = 0.4;\r\n        }\r\n        if (!scale) {\r\n            scale = 1.2;\r\n        }\r\n\r\n        tween(node)\r\n            .to(\r\n                time, {\r\n                scale: v3(scale, scale, 1)\r\n            })\r\n            .to(\r\n                time, {\r\n                scale: v3(1, 1, 1)\r\n            }\r\n            ).union().repeatForever().start();\r\n    },\r\n\r\n    /**\r\n     * 间接性晃动效果\r\n     * @param node 节点\r\n     * @param time 时长，单位：秒\r\n     * @param rotation 旋转角度，单位：度数\r\n     * @param delayTime 中间暂停时长，单位：秒\r\n     * @param isRepeat 是否循环播放，默认：是\r\n     */\r\n    tweenShake(node: Node, time?: number, rotation?: number, delayTime?: number, isRepeat?: boolean) {\r\n        Tween.stopAllByTarget(node);\r\n\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        if (!rotation) {\r\n            rotation = 6;\r\n        }\r\n        if (delayTime == undefined) {\r\n            delayTime = time * 5;\r\n        }\r\n\r\n        let quat1: Quat = new Quat();\r\n        Quat.fromEuler(quat1, 0, 0, rotation);\r\n\r\n        let quat2: Quat = new Quat();\r\n        Quat.fromEuler(quat2, 0, 0, -rotation);\r\n\r\n        let quat3: Quat = new Quat();\r\n        Quat.fromEuler(quat3, 0, 0, 0);\r\n\r\n        let tweenRet = tween(node).to(time, {\r\n            rotation: quat1\r\n        }).to(time * 2, {\r\n            rotation: quat2\r\n        }).to(time, {\r\n            rotation: quat3\r\n        });\r\n\r\n        if (isRepeat == undefined) {\r\n            tweenRet.delay(delayTime).union().repeatForever().start();\r\n        } else {\r\n            tweenRet.start();\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * 判断节点或者组件是否可用\r\n     * @param node 节点对象 \r\n     */\r\n    isValid(node: Node | Component) {\r\n        if (!node || !isValid(node)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    isAndroid() {\r\n        return sys.platform === sys.Platform.ANDROID;\r\n    },\r\n\r\n    isDesktopBrowser() {\r\n        return sys.platform === sys.Platform.DESKTOP_BROWSER;\r\n    },\r\n\r\n    isIos() {\r\n        return sys.platform === sys.Platform.IOS;\r\n    },\r\n\r\n    isWechatGame() {\r\n        return sys.platform === sys.Platform.WECHAT_GAME;\r\n    },\r\n\r\n    addKeyDownListener(cb, sender) {\r\n        input.on(Input.EventType.KEY_DOWN, cb, sender);\r\n    },\r\n\r\n    init() {\r\n        // 设计分辨率\r\n        this.designSize = view.getDesignResolutionSize();\r\n        // 实际屏幕分辨率\r\n        this.frameSize = view.getFrameSize();\r\n        // 实际屏幕安全区域，{x: 0, y: 0, width: 766.6256157635468, height: 1660}\r\n        // 是以左下角为原点，以设计分辨率为单位的，并且是遵循高度为适配原则后的尺寸\r\n        this.safeAreaRect = sys.getSafeAreaRect();\r\n\r\n        // 计算出顶部刘海屏高度\r\n        this.safeAreaMarginTop = this.designSize.height - this.safeAreaRect.height;\r\n        if (this.safeAreaMarginTop < 0) {\r\n            this.safeAreaMarginTop = 0;\r\n        }\r\n\r\n        this.intiScreenAdapterWidthScale();\r\n        this.initScreenBgAdapterWidthScale();\r\n    },\r\n\r\n\r\n    // UI适配，以高度为适配原则，按照满宽度显示计算，如果宽度不够显示，要乘以这个缩放比例\r\n    intiScreenAdapterWidthScale() {\r\n        let fh = this.frameSize.height;\r\n        let fw = this.frameSize.width;\r\n\r\n        let scale = fh / this.designSize.height;\r\n        let adapterWidth = this.designSize.width * scale;\r\n        let retScale = 1;\r\n        if (adapterWidth > fw) {\r\n            // 屏幕不够显示，有些交互UI会丢失，要进行缩小\r\n            retScale = fw / adapterWidth;\r\n        }\r\n\r\n        // if (this.safeAreaMarginTop > 0) {\r\n        //     // cocos内部以高度为适配策略，但是如果有刘海屏，要额外再缩放一点\r\n        //     let subScale = this.safeAreaMarginTop / this.designSize.height;\r\n        //     retScale -= subScale;\r\n        // }\r\n\r\n        this.screenAdapterScale = retScale;\r\n    },\r\n    getScreenAdapterScale() {\r\n        if (!this.screenAdapterScale) {\r\n            this.screenAdapterScale = 1;\r\n        }\r\n        return this.screenAdapterScale;\r\n    },\r\n\r\n    // 背景图适配，跟上面的UI适配，刚好相反，超出的屏幕不管，屏幕没显示满，要放大\r\n    initScreenBgAdapterWidthScale() {\r\n        let fh = this.frameSize.height;\r\n        let fw = this.frameSize.width;\r\n        let scale = fh / this.designSize.height;\r\n        let adapterWidth = this.designSize.width * scale;\r\n        let retScale = 1;\r\n        if (adapterWidth < fw) {\r\n            // 屏幕没显示满，会有黑边，要进行放大\r\n            retScale = fw / adapterWidth;\r\n        }\r\n\r\n        // if (this.safeAreaMarginTop > 0) {\r\n        //     // 额外增加放大值，使得背景图铺满包括刘海在内的整个屏幕\r\n        //     let addScale = this.safeAreaMarginTop / this.designSize.height;\r\n        //     retScale += addScale;\r\n        // }\r\n\r\n        this.screenBgAdapterScale = retScale;\r\n    },\r\n    getScreenBgAdapterScale() {\r\n        if (!this.screenBgAdapterScale) {\r\n            this.screenBgAdapterScale = 1;\r\n        }\r\n        return this.screenBgAdapterScale;\r\n    },\r\n\r\n    /**\r\n     * 将node坐标转换为世界坐标\r\n     * @param node \r\n     * @param isCenter 是否强制是node的中心点坐标\r\n     */\r\n    convertToWorldSpace(node: Node, isCenter?: boolean): Vec3 {\r\n        let transform = node.parent.getComponent(UITransform);\r\n\r\n        let pos = node.getPosition();\r\n        if (isCenter) {\r\n            let tf = node.getComponent(UITransform);\r\n            pos.x = pos.x + (0.5 - tf.anchorX) * tf.width;\r\n            pos.y = pos.y + (0.5 - tf.anchorY) * tf.height;\r\n        }\r\n\r\n        return transform.convertToWorldSpaceAR(pos);\r\n    },\r\n\r\n    convertToWorldSpaceWithPos(node: Node, pos: Vec3): Vec3 {\r\n        let transform = node.parent.getComponent(UITransform);\r\n        pos = transform.convertToWorldSpaceAR(pos);\r\n\r\n        return pos;\r\n    },\r\n\r\n    /**\r\n     * 获得以node父节点锚点位置为原点的坐标系下的坐标\r\n     * @param node 注意，是同坐标系下的节点\r\n     * @param pos 世界坐标\r\n     */\r\n    convertToNodeSpace(node: Node, pos: Vec3): Vec3 {\r\n        let transform = node.parent.getComponent(UITransform);\r\n\r\n        return transform.convertToNodeSpaceAR(pos);\r\n    },\r\n\r\n    /**\r\n     * 设置渲染节点的颜色叠加\r\n     * @param node 节点\r\n     * @param color 颜色\r\n     * @param isRecursion 是否递归子节点也设置 \r\n     */\r\n    setRenderableColor(node: Node, color: string | Color, isRecursion?: boolean) {\r\n        let renderable = node.getComponent(UIRenderer);\r\n        if (renderable && renderable.color) {\r\n            let temp: Color = null;\r\n            if (typeof (color) == \"string\") {\r\n                temp = color.parseColor();\r\n            } else {\r\n                temp = color;\r\n            }\r\n            renderable.color = temp;\r\n        }\r\n\r\n        if (isRecursion) {\r\n            for (let ch of node.children) {\r\n                this.setRenderableColor(ch, color, isRecursion);\r\n            }\r\n        }\r\n    },\r\n\r\n    getRenderableColor(node: Node): Color {\r\n        let renderable = node.getComponent(UIRenderer);\r\n        if (renderable && renderable.color) {\r\n            return renderable.color.clone();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * 根据十六进制颜色值，获得color对象\r\n     * @param hex \"#333333\"\r\n     */\r\n    getColorByHEX(hex: string): Color {\r\n        let color = new Color(hex);\r\n        // Color.fromHEX(color, hex);\r\n        return color;\r\n    },\r\n\r\n    /**\r\n     * 设置按钮可用状态\r\n     * @param node 按钮对象\r\n     * @param enabled 是否可点击\r\n     */\r\n    setButtonEnabled(node: Node, enabled: boolean) {\r\n        let btn = node.getComponent(Button);\r\n        if (btn) {\r\n            btn.enabled = enabled;\r\n        }\r\n    },\r\n\r\n    getQuatByAngleZ(angle: number) {\r\n        let quat = new Quat();\r\n        Quat.fromEuler(quat, 0, 0, angle);\r\n\r\n        return quat;\r\n    },\r\n\r\n    formatNum(num: number) {\r\n        if (num < 10000) {\r\n            return num;\r\n        }\r\n        if (num < 1000000) {\r\n            num = Math.floor(num / 1000 * 100);\r\n            return (num / 100).toFixed(2) + \"K\";\r\n        }\r\n\r\n        num = Math.floor(num / 1000000 * 100);\r\n        return (num / 100).toFixed(2) + \"M\";\r\n    },\r\n\r\n    formatNumString(num: number) {\r\n        if (num < 1000) {\r\n            return num;\r\n        }\r\n        if (num < 10000) {\r\n            num = Math.floor(num / 1000 * 10);\r\n            return (num / 10).toFixed(1) + \"K\";\r\n        }\r\n\r\n        if (num < 10000000) {\r\n            num = Math.floor(num / 10000 * 10);\r\n            return (num / 10).toFixed(1) + \"w\";\r\n        }\r\n\r\n        num = Math.floor(num / 1000000 * 100);\r\n        return (num / 100).toFixed(2) + \"M\";\r\n    },\r\n\r\n\r\n    setNodePositionX(node: Node, x: number) {\r\n        let pos = node.getPosition();\r\n        pos.x = x;\r\n        node.setPosition(pos);\r\n    },\r\n\r\n    setNodePositionY(node: Node, y: number) {\r\n        let pos = node.getPosition();\r\n        pos.y = y;\r\n        node.setPosition(pos);\r\n    },\r\n\r\n    /**\r\n     * 绘制一条曲线路径\r\n     * @param  {Object} node canvas渲染上下文\r\n     * @param  {Array<number>} start 起点\r\n     * @param  {Array<number>} end 终点\r\n     * @param  {number} curveness 曲度(0-1)\r\n     * @param  {number} percent 绘制百分比(0-100)\r\n     */\r\n    drawCurvePath(node, start, end, curveness, percent, delay = 0) {\r\n\r\n        var cp = [\r\n            (start[0] + end[0]) / 2 - (start[1] - end[1]) * curveness,\r\n            (start[1] + end[1]) / 2 - (end[0] - start[0]) * curveness\r\n        ];\r\n\r\n        // node.position = v3(start[0], start[1], 0);\r\n        let tweenArr = []\r\n        tweenArr.push(tween(node).delay(delay))\r\n        let curx = start[0]\r\n        let cury = start[1]\r\n        for (var t = 0; t <= percent / 100; t += 0.01) {\r\n\r\n            var x = this.quadraticBezier(start[0], cp[0], end[0], t);\r\n            var y = this.quadraticBezier(start[1], cp[1], end[1], t);\r\n            let time = (Math.abs(x - curx) + Math.abs(y - cury)) / 1500\r\n            tweenArr.push(tween(node).to(time, { position: v3(x, y, 0) }))\r\n\r\n            curx = x\r\n            cury = y\r\n        }\r\n        let time = (Math.abs(end[0] - curx) + Math.abs(end[1] - cury)) / 1500\r\n\r\n        tweenArr.push(tween(node).to(time, { position: v3(end[0], end[1], 0) }))\r\n\r\n        tween(node).sequence(...tweenArr).start();\r\n    },\r\n\r\n    quadraticBezier(p0, p1, p2, t) {\r\n        var k = 1 - t;\r\n        return k * k * p0 + 2 * (1 - t) * t * p1 + t * t * p2;    // 这个方程就是二次贝赛尔曲线方程\r\n    }\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('comeShine')\r\nexport class comeShine extends Component {\r\n\r\n    hint: Hint;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        let monsterId = this.hint.extraObj.monsterId;\r\n        this.scheduleOnce(() => {\r\n            mapModel.monsterSystem.createMonster(monsterId, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.4);\r\n    }\r\n\r\n}\r\n\r\n","\r\nexport const GNetConf={\r\n    //蛋壳的联网地址\r\n    mrtgd_WsUrl:\"wss://api.play.xmtyq.com:39001/sh\",\r\n    mrtgd_HttpUrl :\"https://api.play.xmtyq.com:39001\", //http服务地址\r\n\tmrtgd_jjws_WsUrl:\"wss://api.play.xmtyq.com:39002/sh\",\r\n    mrtgd_jjws_HttpUrl :\"https://api.play.xmtyq.com:39002\",\r\n}\r\n\r\n//操作状态\r\nexport const GNetCmd={\r\n    StickPack    : 100000, // 粘包\r\n\tHeartbeat    : 101000, // 用户心跳\r\n\tUserLogin    : 101001, // 用户登录\r\n\tUserRegister : 101002, // 用户注册\r\n\tAntiAddiction  : 101003, // 防沉迷认证\r\n\tSensitiveWordsCheck  : 101004, // 用户保存数据\r\n\tSaveUserRecord  : 102003, // 用户保存数据\r\n    GetRegionData: 102004,// 查询用户某个分区的数据\r\n\tGetRegionList: 102005,// 获取分区列表\r\n\tSaveUserRecordAll:102007,// 用户保存所有数据\r\n\tUploadAvatar:102008,//上传头像\r\n\tGetUserDataByKey :102009, // 获得用户数据\r\n\r\n\tReqWxSession:103001, // 微信接口返回值\r\n\tReqSendAuthCode:103002, // 请求发送短信验证码\r\n\tReqPhoneLogin:103003, // 请求使用手机登录\r\n\r\n\tSetFriendCode : 104001, //设置好友邀请码\r\n\tGetFriendVal  : 104002, //获得好友相关数据\r\n\r\n\tGetRankInfo:201001, //请求获得排行数据\r\n\tGetInviteCode:201002, //请求邀请码\r\n\tGetInviteCodeReward : 201003, //新玩家，输入邀请码，获得邀请码奖励，标记为老用户\r\n\tGetInviteLevelReward : 201004, //老玩家领取奖励\r\n\tPushInviteProcess : 201005, //推送邀请进度\r\n\tIsRankOpen : 201006, //是否开启排行榜\r\n\tGetSomeonePlayerInfo : 201007, //获取其他玩家数据\r\n\r\n\tGetMidAutumnRank : 301001, //中秋活动排行榜\r\n\tSetMidAutumnRank : 301002, //中秋活动排行榜\r\n\tGetWorldBossRank : 301003, //世界boss排行榜查看\r\n\tSetWorldBossRank : 301004, //世界boss排行榜设置\r\n\tPushWorldBossSettle : 301005, //世界boss结算完后推送消息到本地\r\n\tSetWorldBossPlayerStatus : 301006, //设置世界boss挑战的状态\r\n\tGetWorldBossPlayerStatus : 301007, //读取世界boss挑战的状态\r\n\r\n\tGetEmpireSpotData : 302001, //帝国战争的数据读取，每秒\r\n\tActionEmpireSpot : 302002, //帝国战争对地块的行为，1占领 2攻占 3发起掠夺 4参与掠夺 5驱赶\r\n\r\n}\r\n\r\nexport const GClientEvent = {\r\n\r\n}\r\n\r\nexport const GNetConst = {\r\n    SaveHead:\"game\",\r\n\tServerIsNew:\"serverIsNew\",\r\n\tServerIsOld:\"serverIsOld\",\r\n\tResSuccess    : \"success\",\r\n\tResFail    : \"fail\",\r\n\tDataTypeInt : \"int\",\r\n\tDataTypeString : \"string\",\r\n\tDataTypeBoolean : \"boolean\",\r\n\tDataTypeObject : \"object\",\r\n\tServerEventHead : \"ServerDown_\",\r\n    Http_isAlive:\"/isAlive\",\r\n}\r\n\r\nexport enum GLoginState{\r\n\tnoYet=\"noYet\",\r\n\tloginFail=\"loginFail\",\r\n\tloginWithoutAccount=\"loginWithoutAccount\",\r\n\tloginWithAccount=\"loginWithAccount\",\r\n}","import { PropSystem } from \"../compoment/sys/PropSystem\";\r\n\r\nconst constants = {\r\n\r\n    gameName: \"mrtgd\",\r\n\r\n    animations: {\r\n        animation: \"animation\",\r\n\r\n        standBy: \"standby\",\r\n        attack: \"attack\",\r\n        hit: \"hit\",\r\n        die: \"die\",\r\n        appear: \"appear\",\r\n        walk: \"walk\",\r\n    },\r\n\r\n    audioNames: {\r\n        home: \"home\",\r\n        map: \"map\",\r\n        win: \"win\",\r\n    },\r\n\r\n    propIds: {\r\n        coin: 101,\r\n        dayAct: 107,\r\n        energy : 108,\r\n\r\n        exp: 201,\r\n        magnet: 301,\r\n        addHpPercent: 401,\r\n        bomb: 501,\r\n        box1: 601,\r\n        box2: 701,\r\n        diamond: 801,\r\n        boxMonsterCoin: 1001,\r\n        equip: 1002,\r\n    },\r\n    propTypes: {\r\n        coin: 1,\r\n        exp: 2,\r\n        skin: 17,\r\n    },\r\n\r\n    mapTypes: {\r\n        main: 1,\r\n        tower: 2,\r\n    },\r\n\r\n    materials: {\r\n        shineColor: \"shader/shineColor\",\r\n        shineColorSpine: \"shader/shineColorSpine\",\r\n    },\r\n\r\n    monsterTypes: {\r\n        common: 1,\r\n        elite: 2,\r\n        boss: 3,\r\n    },\r\n    monsterIds: {\r\n        boxMonster: 24,\r\n    },\r\n\r\n    skillTypes: {\r\n        // 锤子\r\n        hammer: 1,\r\n        // 转盘\r\n        disk: 2,\r\n    },\r\n\r\n    times: {\r\n        minute: 60 * 1000,\r\n        houre: 60 * 60 * 1000,\r\n        day: 24 * 60 * 60 * 1000,\r\n    },\r\n\r\n    catName:{\r\n        lang:\"lang\",\r\n        mapSystem:\"map\",\r\n        common:\"common\",\r\n        propSystem:\"prop\",\r\n        skillSystem:\"skill\",\r\n        skill2System:\"skill2\",\r\n        weaponSystem:\"weapon\",\r\n    },\r\n\r\n    tableName: {\r\n        map: \"map\",\r\n        level: \"level\",\r\n        monster: \"monster\",\r\n        weapon: \"weapon\",\r\n        bullet: \"bullet\",\r\n        skill: \"skill\",\r\n        skill2: \"skill2\",\r\n        expLv: \"expLv\",\r\n        expType: \"expType\",\r\n        prop: \"prop\",\r\n        box1: \"box1\",\r\n        config: \"config\",\r\n        heroLevel: \"heroLevel\",\r\n        suit: \"suit\",\r\n        draw: \"draw\",\r\n        weaponOpt: \"weaponOpt\",\r\n        towerFloor: \"towerFloor\",\r\n        dayTask: \"dayTask\",\r\n        daySign: \"daySign\",\r\n        energyAward: \"energyAward\",\r\n        CNTM: \"CNTM\",\r\n        vip: \"vip\",\r\n        share: \"share\",\r\n        monsterTimeAdd: \"monsterTimeAdd\",\r\n        localization: \"localization\",\r\n        font:\"font\",\r\n    },\r\n\r\n    bundles: {\r\n        audio: \"audio\",\r\n        bullet: \"bullet\",\r\n        common: \"common\",\r\n        design: \"design\",\r\n        hint: \"hint\",\r\n        icon: \"icon\",\r\n        layer: \"layer\",\r\n        monster: \"monster\",\r\n        prefab: \"prefab\",\r\n        spine: \"spine\",\r\n        ui: \"ui\",\r\n        weapon: \"weapon\",\r\n        wwqVec: \"wwqVec\",\r\n        loading: \"loading\",\r\n    },\r\n\r\n    layers: {\r\n        LoadingLayer: \"LoadingLayer\",\r\n        NoticeLayer: \"NoticeLayer\",\r\n        MainLayer:\"MainLayer\",\r\n\r\n        HomeLayer: \"HomeLayer\",\r\n        MapLayer: \"MapLayer\",\r\n        MapFightLayer: \"MapFightLayer\",\r\n        SkillSelectLayer: \"SkillSelectLayer\",\r\n        PauseLayer: \"PauseLayer\",\r\n        LuckyDrawLayer: \"LuckyDrawLayer\",\r\n        LevelLayer: \"LevelLayer\",\r\n        ChapterLayer: \"ChapterLayer\",\r\n        SettlementLayer: \"SettlementLayer\",\r\n        BackHomeLayer: \"BackHomeLayer\",\r\n        BackLifeLayer: \"BackLifeLayer\",\r\n        BackMapLayer: \"BackMapLayer\",\r\n        HandLayer: \"HandLayer\",\r\n        TransLayer: \"TransLayer\",\r\n        BoxMonsterLayer: \"BoxMonsterLayer\",\r\n        TowerLayer: \"TowerLayer\",\r\n        TowerFloorLayer: \"TowerFloorLayer\",\r\n        TowerRoleLayer: \"TowerRoleLayer\",\r\n        DayTaskLayer: \"DayTaskLayer\",\r\n        EnergyLayer: \"EnergyLayer\",\r\n        DaySignLayer: \"DaySignLayer\",\r\n        LetterLayer: \"LetterLayer\",\r\n        SkinChangeLayer: \"SkinChangeLayer\",\r\n        PropInfoLayer2: \"PropInfoLayer2\",\r\n        AwardInfoLayer: \"AwardInfoLayer\",\r\n        VipLayer: \"VipLayer\",\r\n        ShareLayer: \"ShareLayer\",\r\n        MsgBoxLayer: \"MsgBoxLayer\",\r\n        BuyLifeLayer: \"BuyLifeLayer\",\r\n\r\n        PropInfoLayer: \"PropInfoLayer\",\r\n        BlessLayer: \"BlessLayer\",\r\n        BlessResultLayer: \"BlessResultLayer\",\r\n        MoreGameLayer: \"MoreGameLayer\",\r\n        HeroLayer:\"HeroLayer\",\r\n\r\n        RewardItemLayer: \"RewardItemLayer\",\r\n        ShopLayer: \"ShopLayer\",\r\n        RewardLayer: \"RewardLayer\",\r\n        SettingLayer: \"SettingLayer\",\r\n        PatrolLayer: \"PatrolLayer\",\r\n        PatrolFastLayer: \"PatrolFastLayer\",\r\n\r\n        GuessGameLayer: \"GuessGameLayer\",\r\n        GuessResultLayer: \"GuessResultLayer\",\r\n        PyramidDrawLayer: \"PyramidDrawLayer\",\r\n        RewardSkinLayer: \"RewardSkinLayer\",\r\n        RewardRedBoxLayer: \"RewardRedBoxLayer\",\r\n    },\r\n\r\n    // 自动保存时间间隔\r\n    saveTimeGap: 1000 * 60 * 5,\r\n\r\n    colors: {\r\n        yin: \"#666666\",\r\n        white: \"#ffffff\",\r\n        green: \"#38ff38\",\r\n        blue: \"#1096fd\",\r\n        purple: \"#f153ff\",\r\n    },\r\n\r\n    // 零散策划数据\r\n    design: {\r\n        // 满级\r\n        maxLv: 5,\r\n        // 武器数量限制\r\n        weaponNum: 1,\r\n        // 主动技能限制\r\n        skill1Num: 5,\r\n        // 被动技能限制\r\n        skill2Num: 6,\r\n        // 主动/被动技能选择界面显示数量限制\r\n        skillNum: 6,\r\n\r\n        // 单局最多复活次数\r\n        backLifeMax: 1,\r\n\r\n        // 爬塔关卡起始id编号\r\n        towerBeginId: 10001,\r\n\r\n        // 每个章节可领的宝箱数量\r\n        chapterBoxNum: 3,\r\n    },\r\n\r\n}\r\n\r\nexport { constants };\r\n\r\n","import { Component, Label, macro, _decorator } from \"cc\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { UserData } from \"../game/model/UserData\";\r\nimport { utilTools } from \"./utilTools\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CountTimeUtil')\r\nexport class CountTimeUtil extends Component {\r\n\r\n    _time = 0;\r\n    _callFun = null\r\n\r\n    onLoad() {\r\n        this.node.getComponent(Label).string = utilTools.getTimeStr(this._time * 1000, true)\r\n    }\r\n\r\n    setTime(time, callFun = null) {\r\n        this._time = time\r\n        this._callFun = callFun\r\n        if (this._time > 0) {\r\n            this.node.getComponent(Label).string = utilTools.getTimeStr(this._time * 1000, true)\r\n            this.schedule(this.updateTime, 1, macro.REPEAT_FOREVER)\r\n        } else {\r\n            this.node.getComponent(Label).string = \"\"\r\n        }\r\n    }\r\n\r\n    start() {\r\n        // this.schedule(this.updateTime, 1, macro.REPEAT_FOREVER)\r\n    }\r\n\r\n    updateTime() {\r\n        if (this._time > 0) {\r\n            this._time--\r\n            this.node.getComponent(Label).string = utilTools.getTimeStr(this._time * 1000, true)\r\n        }\r\n        if (this._time <= 0) {\r\n            this.unschedule(this.updateTime)\r\n            this.node.getComponent(Label).string = \"\"\r\n            this._callFun && this._callFun()\r\n            // UserData.getInstance().checkPowerTime()\r\n            // eventManager.send(msgac.commonResRefresh);\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nimport { Component, director, _decorator } from 'cc';\r\nimport { tyqSDK } from '../tyqSDK';\r\nimport { GLoginState, GNetCmd, GNetConst } from './conf';\r\nimport Http from './http';\r\nimport ServerCtr from './ServerCtr';\r\nimport TimeCtr from './TimeCtr';\r\nimport { WmSocket } from './wmsocket';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CronCtr')\r\nexport default class CronCtr extends Component {\r\n\r\n    private static _instance: CronCtr;\r\n\r\n    public static getInstance(): CronCtr {\r\n        if (!this._instance) {\r\n            this._instance = new CronCtr();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    msgArr = [];\r\n    msgArrIdx = 0;\r\n\r\n    isPutEnable: boolean = false;\r\n    testTimeDelta: number = 0;\r\n\r\n    //保存队列，第一条和下一条按时间差150毫秒内的记录，统一一次性发送，发送成功后再发送下一批次\r\n    //断线重连\r\n    //本地存储登录返回的uid，区号\r\n    //数据存储，key_uid_区号_time,按照time进行排序\r\n    //服务端记录一个时间\r\n    //切号\r\n    // saverQueue:object[] = []; //{data:协议内容,time:TimeCtr.GetInstance().ServerTime}\r\n    //\r\n    // set SaverQueue(data){\r\n    //     this.saverQueue.push({data:data, time:TimeCtr.GetInstance().ServerTime})\r\n    // }\r\n\r\n    init() {\r\n        director.on(GNetCmd.Heartbeat.toString(), this.onHeartbeat)\r\n        director.on(GNetCmd.SaveUserRecord.toString(), this.respSaveUserRecord, this)\r\n        this.schedule(this.reqHeartBeat, 3);\r\n        this.startHeartbeat()\r\n    }\r\n\r\n    startHeartbeat() {\r\n        ///重连定时器\r\n        WmSocket.getInstance();\r\n        Http.getInstance().httpPost(tyqSDK.getUrl().httpUrl + GNetConst.Http_isAlive, {}, (res: any) => {\r\n            console.log(\"server response :\", res)\r\n            if (res != -1) {\r\n                TimeCtr.GetInstance().UpdateServerTime(res.serverTime);\r\n                WmSocket.getInstance().connect();\r\n            }\r\n        }, () => {\r\n            ServerCtr.GetInstance().loginState = GLoginState.loginFail;\r\n        });\r\n\r\n        // ()=>{\r\n        //     if(WmSocket.getInstance().isConnected()==false){\r\n        //         Http.getInstance().httpPost(gl.server_http_url, {}, (res)=>{\r\n        //             // cc.log(\"接受到的请求内容是\", res)\r\n        //             if(res != -1){\r\n        //                 TimeCtr.GetInstance().UpdateServerTime(res.serverTime);\r\n        //                 EventMgr.getInstance().event(\"ws_reconnect\");\r\n        //             }\r\n        //         });\r\n        //     }else{\r\n        //         if(GlParam.isEnterGame){\r\n        //             this.heartbeatCheck()\r\n        //         }\r\n        //     }\r\n        // }\r\n    }\r\n\r\n\r\n    onHeartbeat(data: any) {\r\n        // console.log(\"heartbeat \", data)\r\n        if (data.status != GNetConst.ResSuccess) {\r\n            // GD.GameState = GGameState.stop\r\n            // mygame.pause()\r\n            // TimeCtr.GetInstance().ServerTime = data.time\r\n            //被抢登了\r\n            if (ServerCtr.GetInstance().loginState == GLoginState.loginWithAccount) {\r\n                ServerCtr.GetInstance().loginState = GLoginState.noYet;\r\n            }\r\n            TimeCtr.GetInstance().ReInit();\r\n            // uiManager.instance.showDialog(Const.Dialogs.kick_prompt)\r\n            // App.event(GameEvent.ShowFlyTips,{text:`<color=red>账号已在其他设备登录</c>`})//${i18n.t('txt.login_msg_out')}\r\n            CronCtr.getInstance().isPutEnable = false;\r\n\r\n            // let errMsg = `账号已在其他设备登录`;\r\n            // let cheatLevel = localStorage.getItem(\"cheatLevel\")\r\n            // if(cheatLevel!=\"\"){\r\n            // \tcheatLevel = parseInt(cheatLevel)\r\n            // \tif(cheatLevel==1){\r\n            // \t\terrMsg = `<color=${Res.RedColor}>服务端检测到你正在使用非法外挂，如再发现直接封号</c>`;\r\n            // \t}else if(cheatLevel==2){\r\n            // \t\terrMsg = `<color=${Res.RedColor}>该区账号涉嫌作弊已被封禁，如再开挂所有区服全部封禁 </c>`;\r\n            // \t}else if(cheatLevel>=3){\r\n            // \t\terrMsg = `<color=${Res.RedColor}>该账号已封禁</c>`;\r\n            // \t}\r\n            // \tcc.sys.localStorage.removeItem(\"cheatLevel\")\r\n            // }\r\n            // cc.game.restart();\r\n        } else {\r\n            TimeCtr.GetInstance().UpdateServerTimeByHeartbeat(data.time * 1000);\r\n            WmSocket.getInstance().lastHeartbeatTime = TimeCtr.GetInstance().ServerTime\r\n        }\r\n        // else{\r\n        // \t//检查版本号是否和服务端匹配\r\n        // \tif (data.version.includes('@'+this.center.Version)==false){\r\n        // \t\tthis.ui.CloseAllPanel();\r\n        // \t\tthis.ui.ShowPanel('LoadPanel');\r\n        // \t\t//弹窗提示当前版本号不对\r\n        // \t\tApp.event(GameEvent.ShowFlyTips,{text:`<color=red>发现新版本，请先更新!</c>`})//${i18n.t('txt.login_msg_version')}\r\n        // \t\tGlParam.isEnterGame = false;\r\n        // \t}\r\n        // }\r\n    }\r\n\r\n    reqHeartBeat() {\r\n        // console.log(\"-----心跳-----\", WmSocket.getInstance().isConnected(), ServerCtr.GetInstance().loginState);\r\n\r\n        if (WmSocket.getInstance().isConnected() == false) {\r\n            // uiManager.instance.showDialog(Const.Dialogs.net_prompt, )\r\n            // Notifications.emit(GDef.wdEvent.showTip, {msg:\"网络连接异常\"})\r\n            Http.getInstance().httpPost(tyqSDK.getUrl().httpUrl + GNetConst.Http_isAlive, {}, (res: any) => {\r\n                // cc.log(\"接受到的请求内容是\", res)\r\n                if (res != -1) {\r\n                    TimeCtr.GetInstance().UpdateServerTime(res.serverTime);\r\n                    director.emit(\"ws_reconnect\");\r\n                }\r\n            }, () => {\r\n                ServerCtr.GetInstance().loginState = GLoginState.loginFail;\r\n            });\r\n        } else {\r\n            if (ServerCtr.GetInstance().loginState == GLoginState.loginFail) {\r\n                //重连后登录\r\n                ServerCtr.GetInstance().wxLoginBegin();\r\n            } else {\r\n                this.heartbeatCheck()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    respSaveUserRecord(data: any) {\r\n\r\n        if (data.status == GNetConst.ResFail) {\r\n            console.error(\"发现作弊1----\", data, data.cheatLevel, data.hasOwnProperty(\"cheatLevel\"))\r\n            // let cheatLevel = data.cheatLevel\r\n            // if(cheatLevel!==undefined){\r\n            //     // cc.log(\"cheatLevel2--------!!!!---\", cheatLevel)\r\n            //     localStorage.setItem(\"cheatLevel\", cheatLevel+\"\")\r\n            //     //直接发送一个心跳利用心跳到登录页面\r\n            //     let data = {\r\n            //         \"cmd\": GNetCmd.Heartbeat,\r\n            //         \"lang\": \"zh\",\r\n            //         \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n            //     }\r\n            //     WmSocket.getInstance().send({\"data\":data});\r\n            // }\r\n            // uiManager.instance.showDialog(Const.Dialogs.kick_prompt)\r\n            // GameStorage.setString(\"cheatLevel\", data.cheatLevel)\r\n        }\r\n        // if(data[\"isEnd\"]==false){\r\n        //     this.sendMultiMsg(data[\"idx\"]+1)\r\n        // }\r\n    }\r\n\r\n    // cloudSave(obj){\r\n    //     // 进入游戏每隔5分钟存储一次\r\n    //     obj.schedule(()=>{\r\n    //         if(!GlParam.isEnterGame){\r\n    //             return;\r\n    //         }\r\n    //         this.cloudSaveManual()\r\n    //         // if(WmSocket.getInstance().isConnected()){\r\n    //         //     let data = {\r\n    //         //         \"cmd\": GNetCmd.SaveUserRecord,\r\n    //         //         \"lang\": \"zh\",\r\n    //         //         \"token\": GameStorage.getString(\"loginToken\"),\r\n    //         //         // \"jsonData\": JSON.stringify(GameStorage.getAll()),\r\n    //         //         \"jsonData\": JSON.stringify(GameStorage.getAll()),\r\n    //         //     }\r\n    //         //     cc.log(\"长度测试\",JSON.stringify(GameStorage.getAll()).length)\r\n    //         //     WmSocket.getInstance().send({\"data\":data});\r\n    //         // }\r\n\r\n    //     }, 300);\r\n    // }\r\n\r\n    sendMultiMsg(i: number) {\r\n        // for(let i=0; i<strArr.length; i++){\r\n        //\r\n        // }\r\n\r\n        let data = {\r\n            // \"cmd\": GNetCmd.SaveUserRecord,\r\n            \"cmd\": GNetCmd.SaveUserRecord,\r\n            \"lang\": \"zh\",\r\n            \"type\": \"slice\",\r\n            \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n            // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n            \"jsonData\": this.msgArr[i],\r\n            \"isEnd\": i == this.msgArr.length - 1,\r\n            \"isStart\": i == 0,\r\n            \"idx\": i\r\n        }\r\n        if (!data.jsonData || data.jsonData == \"\" || data.jsonData == \"{}\") {\r\n            return\r\n        }\r\n        // cc.log(\"分段存储\", data)\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    //保存数据到云端\r\n    saveDataToCloud(key: string, val: any) {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return;\r\n        }\r\n        // cc.log(\"上传数据时间标记---------\", new Date().getTime(),  new Date().getTime()-this.testTimeDelta )\r\n        this.testTimeDelta = new Date().getTime()\r\n        if (WmSocket.getInstance().isConnected()) {\r\n            let data = {\r\n                \"cmd\": GNetCmd.SaveUserRecord,\r\n                \"lang\": \"zh\",\r\n                \"type\": \"single\",\r\n                \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n                \"version\": ServerCtr.GetInstance().dataVersion,\r\n                // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n                // \"jsonData\":JSON.stringify(GameStorage.getAll(isFirst)),\r\n                \"key\": key,\r\n                \"val\": String(val),\r\n                \"dml\": \"add upd\"\r\n            }\r\n            // cc.log(\"长度测试\", JSON.stringify(GameStorage.getAll(isFirst)).length)\r\n            WmSocket.getInstance().send({ \"data\": data });\r\n        }\r\n    }\r\n\r\n    uploadAllRecord(jsonData: any) {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return;\r\n        }\r\n        let data = {\r\n            // \"cmd\": GNetCmd.SaveUserRecord,\r\n            \"cmd\": GNetCmd.SaveUserRecordAll,\r\n            \"lang\": \"zh\",\r\n            \"type\": \"single\",\r\n            \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n            // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n            \"version\": ServerCtr.GetInstance().dataVersion,\r\n            \"allData\": JSON.stringify(jsonData),\r\n        }\r\n        // if (!data.jsonData || data.jsonData == \"\" || data.jsonData == \"{}\") {\r\n        //     return\r\n        // }\r\n        // cc.log(\"长度测试\", JSON.stringify(GameStorage.getAll(isFirst)).length)\r\n        console.warn(\"发送数据到云端---\", data)\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    // UploadEmptyRecord(){\r\n    //     if (!ServerCtr.GetInstance().isLogin) {\r\n    //         return;\r\n    //     }\r\n    //     let data = {\r\n    //         // \"cmd\": GNetCmd.SaveUserRecord,\r\n    //         \"cmd\": GNetCmd.SaveUserRecordAll,\r\n    //         \"lang\": \"zh\",\r\n    //         \"type\": \"single\",\r\n    //         \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n    //         // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n    //         \"allData\":JSON.stringify({}),\r\n    //     }\r\n    //     // if (!data.jsonData || data.jsonData == \"\" || data.jsonData == \"{}\") {\r\n    //     //     return\r\n    //     // }\r\n    //     // cc.log(\"长度测试\", JSON.stringify(GameStorage.getAll(isFirst)).length)\r\n    //     WmSocket.getInstance().send({\"data\":data});\r\n    // }\r\n\r\n\r\n    // cloudDeleteManual(key:string){\r\n    //     // if (!this.isPutEnable) {\r\n    //     //     return;\r\n    //     // }\r\n    //     if (!ServerCtr.GetInstance().isLogin) {\r\n    //         return;\r\n    //     }\r\n    //     if(WmSocket.getInstance().isConnected()){\r\n    //         let data = {\r\n    //             // \"cmd\": GNetCmd.SaveUserRecord,\r\n    //             \"cmd\": GNetCmd.SaveUserRecord,\r\n    //             \"lang\": \"zh\",\r\n    //             \"type\": \"single\",\r\n    //             \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n    //             \"key\":key,\r\n    //             \"val\":\"\",\r\n    //             \"dml\":\"del\"\r\n    //         }\r\n    //         Public.warn(\"del--------------\")\r\n    //         WmSocket.getInstance().send({\"data\":data});\r\n    //     }\r\n    // }\r\n\r\n    heartbeatCheck() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.Heartbeat,\r\n            \"lang\": \"zh\",\r\n            \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n}\r\n","import { find, Node, Tween, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport {localizeManager} from \"db://assets/scripts/localization\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DaySignLayer')\r\nexport class DaySignLayer extends BaseLayer {\r\n\r\n    itemUIArr: any = [];\r\n    awardDay: number = 0;\r\n\r\n    titleImg:Node;\r\n    titleLabel:Node;\r\n    hasLabel:Node;\r\n    noLabel:Node;\r\n    fastSginLabel:Node;\r\n    getAwardLabel:Node;\r\n    tipLabel:Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.titleImg = this.getNodeByPath(\"ui/title\");\r\n        this.titleLabel = this.getNodeByPath(\"ui/qdyl_text\");\r\n        this.hasLabel = this.getNodeByPath(\"ui/bottom/info/has\");\r\n        this.noLabel = this.getNodeByPath(\"ui/bottom/info/no\");\r\n        this.fastSginLabel = this.getNodeByPath(\"ui/bottom/btnPatch/text\");\r\n        this.getAwardLabel = this.getNodeByPath(\"ui/btnGetAward/text\");\r\n        this.tipLabel = this.getNodeByPath(\"ui/hintLayer/day\");\r\n\r\n        let itemLayer = this.getNodeByPath(\"ui/itemLayer\");\r\n        let propItem = find(\"propItem\", itemLayer);\r\n        for (let i = 0; i < 2; i++) {\r\n            cocosUtil.instantiate(propItem).parent = itemLayer;\r\n        }\r\n        let itemLayer2 = cocosUtil.instantiate(itemLayer);\r\n        itemLayer2.parent = itemLayer.parent;\r\n        let pos = itemLayer2.getPosition();\r\n        pos.y -= 150;\r\n        itemLayer2.position = pos;\r\n        cocosUtil.instantiate(propItem).parent = itemLayer;\r\n\r\n        itemLayer.children.forEach((itemUI: Node) => {\r\n            this.itemUIArr.push(itemUI);\r\n        });\r\n        itemLayer2.children.forEach((itemUI: Node) => {\r\n            this.itemUIArr.push(itemUI);\r\n        });\r\n\r\n        // test\r\n        // let startTime = new Date(new Date().getTime() - constants.times.day * 6);\r\n        // startTime.setHours(0);\r\n        // startTime.setMinutes(0);\r\n        // startTime.setSeconds(0);\r\n        // startTime.setMilliseconds(0);\r\n        // playerModel.daySignObj.startTime = startTime;\r\n        // delete playerModel.daySignObj;\r\n\r\n        if(tyqAdManager.getChannel() == Channel.OPPO_MINI_GAME){\r\n            playerModel.daySignObj.notBox = 1\r\n        }\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let now = new Date();\r\n        let day = Math.floor((now.getTime() - playerModel.daySignObj.startTime) / constants.times.day);\r\n        this.awardDay = day;\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let itemUI = this.itemUIArr[i];\r\n            let row = designManager.getRowById(constants.tableName.daySign, i + 1);\r\n            this.setPropItem(row.award[0], find(\"icon\", itemUI), row.award[1], find(\"bg\", itemUI), find(\"num/val\", itemUI));\r\n            // this.setString(find(\"day\", itemUI), localText.dayIndex.format(i + 1));\r\n            find(\"day\", itemUI).localize({cat:constants.layers.DaySignLayer,key:\"day\",vars:[i+1]})\r\n\r\n            let getNode = find(\"get\", itemUI);\r\n            let patchNode = find(\"patch\", itemUI);\r\n            let targetNode = find(\"target\", itemUI);\r\n            getNode.active = false;\r\n            patchNode.active = false;\r\n            targetNode.active = false;\r\n            let hasGet = false;\r\n            if (playerModel.daySignObj.awardDayArr.indexOf(i) != -1) {\r\n                hasGet = true;\r\n            }\r\n            if (hasGet) {\r\n                getNode.getChildByName(\"icon\").localizeImg()\r\n                getNode.active = true;\r\n            } else if (i < day) {\r\n                patchNode.getChildByName(\"icon\").localizeImg()\r\n                patchNode.active = true;\r\n            } else if (i == day) {\r\n                targetNode.active = true;\r\n                Tween.stopAllByTarget(targetNode);\r\n                cocosUtil.tweenBlink(targetNode, 0.3);\r\n            }\r\n        }\r\n\r\n        // 已签到次数\r\n        // this.setString(this.getNodeByPath(\"ui/bottom/info/has/info/text\"), playerModel.daySignObj.awardDayArr.length + localText.ci);\r\n        this.getNodeByPath(\"ui/bottom/info/has/info/text\").localize({cat:constants.layers.DaySignLayer, key:\"times\", vars:[playerModel.daySignObj.awardDayArr.length]});\r\n        // 未签到次数\r\n        // this.setString(this.getNodeByPath(\"ui/bottom/info/no/info/text\"), 7 - playerModel.daySignObj.awardDayArr.length + localText.ci);\r\n        this.getNodeByPath(\"ui/bottom/info/no/info/text\").localize({cat:constants.layers.DaySignLayer, key:\"times\",vars:[7 - playerModel.daySignObj.awardDayArr.length]});\r\n\r\n        this.setProgressBar(this.getNodeByPath(\"ui/bottom/bar\"), playerModel.daySignObj.awardDayArr.length / 7);\r\n\r\n        this.refreshFinalAwardLayer();\r\n        this.refreshBoxLayer();\r\n    }\r\n\r\n    refreshLocalization() {\r\n        this.titleImg.localizeImg();\r\n        this.titleLabel.localize(\"title\",constants.layers.DaySignLayer);\r\n        this.hasLabel.localize(\"sign_done\",constants.layers.DaySignLayer);\r\n        this.noLabel.localize(\"sign_none\",constants.layers.DaySignLayer);\r\n        this.fastSginLabel.localize(\"reSign\",constants.layers.DaySignLayer);\r\n        this.getAwardLabel.localize(\"btnGet\",constants.layers.DaySignLayer);\r\n        this.tipLabel.localize(\"tip\",constants.layers.DaySignLayer);\r\n    }\r\n\r\n    refreshFinalAwardLayer() {\r\n        let getNode = this.getNodeByPath(\"ui/bottom/extraAward/get\");\r\n        let lockNode = this.getNodeByPath(\"ui/bottom/extraAward/lock\");\r\n        getNode.active = false;\r\n        lockNode.active = false;\r\n        if (playerModel.daySignObj.finalAward) {\r\n            getNode.active = true;\r\n        } else if (playerModel.daySignObj.awardDayArr.length < 7) {\r\n            lockNode.active = true;\r\n        }\r\n    }\r\n\r\n    refreshBoxLayer() {\r\n        if (playerModel.daySignObj.notBox) {\r\n            this.getNodeByPath(\"ui/hintLayer/btnBox/gou\").active = false;\r\n        } else {\r\n            this.getNodeByPath(\"ui/hintLayer/btnBox/gou\").active = true;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    signWithDay(day: number, double: boolean = false) {\r\n        let row = designManager.getRowById(constants.tableName.daySign, day + 1);\r\n        if (!row) {\r\n            return;\r\n        }\r\n\r\n        let awardArr = [row.award];\r\n        if (double) {\r\n            awardArr.push(row.award);\r\n        }\r\n        awardArr = UserData.getInstance().addPropArrByDesign(awardArr);\r\n        this.openAwardGetLayer(awardArr);\r\n        playerModel.daySignObj.awardDayArr.push(day);\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBtnGetAward() {\r\n        let row = designManager.getRowById(constants.tableName.daySign, this.awardDay + 1);\r\n        if (!row) {\r\n            this.createNotice(localizeManager._localize(null,\"outData\",constants.layers.DaySignLayer));\r\n            return;\r\n        }\r\n        if (playerModel.daySignObj.awardDayArr.indexOf(this.awardDay) != -1) {\r\n            // 已领取奖励了\r\n            this.createNotice(localizeManager._localize(null,\"todayHasGet\",constants.layers.DaySignLayer));\r\n            return;\r\n        }\r\n\r\n        playerModel.addDayTaskNum(2);\r\n\r\n        tyqSDK.eventSendCustomEvent(\"签到玩家\")\r\n\r\n        if (playerModel.daySignObj.notBox) {\r\n            this.signWithDay(this.awardDay);\r\n        } else {\r\n            sdkManager.openAd(\"签到双倍奖励\", (st: number) => {\r\n                if (st == 1) {\r\n                    this.signWithDay(this.awardDay, true);\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onClickBtnPatch() {\r\n        let targetDay = -1;\r\n        for (let i = 0; i < 7; i++) {\r\n            if (playerModel.daySignObj.awardDayArr.indexOf(i) == -1) {\r\n                targetDay = i;\r\n                break;\r\n            }\r\n        }\r\n        if (targetDay == -1 || targetDay >= this.awardDay) {\r\n            this.createNotice(localizeManager._localize(null,\"noLeave\",constants.layers.DaySignLayer));\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"快速补签\", (st: number) => {\r\n            if (st == 1) {\r\n                this.signWithDay(targetDay);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    onClickBtnBox() {\r\n        if (playerModel.daySignObj.notBox) {\r\n            playerModel.daySignObj.notBox = 0;\r\n        } else {\r\n            playerModel.daySignObj.notBox = 1;\r\n        }\r\n        this.refreshBoxLayer();\r\n    }\r\n\r\n    onClickExtraAward() {\r\n        if (playerModel.daySignObj.awardDayArr.length < 7) {\r\n            this.createNotice(localizeManager._localize(null,\"finalAwardHint\",constants.layers.DaySignLayer));\r\n            return;\r\n        }\r\n        if (playerModel.daySignObj.finalAward) {\r\n            // 已领取\r\n            this.createNotice(localizeManager._localize(null,\"hasGet\",\"common\"));\r\n            return;\r\n        }\r\n\r\n        playerModel.daySignObj.finalAward = 1;\r\n        let propItem = UserData.getInstance().addPropByDesign(designManager.config.daySignFinalAward);\r\n        this.openAwardGetLayer([propItem]);\r\n\r\n        this.refreshFinalAwardLayer();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DayTaskLayer')\r\nexport class DayTaskLayer extends BaseLayer {\r\n\r\n    flagArr = [25, 50, 75, 100];\r\n    taskListNode: Node;\r\n\r\n    private closeBtnText:Node;\r\n    private hintNode: Node;\r\n    private titleNode: Node;\r\n\r\n    // preLoadAssetConfigArr = [\r\n    //     { bundle: \"ui\", path: \"day_task/item_bg\", type: SpriteFrame }\r\n    // ];\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.taskListNode = this.getNodeByPath(\"ui/listbg/list\");\r\n        this.titleNode = this.getNodeByPath(\"ui/title\");\r\n        this.closeBtnText = this.getNodeByPath(\"ui/btnClose/text\");\r\n        this.hintNode = this.getNodeByPath(\"ui/hint\");\r\n\r\n        // test\r\n        // UserData.getInstance().addPropNum(constants.propIds.dayAct, 90);\r\n        // delete playerModel.dayTaskObj;\r\n\r\n    }\r\n\r\n    refreshLocalization() {\r\n        this.closeBtnText.localize(\"click2close\",\"common\");\r\n        this.hintNode.localize(\"hint\",constants.layers.DayTaskLayer);\r\n        this.titleNode.localizeImg(constants.bundles.ui,\"title\",constants.layers.DayTaskLayer);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.overDay\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshTopLayer();\r\n\r\n        let tb = designManager.getTable(constants.tableName.dayTask);\r\n        let arr = [];\r\n        for (let i = 0; i < tb.length; i++) {\r\n            let row = tb[i];\r\n            let task: any = {};\r\n            task.id = row.id;\r\n            arr.push(task);\r\n        }\r\n\r\n        // 排序 已完成(未领取)-进度快-已领取\r\n        utilTools.sortArr(arr, (task1: any, task2: any) => {\r\n            let row1 = designManager.getRowById(constants.tableName.dayTask, task1.id);\r\n            let row2 = designManager.getRowById(constants.tableName.dayTask, task2.id);\r\n            let info1 = playerModel.getTaskInfoById(task1.id);\r\n            let info2 = playerModel.getTaskInfoById(task2.id);\r\n            let v1 = info1.num / row1.needNum;\r\n            let v2 = info2.num / row2.needNum;\r\n            if (info1.getAward) {\r\n                v1 = -1;\r\n            }\r\n            if (info2.getAward) {\r\n                v2 = -1;\r\n            }\r\n            if (v1 < v2) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n\r\n        this.scrollViewSetData(this.taskListNode, arr, this.refreshTaskItem.bind(this), true, true);\r\n\r\n    }\r\n\r\n    refreshTopLayer() {\r\n        let actNum = UserData.getInstance().dayAct;\r\n        this.setString(this.getNodeByPath(\"ui/top/act/num\"), actNum);\r\n        this.setProgressBar(this.getNodeByPath(\"ui/top/progress\"), actNum / 100);\r\n\r\n        let chs = this.getNodeByPath(\"ui/top/progress/boxs\").children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            let itemUI = chs[i];\r\n            itemUI.index = i;\r\n            let num = this.flagArr[i];\r\n            this.setString(find(\"num\", itemUI), num);\r\n            let shineNode = find(\"shine\", itemUI);\r\n            let iconNode = find(\"icon\", itemUI);\r\n            let openNode = find(\"open\", itemUI);\r\n            shineNode.active = false;\r\n            iconNode.active = false;\r\n            openNode.active = false;\r\n            if (actNum >= num) {\r\n                let flag = this.getAwardFlag(i);\r\n                if (playerModel.dayTaskObj.awardFlagArr.indexOf(flag) == -1) {\r\n                    // 还没领取\r\n                    iconNode.active = true;\r\n                    shineNode.active = true;\r\n                    cocosUtil.tweenBreath(shineNode, 0.5, 1.2);\r\n                } else {\r\n                    // 已领取\r\n                    openNode.active = true;\r\n                }\r\n            } else {\r\n                shineNode.active = false;\r\n                iconNode.active = true;\r\n                openNode.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    refreshTaskItem(itemUI: any, task: any) {\r\n        let row = designManager.getRowById(constants.tableName.dayTask, task.id);\r\n        find(\"info\", itemUI).localize(`task${task.id}`,constants.layers.DayTaskLayer);\r\n        find(\"awardLayer\", itemUI).children.forEach((awardItem: any, index: number) => {\r\n            let propId = row.award[index][0];\r\n            let propNum = row.award[index][1];\r\n            this.setPropItem(propId, find(\"icon\", awardItem), propNum, null, find(\"num/val\", awardItem));\r\n            awardItem.award = row.award[index];\r\n        });\r\n        let info = playerModel.getTaskInfoById(row.id);\r\n        let num = info.num;\r\n        if (row.id == 1 && num > 1) {\r\n            num = 1;\r\n        }\r\n        this.setString(find(\"progress/hint\", itemUI), num + \"/\" + row.needNum);\r\n        this.setProgressBar(find(\"progress\", itemUI), info.num / row.needNum);\r\n\r\n        find(\"btnGo/text\", itemUI).localize(\"go\",\"common\");\r\n        find(\"btnGet/text\", itemUI).localize(\"get\",\"common\");\r\n\r\n        let btnGet = find(\"btnGet\", itemUI);\r\n        let btnGo = find(\"btnGo\", itemUI);\r\n        let doneNode = find(\"done\", itemUI);\r\n        btnGet.item = task;\r\n        btnGo.item = task;\r\n        btnGet.active = false;\r\n        btnGo.active = false;\r\n        doneNode.active = false;\r\n        if (info.num >= row.needNum) {\r\n            if (info.getAward) {\r\n                doneNode.active = true;\r\n            } else {\r\n                btnGet.active = true;\r\n            }\r\n        } else {\r\n            btnGo.active = true;\r\n        }\r\n\r\n        if (row.type == 3 && designManager.config.taskDoge > UserData.getInstance().$freeDraw) {\r\n            btnGo.getChildByName(\"hand\").active = true\r\n        } else {\r\n            btnGo.getChildByName(\"hand\").active = false\r\n        }\r\n    }\r\n\r\n    overDayRet() {\r\n        this.initUI();\r\n    }\r\n\r\n    getAwardFlag(index: number) {\r\n        return \"dayTaskAward\" + (index + 1);\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBoxItem(node: any) {\r\n        let awardArr = [];\r\n        for (let i = 0; i < this.flagArr.length; i++) {\r\n            let flag = this.getAwardFlag(i);\r\n            let award = designManager.config[flag];\r\n            let num = this.flagArr[i];\r\n            let actNum = UserData.getInstance().dayAct;\r\n            if (actNum < num) {\r\n                // 还未达成\r\n                continue;\r\n            }\r\n            if (playerModel.dayTaskObj.awardFlagArr.indexOf(flag) != -1) {\r\n                // 已领取奖励\r\n                continue;\r\n            }\r\n            let propItem = UserData.getInstance().addPropNum(award[0], award[1]);\r\n            playerModel.dayTaskObj.awardFlagArr.push(flag);\r\n            awardArr.push(propItem);\r\n            tyqSDK.eventSendCustomEvent(\"每日任务-完成\" + this.flagArr[i])\r\n        }\r\n        if (awardArr.length > 0) {\r\n            this.openAwardGetLayer(awardArr);\r\n            this.refreshTopLayer();\r\n        } else {\r\n            let flag = this.getAwardFlag(node.index);\r\n            let award = designManager.config[flag];\r\n            this.openAwardInfoLayer([award]);\r\n        }\r\n    }\r\n\r\n    onClickBtnGo(node: any) {\r\n        let row = designManager.getRowById(constants.tableName.dayTask, node.item.id);\r\n        let obj: any = {};\r\n        switch (row.type) {\r\n            case 2:\r\n                obj.layerName = constants.layers.DaySignLayer;\r\n                break;\r\n            case 3:\r\n                obj.layerName = \"ShopLayer\";\r\n                obj.taskGo = true\r\n                break;\r\n            case 4:\r\n            case 5:\r\n            case 6:\r\n            case 7:\r\n            case 10:\r\n                obj.layerName = \"MainLayer\";\r\n                break;\r\n            case 8:\r\n                obj.layerName = \"PatrolLayer\";\r\n                break;\r\n            case 9:\r\n                obj.layerName = \"BlessLayer\";\r\n                break;\r\n            case 11:\r\n                obj.layerName = \"RewardItemLayer\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        eventManager.send(msgac.jumpLayer, obj);\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnGet(node: any) {\r\n        let info = playerModel.getTaskInfoById(node.item.id);\r\n        let row = designManager.getRowById(constants.tableName.dayTask, node.item.id);\r\n        if (info.getAward) {\r\n            // 已领取\r\n            return;\r\n        }\r\n        if (info.num < row.needNum) {\r\n            // 还未完成\r\n            return;\r\n        }\r\n        let arr = UserData.getInstance().addPropArrByDesign(row.award);\r\n        this.openAwardGetLayer(arr);\r\n        info.getAward = 1;\r\n        this.refreshTopLayer();\r\n        this.scrollViewRefreshList(this.taskListNode);\r\n        eventManager.send(msgac.refreshRedPoint);\r\n        tyqSDK.eventSendCustomEvent(\"每日任务-参与领取奖励\")\r\n    }\r\n\r\n    onClickAwardItem(node: any) {\r\n        let award = node.award;\r\n        this.openPropInfoLayer2(award[0], award[1]);\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator, Component, Label } from 'cc';\r\nimport { myLog } from './myLog';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DebugLogManager')\r\nexport class DebugLogManager extends Component {\r\n    logLabel: Label = null; // 在编辑器中将 Label 组件拖到这里\r\n\r\n    private logMessages: string[] = [];\r\n\r\n    onLoad() {\r\n        this.logLabel  = this.node.getComponent(Label);\r\n        \r\n        // 保存原始的 console.log 方法\r\n        // const originalLog = console.log;\r\n        const originalLog = myLog.d;\r\n\r\n        // 重写 console.log 方法\r\n        // console.log = (...params: any[]) => {\r\n        myLog.d = (...params: any[]) => {\r\n            // 将日志信息转换为字符串\r\n            const message = params.join(' ');\r\n\r\n            // 将日志信息添加到数组\r\n            this.logMessages.push(message);\r\n\r\n            // 如果日志条数超过 10 条，删除最早的一条\r\n            if (this.logMessages.length > 100) {\r\n                this.logMessages.shift(); // 删除最早的一条\r\n            }\r\n\r\n            // 更新 Label 显示\r\n            this.updateLogDisplay();\r\n\r\n            params.unshift(new Date().toLocaleTimeString());\r\n\r\n            // 调用原始的 console.log 方法以保持控制台输出\r\n            // originalLog.apply(console, params);\r\n            originalLog(params);\r\n        };\r\n    }\r\n\r\n    private updateLogDisplay() {\r\n        // 将所有日志信息连接成字符串并显示在 Label 中\r\n        if (this.logLabel) {\r\n            this.logLabel.string = this.logMessages.join('\\n'); \r\n        }\r\n    }\r\n}","import { JsonAsset } from \"cc\";\r\nimport { constants } from \"../data/constants\";\r\nimport { resManager } from \"./resManager\";\r\n\r\nclass DesignManager {\r\n\r\n    private static _instance: DesignManager;\r\n    private constructor() { };\r\n    public static get instance(): DesignManager {\r\n        if (!this._instance) {\r\n            this._instance = new DesignManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    // 原始对象 {表名:[记录1]]}\r\n    private tb2Arr: object = {};\r\n    // id索引(唯一)对象 {表名:{id:记录}}\r\n    private tb2Obj: object = {};\r\n    // type索引(一对多) {表名:{type:[记录]}\r\n    private tbType2Arr: object = {};\r\n\r\n    // 零散数据表\r\n    public config: any = {};\r\n\r\n    // // 本地化语言杂项表\r\n    // public localization: any = {};\r\n\r\n    loadAllDesignTable(onProgress?: Function, onComplete?: Function) {\r\n        resManager.loadAsset(constants.bundles.design, \"design\", JsonAsset, (percent: number) => {\r\n            if (onProgress) {\r\n                onProgress(percent);\r\n            }\r\n        }, (err, asset) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            this.tb2Arr = asset.json;\r\n\r\n            // 数据格式化\r\n            for (let tbName in this.tb2Arr) {\r\n                let tbData = this.tb2Arr[tbName];\r\n                this.initTable(tbName, tbData);\r\n            }\r\n\r\n            // 释放资源\r\n            resManager.releaseAsset(asset);\r\n\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n        });\r\n    }\r\n\r\n    initTable(tbName: string, tbData: object) {\r\n        this.tb2Obj[tbName] = {};\r\n        for (let i in tbData) {\r\n            let row = tbData[i];\r\n            // id索引\r\n            this.tb2Obj[tbName][row.id] = row;\r\n            if (row.hasOwnProperty(\"type\") && row.type != \"\" && row.type != null) {\r\n                // type索引\r\n                if (!this.tbType2Arr[tbName]) {\r\n                    this.tbType2Arr[tbName] = {};\r\n                }\r\n                if (!this.tbType2Arr[tbName][row.type]) {\r\n                    this.tbType2Arr[tbName][row.type] = [];\r\n                }\r\n                let tmpArr = this.tbType2Arr[tbName][row.type];\r\n                tmpArr.push(row);\r\n            }\r\n            if (tbName == \"config\") {\r\n                this.config[row.name] = row.val || row.val2 ;\r\n            }\r\n            // if (tbName == \"localization\") {\r\n            //     if (row.id == 1){\r\n            //         this.localization.lang = row.text;\r\n            //         continue;\r\n            //     }\r\n            //     // type表\r\n            //     if (!this.localization[row.type]) {\r\n            //         this.localization[row.type] = {};\r\n            //     }\r\n            //     // cat表\r\n            //     if (!this.localization[row.type][row.cat]) {\r\n            //         this.localization[row.type][row.cat] = {};\r\n            //     }\r\n            //     // 取文字或资源路径\r\n            //     this.localization[row.type][row.cat][row.key] = row.text || row.res;\r\n            // }\r\n        }\r\n    }\r\n\r\n    getAllTables() : {}{\r\n        return this.tb2Arr;\r\n    }\r\n\r\n    getTable(tableName: string) {\r\n        return this.tb2Arr[tableName];\r\n    }\r\n\r\n    getRowById(tableName: string, id: number) {\r\n        return this.tb2Obj[tableName][id];\r\n    }\r\n\r\n    getRowsByType(tableName: string, type: number | string) {\r\n        if (this.tbType2Arr[tableName] && this.tbType2Arr[tableName][type]) {\r\n            return this.tbType2Arr[tableName][type];\r\n        }\r\n        return [];\r\n    }\r\n\r\n    getLastRow(tableName: string) {\r\n        let tb = this.getTable(tableName);\r\n        return tb[tb.length - 1];\r\n    }\r\n\r\n    getFirstIdByType(type: number) {\r\n        return type * 10 + 1;\r\n    }\r\n\r\n}\r\n\r\nexport const designManager = DesignManager.instance;\r\n\r\n","import { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { utilTools } from \"../../utils/utilTools\";\r\nimport { constants } from \"../data/constants\";\r\nimport { audioManager } from \"../manager/audioManager\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { layerManager } from \"../manager/layerManager\";\r\nimport { mapModel } from \"./mapModel\";\r\nimport { playerModel } from \"./playerModel\";\r\n\r\n// 开发阶段，为了调试方便，把单例放入window\r\nif (cocosUtil.isDesktopBrowser()) {\r\n    window.designManager = designManager;\r\n    window.audioManager = audioManager;\r\n    window.utilTools = utilTools;\r\n    window.constants = constants;\r\n    window.layerManager = layerManager;\r\n\r\n    window.mapModel = mapModel;\r\n    window.playerModel = playerModel;\r\n}","import { Component, tween, v3, _decorator } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DialogEffect')\r\nexport class DialogEffect extends Component {\r\n\r\n    onEnable() {\r\n        tween(this.node).set({ scale: v3(0, 0, 0) }).to(0.17, { scale: v3(1.1, 1.1, 1.2) }).to(0.06, { scale: v3(1, 1, 1) }).start();\r\n    }\r\n}","import { find, Node, ScrollView, UITransform, v2, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('EnergyLayer')\r\nexport class EnergyLayer extends BaseLayer {\r\n\r\n    timeNode: Node;\r\n    barNode: Node;\r\n    contentNode: Node;\r\n    handNode: Node;\r\n\r\n    itemUIArr: any = [];\r\n\r\n    onLoad() {\r\n        this.layerName = constants.layers.EnergyLayer;\r\n        super.onLoad();\r\n\r\n        this.getNodeByPath(\"ui/title\").localizeImg();\r\n        this.getNodeByPath(\"ui/bar/lv\").localizeImg();\r\n        this.getNodeByPath(\"ui/hint\").localize(\"hint\",constants.layers.EnergyLayer);\r\n        this.getNodeByPath(\"ui/bar/freeText\").localize(\"freeText\",constants.layers.EnergyLayer);\r\n        this.getNodeByPath(\"ui/bar/extraText\").localize(\"extraText\",constants.layers.EnergyLayer);\r\n\r\n        this.timeNode = this.getNodeByPath(\"ui/time/text\");\r\n        this.barNode = this.getNodeByPath(\"ui/energyListNoUtil/view/content/bar\");\r\n        this.contentNode = this.getNodeByPath(\"ui/energyListNoUtil/view/content\");\r\n        this.handNode = this.getNodeByPath(\"ui/energyListNoUtil/view/content/hand\");\r\n        this.handNode.active = false;\r\n\r\n        let rowArr = designManager.getTable(constants.tableName.energyAward);\r\n        let energyItem = find(\"layer/energyItem\", this.contentNode);\r\n        let itemUI: any = energyItem;\r\n        for (let i = 0; i < rowArr.length; i++) {\r\n            let row = rowArr[i];\r\n            if (i > 0) {\r\n                itemUI = cocosUtil.instantiate(energyItem);\r\n                itemUI.parent = find(\"layer\", this.contentNode);\r\n            }\r\n            itemUI.row = row;\r\n            this.itemUIArr.push(itemUI);\r\n        }\r\n\r\n        let height = itemUI.getComponent(UITransform).height;\r\n        this.contentNode.getComponent(UITransform).height = height * (rowArr.length + 0.5);\r\n        this.barNode.getComponent(UITransform).height = height * rowArr.length;\r\n\r\n        // test\r\n        // UserData.getInstance().addPropNum(108, 600);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        this.addEventArr([\r\n            msgac.energyObjRefresh\r\n        ]);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.refreshShowList();\r\n        });\r\n    }\r\n\r\n    refreshShowList() {\r\n        this.handNode.active = false;\r\n        let listNode = this.getNodeByPath(\"ui/energyListNoUtil\");\r\n        // 自动滚动，优先到首个未领取奖励的地方，其次首个未完成的地方\r\n        let targetItemUI = null;\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let row = this.itemUIArr[i].row;\r\n            let info = playerModel.getEnergyAwardInfoById(row.id);\r\n            if (UserData.getInstance().energy >= row.num && (!info.award1)) {\r\n                targetItemUI = this.itemUIArr[i];\r\n                break;\r\n            }\r\n        }\r\n        if (targetItemUI) {\r\n            this.handNode.active = true;\r\n            let pos = cocosUtil.convertToWorldSpace(find(\"awardLayer/awardItem1\", targetItemUI));\r\n            pos = cocosUtil.convertToNodeSpace(this.handNode, pos);\r\n            this.handNode.position = pos;\r\n        }\r\n\r\n        if (!targetItemUI) {\r\n            for (let i = 0; i < this.itemUIArr.length; i++) {\r\n                let row = this.itemUIArr[i].row;\r\n                if (UserData.getInstance().energy < row.num) {\r\n                    targetItemUI = this.itemUIArr[i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (!targetItemUI) {\r\n            targetItemUI = this.itemUIArr[this.itemUIArr.length - 1];\r\n        }\r\n\r\n        let my = Math.abs(targetItemUI.position.y) - targetItemUI.getComponent(UITransform).height;\r\n        if (my < 0) {\r\n            my = 0;\r\n        }\r\n        let pos = v2(0, 0);\r\n        pos.y = my;\r\n        listNode.getComponent(ScrollView).scrollToOffset(pos, 0.6);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.energyObjRefresh\r\n        ]);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    energyObjRefreshRet(data: any) {\r\n        let scrollView = this.getNodeByPath(\"ui/energyListNoUtil\").getComponent(ScrollView);\r\n        scrollView.stopAutoScroll();\r\n        scrollView.scrollToTop();\r\n        this.initUI();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshTimeNode();\r\n        this.refreshItemUIArr();\r\n        this.refrshProgress();\r\n    }\r\n\r\n    refreshTimeNode() {\r\n        let duration = playerModel.energyObj.endTime.getTime() - new Date().getTime();\r\n        let day = Math.floor(duration / constants.times.day);\r\n        let hour = Math.ceil((duration - day * constants.times.day) / constants.times.houre);\r\n        // this.setString(this.timeNode, localText.energyTimeHint.format(day, hour));\r\n        this.timeNode.localize({key:\"time\",cat:constants.layers.EnergyLayer,vars:[day,hour]})\r\n    }\r\n\r\n    refrshProgress() {\r\n        let tb = designManager.getTable(constants.tableName.energyAward);\r\n        let id = 0;\r\n        for (let i = 0; i < tb.length; i++) {\r\n            let row = tb[i];\r\n            if (UserData.getInstance().energy < row.num) {\r\n                id = i + 1;\r\n                break;\r\n            }\r\n        }\r\n        let p = 1 / tb.length * (id - 1);\r\n        if (id == 0) {\r\n            p = 1;\r\n        } else {\r\n            let row = designManager.getRowById(constants.tableName.energyAward, id);\r\n            let lastRow = designManager.getRowById(constants.tableName.energyAward, id - 1);\r\n            let lastNum = 0;\r\n            if (lastRow) {\r\n                lastNum = lastRow.num;\r\n            }\r\n            let max = row.num - lastNum;\r\n            let r = UserData.getInstance().energy - lastNum;\r\n            let rp = (1 / tb.length) * (r / max);\r\n            p += rp;\r\n        }\r\n        this.setProgressBar(this.barNode, p);\r\n    }\r\n\r\n    refreshItemUIArr() {\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let itemUI = this.itemUIArr[i];\r\n            let row = itemUI.row;\r\n            this.setString(find(\"flag/rank\", itemUI), row.id);\r\n            // this.setString(find(\"flag/num\", itemUI), row.num + localText.point);\r\n            find(\"flag/num\",itemUI).localize({key:\"energyPoint\",cat:constants.layers.EnergyLayer, vars:[row.num]});\r\n            let info = playerModel.getEnergyAwardInfoById(row.id);\r\n\r\n            // 普通奖励\r\n            find(\"awardLayer/awardItem1\", itemUI).row = row;\r\n            let shineNode1 = find(\"awardLayer/awardItem1/shine\", itemUI);\r\n            let lockNode1 = find(\"awardLayer/awardItem1/lock\", itemUI);\r\n            let hasGetNode1 = find(\"awardLayer/awardItem1/hasGet\", itemUI);\r\n            hasGetNode1.getChildByName(\"get\").localizeImg();\r\n            shineNode1.active = false;\r\n            lockNode1.active = false;\r\n            hasGetNode1.active = false;\r\n            if (UserData.getInstance().energy >= row.num) {\r\n                if (info.award1) {\r\n                    // 已领取\r\n                    hasGetNode1.active = true;\r\n                } else {\r\n                    // 可领取\r\n                    shineNode1.active = true;\r\n                }\r\n            } else {\r\n                lockNode1.active = true;\r\n            }\r\n\r\n            // 广告奖励\r\n            find(\"awardLayer/awardItem2\", itemUI).row = row;\r\n            let shineNode2 = find(\"awardLayer/awardItem2/shine\", itemUI);\r\n            let lockNode2 = find(\"awardLayer/awardItem2/lock\", itemUI);\r\n            let hasGetNode2 = find(\"awardLayer/awardItem2/hasGet\", itemUI);\r\n            hasGetNode2.getChildByName(\"get\").localizeImg();\r\n            shineNode2.active = false;\r\n            lockNode2.active = false;\r\n            hasGetNode2.active = false;\r\n            if (UserData.getInstance().energy >= row.num) {\r\n                if (info.award2) {\r\n                    // 已领取\r\n                    hasGetNode2.active = true;\r\n                } else {\r\n                    // 可领取\r\n                    shineNode2.active = true;\r\n                }\r\n            } else {\r\n                lockNode2.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickAwardItem1(node: any) {\r\n        let row = node.row;\r\n        if (UserData.getInstance().energy < row.num) {\r\n            // 还未完成\r\n            this.openAwardInfoLayer(row.award1);\r\n            return;\r\n        }\r\n        let info = playerModel.getEnergyAwardInfoById(row.id);\r\n        if (info.award1) {\r\n            // 已领取\r\n            this.openAwardInfoLayer(row.award1);\r\n            return;\r\n        }\r\n        info.award1 = 1;\r\n        let award = UserData.getInstance().addPropArrByDesign(row.award1);\r\n        this.openAwardGetLayer(award);\r\n        this.initUI();\r\n        this.refreshShowList();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickAwardItem2(node: any) {\r\n        let row = node.row;\r\n        if (UserData.getInstance().energy < row.num) {\r\n            // 还未完成\r\n            this.openAwardInfoLayer(row.award2);\r\n            return;\r\n        }\r\n        let info = playerModel.getEnergyAwardInfoById(row.id);\r\n        if (info.award2) {\r\n            // 已领取\r\n            this.openAwardInfoLayer(row.award2);\r\n            return;\r\n        }\r\n        sdkManager.openAd(\"能量战令\", (st: number) => {\r\n            if (st == 1) {\r\n                info.award2 = 1;\r\n                let award = UserData.getInstance().addPropArrByDesign(row.award2);\r\n                this.openAwardGetLayer(award);\r\n                this.initUI();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBar() {\r\n        // playerModel.energyObj.endTime = new Date();\r\n        // UserData.getInstance().addPropNum(108, 100);\r\n        // this.initUI();\r\n    }\r\n\r\n}\r\n\r\n","import { myLog } from \"../../common/myLog\";\r\nimport { msgac } from \"../data/msgac\";\r\n\r\n\r\nclass EventManager {\r\n\r\n    private static _instance: EventManager;\r\n    private constructor() { }\r\n    public static get instance(): EventManager {\r\n        if (!this._instance) {\r\n            this._instance = new EventManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    acList: any = {};\r\n\r\n    on(ac: string | number, cb: Function, sender: any) {\r\n        let arr = this.acList[ac];\r\n        if (!arr) {\r\n            arr = [];\r\n            this.acList[ac] = arr;\r\n        }\r\n\r\n        // 避免重复添加\r\n        for (let i in arr) {\r\n            let item = arr[i];\r\n            if (item.sender == sender) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        let item: any = {};\r\n        item.cb = cb;\r\n        item.sender = sender;\r\n        arr.push(item);\r\n    }\r\n\r\n\r\n    off(ac: string | number, cb: Function, sender: any) {\r\n        let arr = this.acList[ac];\r\n        if (!arr) {\r\n            return;\r\n        }\r\n\r\n        let tmpArr = [];\r\n        for (let i in arr) {\r\n            let item = arr[i];\r\n            if (item.cb == cb && item.sender == sender) {\r\n                continue;\r\n            }\r\n            tmpArr.push(item);\r\n        }\r\n\r\n        this.acList[ac] = tmpArr;\r\n    }\r\n\r\n    offWithSender(sender: any) {\r\n        for (let ac in this.acList) {\r\n            let arr = this.acList[ac];\r\n\r\n            let tmpArr = [];\r\n            for (let i in arr) {\r\n                let item = arr[i];\r\n                if (item.sender == sender) {\r\n                    continue;\r\n                }\r\n                tmpArr.push(item);\r\n            }\r\n\r\n            this.acList[ac] = tmpArr;\r\n        }\r\n    }\r\n\r\n    send(ac: string | number, data?: any) {\r\n        let arr = this.acList[ac];\r\n        if (!arr) {\r\n            return;\r\n        }\r\n        let isLog = true;\r\n        if (data && data.notMyLog) {\r\n            isLog = false;\r\n        }\r\n        if (ac == msgac.joystick\r\n\r\n        ) {\r\n            isLog = false;\r\n        }\r\n        if (isLog) {\r\n            let key = msgac.ac2KeyObj[ac];\r\n            myLog.i(key, data);\r\n        }\r\n        try {\r\n            for (let i in arr) {\r\n                let item = arr[i];\r\n                let cb = item.cb;\r\n                let sender = item.sender;\r\n                let info = {\r\n                    ac: ac,\r\n                    data: data\r\n                };\r\n                cb.call(sender, info);\r\n            }\r\n        } catch (err) {\r\n            myLog.e(\"eventManager send error:\" + err.message, ac, data, err);\r\n        }\r\n    }\r\n}\r\n\r\nexport const eventManager = EventManager.instance;\r\n\r\n","import { Component, tween, UIOpacity, UITransform, _decorator } from 'cc';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('feiBiao')\r\nexport class feiBiao extends Component {\r\n\r\n    hint: Hint;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        let tf = this.hint.bodyNode.getComponent(UITransform);\r\n        tf.width = this.hint.extraObj.width;\r\n        tf.height = this.hint.extraObj.height;\r\n\r\n        let uiOpacity = this.getComponent(UIOpacity);\r\n        uiOpacity.opacity = 255;\r\n\r\n        tween(uiOpacity).to(0.3, { opacity: 0 }).call(() => {\r\n            this.hint.recycleSelf();\r\n        }).start();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import * as cc from \"cc\";\r\n\r\nenum READ_FILE_TYPE {\r\n    DATA_URL,// readAsDataURL, base64\r\n    TEXT,// readAsText\r\n    BINARY,// readAsBinaryString\r\n    ARRAYBUFFER,// readAsArrayBuffer\r\n}\r\n\r\nexport class FileUtils {\r\n    /**\r\n    * 打开文件选择器\r\n    *\r\n    * @param {string} accept\r\n    * @param {(file: File) => void} callback\r\n    * @memberof FileMgr\r\n    */\r\n    public static openLocalFile(accept: string, callback: (file: File) => void) {\r\n        let inputEl: HTMLInputElement = <HTMLInputElement>document.getElementById('file_input');\r\n        if (!inputEl) {\r\n            // console.log('xxxxxx createElement input');\r\n            inputEl = document.createElement('input');\r\n            inputEl.id = 'file_input';\r\n            inputEl.setAttribute('id', 'file_input');\r\n            inputEl.setAttribute('type', 'file');\r\n            inputEl.setAttribute('class', 'fileToUpload');\r\n            inputEl.style.opacity = '0';\r\n            inputEl.style.position = 'absolute';\r\n            inputEl.setAttribute('left', '-999px');\r\n            document.body.appendChild(inputEl);\r\n        }\r\n\r\n        accept = accept || \".*\";\r\n        inputEl.setAttribute('accept', accept);\r\n\r\n        inputEl.onchange = (event) => {\r\n            let files = inputEl.files\r\n            if (files && files.length > 0) {\r\n                var file = files[0];\r\n                if (callback) callback(file);\r\n            }\r\n        }\r\n        inputEl.click();\r\n    }\r\n\r\n    /**\r\n     * 读取本地文件数据\r\n     *\r\n     * @param {File} file\r\n     * @param {READ_FILE_TYPE} readType\r\n     * @param {((result: string | ArrayBuffer) => void)} callback\r\n     * @memberof FileMgr\r\n     */\r\n    public static readLocalFile(file: File, readType: READ_FILE_TYPE, callback: (result: string | ArrayBuffer) => void) {\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            if (callback) {\r\n                if (reader.readyState == FileReader.DONE) {\r\n                    callback(reader.result!);\r\n                } else {\r\n                    callback(null!);\r\n                }\r\n            }\r\n        };\r\n        switch (readType) {\r\n            case READ_FILE_TYPE.DATA_URL:\r\n                reader.readAsDataURL(file);\r\n                break;\r\n            case READ_FILE_TYPE.TEXT:\r\n                reader.readAsText(file);   //作为字符串读出\r\n                //reader.readAsText(file,'gb2312');   //默认是用utf-8格式输出的，想指定输出格式就再添加一个参数，像txt的ANSI格式只能用国标才能显示出来\r\n                break;\r\n            case READ_FILE_TYPE.BINARY:\r\n                reader.readAsBinaryString(file);\r\n                break;\r\n            case READ_FILE_TYPE.ARRAYBUFFER:\r\n                reader.readAsArrayBuffer(file);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 保存数据到本地\r\n     *\r\n     * @param {*} textToWrite       要保存的文件内容\r\n     * @param {*} fileNameToSaveAs  要保存的文件名\r\n     * @memberof FileMgr\r\n     */\r\n    public static saveForBrowser(textToWrite: string, fileNameToSaveAs: string) {\r\n        if (cc.sys.isBrowser) {\r\n            console.log(\"浏览器\");\r\n            let textFileAsBlob = new Blob([textToWrite], { type: 'text/plain;charset=utf-8' });\r\n            let downloadLink = document.createElement(\"a\");\r\n            downloadLink.download = fileNameToSaveAs;\r\n            downloadLink.innerHTML = \"Download File\";\r\n            if (window.webkitURL != null) {\r\n                // Chrome allows the link to be clicked            \r\n                // without actually adding it to the DOM.            \r\n                downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);\r\n            } else {\r\n                // Firefox requires the link to be added to the DOM            \r\n                // before it can be clicked.            \r\n                downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\r\n                // downloadLink.onclick = destroyClickedElement;            \r\n                downloadLink.style.display = \"none\";\r\n                document.body.appendChild(downloadLink);\r\n            }\r\n            downloadLink.click();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 保存数据到本地\r\n     *\r\n     * @param {*} data   要保存的文件内容 支持 ArrayBuffer | string\r\n     * @param {*} model  打开文件模式\r\n     * @param {*} fullPath  要保存的文件路径+文件名\r\n     * @memberof FileMgr\r\n     */\r\n    public static saveDataForNative(data: ArrayBuffer | string, fullPath: string, model: string = 'wb') {\r\n        if (cc.sys.isNative) {\r\n            let myGlobal: any = window;\r\n            let myjsb = myGlobal.myjsb;\r\n            if (myjsb) {\r\n                let ret = myjsb.MyFileUtils.getInstance().writeDataToFile(data, model, fullPath);\r\n                return ret;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}","import { Component, EventTouch, find, Node, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { msgac } from '../../data/msgac';\r\nimport { eventManager } from '../../manager/eventManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface JoystickData {\r\n    type: string,\r\n    event: EventTouch,\r\n    pos: Vec3\r\n}\r\n\r\n@ccclass('GameCtrl')\r\nexport class GameCtrl extends Component {\r\n\r\n    // 摇杆节点\r\n    joystickNode: Node;\r\n\r\n    // 摇杆中间的小圆圈节点\r\n    blockNode: Node;\r\n    // 可移动的半径范围\r\n    radius: number = 70;\r\n\r\n    orignPosition: Vec3;\r\n\r\n    onLoad() {\r\n\r\n        this.joystickNode = find(\"joystick\", this.node);\r\n        this.blockNode = find(\"block\", this.joystickNode);\r\n\r\n        this.orignPosition = this.joystickNode.getPosition().clone();\r\n    }\r\n\r\n    start() {\r\n        this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.touchEnd, this);\r\n        this.node.on(Node.EventType.TOUCH_CANCEL, this.touchCancel, this);\r\n    }\r\n\r\n    touchStart(event: EventTouch) {\r\n        let location = event.getUILocation();\r\n        let pos = new Vec3(location.x, location.y, 0);\r\n        pos = cocosUtil.convertToNodeSpace(this.joystickNode, pos);\r\n        this.joystickNode.setPosition(pos);\r\n        this.blockNode.setPosition(0, 0);\r\n        this.sendTouchEvent(\"start\", event);\r\n    }\r\n\r\n    touchMove(event: EventTouch) {\r\n        let location = event.getUILocation();\r\n        let pos = new Vec3(location.x, location.y, 0);\r\n        pos = cocosUtil.convertToNodeSpace(this.blockNode, pos);\r\n        let dis = pos.length();\r\n        if (dis > this.radius) {\r\n            pos.normalize().multiplyScalar(this.radius);\r\n        }\r\n        this.blockNode.setPosition(pos);\r\n        this.sendTouchEvent(\"move\", event, pos);\r\n    }\r\n\r\n    touchEnd(event: EventTouch) {\r\n        this.joystickNode.setPosition(this.orignPosition);\r\n        this.blockNode.setPosition(0, 0);\r\n        this.sendTouchEvent(\"end\", event);\r\n    }\r\n    touchCancel(event: EventTouch) {\r\n        this.joystickNode.setPosition(this.orignPosition);\r\n        this.blockNode.setPosition(0, 0);\r\n        this.sendTouchEvent(\"end\", event);\r\n    }\r\n\r\n    sendTouchEvent(type: string, event: EventTouch, pos?: Vec3) {\r\n        if (pos) {\r\n            pos = pos.normalize().clone();\r\n        }\r\n        let data: JoystickData = {\r\n            type,\r\n            event,\r\n            pos\r\n        };\r\n        eventManager.send(msgac.joystick, data);\r\n    }\r\n\r\n}\r\n\r\n","import { assetManager, AudioSource, director, EventTouch, find, Node, _decorator,Label,Font } from 'cc';\r\nimport { myLog } from '../common/myLog';\r\nimport { GLoginState, GNetCmd, GNetConst } from '../tyqSDK/network/conf';\r\nimport CronCtr from '../tyqSDK/network/CronCtr';\r\nimport ServerCtr from '../tyqSDK/network/ServerCtr';\r\nimport { tyqAdManager } from '../tyqSDK/tyqAdManager';\r\nimport { cocosUtil } from '../utils/cocosUtil';\r\nimport { BaseLayer } from './compoment/base/BaseLayer';\r\nimport { constants } from './data/constants';\r\nimport { msgac } from './data/msgac';\r\nimport { audioManager } from './manager/audioManager';\r\nimport { eventManager } from './manager/eventManager';\r\nimport { layerManager } from './manager/layerManager';\r\nimport { localStorageManager } from './manager/localStorageManager';\r\nimport { playerModel } from './model/playerModel';\r\nimport { macro } from 'cc';\r\nimport { designManager } from './manager/designManager';\r\nimport { tyqSDKConfig } from '../tyqSDK/tyqSDKConfig';\r\nimport { utilTools } from '../utils/utilTools';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameLaunch')\r\nexport class GameLaunch extends BaseLayer {\r\n\r\n    // 调试按键计数器\r\n    debugCount: number = 0;\r\n    debugTimer: number;\r\n    isCounting: boolean;\r\n\r\n    onLoad() {\r\n        \r\n        super.onLoad();\r\n        if (playerModel.isInDevelopmentEnvironment()) {\r\n            myLog.isOpen = true;\r\n        }\r\n\r\n        cocosUtil.init();\r\n        msgac.init();\r\n\r\n        super.onLoad();\r\n\r\n        utilTools.getCurGameVersion().then(version =>{\r\n            let ver = this.getNodeByPath(\"btnTest/Label\");\r\n            this.setString(ver, version);\r\n        }).catch(error =>{\r\n            console.error(error)\r\n        });\r\n        \r\n        // btnTest.active = playerModel.isInDevelopmentEnvironment();\r\n\r\n        let layer1 = find(\"layer1\", this.node);\r\n        let layerHint = find(\"layerHint\", this.node);\r\n        let layerDebugLog = find(\"layerDebugLog\", this.node);\r\n        layerManager.init(layer1, layerHint, layerDebugLog);\r\n\r\n        // 设置音频播放组件\r\n        audioManager.setMusicAudioSource(this.getNodeByPath(\"audio/music\").getComponent(AudioSource));\r\n        audioManager.setEffectAudioSource(this.getNodeByPath(\"audio/effect\").getComponent(AudioSource));\r\n\r\n        let loadingName = constants.layers.LoadingLayer;\r\n        this.getNodeByPath(loadingName).addComponent(loadingName);\r\n\r\n        let noticeName = constants.layers.NoticeLayer;\r\n        find(noticeName, layerHint).addComponent(noticeName);\r\n\r\n        myLog.i(\"========启动参数：\", tyqAdManager.getEnterUrlQuery());\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n\r\n        director.on(GNetCmd.ReqWxSession.toString(), this.onMessageEvent, this);\r\n        director.on(GNetCmd.GetRegionData.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.openLayer,\r\n            msgac.showNotice,\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n    }\r\n\r\n    start() {\r\n        let canvasNode = find(\"Canvas\");\r\n        canvasNode.on(Node.EventType.TOUCH_START, (event: EventTouch) => {\r\n            eventManager.send(msgac.globalTouchStart, event);\r\n        });\r\n\r\n    }\r\n\r\n    onMessageEvent(value) {\r\n        console.log(\"处理服务端发送的消息:\", value);\r\n        if (value.status != GNetConst.ResSuccess) {\r\n            console.error(\"服务端响应失败~!\")\r\n            ServerCtr.GetInstance().isLogin = false;\r\n            CronCtr.getInstance().isPutEnable = false;\r\n            ServerCtr.GetInstance().loginState = GLoginState.loginWithAccount\r\n            return;\r\n        }\r\n        let ctr = ServerCtr.GetInstance();\r\n        switch (value.cmd) {\r\n            case GNetCmd.GetFriendVal:\r\n                playerModel.shareObj.friendNum = value.friendCnt;\r\n                let friendData = JSON.parse(value.friendData);\r\n                playerModel.shareObj.friendAdNum = friendData.videoCalCnt;\r\n                playerModel.shareObj.friendPassNum = friendData.friendPassCnt;\r\n                break;\r\n            case GNetCmd.ReqWxSession:\r\n                ctr.token = value.token;\r\n                ctr.regionDataList = value.regionDataList;\r\n                if (value.nickName && value.nickName != '') {\r\n                    ctr.nickName = value.nickName;\r\n                }\r\n                //直接请求服务端数据\r\n                ServerCtr.GetInstance().reqRegionData()\r\n                if (value.wxRes && value.wxRes.openid) {\r\n                    localStorageManager.openId = value.wxRes.openid;\r\n                }\r\n                if (value.uid) {\r\n                    localStorageManager.uid = value.uid;\r\n                }\r\n                break;\r\n            case GNetCmd.GetRegionData:\r\n                ctr.token = value.token;\r\n                ctr.isLogin = true;\r\n                //标记是账号登录\r\n                ServerCtr.GetInstance().serverDataVersion = value.dataVersion\r\n\r\n                //如果服务端的版本大于本地，直接赋值\r\n                if (value.dataVersionFlag == GNetConst.ServerIsNew) {\r\n                    ServerCtr.GetInstance().serverData = JSON.parse(value.jsonData)\r\n                }\r\n\r\n                ctr.loginState = GLoginState.loginWithAccount\r\n                CronCtr.getInstance().isPutEnable = false;\r\n\r\n                console.log(\"获得服务端数据!\", ServerCtr.GetInstance().serverData)\r\n\r\n                ctr.uid = value.uid;\r\n                ctr.regionId = value.regionId;\r\n\r\n\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    openLayerRet(data: any) {\r\n        this.openLayer(constants.layers[data.name], data);\r\n    }\r\n\r\n    showNoticeRet(data: any) {\r\n        this.createNotice(data);\r\n    }\r\n\r\n    refreshDebugPannel(): void {\r\n        find(\"layerDebugLog\",this.node).active = playerModel.isOpenDev || playerModel.isInDevelopmentEnvironment();\r\n    }\r\n\r\n    onClickBtnTest(node: Node){\r\n        myLog.i(assetManager.assets);\r\n        console.log(`onClickDebugOpenBtn 按下了${this.debugCount}`);\r\n        if (!this.isCounting) {\r\n            this.isCounting = true;\r\n            this.debugCount = 1;\r\n            this.schedule(this.checkCount,1,macro.REPEAT_FOREVER,0);\r\n        }else{\r\n            this.debugCount++;\r\n            if (this.debugCount >= 10) {\r\n                playerModel.isOpenDev = !playerModel.isInDevelopmentEnvironment();\r\n                eventManager.send(msgac.refreshDebugPannel);\r\n\r\n                this.resetCounter();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    checkCount(dt: number){\r\n        this.debugTimer+=dt;\r\n        if (this.debugTimer >= 10) {\r\n            this.resetCounter();\r\n        }\r\n    }\r\n\r\n    resetCounter(){\r\n        this.unschedule(this.checkCount);\r\n        this.isCounting = false;\r\n        this.debugCount = 0;\r\n        this.debugTimer = 0;\r\n    }\r\n\r\n    onClickBtnHintClose() {\r\n        this.hideHintLayer();\r\n    }\r\n\r\n}\r\n\r\n","import {_decorator, Component, game,} from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport { WECHAT } from 'cc/env';\r\n\r\n@ccclass\r\nexport default class GameMemoryStorage {\r\n\r\n    //用户登录区服，然后拉取服务端记录，原有代码接口不变，底层存取数据改为内存，另外再备份到磁盘已备修改器修改上传，规避获取不到磁盘数据的情况。\r\n    //修改以后，所有数据存取都是走内存，当用户重新登录的时候，内存自动清空，再清空本地磁盘数据\r\n    static memory:any = {}; //内存\r\n    static publicKey = \"JmksO12Ldl60Lsk\"\r\n    static isEncrypt = false;\r\n\r\n    public static getItem(key:string){\r\n        // if(!this.memory.hasOwnProperty(key)){\r\n        //     return \"\"\r\n        // }\r\n        // let res = \"\";\r\n        // try{\r\n        //     res = this.decrypt(this.memory[key]);\r\n        // }catch (e){\r\n        //     res = this.memory[key]\r\n        // }\r\n        // res = this.memory[key]\r\n        // res = localStorage.getItem(key);\r\n        return localStorage.getItem(key)\r\n    }\r\n\r\n    public static setItem(key:string, value:string){\r\n        // this.memory[key] = value+\"\";\r\n        localStorage.setItem(key,this.encrypt(value));\r\n    }\r\n\r\n    public static removeItem(key:string){\r\n        // delete this.memory[key];\r\n        localStorage.removeItem(key);\r\n    }\r\n\r\n    public static len(){\r\n        return Object.keys(this.memory).length;\r\n    }\r\n\r\n    public static keys(){\r\n        let keys = [];\r\n        for (let k in this.memory){\r\n            keys.push(k);\r\n        }\r\n        return keys;\r\n    }\r\n\r\n    public static encrypt(content:string){\r\n        return content\r\n        // if(this.isEncrypt==false) return content;\r\n        // return  encrypt.encrypt(JSON.stringify(content),this.publicKey,256);\r\n        //加密解密示例代码\r\n        // var secretkey= 'open_sesame'; // 加密密钥\r\n        // var dataString = content\r\n        // var encrypted = encrypt.encrypt(dataString,secretkey,256);\r\n        // var myString=JSON.parse(encrypt.decrypt(encrypted,secretkey,256))\r\n        // cc.log('原始字符串:'+dataString)\r\n        // cc.log('加密后:'+encrypted)\r\n        // cc.log('解密后看看对不对:'+myString)\r\n\r\n    }\r\n\r\n    public static decrypt(content:string){\r\n        return content\r\n        // if(this.isEncrypt==false) return content;\r\n        // return JSON.parse(encrypt.decrypt(content,this.publicKey,256));\r\n    }\r\n\r\n}\r\n","\r\nimport { _decorator, Component, Node , sys} from 'cc';\r\nimport { GNetConst } from './conf';\r\nimport GameMemoryStorage from './GameMemoryStorage';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameStorage')\r\nexport class GameStorage extends Component {\r\n\r\n    static GameKey = GNetConst.SaveHead;\r\n\r\n    public static Key(key:string){\r\n        return this.GameKey + '_' + key;\r\n    }\r\n\r\n    public static GetRawKey(key:string){\r\n        return key.replace(GameStorage.GameKey+\"_\",\"\")\r\n    }\r\n\r\n    static getStorage(){\r\n        return GameMemoryStorage\r\n        // return Const.isActiveMemoryTmp?GameMemoryStorageTmp: GameMemoryStorage\r\n    }\r\n\r\n    static getInt(key:string, def:number = 0){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null && n !== \"\") {\r\n            return Number(n);\r\n        }\r\n        return def;\r\n    }\r\n\r\n    static setInt(key:string, num:number){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key, num+\"\");\r\n    }\r\n    static setIntMemory(key:string,num:number){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key, num+\"\");\r\n    }\r\n\r\n    static getBoolean(key:string, def:boolean = false){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null&&n !== \"\") {\r\n            return Number(n) == 1?true:false;\r\n        }\r\n        return def;\r\n    }\r\n\r\n    static setBoolean(key:string,is:boolean){\r\n        key = this.Key(key);\r\n        let v = is?1:0;\r\n        this.getStorage().setItem(key,v+\"\");\r\n    }\r\n    static setBooleanMemory(key:string,is:boolean){\r\n        key = this.Key(key);\r\n        let v = is?1:0;\r\n        this.getStorage().setItem(key,v+\"\");\r\n    }\r\n\r\n    static getString(key:string,def:string = ''){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            return n;\r\n        }\r\n        return def;\r\n    }\r\n    //登录部分信息才用\r\n    static getStringDisk(key:string,def:string = ''){\r\n        let n = localStorage.getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            return n;\r\n        }\r\n        return def;\r\n    }\r\n    static getIntDisk(key:string,def:string = ''){\r\n        let n = localStorage.getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            return Number(n);\r\n        }\r\n        return def;\r\n    }\r\n    static setStringDisk(key:string,val:string){\r\n        localStorage.setItem(this.Key(key), val);\r\n    }\r\n\r\n    static setStringMemory(key:string,val:string){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key,val);\r\n        localStorage.setItem(key, val);\r\n    }\r\n\r\n    static setString(key:string,num:string){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key,num);\r\n        if (key == GameStorage.GameKey+'login_account') {\r\n            return;\r\n        }\r\n    }\r\n\r\n\r\n    static getObject(key:string,def:any = null){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            try {\r\n                let json = JSON.parse(n);\r\n                return json || def;\r\n            } catch (error) {\r\n                return def;\r\n            }\r\n            \r\n        }\r\n        return def;\r\n    }\r\n\r\n    static setObject(key:string,obj:any){\r\n        key = this.Key(key);\r\n        let v = JSON.stringify(obj);\r\n        this.getStorage().setItem(key,v);\r\n    }\r\n    static sendObject(key:string, obj:any){\r\n        key = this.Key(key);\r\n        let v = JSON.stringify(obj);\r\n    }\r\n\r\n    static setObjectMemory(key:string,obj:any){\r\n        key = this.Key(key);\r\n        let v = JSON.stringify(obj);\r\n        this.getStorage().setItem(key,v);\r\n    }\r\n\r\n    static removeItem(key:string){\r\n        key = this.Key(key);\r\n        this.getStorage().removeItem(key);\r\n    }\r\n\r\n    static clear(){\r\n        // console.log('清除数据:',localStorage.length)\r\n\r\n        let list:string[] = [];\r\n\r\n        for (let i = 0; i <  localStorage.length; i++) {\r\n            let key:string =  localStorage.key(i)!; //获取本地存储的Key\r\n            if (key.indexOf(this.GameKey) >=0 && key.indexOf('login') == -1 && key.indexOf('zzdl') == -1) {\r\n                // cc.log(\"清理前检查key\", key, key.indexOf(this.GameKey) )\r\n                list.push(key);\r\n            }\r\n        }\r\n\r\n        let keys = this.getStorage().keys();\r\n        for (let i = 0; i <  keys.length; i++) {\r\n            let key:string =  keys[i]; //获取本地存储的Key\r\n            if (key.indexOf('login') == -1 && key.indexOf('zzdl') == -1) {\r\n                // console.log(\"清除key:\",key)\r\n                list.push(key);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < list.length; i++) {\r\n            const key = list[i];\r\n            this.getStorage().removeItem(key);\r\n            // this.removeItem(key);\r\n        }\r\n        //清空本地无用的缓存\r\n\r\n        // localStorage.clear();\r\n    }\r\n\r\n    //老用户不用改为内存\r\n    static clearByKey(gameKey:string){\r\n        let list:string[] = [];\r\n        for (let i = 0; i <  localStorage.length; i++) {\r\n            let key:string =  localStorage.key(i)!; //获取本地存储的Key\r\n            if (key.indexOf(gameKey) != -1) {\r\n                list.push(key);\r\n            }\r\n        }\r\n        for (let i = 0; i < list.length; i++) {\r\n            const key = list[i];\r\n            this.getStorage().removeItem(key);\r\n        }\r\n    }\r\n\r\n    static getStringArrayByKey(str:string){\r\n        // console.log(\"获取列表:\",str)\r\n        let list:any[] = [];\r\n        let list2:any[] = [];\r\n        let keys = this.getStorage().keys();\r\n        for (let i = 0; i <  keys.length; i++) {\r\n            const key:string =  keys[i]; //获取本地存储的Key\r\n            //console.log(\"key:\",key);\r\n            if (key.indexOf(str) != -1) {\r\n                let n = this.getStorage().getItem(key);\r\n                // console.log(\"=====n:\",n)\r\n                list.push(n);\r\n                list2.push(key)\r\n            }\r\n        }\r\n        return {keys: list2, values: list};\r\n    }\r\n\r\n    static getObjectArrayByKey(str:string){\r\n       // console.log(\"获取列表:\",str)\r\n        let list:any[] = [];\r\n        let keys = this.getStorage().keys();\r\n        for (let i = 0; i <  keys.length; i++) {\r\n            const key:string =  keys[i]; //获取本地存储的Key\r\n            //console.log(\"key:\",key);\r\n            if (key.indexOf(str) != -1) {\r\n                let n = this.getStorage().getItem(key);\r\n                //console.log(\"n:\",n)\r\n                let value = null;\r\n                if (n !== null&& n !== \"\") {\r\n                    try {\r\n                        let json = JSON.parse(n);\r\n                        value = json || null;\r\n                    } catch (error) {\r\n                        value = null;\r\n                    }\r\n                }\r\n                if (value) {\r\n                    list.push(value);\r\n                }\r\n                \r\n            }\r\n            \r\n        }\r\n        return list;\r\n    }\r\n\r\n    //老用户兼容使用，不改动，以及GM也使用这个接口上传数据到云端\r\n    static getAll(isFirst:boolean = false){\r\n        let jsonData:any = {}\r\n        for (let i = 0; i <  localStorage.length; i++) {\r\n            const key:string =  localStorage.key(i)!; //获取本地存储的Key\r\n            if (key.indexOf('login') != -1) {\r\n                continue;\r\n            }\r\n            if (isFirst) {\r\n                let oldKey = key;\r\n                let newKey = key.replace('zzdl',GameStorage.GameKey);\r\n                jsonData[newKey] = localStorage.getItem(oldKey)\r\n            }\r\n            else{\r\n                if (key.indexOf('zzdl') != -1) {\r\n                    continue;\r\n                }\r\n                jsonData[key]=localStorage.getItem(key)\r\n            }\r\n            \r\n            // console.log(key);\r\n            // console.log(localStorage.getItem(key));//所有value\r\n            // console.log(\"---------------------------------\");\r\n        }\r\n\r\n        if (isFirst) {\r\n            let spliceDatas:any = {};\r\n            for (const key in jsonData) {\r\n                if (Object.prototype.hasOwnProperty.call(jsonData, key)) {\r\n                    const value = jsonData[key];\r\n                    // 大数据拆分.\r\n                    // 1.装备\r\n                    // 2.玄天宝录\r\n                    // console.log(\"老用户数据处理key:\",key,value);\r\n                    switch (key) {\r\n                        case GameStorage.GameKey+'_sect_xtbls':\r\n                            {\r\n                                let datas = JSON.parse(value);\r\n                                // console.log(\"xtbl datas:\",datas.length,datas);\r\n                                for (let i = 0; i < datas.length; i++) {\r\n                                    const xtbl = datas[i];\r\n                                    let data = {\r\n                                        id:xtbl.id,\r\n                                        star:xtbl.star,\r\n                                        debris:xtbl.debris\r\n                                    }\r\n                                    // GameStorage.setObject('SectXtbl_'+xtbl.id,data);\r\n                                    spliceDatas[GameStorage.GameKey + '_SectXtbl_'+xtbl.id] = JSON.stringify(data);\r\n                                }\r\n                            }\r\n                            break;\r\n                        case GameStorage.GameKey+'_pack_equips':\r\n                            {\r\n                                let datas = JSON.parse(value);\r\n                                // console.log(\"equip datas:\",datas.length,datas);\r\n                                for (let i = 0; i < datas.length; i++) {\r\n                                    const equip = datas[i];\r\n                                    let data = {\r\n                                        id:equip.id,\r\n                                        index:equip.index,\r\n                                        level:equip.level,\r\n                                        star:equip.star,\r\n                                        partner:equip.partner,\r\n                                        score:equip.score,\r\n                                        skill_skr:equip.skill_skr,\r\n                                        skill_skr_attr:equip.skill_skr_attr,\r\n                                        skill_star:equip.skill_star,\r\n                                        skill_star_attr:equip.skill_star_attr,\r\n                                    };\r\n                                    // GameStorage.setObject('pack_equip_'+equip.index,data);\r\n                                    spliceDatas[GameStorage.GameKey + 'pack_equip_' + equip.index] = JSON.stringify(data);\r\n                                }\r\n                            }\r\n                            break;    \r\n                        default:\r\n                            {\r\n                                localStorage.setItem(key,value);\r\n                            }\r\n                            break;\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            delete jsonData['zzdl_sect_xtbls'];\r\n            delete jsonData['zzdl_pack_equips'];\r\n\r\n            // console.log(\"spliceDatas:\",spliceDatas);\r\n\r\n            for (const key in spliceDatas) {\r\n                const data = spliceDatas[key];\r\n                jsonData[key] = data;\r\n            }\r\n        }\r\n\r\n        return jsonData\r\n    }\r\n\r\n    static async setAll(jsonData:any){\r\n        // console.log(\"11111覆盖数据\")\r\n        // await this.clear();\r\n        // console.log(\"覆盖前清除所有数据........\",jsonData)\r\n        \r\n        for(let key in jsonData){\r\n            this.getStorage().setItem(key, jsonData[key])\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { MapWrap } from \"./MapWrap\";\r\n\r\nexport default class GParam  {\r\n    private arguments : MapWrap<string, Object> = new MapWrap<string, Object>();\r\n\r\n    private _onlyArgument;\r\n    constructor(msg?: any) {\r\n        this._onlyArgument = msg;\r\n    }\r\n\r\n    public push(key: string, val: Object) {\r\n        if(!key) return;\r\n        this.arguments.set(key, val);\r\n    }\r\n\r\n    /**\r\n     * 获取参数\r\n     * @param key 参数Key\r\n     */\r\n    public get<T>(key?: string) : T {\r\n        if(!key) return this._onlyArgument as T;\r\n        return this.arguments.get(key) as T;\r\n    }\r\n\r\n    /**\r\n     * 清理\r\n     */\r\n    public clear() : void {\r\n        this.arguments.clear();\r\n    }\r\n\r\n    /**\r\n     * 将参数转成Array\r\n     */\r\n    public toList() : Object[] {\r\n        if(this.arguments.size == 0) return null;\r\n        return this.arguments.values();\r\n    }\r\n    /**\r\n     * ToString实现\r\n     */\r\n    public toString() : string {\r\n        let keys = this.arguments.keys();\r\n        var str = '';\r\n        for(let index = 0; index < keys.length; index++) {\r\n            str += keys[index] + \"=\" + this.get(keys[index]) + \"/t\";\r\n        }\r\n        return str;\r\n    }\r\n}","import { instantiate, Label, Node, Sprite, SpriteFrame, tween, v3, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GuessGameLayer')\r\nexport class GuessGameLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property(Node) armNodeGuess: Node = null;\r\n    @property(Node) selectBetNode: Node = null;\r\n\r\n    @property(Node) itemLayer: Node = null;\r\n    @property(Node) selectGuessNode: Node = null;\r\n    @property(Node) guessLayer: Node = null;\r\n\r\n\r\n    @property(Label) tipLabel: Label = null;\r\n    @property({ type: Node }) btnlayer: Node = null;\r\n\r\n\r\n    @property(SpriteFrame) guessSprite: SpriteFrame[] = [];\r\n\r\n    @property(Node) items: Node[] = [];\r\n    @property(Node) guessItems: Node[] = [];\r\n\r\n    _curSelectGuess = -1\r\n    _curSelectBet = -1\r\n\r\n\r\n\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        this.addTopUILayer(\"TopUILayer\")\r\n        this.fitNodeWidget(this.btnlayer, 30)\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n        eventManager.off(\"initGuess\",this.initGuess,this)\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        ///   console.log(\"tyqSDK.showCustomRectCenterAd\")\r\n        eventManager.on(\"initGuess\",this.initGuess,this)\r\n\r\n        let stone1 = designManager.config[\"stone1\"]\r\n        console.log(\"stone1 = \", stone1)\r\n        for (let index = 0; index < 6; index++) {\r\n            if (stone1[index] && this.items[index]) {\r\n                this.items[index].getChildByName(\"numLab\").getComponent(Label).string = \"\" + stone1[index][1]\r\n                //\tthis.items[index].getChildByName(\"gou\").active = false\r\n            }\r\n        }\r\n    }\r\n\r\n    closeBless() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    initGuess() {\r\n        this.selectBetNode.removeAllChildren()\r\n        this.armNodeGuess.active = false\r\n        let selectGuess = this.selectGuessNode.getChildByName(\"selectGuess\")\r\n        if (selectGuess) {\r\n            selectGuess.removeFromParent()\r\n        }\r\n        this._index = 0\r\n        this._dtTime = 0\r\n        this._isStartRun = false\r\n\r\n        this._curSelectGuess = -1\r\n        this.itemLayer.active = true\r\n        this.guessLayer.active = true\r\n\r\n        this.tipLabel.node.active = true\r\n        this.tipLabel.string = \"默认上次选择金额，可重新选择\"\r\n\r\n        if (this._curSelectBet > -1) {\r\n            for (let index = 0; index < 6; index++) {\r\n                if (this.items[index]) {\r\n                    this.items[index].getChildByName(\"gou\").active = this._curSelectBet == index\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    onSelectBet(event, data) {\r\n        if (this._curSelectBet == data && this.selectBetNode.children.length > 0) {\r\n            this.selectBetNode.removeAllChildren()\r\n            this._curSelectBet = -1\r\n            this.itemLayer.active = true\r\n\r\n            for (let index = 0; index < 6; index++) {\r\n                if (this.items[index]) {\r\n                    this.items[index].getChildByName(\"gou\").active = this._curSelectBet == index\r\n                }\r\n            }\r\n            this.tipLabel.string = \"请选择下注金额\"\r\n            return\r\n        }\r\n\r\n        this._curSelectBet = data\r\n        //this.items[this._curSelectBet].getChildByName(\"icon\").color = cc.Color.GRAY\r\n        console.log(\"select bet = \", data)\r\n        //\tconsole.log(\"select event.target = \", event)\r\n        let selectItem = instantiate(this.items[this._curSelectBet])\r\n        selectItem.getChildByName(\"gou\").active = false\r\n        this.selectBetNode.addChild(selectItem)\r\n        tween(selectItem).to(0.5, { position: v3(0, -30, 0) }).start()\r\n        this.tipLabel.string = \"请猜拳\"\r\n        this.itemLayer.active = false\r\n    }\r\n\r\n    onSelectBtn(event, data) {\r\n        if (this._curSelectGuess >= 0) {\r\n            return\r\n        }\r\n\r\n        if (this._curSelectBet < 0) {\r\n            this.toast(\"请先下注\")\r\n            return\r\n        }\r\n\r\n        let curBet = designManager.config[\"stone1\"][this._curSelectBet]\r\n        let propItem: PropItem = {\r\n            Id: curBet[0],\r\n            Num: curBet[1]\r\n        };\r\n        if (!UserData.getInstance().checkUseProp(propItem)) {\r\n            this.toast(\"资源不足\")\r\n            return\r\n        }\r\n        this._curSelectGuess = parseInt(data + \"\")\r\n        // let selectItem = instantiate(this.guessItems[this._curSelectGuess])\r\n        // selectItem.name = \"selectGuess\"\r\n        // selectItem.position = v3(-300, 0, 0)\r\n        // this.selectGuessNode.addChild(selectItem)\r\n        this._isStartRun = true\r\n        // let self = this\r\n        // tween(selectItem).to(0.6, { position: v3(0, 0, 0) }).call(function () {\r\n        //     self._isStartRun = true\r\n        // //    self.armNodeGuess.active = true\r\n        // }).start()\r\n\r\n        this.tipLabel.node.active = false\r\n        this.guessLayer.active = false\r\n    }\r\n\r\n    openResult() {\r\n\r\n        let result = Math.floor(Math.random() * 3)\r\n        let str = [\"石头\", \"剪刀\", \"布\"]\r\n        console.log(\"我方：\", str[this._curSelectGuess])\r\n        console.log(\"敌方：\", str[result])\r\n        this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[result]\r\n        let stoneDraw = designManager.config[\"stoneDraw\"]\r\n        //console.log(\"stoneDraw \", stoneDraw)\r\n        let multiplier = 1\r\n\r\n        if (this._curSelectGuess - result == -1 || this._curSelectGuess - result == 2) {\r\n            //\tconsole.log(\" ---- win\")\r\n            multiplier = stoneDraw[0]\r\n        } else if (this._curSelectGuess == result) {\r\n            //console.log(\" ---- 平局\")\r\n            multiplier = stoneDraw[1]\r\n        } else {\r\n            //console.log(\" ---- lose\")\r\n            multiplier = stoneDraw[2]\r\n        }\r\n        let curBet = designManager.config[\"stone1\"][this._curSelectBet]\r\n        let propItem: PropItem = {\r\n            Id: curBet[0],\r\n            Num: curBet[1] * multiplier\r\n        };\r\n\r\n        UserData.getInstance().getRewardProp([propItem])\r\n        this.openLayer(constants.layers.GuessResultLayer, { propArr: [propItem], myGuess: this._curSelectGuess, otherGuess: result });\r\n        this.initGuess()\r\n    }\r\n\r\n    _index = 0\r\n    _dtTime = 0\r\n    _isStartRun = false\r\n    protected update(dt: number): void {\r\n        if (!this._isStartRun) {\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.GuessResultLayer, { myGuess: this._curSelectGuess, selectBet: this._curSelectBet });\r\n        this._isStartRun = false\r\n        tyqSDK.eventSendCustomEvent(\"参与猜拳\")\r\n        return\r\n\r\n        this._dtTime += dt\r\n        if (this._dtTime > 0.1) {\r\n            this._dtTime = 0\r\n            this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[this._index % 3]\r\n            this._index++\r\n            if (this._index > 20) {\r\n                this._isStartRun = false\r\n                this.openResult()\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { Label, Node, sp, Sprite, SpriteFrame, tween, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { RewardLayer } from './RewardLayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GuessResultLayer')\r\nexport class GuessResultLayer extends RewardLayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property(Sprite) guessItem2: Sprite = null;\r\n    @property(Sprite) guessItem1: Sprite = null;\r\n    @property(sp.Skeleton) spk: sp.Skeleton = null;\r\n\r\n    @property({ type: Node }) btnNode: Node = null;\r\n\r\n    @property({ type: Node }) resultNode: Node = null;\r\n\r\n    @property({ type: Node }) rewardNode: Node = null;\r\n\r\n    @property(SpriteFrame) guessSprite: SpriteFrame[] = [];\r\n    @property(SpriteFrame) guessNameSprite: SpriteFrame[] = [];\r\n\r\n    _curSelectGuess = -1\r\n    private _curSelectBet: any;\r\n\r\n    private _propItem = null\r\n\r\n    onLoad() {\r\n\r\n    }\r\n    onEnable() {\r\n\r\n    }\r\n\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        ///   console.log(\"tyqSDK.showCustomRectCenterAd\")\r\n        let curGuess = this.layerData.myGuess\r\n        this._curSelectBet = this.layerData.selectBet\r\n        this.guessItem1.spriteFrame = this.guessSprite[parseInt(curGuess)]\r\n        this.selfNodeGuess.getChildByName(\"cloth1\").getComponent(Sprite).spriteFrame = this.guessNameSprite[parseInt(curGuess)]\r\n\r\n        this._curSelectGuess = this.layerData.myGuess\r\n        this.selfNodeGuess.position = v3(-380, 0, 0)\r\n        this.armNodeGuess.position = v3(380, 0, 0)\r\n        let self = this\r\n        tween(this.selfNodeGuess).to(0.2, { position: v3(-190, 0, 0) }).call(function () {\r\n            self._isStartRun = true\r\n        }).start()\r\n        tween(this.armNodeGuess).to(0.2, { position: v3(190, 0, 0) }).start()\r\n\r\n        this.resultNode.active = false\r\n        this.rewardNode.active = false\r\n        this.btnNode.active = false\r\n    }\r\n\r\n    closeBless() {\r\n        eventManager.send(\"initGuess\")\r\n\r\n        this.closeLayer()\r\n    }\r\n\r\n    _index = 0\r\n    _dtTime = 0\r\n    _isStartRun = false\r\n\r\n    @property(Node) armNodeGuess: Node = null;\r\n    @property(Node) selfNodeGuess: Node = null;\r\n\r\n\r\n    protected update(dt: number): void {\r\n        if (!this._isStartRun) {\r\n            return\r\n        }\r\n        this._dtTime += dt\r\n        if (this._dtTime > 0.1) {\r\n            this._dtTime = 0\r\n            this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[this._index % 3]\r\n            this.armNodeGuess.getChildByName(\"cloth1\").getComponent(Sprite).spriteFrame = this.guessNameSprite[this._index % 3]\r\n\r\n            this._index++\r\n            if (this._index > 20) {\r\n                this._isStartRun = false\r\n                this.openResult()\r\n            }\r\n        }\r\n    }\r\n\r\n    openResult() {\r\n\r\n        let result = Math.floor(Math.random() * 3)\r\n        let str = [\"石头\", \"剪刀\", \"布\"]\r\n        console.log(\"我方：\", str[this._curSelectGuess])\r\n        console.log(\"敌方：\", str[result])\r\n        this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[result]\r\n        this.armNodeGuess.getChildByName(\"cloth1\").getComponent(Sprite).spriteFrame = this.guessNameSprite[result]\r\n\r\n        let stoneDraw = designManager.config[\"stoneDraw\"]\r\n        //console.log(\"stoneDraw \", stoneDraw)\r\n        let multiplier = 1\r\n        this.resultNode.active = true\r\n        this.resultNode.position = v3(0, 550, 0)\r\n        tween(this.resultNode).to(0.2, { position: v3(0, 480, 0) }).start()\r\n\r\n        let result1 = this.resultNode.getChildByName(\"result1\")\r\n\r\n        result1.position = v3(0, 150, 0)\r\n        let self = this\r\n        tween(result1).to(0.2, { position: v3(0, 33, 0) }).call(function () {\r\n            self.btnNode.active = true\r\n        }).start()\r\n\r\n        if (this._curSelectGuess - result == -1 || this._curSelectGuess - result == 2) {\r\n            console.log(\" ---- win\")\r\n            multiplier = stoneDraw[0]\r\n            this.setSpriteFrame2(result1, \"activityRes/result1\", null, constants.bundles.wwqVec)\r\n            this.showYanhua()\r\n        } else if (this._curSelectGuess == result) {\r\n            console.log(\" ---- 平局\")\r\n            multiplier = stoneDraw[1]\r\n            this.setSpriteFrame2(result1, \"activityRes/result2\", null, constants.bundles.wwqVec)\r\n        } else {\r\n            this.setSpriteFrame2(result1, \"activityRes/result3\", null, constants.bundles.wwqVec)\r\n            console.log(\" ---- lose\")\r\n            multiplier = stoneDraw[2]\r\n        }\r\n\r\n        let curBet = designManager.config[\"stone1\"][this._curSelectBet]\r\n        let propItem: PropItem = {\r\n            Id: curBet[0],\r\n            Num: curBet[1] * multiplier\r\n        };\r\n\r\n        let propdata = designManager.getRowById(constants.tableName.prop, curBet[0])\r\n        this.setSpriteFrame2(this.rewardNode.getChildByName(\"icon\"), \"prop/\" + propdata.icon)\r\n        this.rewardNode.active = true\r\n        this.rewardNode.getChildByName(\"numLab\").getComponent(Label).string = curBet[1] * multiplier + \"\"\r\n        UserData.getInstance().getRewardProp([propItem])\r\n        this._propItem = [propItem]\r\n        //    this.openLayer(constants.layers.GuessResultLayer, { propArr: [propItem], myGuess: this._curSelectGuess, otherGuess: result });\r\n    }\r\n\r\n    doubleGet() {\r\n        let self = this\r\n        sdkManager.openAd(\"猜拳双倍奖励\", (st: number) => {\r\n            if (st == 1) {\r\n                if (self._propItem)\r\n                    UserData.getInstance().getRewardProp(self._propItem)\r\n\r\n                self.closeBless()\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n","import { assetManager } from \"cc\";\r\n\r\n\r\nexport class H5AdSdk4399 {\r\n\r\n    private static _instance: H5AdSdk4399;\r\n    private constructor() { }\r\n    public static get instance(): H5AdSdk4399 {\r\n        if (!this._instance) {\r\n            this._instance = new H5AdSdk4399();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * 激励视频广告统一播放接口\r\n     * 完整观看广告后，获得奖励，调用：tmpFunc(1)\r\n     * 中途退出或者观看失败，调用：tmpFunc(0)\r\n     * @param cb \r\n     */\r\n    showRewardedAd(successCb: Function) {\r\n        if (window.h5api) {\r\n            console.log(\"开始播放 h5api\");\r\n            /**\r\n             * 此callback回调函数的形式\r\n             *\r\n             * @param obj  广告状态\r\n             */\r\n            function videocallback(obj) {\r\n                console.log(\"代码:\" + obj.code + \",消息:\" + obj.message);\r\n                if (obj.code === 10000) {\r\n                    console.log(\"开始播放\");\r\n                } else if (obj.code === 10001) {\r\n                    console.log(\"播放结束\");\r\n                    successCb && successCb(1)\r\n                } else {\r\n                    console.log(\"广告异常\");\r\n                    successCb && successCb(0);\r\n                }\r\n            }\r\n\r\n            window.h5api.playAd(videocallback);\r\n            return\r\n        }\r\n        return\r\n    }\r\n\r\n\r\n    public checkDownUrl() {\r\n        if (window.h5api) {\r\n            let is4399 = true;\r\n            let checkbin = (function () {\r\n                if (!is4399) return;\r\n                let selfPip = function (task: any, done: any): any {\r\n                    const input = task.output = task.input;\r\n                    for (let i = 0; i < input.length; i++) {\r\n                        let item = input[i];\r\n                        if (!item.url) continue;\r\n                        let arr = item.url.split(\".\");\r\n                        if (arr.length >= 2 && arr[arr.length - 1] == \"cconb\") {\r\n                            item.url = \"\";\r\n                            for (let index = 0; index < arr.length - 1; index++) {\r\n                                const element = arr[index];\r\n                                item.url += (element + \".\");\r\n                            }\r\n                            item.url += \"_cconb.dbbin\";\r\n                        }\r\n                        if (arr.length >= 2 && arr[arr.length - 1] == \"bin\") {\r\n                            item.url = \"\";\r\n                            for (let index = 0; index < arr.length - 1; index++) {\r\n                                const element = arr[index];\r\n                                item.url += (element + \".\");\r\n                            }\r\n                            item.url += \"dbbin\";\r\n                        }\r\n                    }\r\n                    return null;\r\n                }\r\n                //@ts-ignore\r\n                // if (!CC_BUILD) return;\r\n                assetManager.transformPipeline.append(selfPip);\r\n                //@ts-ignore\r\n                let dw = assetManager.downloader._downloaders;\r\n                let dbbin = dw[\".dbbin\"];\r\n                assetManager.downloader.register(\"dbbin\", (url: string, options: any, onComplete: any) => {\r\n                    if (url.includes(\"_cconb\")) {\r\n                        dw[\".cconb\"]()\r\n                    } else {\r\n                        dbbin();\r\n                    }\r\n                })\r\n            });\r\n            checkbin()\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { AdController, ShowPromiseResult } from \"../sdk/adsgram\";\r\n\r\n\r\nexport class H5AdSdkTelegram {\r\n    private static _instance: H5AdSdkTelegram;\r\n    private constructor() { }\r\n    public static get instance(): H5AdSdkTelegram {\r\n        if (!this._instance) {\r\n            this._instance = new H5AdSdkTelegram();\r\n            this._instance.tgInit();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    private blockId: string = \"5585\";\r\n    private ad: AdController\r\n\r\n    private tgInit(){\r\n        if (this.blockId) {\r\n            this.ad = window.Adsgram.init({blockId: this.blockId})\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 激励视频广告统一播放接口\r\n     * 完整观看广告后，获得奖励，调用：tmpFunc(1)\r\n     * 中途退出或者观看失败，调用：tmpFunc(0)\r\n     * @param cb \r\n     */\r\n    showRewardedAd(successCb: Function) {\r\n        if (this.ad) {\r\n            this.ad.show().then((result: ShowPromiseResult) =>{\r\n                successCb(1);\r\n            }).catch((result: ShowPromiseResult) => {\r\n                console.log('Tg视频广告报错', result.description)\r\n                successCb(0)\r\n            });\r\n            return\r\n        }\r\n        successCb(2)\r\n    }\r\n\r\n\r\n}","import { Node, _decorator } from 'cc';\r\nimport { msgac } from '../../data/msgac';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { constants } from '../../data/constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HandLayer')\r\nexport class HandLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.globalTouchStart\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.node.getChildByName(\"info\").localize(\"info\", constants.layers.HandLayer);\r\n    }\r\n\r\n    globalTouchStartRet(data: any) {\r\n        this.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Label, Node, Prefab, sp, _decorator, find } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { RedPointLogicMgr, RedpointPos, RPointMask } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport {resManager} from \"db://assets/scripts/game/manager/resManager\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroLayer')\r\nexport class HeroLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具列表容器\" }) propLayer: Node = null;\r\n    @property({ type: Prefab, tooltip: \"道具节点\" }) rewardItem: Prefab = null;\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) propView: Node = null;\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) scrollView: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"穿戴装备\" }) propNodeLeft: Node = null;\r\n    @property({ type: Node, tooltip: \"穿戴装备\" }) propNodeRight: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"攻击力\" }) attackLabel: Node = null;\r\n    @property({ type: Node, tooltip: \"生命值\" }) lifeLabel: Node = null;\r\n\r\n\r\n    @property({ type: Node, tooltip: \"排序按钮\" }) sortbtn: Node = null;\r\n\r\n\r\n    @property({ type: sp.Skeleton, tooltip: \"角色spine\" }) heroSk: sp.Skeleton = null;\r\n\r\n\r\n    _propNodeList = [];\r\n\r\n    _isSort = false\r\n\r\n    cloLabel:Node;\r\n    atkIcon:Node;\r\n    hpIcon:Node;\r\n    myEquip:Node;\r\n    btnSort:Node;\r\n    btnUpgrade:Node;\r\n\r\n\r\n    onLoad() {\r\n        this.fitScrollView(this.propView, 320, 600)\r\n\r\n        for (let i = 0; i < this.propNodeLeft.children.length; i++) {\r\n            this._propNodeList.push(this.propNodeLeft.children[i]);\r\n        }\r\n        for (let i = 0; i < this.propNodeRight.children.length; i++) {\r\n            this._propNodeList.push(this.propNodeRight.children[i]);\r\n        }\r\n\r\n        // this.cloLabel =\r\n        // atkIcon:Node;\r\n        // hpIcon:Node;\r\n        // myEquip:Node;\r\n        // btnSort:Node;\r\n        // btnUpgrade:Node;\r\n\r\n        // test\r\n        // UserData.getInstance().addPropByDesign([10155, 1]);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        eventManager.on(msgac.wearDrop, this.updateProp, this);\r\n        eventManager.on(msgac.updateDropData, this.updateProp, this);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n        eventManager.off(msgac.wearDrop, this.updateProp, this);\r\n        eventManager.off(msgac.updateDropData, this.updateProp, this);\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.initList()\r\n        this.initWearDrop()\r\n\r\n        this.attackLabel.getComponent(Label).string = UserData.getInstance().attack + \"\"\r\n        this.lifeLabel.getComponent(Label).string = UserData.getInstance().life + \"\"\r\n\r\n        RedPointLogicMgr.ins().setRPointView(this.node.getChildByName(\"btnBless\"), null, UserData.getInstance().checkPropCanBless())\r\n        RedPointLogicMgr.ins().on(this.node, [{ mask: [RPointMask.RPM_BlessProp], subPath: \"btnBless\" },])\r\n\r\n        tyqSDK.eventSendCustomEvent(\"进入装备界面\")\r\n\r\n        // this.sortbtn.getChildByName(\"Label\").getComponent(Label).string = \"按品质排序\"\r\n        this.sortbtn.getChildByName(\"Label\").localize(\"btnSort\",constants.layers.HeroLayer)\r\n        this.node.getChildByPath(\"herobg/k/Label\").localize(\"myEquip\",constants.layers.HeroLayer);\r\n        this.node.getChildByPath(\"herobg/btnSkin/cloLabel\").localize(\"btnSkin\",constants.layers.HeroLayer);\r\n        this.node.getChildByPath(\"herobg/lifebg/hp\").localizeImg();\r\n        this.node.getChildByPath(\"herobg/attckbg/hp\").localizeImg();\r\n        this.node.getChildByPath(\"btnBless/Label\").localize(\"btnBless\",constants.layers.HeroLayer);\r\n\r\n\r\n        this.heroSk.setSkin(UserData.getInstance().getHeroSkin())\r\n    }\r\n\r\n    updateProp() {\r\n        this.initList()\r\n        this.initWearDrop()\r\n        this.attackLabel.getComponent(Label).string = UserData.getInstance().attack + \"\"\r\n        this.lifeLabel.getComponent(Label).string = UserData.getInstance().life + \"\"\r\n    }\r\n\r\n    initWearDrop() {\r\n        let propdata = UserData.getInstance().wearProp\r\n        myLog.i(\"propdata = \", propdata)\r\n        for (let i = 0; i < propdata.length && i < this._propNodeList.length; i++) {\r\n            let item = this._propNodeList[i].getChildByName(\"PropItem\")\r\n            if (item == null) {\r\n                item = instantiate(this.rewardItem)\r\n                this._propNodeList[i].addChild(item)\r\n                item.name = \"PropItem\"\r\n            }\r\n            item.getComponent(PropItemPrefab).setView(propdata[i], i + 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnWear)\r\n            item.getComponent(PropItemPrefab).setScale(130)\r\n        }\r\n    }\r\n\r\n    initList() {\r\n        if (this._isSort) {\r\n            let dataArr = this.getPropList()\r\n            let equipSort = (a: number, b: number) => {\r\n                let equipDataA = designManager.getRowById(constants.tableName.prop, a)\r\n                let equipDataB = designManager.getRowById(constants.tableName.prop, b)\r\n                return equipDataB.quality - equipDataA.quality;\r\n            }\r\n            dataArr.sort(equipSort);\r\n            this.scrollViewSetData(this.scrollView, dataArr, this.initItem)\r\n        } else {\r\n            let dataArr = this.getPropList()\r\n            let equipSort = (a: number, b: number) => {\r\n                let equipDataA = designManager.getRowById(constants.tableName.prop, a)\r\n                let equipDataB = designManager.getRowById(constants.tableName.prop, b)\r\n                return equipDataA.wearIndex - equipDataB.wearIndex;\r\n            }\r\n            dataArr.sort(equipSort);\r\n            this.scrollViewSetData(this.scrollView, dataArr, this.initItem)\r\n        }\r\n\r\n    }\r\n\r\n    initItem(itemUI: Node, item: any, index: number) {\r\n        itemUI.getComponent(PropItemPrefab).setView(item, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_ToWear)\r\n        itemUI.getComponent(PropItemPrefab).setScale(120)\r\n        RedPointLogicMgr.ins().setRPointView(itemUI, null, UserData.getInstance().checkThisPropBestToWear(item), null, RedpointPos.right)\r\n    }\r\n\r\n    updateRedPoint() {\r\n        let children = this.propLayer.children\r\n        children.forEach(itemUI => {\r\n            RedPointLogicMgr.ins().setRPointView(itemUI, null, UserData.getInstance().checkThisPropBestToWear(itemUI.getComponent(PropItemPrefab).propId))\r\n        });\r\n    }\r\n\r\n    getPropList() {\r\n        let arr = UserData.getInstance().getPropSort()\r\n        let dataArr = []\r\n        arr.forEach(element => {\r\n            let num = element.iswear == 1 ? element.num - 1 : element.num\r\n            let row = designManager.getRowById(constants.tableName.prop, element.id);\r\n            if (row.type != 8 && row.type != 11) {\r\n                return;\r\n            }\r\n            for (let i = 0; i < num; i++) {\r\n                dataArr.push(element.id)\r\n            }\r\n        });\r\n        return dataArr\r\n    }\r\n\r\n    propSort() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (this._isSort) {\r\n            // this.sortbtn.getChildByName(\"Label\").getComponent(Label).string = \"按品质排序\"\r\n            this.sortbtn.getChildByName(\"Label\").localize(\"btnSort\",constants.layers.HeroLayer);\r\n            this._isSort = false;\r\n        } else {\r\n            // this.sortbtn.getChildByName(\"Label\").getComponent(Label).string = \"取消排序\"\r\n            this.sortbtn.getChildByName(\"Label\").localize(\"btnCancelSort\",constants.layers.HeroLayer);\r\n            this._isSort = true\r\n        }\r\n\r\n        this.initList()\r\n    }\r\n\r\n    openBless() {\r\n        //  this.closeLayer()\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.BlessLayer)\r\n    }\r\n\r\n    onClickBtnSkin() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SkinChangeLayer, () => {\r\n            this.heroSk.setSkin(UserData.getInstance().getHeroSkin())\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, Node, Tween, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport const HintNames = {\r\n    targetPos: \"targetPos\",\r\n    targetPos2: \"targetPos2\",\r\n    targetPos3: \"targetPos3\",\r\n    hit1: \"hit1\",\r\n    hit2: \"hit2\",\r\n    hit3: \"hit3\",\r\n    hit4: \"hit4\",\r\n    hit5: \"hit5\",\r\n    hit6: \"hit6\",\r\n    hit7: \"hit7\",\r\n    boom1: \"boom1\",\r\n    feiBiao: \"feiBiao\",\r\n    blockArrow: \"blockArrow\",\r\n    comeShine: \"comeShine\",\r\n};\r\n\r\n@ccclass('Hint')\r\nexport class Hint extends Component {\r\n\r\n    bodyNode: Node;\r\n\r\n    hintUtil: any;\r\n    extraObj: any;\r\n\r\n    init(name: string, worldPos: Vec3, angle: number = 0, extraObj?: any) {\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.extraObj = extraObj;\r\n        this.unscheduleAllCallbacks();\r\n        Tween.stopAllByTarget(this.node);\r\n\r\n        let pos = cocosUtil.convertToNodeSpace(this.node, worldPos);\r\n        this.node.setPosition(pos);\r\n        this.node.angle = angle;\r\n\r\n        let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(find(\"body\", this.node), AnimationCtrl);\r\n        aniCtrl.playAnimation(\"ani\", false, () => {\r\n            mapModel.hintSystem.recycleHintNode(this.node);\r\n        });\r\n\r\n        try {\r\n            this.hintUtil = cocosUtil.addComponentOnce(this, name);\r\n            this.hintUtil.unscheduleAllCallbacks();\r\n            this.hintUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.hintSystem.recycleHintNode(this.node);\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, Prefab, UITransform, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Hint, HintNames } from '../item/hint/Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HintSystem')\r\nexport class HintSystem extends BaseLayer {\r\n\r\n    // 按照名称进行UI分层\r\n    nameLayerObj: any = {};\r\n    namePrefabObj: any = {};\r\n\r\n    hintLayer: Node;\r\n    hintLayer2: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.hintLayer = this.node;\r\n        this.hintLayer2 = find(\"hintLayer2\", this.node.parent);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getHintLayerNameById(name: string) {\r\n        return name + \"Layer\";\r\n    }\r\n\r\n    getHintLayerByName(name: string) {\r\n        let nameLayer = this.nameLayerObj[name];\r\n        if (!nameLayer) {\r\n            nameLayer = new Node(this.getHintLayerNameById(name));\r\n            nameLayer.addComponent(UITransform);\r\n            nameLayer.setPosition(0, 0);\r\n            switch (name) {\r\n                case HintNames.targetPos:\r\n                case HintNames.targetPos2:\r\n                case HintNames.targetPos3:\r\n                case HintNames.feiBiao:\r\n                case HintNames.blockArrow:\r\n                case HintNames.comeShine:\r\n                    nameLayer.parent = this.hintLayer2;\r\n                    break;\r\n                default:\r\n                    nameLayer.parent = this.hintLayer;\r\n                    break;\r\n            }\r\n            this.nameLayerObj[name] = nameLayer;\r\n\r\n            let nodePoolUtil = nameLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(this.namePrefabObj[name]);\r\n        }\r\n        return nameLayer;\r\n    }\r\n\r\n    addHint(name: string, worldPos: Vec3, angle: number = 0, extraObj?: any) {\r\n        let nodePoolUtil = this.getHintLayerByName(name).getComponent(NodePoolUtil);\r\n\r\n        let tmpFunc = () => {\r\n            if (!nodePoolUtil.node.activeInHierarchy) {\r\n                return;\r\n            }\r\n            let hintNode = nodePoolUtil.getNode();\r\n            let hint = cocosUtil.addComponentOnce(hintNode, Hint);\r\n            hint.init(name, worldPos, angle, extraObj);\r\n        };\r\n\r\n        if (!this.namePrefabObj[name]) {\r\n            resManager.loadAsset(constants.bundles.hint, name, Prefab, null, (err, prefab) => {\r\n                if (!cocosUtil.isValid(this)) {\r\n                    return;\r\n                }\r\n                this.namePrefabObj[name] = prefab;\r\n                nodePoolUtil.init(prefab);\r\n                tmpFunc();\r\n            });\r\n            return;\r\n        }\r\n        tmpFunc();\r\n\r\n    }\r\n\r\n    recycleHintNode(hintNode: Node) {\r\n        let nodePoolUtil = this.getHintLayerByName(hintNode.name).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(hintNode);\r\n    }\r\n\r\n}\r\n\r\n","import { Button, EventHandler, find, instantiate, Node, Prefab, Sprite, tween, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport ServerCtr from '../../../tyqSDK/network/ServerCtr';\r\nimport { tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { RedPointLogicMgr, RPointMask } from '../../manager/RedPointLogicMgr';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ShineColor } from '../shader/ShineColor';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { HeroLayer } from './HeroLayer';\r\nimport { MainLayer } from './MainLayer';\r\nimport { TopUILayer } from './TopUILayer';\r\nimport { TowerLayer } from './TowerLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HomeLayer')\r\nexport class HomeLayer extends BaseLayer {\r\n\r\n    toggles: Node[] = [];\r\n    togglesLock = [false, false, false, false, false];\r\n\r\n    _PageLayer = [constants.layers.TowerLayer, \"HeroLayer\", \"MainLayer\", \"ShopLayer\", constants.layers.EnergyLayer]\r\n\r\n    jumpLayerData: any;\r\n\r\n    tabMainRedPointNode: Node;\r\n    tabEnergyRedPointNode: Node;\r\n\r\n    //需要本地化的文字节点\r\n    btn1Label: Node;\r\n    btn2Label: Node;\r\n    btn3Label: Node;\r\n    btn4Label: Node;\r\n    btn5Label: Node;\r\n\r\n    onLoad() {\r\n        this.chooseDesignResolution()\r\n\r\n        this.btn1Label = this.getNodeByPath(\"Layout/ui_btn1/Label\")\r\n        this.btn2Label = this.getNodeByPath(\"Layout/ui_btn2/Label\")\r\n        this.btn3Label = this.getNodeByPath(\"Layout/ui_btn3/Label\")\r\n        this.btn4Label = this.getNodeByPath(\"Layout/ui_btn4/Label\")\r\n        this.btn5Label = this.getNodeByPath(\"Layout/ui_btn5/Label\")\r\n\r\n        this.tabMainRedPointNode = this.getNodeByPath(\"Layout/ui_btn3/redPoint\");\r\n        this.tabEnergyRedPointNode = this.getNodeByPath(\"Layout/ui_btn5/redPoint\");\r\n        if (tyqSDK.getSwitchValue(\"tyq_HeroLayer_open\") == 1) {\r\n            this.togglesLock[1] = false\r\n            RedPointLogicMgr.ins().on(this.node, [{ mask: [RPointMask.RPM_PropWear, RPointMask.RPM_BlessProp], subPath: \"Layout/ui_btn2\" },])\r\n        } else {\r\n            this.togglesLock[1] = true\r\n        }\r\n\r\n        if (tyqSDK.channel != ChannelFlag.WECHAT_JJWS) {\r\n            this.togglesLock[1] = false\r\n        }\r\n\r\n        ServerCtr.GetInstance().reqGetFriendVal();\r\n        this.schedule(() => {\r\n            ServerCtr.GetInstance().reqGetFriendVal();\r\n        }, 60 * 5);\r\n\r\n        myLog.i(\"进游戏的url参数：\", tyqAdManager.getEnterUrlQuery());\r\n        let urlParmas = tyqAdManager.getEnterUrlQuery();\r\n        if (urlParmas && urlParmas.uid) {\r\n            ServerCtr.GetInstance().reqSetFriendCode(urlParmas.uid);\r\n            tyqSDK.eventSendCustomEvent(\"参与分享活动成功进来的玩家\")\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        this.addEventArr([\r\n            msgac.homeHideMenu,\r\n            msgac.mapEnter,\r\n            msgac.jumpLayer,\r\n        ]);\r\n        //  eventManager.on(msgac.homeHideMenu, this.homeHideMenuRet, this)\r\n        if (!UserData.getInstance().mapHand) {\r\n            // 直接进去爬塔第一关\r\n            // mapModel.enterMapWithMapId(constants.design.towerBeginId, 1);\r\n            mapModel.enterMapWithMapId(1);\r\n            return;\r\n        }\r\n\r\n        if (playerModel.hasEnergyAward()) {\r\n            this.setPage(4);\r\n        } else {\r\n            this.setPage(2)\r\n        }\r\n\r\n        if (UserData.getInstance().mapData) {\r\n            this.openLayer(constants.layers.BackMapLayer, null, (mapId: number) => {\r\n                if (mapId) {\r\n                    mapModel.enterMapWithMapId(mapId);\r\n                }\r\n            });\r\n        }\r\n        // RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Layout/ui_btn2\") ,null, true)\r\n        audioManager.playMusic(constants.audioNames.home);\r\n\r\n        if (this.layerData.isWin && this.layerData.floor > 0) {\r\n            // 爬塔胜利\r\n            UserData.getInstance().addTowerMapFloor(this.layerData.mapId);\r\n\r\n            // 跳回去爬塔界面\r\n            let obj: any = {};\r\n            obj.layerName = constants.layers.TowerFloorLayer;\r\n            obj.mapId = this.layerData.mapId;\r\n            eventManager.send(msgac.jumpLayer, obj);\r\n\r\n            let floorRow = designManager.getRowById(constants.tableName.towerFloor, this.layerData.floor);\r\n            let propItem = UserData.getInstance().addPropNum(floorRow.propId, floorRow.propNum);\r\n            this.openAwardGetLayer([propItem]);\r\n\r\n        }\r\n\r\n        // 强制弹出巡逻收益\r\n        if (UserData.getInstance().getPatrolState() <= 0) {\r\n            this.openLayer(constants.layers.PatrolLayer);\r\n            RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, false)\r\n        }\r\n\r\n    }\r\n\r\n    refreshLocalization() {\r\n        this.btn1Label?.localize(\"btn1\",constants.layers.HomeLayer);\r\n        this.btn2Label?.localize(\"btn2\",constants.layers.HomeLayer);\r\n        this.btn3Label?.localize(\"btn3\",constants.layers.HomeLayer);\r\n        this.btn4Label?.localize(\"btn4\",constants.layers.HomeLayer);\r\n        this.btn5Label?.localize(\"btn5\",constants.layers.HomeLayer);\r\n    }\r\n\r\n    refreshRedPoint() {\r\n        if (playerModel.hasLetterAward() || playerModel.hasDaySignAward() || playerModel.hasDayTaskAward() || playerModel.hasVipAward()) {\r\n            this.tabMainRedPointNode.active = true;\r\n        } else {\r\n            this.tabMainRedPointNode.active = false;\r\n        }\r\n\r\n        this.tabEnergyRedPointNode.active = playerModel.hasEnergyAward();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        for (let i = 0; i < 5; i++) {\r\n            this.toggles[i] = this.getNodeByPath(\"Layout/ui_btn\" + (i + 1))\r\n            this.toggles[i].getChildByName(\"icon\").getComponent(Sprite).grayscale = this.togglesLock[i]\r\n            //  console.log(\" this.toggles[i] = \", this.toggles[i])\r\n            let clickEvent = new EventHandler()\r\n            clickEvent.component = \"HomeLayer\"\r\n            clickEvent.target = this.node\r\n            clickEvent.customEventData = i + \"\"\r\n            clickEvent.handler = \"selectPage\"\r\n            if (!this.toggles[i].getComponent(Button)) {\r\n                this.toggles[i].addComponent(Button).clickEvents = [clickEvent]\r\n            }\r\n            // this.toggles[i].addComponent(Button).clickEvents.push(clickEvent)\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    selectPage(node, event) {\r\n        console.log(\"event =\", event)\r\n        this.setPage(parseInt(event))\r\n        audioManager.playEffect(\"btnClick\")\r\n    }\r\n\r\n    setPage(index) {\r\n\r\n        if (this.togglesLock[index]) {\r\n            this.createNotice(\"还未解锁\")\r\n            return\r\n        }\r\n\r\n        this.getNodeByPath(\"TopUILayer\").active = index != 3\r\n        if (index == 2) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n        // if (index == 3) {\r\n        //     this.openLayer(constants.layers.ShopLayer)\r\n        //     return\r\n        // }\r\n        for (let i = 0; i < 5; i++) {\r\n            if (i != index) {\r\n                this.setSpriteFrame2(this.toggles[i], \"homeLayer/ui_xk\", null, constants.bundles.wwqVec)\r\n                //  this.toggles[i].getChildByName(\"icon\").scale = new Vec3(0.6, 0.6, 1)\r\n                tween(this.toggles[i].getChildByName(\"icon\")).to(0.15, { scale: v3(0.6, 0.6, 1) }).start()\r\n                // this.toggles[i].getChildByName(\"name\").active = false\r\n                this.toggles[i].getChildByName(\"Label\").active = false\r\n            } else {\r\n                this.setSpriteFrame2(this.toggles[i], \"homeLayer/ui_hdmb\", null, constants.bundles.wwqVec)\r\n                //this.toggles[i].getChildByName(\"icon\").scale = new Vec3(1, 1, 1)\r\n                tween(this.toggles[i].getChildByName(\"icon\")).to(0.15, { scale: v3(1, 1, 1) }).start()\r\n                // this.toggles[i].getChildByName(\"name\").active = true\r\n                this.toggles[i].getChildByName(\"Label\").active = true\r\n            }\r\n        }\r\n        let uiNode = this.getNodeByPath(\"ui\")\r\n\r\n        if (this._PageLayer[index] != \"\") {\r\n            resManager.loadAsset(constants.bundles.layer, this._PageLayer[index], Prefab, null, (err, prefab) => {\r\n                if (err) {\r\n                    myLog.e(\"LayerManager.openLayer error:\" + err.message, \"MainLayer\", err);\r\n                    return;\r\n                }\r\n                uiNode.removeAllChildren()\r\n                let layerNode = instantiate(prefab);\r\n                uiNode.addChild(layerNode)\r\n                if (this.jumpLayerData) {\r\n                    if (layerNode && layerNode.getComponent(BaseUILayer)) {\r\n                        layerNode.getComponent(BaseUILayer).layerData = this.jumpLayerData\r\n                    }\r\n                    switch (this.jumpLayerData.layerName) {\r\n                        case \"PatrolLayer\":\r\n                            layerNode.getComponent(MainLayer).onClickBtnPartol();\r\n                            break;\r\n                        case \"BlessLayer\":\r\n                            layerNode.getComponent(HeroLayer).openBless();\r\n                            break;\r\n                        case constants.layers.TowerFloorLayer:\r\n                            layerNode.getComponent(TowerLayer).openTowerFloorLayer(this.jumpLayerData.mapId);\r\n                            break;\r\n                        case constants.layers.DaySignLayer:\r\n                            layerNode.getComponent(MainLayer).onClickBtnDaySign();\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    delete this.jumpLayerData;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    jumpLayerRet(data: any) {\r\n        this.jumpLayerData = data;\r\n        switch (data.layerName) {\r\n            case \"ShopLayer\":\r\n                this.setPage(3);\r\n                break;\r\n            case \"MainLayer\":\r\n            case \"PatrolLayer\":\r\n            case constants.layers.DaySignLayer:\r\n                this.setPage(2);\r\n                break;\r\n            case \"BlessLayer\":\r\n                this.setPage(1);\r\n                break;\r\n            case \"RewardItemLayer\":\r\n                this.setPage(2);\r\n                find(\"TopUILayer\", this.node).getComponent(TopUILayer).showRewardItem(null, 2);\r\n                break;\r\n            case constants.layers.RewardSkinLayer:\r\n                this.setPage(2);\r\n                this.openLayer(constants.layers.RewardSkinLayer);\r\n                break;\r\n            case constants.layers.DaySignLayer:\r\n                this.setPage(2);\r\n                this.openLayer(constants.layers.DaySignLayer);\r\n                break;\r\n            case constants.layers.TowerFloorLayer:\r\n                this.setPage(0);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    mapEnterRet(data: any) {\r\n\r\n        // 显示加载进度\r\n        this.openLayer(constants.layers.TransLayer, data, mapModel.loadMapRes.bind(mapModel));\r\n        // this.openLayer(constants.layers.TransLayer);\r\n        // mapModel.loadMapRes((percent: number) => {\r\n        //     // TODO 刷新加载进度\r\n        // }, () => {\r\n        //     this.openLayer(constants.layers.MapLayer, data, null, () => {\r\n        //         // 关闭加载进度\r\n        //         this.closeLayer(constants.layers.TransLayer);\r\n        //         this.closeLayer(constants.layers.TowerFloorLayer);\r\n        //         this.closeLayer();\r\n        //     });\r\n        // });\r\n    }\r\n\r\n    homeHideMenuRet(data: any) {\r\n        if (data.hide) {\r\n            this.getNodeByPath(\"Layout\").active = false\r\n        } else {\r\n            this.getNodeByPath(\"Layout\").active = true\r\n        }\r\n    }\r\n\r\n    onClickBtnHit() {\r\n        let bodyNode = this.getNodeByPath(\"monster\");\r\n        // 闪白\r\n        let shineColor = bodyNode.getComponent(ShineColor);\r\n        if (!shineColor) {\r\n            shineColor = bodyNode.addComponent(ShineColor);\r\n        }\r\n        shineColor.startShine(constants.materials.shineColorSpine);\r\n    }\r\n\r\n}\r\n\r\n","\r\nexport default class Http {\r\n\tpublic xhr: XMLHttpRequest = null!;\r\n\t/**\r\n\t * 单例\r\n\t */\r\n\tprivate static _instance: Http;\r\n\r\n\tpublic static getInstance(): Http {\r\n\t\tif (!this._instance) {\r\n\t\t\tthis._instance = new Http();\r\n\t\t}\r\n\t\treturn this._instance;\r\n\t}\r\n\r\n\t/**\r\n\t * post请求\r\n\t * @param {string} url\r\n\t * @param {object} params\r\n\t * @param {function} callback\r\n\t */\r\n\thttpPost(url: string, params: any, callback: Function, failCb?: Function) {\r\n\t\t// cc.myGame.gameUi.onShowLockScreen();\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\t// cc.log('xhr.readyState=' + xhr.readyState + '  xhr.status=' + xhr.status);\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\tlet respone = xhr.responseText;\r\n\t\t\t\tlet rsp = JSON.parse(respone);\r\n\t\t\t\t// cc.myGame.gameUi.onHideLockScreen();\r\n\t\t\t\tcallback(rsp);\r\n\t\t\t} else {\r\n\t\t\t\tcallback(-1);\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.open('POST', url, true);\r\n\t\t// if (cc.sys.isNative) {\r\n\t\t// xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\r\n\t\t// xhr.setRequestHeader('Access-Control-Allow-Methods', 'GET, POST');\r\n\t\t// xhr.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,content-type');\r\n\t\t// xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t// xhr.setRequestHeader('Authorization', 'Bearer ' + cc.myGame.gameManager.getToken());\r\n\t\t// }\r\n\r\n\t\t// note: In Internet Explorer, the timeout property may be set only after calling the open()\r\n\t\t// method and before calling the send() method.\r\n\t\txhr.timeout = 8000;// 8 seconds for timeout\r\n\t\txhr.send(JSON.stringify(params));\r\n\r\n\t\txhr.onerror = (err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif (failCb) {\r\n\t\t\t\tfailCb(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n","import { Component, instantiate, Node, sys, _decorator } from 'cc';\r\nimport { BaseLayer } from './BaseLayer';\r\nimport { RenderChildBatch } from './RenderChildBatch';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ItemLayer')\r\nexport class ItemLayer extends Component {\r\n\r\n    private itemUI: Node;\r\n\r\n    // 缓存还未被使用的itemUI\r\n    private itemUIFreeArr: any;\r\n    // 正在显示的itemUI数组\r\n    private itemUIArr: any;\r\n\r\n    private idItemUIObj: any = {};\r\n\r\n    private layerJS: BaseLayer;\r\n    private callback: Function;\r\n\r\n    public renderChildBatch: RenderChildBatch = null;\r\n\r\n    private isFrameLoad: boolean = false;\r\n    private dataArr: any[] = [];\r\n\r\n    onLoad() {\r\n        this.itemUI = this.node.children[0];\r\n        this.itemUI.active = false;\r\n\r\n        this.hideAllItems();\r\n\r\n        this.addRenderChildBatch();\r\n    }\r\n\r\n    public addRenderChildBatch() {\r\n        if (sys.isNative) {\r\n            return;\r\n        }\r\n        this.renderChildBatch = this.getComponent(RenderChildBatch);\r\n        if (this.renderChildBatch) {\r\n            return;\r\n        }\r\n        this.renderChildBatch = this.addComponent(RenderChildBatch);\r\n    }\r\n\r\n    hideAllItems() {\r\n        let chs = this.node.children;\r\n        this.itemUIFreeArr = [];\r\n        this.itemUIArr = [];\r\n        this.idItemUIObj = {};\r\n\r\n        for (let node of chs) {\r\n            node.active = false;\r\n            this.itemUIFreeArr.push(node);\r\n        }\r\n    }\r\n\r\n    initUI(layerJS: BaseLayer, arr: any, callback: Function) {\r\n        this.layerJS = layerJS;\r\n        this.callback = callback;\r\n\r\n        // 先全部回收隐藏\r\n        this.hideAllItems();\r\n\r\n        this.itemUIArr = [];\r\n        this.idItemUIObj = {};\r\n\r\n        if (!this.isFrameLoad) {\r\n            for (let i in arr) {\r\n                let item = arr[i];\r\n                this.addItem(item);\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.dataArr = arr;\r\n        this.frameAddItem();\r\n    }\r\n\r\n    setFrameLoad(frameLoad: boolean) {\r\n        this.isFrameLoad = frameLoad;\r\n    }\r\n\r\n    frameAddItem() {\r\n        this.scheduleOnce(() => {\r\n            if (!this.dataArr || this.dataArr.length <= 0) {\r\n                return;\r\n            }\r\n            let item = this.dataArr.shift();\r\n            this.addItem(item);\r\n            this.frameAddItem();\r\n        });\r\n    }\r\n\r\n    addItem(item: any, cb?: Function) {\r\n        let itemUI = this.itemUIFreeArr.shift();\r\n        if (!itemUI) {\r\n            itemUI = instantiate(this.itemUI);\r\n            itemUI.parent = this.node;\r\n        }\r\n        itemUI.active = true;\r\n        itemUI.item = item;\r\n        let index = this.itemUIArr.length;\r\n        itemUI.index = index;\r\n\r\n        if (typeof (item) == \"object\" && item && item.id != undefined) {\r\n            this.idItemUIObj[item.id] = itemUI;\r\n        }\r\n\r\n        if (cb) {\r\n            cb(itemUI, item, index);\r\n        } else if (this.callback) {\r\n            this.callback(itemUI, item, index);\r\n        }\r\n\r\n        if (this.layerJS && this.layerJS.addButtonListener) {\r\n            this.layerJS.addButtonListener(itemUI);\r\n        }\r\n\r\n        this.itemUIArr.push(itemUI);\r\n\r\n        if (this.renderChildBatch) {\r\n            this.renderChildBatch.addRootItemNode(itemUI);\r\n        }\r\n\r\n        return itemUI;\r\n    }\r\n\r\n    getItemUIById(id: number) {\r\n        if (id == undefined) {\r\n            return null;\r\n        }\r\n        let itemUI = this.idItemUIObj[id];\r\n\r\n        return itemUI;\r\n    }\r\n\r\n    getItemUIByIndex(index: number) {\r\n        let itemUI = null;\r\n        this.forShowItemUI((node: Node, item: any) => {\r\n            if (node[\"index\"] == index) {\r\n                itemUI = node;\r\n                return true;\r\n            }\r\n        });\r\n\r\n        return itemUI;\r\n    }\r\n\r\n    loadAndRefreshItemUIByItem(item: any, cb?: Function) {\r\n        if (!item || item.id == undefined) {\r\n            return;\r\n        }\r\n        let itemUI = this.getItemUIById(item.id);\r\n        if (!itemUI) {\r\n            this.addItem(item, cb);\r\n            return;\r\n        }\r\n        this.refreshItemUIByItem(item);\r\n    }\r\n\r\n    refreshItemUIByItem(item: any) {\r\n        if (!item || item.id == undefined) {\r\n            return;\r\n        }\r\n        let itemUI = this.getItemUIById(item.id);\r\n        if (!itemUI) {\r\n            return;\r\n        }\r\n\r\n        itemUI.item = item;\r\n        this.refreshItemUIByItemUI(itemUI);\r\n    }\r\n\r\n    refreshItemUIByItemUI(itemUI: Node) {\r\n        let item = itemUI[\"item\"];\r\n        if (this.callback) {\r\n            this.callback(itemUI, item, itemUI[\"index\"]);\r\n        }\r\n    }\r\n\r\n    refreshItemUIById(id: number) {\r\n        let itemUI = this.getItemUIById(id);\r\n        if (!itemUI) {\r\n            return;\r\n        }\r\n        this.refreshItemUIByItem(itemUI.item);\r\n    }\r\n\r\n    removeItemUIByIndex(index: number) {\r\n        if (index < 0 || index >= this.itemUIArr.length) {\r\n            return;\r\n        }\r\n        let itemUI = null;\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let tmpItemUI = this.itemUIArr[i];\r\n            if (!tmpItemUI.active || tmpItemUI[\"index\"] != index) {\r\n                continue;\r\n            }\r\n            itemUI = tmpItemUI;\r\n            break;\r\n        }\r\n        this.removeItemUIByItemUI(itemUI);\r\n    }\r\n\r\n    removeItemUIById(id: number) {\r\n        if (id == undefined) {\r\n            return;\r\n        }\r\n        let itemUI = this.idItemUIObj[id];\r\n        this.removeItemUIByItemUI(itemUI);\r\n    }\r\n\r\n    removeItemUIByItemUI(itemUI: Node) {\r\n        if (!itemUI) {\r\n            return;\r\n        }\r\n        itemUI.active = false;\r\n        if (this.itemUIFreeArr.indexOf(itemUI) == -1) {\r\n            // 返回缓存池\r\n            itemUI[\"index\"] = -1;\r\n            this.itemUIFreeArr.push(itemUI);\r\n        }\r\n\r\n        let item = itemUI[\"item\"];\r\n        let index = this.itemUIArr.indexOf(itemUI);\r\n        if (index != -1) {\r\n            // 从正在显示的数组中移除\r\n            this.itemUIArr.splice(index, 1);\r\n            // 重新计算索引index\r\n            for (let i = index; i < this.itemUIArr.length; i++) {\r\n                this.itemUIArr[i][\"index\"] = i;\r\n            }\r\n        }\r\n\r\n        if (typeof (item) == \"object\" && item && item.id != undefined) {\r\n            delete this.idItemUIObj[item.id];\r\n        }\r\n\r\n        if (this.renderChildBatch) {\r\n            this.renderChildBatch.removeRootItemNode(itemUI);\r\n        }\r\n    }\r\n\r\n    forShowItemUI(cb: Function) {\r\n        if (!cb) {\r\n            return;\r\n        }\r\n        for (let itemUI of this.itemUIArr) {\r\n            let ret = cb(itemUI, itemUI.item);\r\n            if (ret) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    refreshUI() {\r\n        if (!this.callback) {\r\n            return;\r\n        }\r\n        for (let node of this.itemUIArr) {\r\n            this.callback(node, node[\"item\"], node[\"index\"]);\r\n        }\r\n    }\r\n}\r\n\r\n","import { find, Node, Prefab } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { BaseLayer } from \"../compoment/base/BaseLayer\";\r\nimport { constants } from \"../data/constants\";\r\nimport { resManager } from \"./resManager\";\r\nimport { Label } from \"cc\";\r\n\r\n\r\nclass LayerManager {\r\n\r\n    private static _instance: LayerManager;\r\n    private constructor() { }\r\n    public static get instance(): LayerManager {\r\n        if (!this._instance) {\r\n            this._instance = new LayerManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    public layer1: Node;\r\n    private layerHint: Node;\r\n    private layerDebugLog: Node;\r\n\r\n    // 正在打开中的弹窗\r\n    private openingLayerMap: Map<number, any> = new Map();\r\n    // 已经打开的弹窗\r\n    private openedLayerMap: Map<number, BaseLayer> = new Map();\r\n    // 弹窗名称->弹窗id数组\r\n    private layerNameIdArrMap: Map<string, number[]> = new Map();\r\n\r\n    private layerId: number = 0;\r\n\r\n    loadCommonLayers(onProgress?: Function, onComplete?: Function) {\r\n        let arr = [\r\n            constants.layers.HomeLayer,\r\n            constants.layers.MainLayer,\r\n\r\n            constants.layers.MapLayer,\r\n            constants.layers.MapFightLayer,\r\n            constants.layers.SkillSelectLayer,\r\n            constants.layers.PauseLayer,\r\n            constants.layers.EnergyLayer,\r\n            \r\n            constants.layers.TransLayer,\r\n            constants.layers.HandLayer,\r\n            constants.layers.PatrolLayer,\r\n            constants.layers.PatrolFastLayer,\r\n            constants.layers.RewardLayer,\r\n        ];\r\n        resManager.loadAssetByPathArr(constants.bundles.layer, arr, Prefab, onProgress, (prefabArr: any) => {\r\n            for (let prefab of prefabArr) {\r\n                prefab.addRef();\r\n            }\r\n            if (onComplete) {\r\n                onComplete(prefabArr);\r\n                new Promise(() => {\r\n                    // 这些可以进入游戏后异步加载\r\n                    arr = [\r\n                        constants.layers.LuckyDrawLayer,\r\n                        constants.layers.LevelLayer,\r\n                        constants.layers.ChapterLayer,\r\n                        constants.layers.SettlementLayer,\r\n                        constants.layers.BackHomeLayer,\r\n                        constants.layers.BackLifeLayer,\r\n                        constants.layers.BackMapLayer,\r\n                        constants.layers.BoxMonsterLayer,\r\n                        constants.layers.TowerLayer,\r\n                        constants.layers.TowerFloorLayer,\r\n                        constants.layers.TowerRoleLayer,\r\n                        constants.layers.DayTaskLayer,\r\n                        constants.layers.DaySignLayer,\r\n                        constants.layers.LetterLayer,\r\n                        constants.layers.SkinChangeLayer,\r\n                        constants.layers.PropInfoLayer2,\r\n                        constants.layers.AwardInfoLayer,\r\n                        constants.layers.VipLayer,\r\n                        constants.layers.ShareLayer,\r\n                        constants.layers.MsgBoxLayer,\r\n                        constants.layers.BuyLifeLayer,\r\n        \r\n                        constants.layers.PropInfoLayer,\r\n                        constants.layers.BlessLayer,\r\n                        constants.layers.BlessResultLayer,\r\n                        constants.layers.MoreGameLayer,\r\n                        constants.layers.HeroLayer,\r\n        \r\n                        constants.layers.RewardItemLayer,\r\n                        constants.layers.ShopLayer,\r\n                        constants.layers.SettingLayer,\r\n        \r\n                        constants.layers.GuessGameLayer,\r\n                        constants.layers.GuessResultLayer,\r\n                        constants.layers.PyramidDrawLayer,\r\n                        constants.layers.RewardSkinLayer,\r\n                        constants.layers.RewardRedBoxLayer,\r\n                    ]\r\n                    resManager.loadAssetByPathArr(constants.bundles.layer, arr, Prefab, null, (prefabArr: any) => {\r\n                        for (let prefab of prefabArr) {\r\n                            prefab.addRef();\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        \r\n    }\r\n\r\n    getPopLayerParentNode(): Node {\r\n        return this.layer1;\r\n    }\r\n\r\n    init(layer1: Node, layerHint: Node, layerDebugLog: Node) {\r\n        this.layer1 = layer1;\r\n        this.layerHint = layerHint;\r\n        this.layerDebugLog = layerDebugLog;\r\n\r\n        this.openingLayerMap = new Map();\r\n        this.openedLayerMap = new Map();\r\n        this.layerNameIdArrMap = new Map();\r\n        this.layerId = 0;\r\n\r\n    }\r\n\r\n    createNotice(content: any) {\r\n        // 显示一条提示信息\r\n        let noticeLayer = find(constants.layers.NoticeLayer, this.layerHint);\r\n        if (noticeLayer) {\r\n            noticeLayer.getComponent(constants.layers.NoticeLayer)[\"createNotice\"](content);\r\n        }\r\n    }\r\n\r\n    setDebugLog(txt:string){\r\n        let label = find(\"Label\", this.layerDebugLog).getComponent(Label);\r\n        if(label){\r\n            label.string = txt;\r\n        }\r\n    }\r\n\r\n    addLayerNameId(name: string, id: number) {\r\n        let arr = this.layerNameIdArrMap.get(name);\r\n        if (!arr) {\r\n            arr = [];\r\n            this.layerNameIdArrMap.set(name, arr);\r\n        }\r\n        arr.push(id);\r\n    }\r\n\r\n    removeLayerNameId(name: string, id: number) {\r\n        let arr = this.layerNameIdArrMap.get(name);\r\n        if (arr && arr.length > 0) {\r\n            let index = arr.indexOf(id);\r\n            if (index != -1) {\r\n                arr.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    openSingleLayer(layerName: string, obj?: any, cb?: Function, openSuccessCb?: Function) {\r\n        if (!obj) {\r\n            obj = {};\r\n        }\r\n        let idArr = this.layerNameIdArrMap.get(layerName);\r\n        if (!idArr || idArr.length <= 0) {\r\n            this.openLayer(layerName, obj, cb, openSuccessCb);\r\n            return;\r\n        }\r\n\r\n        let id = idArr[0];\r\n        let layer = this.openedLayerMap.get(id);\r\n        if (layer) {\r\n            // 已显示，刷新数据\r\n            layer.layerData = obj;\r\n            layer.layerCb = cb;\r\n\r\n            layer.onLoad();\r\n            layer.onEnable();\r\n\r\n            if (openSuccessCb) {\r\n                openSuccessCb(layer);\r\n            }\r\n            return;\r\n        }\r\n\r\n        let layerParams = this.openingLayerMap.get(id);\r\n        if (layerParams) {\r\n            // 正准备显示，更新数据\r\n            layerParams.layerName = layerName;\r\n            layerParams.obj = obj;\r\n            layerParams.cb = cb;\r\n            layerParams.openSuccessCb = openSuccessCb;\r\n        }\r\n    }\r\n\r\n    openLayer(layerName: string, obj?: any, cb?: Function, openSuccessCb?: Function) {\r\n        if (!obj) {\r\n            obj = {};\r\n        }\r\n\r\n        this.layerId++;\r\n        let layerId = this.layerId;\r\n\r\n        let layerParams: any = {};\r\n        layerParams.layerName = layerName;\r\n        layerParams.obj = obj;\r\n        layerParams.cb = cb;\r\n        layerParams.openSuccessCb = openSuccessCb;\r\n        this.openingLayerMap.set(layerId, layerParams);\r\n\r\n        this.addLayerNameId(layerName, layerId);\r\n\r\n        let bundleName = constants.bundles.layer;\r\n        let layerPath = layerName;\r\n        resManager.loadAsset(bundleName, layerPath, Prefab, null, (err, prefab) => {\r\n            if (err) {\r\n                myLog.e(\"LayerManager.openLayer error:\" + err.message, layerName, err);\r\n                return;\r\n            }\r\n            layerParams = this.openingLayerMap.get(layerId);\r\n            if (!layerParams) {\r\n                // 在打开之前，就已经被关闭了\r\n                return;\r\n            }\r\n\r\n            let node = cocosUtil.instantiate(prefab);\r\n            let com = node.getComponent(layerName) || node.addComponent(layerName);\r\n\r\n            // 加载每个layer特定需要的资源\r\n            resManager.loadAssetConfigArr(com.preLoadAssetConfigArr, false, null, () => {\r\n                com.layerData = layerParams.obj;\r\n                com.layerCb = layerParams.cb;\r\n                com.layerName = layerParams.layerName;\r\n                com.layerId = layerId;\r\n\r\n                this.openingLayerMap.delete(layerId);\r\n                this.openedLayerMap.set(layerId, com);\r\n\r\n                // 添加到节点上后，会马上触发onLoad和onEnable回调，而start方法是在首次执行update之前被调用\r\n                node.parent = this.layer1;\r\n\r\n                myLog.i(\"openLayer \" + layerName, obj);\r\n\r\n                if (layerParams.openSuccessCb) {\r\n                    layerParams.openSuccessCb(com, prefab);\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    closeLayer(layerId: number | string) {\r\n        if (typeof (layerId) == \"string\") {\r\n            let idArr = this.layerNameIdArrMap.get(layerId);\r\n            if (!idArr || idArr.length <= 0) {\r\n                return;\r\n            }\r\n            layerId = idArr[idArr.length - 1];\r\n        }\r\n\r\n        let layer = this.openedLayerMap.get(layerId);\r\n        if (layer) {\r\n            layer.node.destroy();\r\n            this.openedLayerMap.delete(layerId);\r\n            this.removeLayerNameId(layer.layerName, layerId);\r\n        }\r\n\r\n        let layerParams = this.openingLayerMap.get(layerId);\r\n        if (layerParams) {\r\n            this.openingLayerMap.delete(layerId);\r\n            this.removeLayerNameId(layerParams.layerName, layerId);\r\n        }\r\n    }\r\n\r\n    isShowingLayer(layerName: string) {\r\n        let idArr = this.layerNameIdArrMap.get(layerName);\r\n        if (!idArr || idArr.length <= 0) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\nexport const layerManager = LayerManager.instance;\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { localText } from '../../data/localText';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { msgac } from '../../data/msgac';\r\nimport { constants } from '../../data/constants';\r\nimport { localizeManager } from '../../../localization';\r\nimport { Button } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LetterLayer')\r\nexport class LetterLayer extends BaseLayer {\r\n\r\n    awardArr = [[101, 10000], [801, 200]];\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.isShowBannerAd = true\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setItemLayer(this.getNodeByPath(\"ui/awardLayer/itemLayer\"), this.awardArr, this.refreshPropItem.bind(this));\r\n\r\n        if (playerModel.isLetterAward) {\r\n            // this.setString(this.getNodeByPath(\"ui/btnGet/text\"), localText.hasGet);\r\n            // this.getNodeByPath(\"ui/btnGet/text\").localize(\"hasGet\", constants.catName.common);\r\n            this.getNodeByPath(\"ui/btnGet\").active = false;\r\n        } else {\r\n            // this.setString(this.getNodeByPath(\"ui/btnGet/text\"), localText.get);\r\n            this.getNodeByPath(\"ui/btnGet/text\").localize(\"get\", constants.catName.common);\r\n            this.getNodeByPath(\"ui/btnGet\").active = true;\r\n        }\r\n    }\r\n\r\n    refreshPropItem(itemUI: Node, award: any) {\r\n        this.setPropItem(award[0], find(\"icon\", itemUI), award[1], find(\"bg\", itemUI), find(\"num\", itemUI));\r\n\r\n        let getNode = find(\"get\", itemUI);\r\n        getNode.getChildByName(\"icon\").localizeImg();\r\n        if (playerModel.isLetterAward) {\r\n            getNode.active = true;\r\n        } else {\r\n            getNode.active = false;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGet() {\r\n        if (playerModel.isLetterAward) {\r\n            this.createNotice(localizeManager._localize(null,\"hasGet\", constants.catName.common));\r\n            return;\r\n        }\r\n        playerModel.isLetterAward = 1;\r\n        let arr = UserData.getInstance().addPropArrByDesign(this.awardArr);\r\n        this.openAwardGetLayer(arr);\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBg() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Label, Node, PageView, Sprite, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { localizeManager } from '../../../localization';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LevelLayer')\r\nexport class LevelLayer extends BaseUILayer {\r\n    @property({ type: Node, tooltip: \"地图名字\" }) mapName: Node = null;\r\n    @property({ type: Node, tooltip: \"地图节点\" }) mapItem: Node = null;\r\n    @property({ type: Node, tooltip: \"pageView\" }) pageContent: Node = null;\r\n    @property({ type: Node, tooltip: \"选择按钮\" }) selectBtn: Node = null;\r\n\r\n    @property({ type: Label, tooltip: \"地图详情\" }) mapInfo: Label = null;\r\n    @property({ type: PageView, tooltip: \"地图\" }) mapPage: PageView = null;\r\n\r\n\r\n    _curPageId = 0\r\n    _curOpenLevel = 1\r\n\r\n    onLoad() {\r\n        let mapData = designManager.getRowsByType(constants.tableName.map, constants.mapTypes.main)\r\n        myLog.i(\"----- LevelLayer\", mapData)\r\n        this._curOpenLevel = UserData.getInstance().openLevel\r\n        mapData.forEach((element, index) => {\r\n            let item = instantiate(this.mapItem)\r\n            this.pageContent.addChild(item)\r\n            let icon = item.getChildByName(\"icon\")\r\n            let iconIndex = (mapData[index].id - 1) % 2 + 1;\r\n            this.setSpriteFrame2(icon, \"homeLayer/ui_map\" + iconIndex, null, constants.bundles.wwqVec)\r\n            if (mapData[index].id <= this._curOpenLevel) {\r\n                icon.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n                item.getChildByName(\"lock\").active = false\r\n            } else {\r\n                icon.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n                item.getChildByName(\"lock\").active = true\r\n            }\r\n        });\r\n    }\r\n\r\n    start() {\r\n        this.selectBtn.getChildByName(\"Label\").localize(\"btnChoose\", constants.catName.common);\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        // this.setPage(curMap)\r\n        this.mapPage.scrollToPage(curMap)\r\n        this.setPage(curMap)\r\n    }\r\n\r\n    setPage(index) {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        // this.setSpriteFrame2(this.mapName, \"homeLayer/map_name\" + (mapData[index].id), null, constants.bundles.wwqVec)\r\n        this.mapName.getComponent(Label).string = `${mapData[index].id}.${localizeManager._localize(null, `name${mapData[index].id}`, constants.catName.mapSystem)}`;\r\n        // this.mapInfo.string = mapData[index].mapInfo\r\n        this.mapInfo.node.localize(`info${mapData[index].id}`, constants.catName.mapSystem);\r\n\r\n        console.log(\"mapData[index].id=\", mapData[index].id)\r\n        this._curPageId = mapData[index].id\r\n        this.selectBtn.active = mapData[index].id <= this._curOpenLevel\r\n\r\n    }\r\n\r\n    scrowPage(event) {\r\n        myLog.i(\"event \", event)\r\n        this.setPage(event._curPageIdx)\r\n    }\r\n\r\n    onEnable() {\r\n    }\r\n\r\n    onDisable() {\r\n    }\r\n\r\n    onDestroy() {\r\n    }\r\n\r\n    chooseMap() {\r\n        UserData.getInstance().setCurMap(this._curPageId)\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        this.closeLayer()\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n    }\r\n\r\n    backHome() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        myLog.i(\"backHome\")\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        this.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Node, ProgressBar, Sprite, SpriteFrame, _decorator,Font,Label } from 'cc';\r\nimport { WECHAT } from 'cc/env';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { GLoginState } from '../../../tyqSDK/network/conf';\r\nimport CronCtr from '../../../tyqSDK/network/CronCtr';\r\nimport ServerCtr from '../../../tyqSDK/network/ServerCtr';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { layerManager } from '../../manager/layerManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport {Localization as lz, localizeManager} from \"db://assets/scripts/localization\";\r\nimport { UserData } from '../../model/UserData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LoadingLayer')\r\nexport class LoadingLayer extends BaseLayer {\r\n\r\n    progressBar: ProgressBar;\r\n    progress: number = 0;\r\n    percentNode: Node;\r\n\r\n    flagNode: Node;\r\n    progressLength: number = 428;\r\n    startGap: number = -202;\r\n\r\n    designResProgress: number = 0;\r\n    designResPercent: number = 0.5;\r\n\r\n    bundleArrProgress: number = 0;\r\n    bundleArrPercent: number = 0.5;\r\n    // 由于bundle加载，没有过程回调，因此模拟一个加载过程，创造友好体验\r\n    bundleLoadingTime: number = -1;\r\n    bundleLoadingMaxTime: number = 6;\r\n\r\n    layerProgress: number = 0;\r\n    layerPercent: number = 1;\r\n\r\n    spriteFrameArr: SpriteFrame[] = [];\r\n\r\n    isLogined: boolean = false\r\n\r\n    onLoad() {\r\n\r\n        super.onLoad();\r\n\r\n        this.percentNode = this.getNodeByPath(\"ui/progressBar/percent\");\r\n        this.setString(this.percentNode, \"0%\");\r\n\r\n        this.progressBar = this.getNodeByPath(\"ui/progressBar\").getComponent(ProgressBar);\r\n        this.setProgressBar(this.progressBar, this.progress);\r\n\r\n        this.flagNode = this.getNodeByPath(\"ui/progressBar/flag\");\r\n        let pos = this.flagNode.getPosition();\r\n        pos.x = this.startGap;\r\n        this.flagNode.setPosition(pos);\r\n        this.screenAdapterBG(this.getNodeByPath(\"bg\"))\r\n        this.collectAllSpriteFrame(this.node);\r\n        tyqSDK.initGame()\r\n        sdkManager.initSDK()\r\n        if (tyqSDK.channel == ChannelFlag.WECHAT_JJWS) {\r\n            constants.gameName = \"jjws\";\r\n        }\r\n\r\n        // 游戏名字处理\r\n        let chs = this.getNodeByPath(\"ui/logo\").children;\r\n        for (let node of chs) {\r\n            node.active = false;\r\n        }\r\n        // switch (tyqSDK.channel) {\r\n        //     case ChannelFlag.WECHAT_JJWS:\r\n        //         this.getNodeByPath(\"ui/logo/jjws\").active = true;\r\n        //         break;\r\n        //     default:\r\n        //         this.getNodeByPath(\"ui/logo/mrtgd\").active = true;\r\n        //         break;\r\n        // }\r\n\r\n        //使用本地登录微信账号\r\n      //  let accountNode = this.getNodeByPath(\"account\")\r\n       // accountNode.active = false\r\n        // if(playerModel.isInDevelopmentEnvironment() && HTML5){\r\n        //     accountNode.active = HTML5\r\n        // }\r\n\r\n        //微信登录\r\n        if (WECHAT) {\r\n            CronCtr.getInstance().init() //开启心跳\r\n        } else {\r\n            ServerCtr.GetInstance().loginState = GLoginState.loginWithoutAccount\r\n        }\r\n    }\r\n\r\n    onClickLoginBtn() {\r\n        // let account = this.getNodeByPath(\"account/AccountLabel\").getComponent(Label)!\r\n        // ServerCtr.GetInstance().reqLoginByAccount(account.string, \"\")\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.loadDesignRes(() => {\r\n            this.loadLocalizationConfig()\r\n\r\n            //加载bundle\r\n            this.loadBundles(()=> {\r\n                //因为本地化图片需要用到bundles，所以先加载bundles\r\n                //根据语言显示logo和防沉迷等信息\r\n                let logoNode = this.getNodeByPath(\"ui/logo\");\r\n                logoNode.localizeImg();\r\n                logoNode.active = true;\r\n                this.getNodeByPath(\"ui/jiazaizhong\").localizeImg();\r\n                if (UserData.getInstance().$localization && UserData.getInstance().$localization == \"zh_CN\") {\r\n                    this.getNodeByPath(\"ui/hint\").active = true;\r\n                }\r\n\r\n                // 再去加载其他需要的资源\r\n                this.loadCommonLayerRes();\r\n            }\r\n            );  \r\n        });\r\n        tyqSDK.eventSendCustomEvent(\"进入加载页\", \"玩家人数\")\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n\r\n        this.releaseAllSpriteFrame();\r\n    }\r\n\r\n    collectAllSpriteFrame(node: Node) {\r\n        let sp: Sprite = node.getComponent(Sprite);\r\n        if (sp && sp.spriteFrame) {\r\n            this.spriteFrameArr.push(sp.spriteFrame);\r\n        }\r\n        let chs = node.children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            let ch = chs[i];\r\n            this.collectAllSpriteFrame(ch);\r\n        }\r\n    }\r\n\r\n    releaseAllSpriteFrame() {\r\n        for (let i = 0; i < this.spriteFrameArr.length; i++) {\r\n            let spriteFrame: SpriteFrame = this.spriteFrameArr[i];\r\n            spriteFrame.decRef();\r\n        }\r\n        this.spriteFrameArr = [];\r\n    }\r\n\r\n    loadDesignRes(cb?: Function) {\r\n        // 加载策划表格数据\r\n        designManager.loadAllDesignTable((percent: number) => {\r\n            this.designResProgress = percent;\r\n        }, () => {\r\n            this.designResProgress = 1;\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        });\r\n    }\r\n\r\n    loadBundles(cb?:Function){\r\n        // 加载bundle\r\n        this.bundleLoadingTime = 0;\r\n        let bundleArr = [\r\n            constants.bundles.common,\r\n            constants.bundles.hint,\r\n            constants.bundles.icon,\r\n            constants.bundles.layer,\r\n            constants.bundles.monster,\r\n            constants.bundles.prefab,\r\n            constants.bundles.spine,\r\n            constants.bundles.ui,\r\n            constants.bundles.bullet,\r\n            constants.bundles.wwqVec,\r\n            constants.bundles.loading,\r\n\r\n        ];\r\n        resManager.loadBundleArr(bundleArr, (percent: number) => {\r\n            this.bundleArrProgress = percent;\r\n        }, () => {\r\n            this.bundleArrProgress = 1;\r\n            if (cb) {\r\n                cb();\r\n            }\r\n            // // 再去加载其他需要的资源\r\n            // this.loadCommonLayerRes();\r\n        });\r\n    }\r\n\r\n    loadCommonLayerRes() {\r\n        // 加载layer资源\r\n        console.log(`loadCommonLayerRes begin time:${Date.now()}`)\r\n        layerManager.loadCommonLayers((percent: number) => {\r\n            this.layerProgress = percent;\r\n        }, () => {\r\n            this.layerProgress = 1;\r\n            console.log(`loadCommonLayerRes end time:${Date.now()}`)\r\n        });\r\n    }\r\n\r\n    // 加载本地化相关配置\r\n    loadLocalizationConfig(){\r\n        localizeManager.initLocalization();\r\n    }\r\n\r\n    openHomeLayer() {\r\n        this.closeLayer();\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        tyqSDK.eventSendCustomEvent(\"进入游戏主界面\", \"玩家人数\")\r\n    }\r\n\r\n    onButtonClick(node: Node, name: String) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (!this.progressBar) {\r\n            return;\r\n        }\r\n        if (this.bundleLoadingTime >= 0) {\r\n            this.bundleLoadingTime += dt;\r\n            let p = this.bundleLoadingTime / this.bundleLoadingMaxTime;\r\n            if (p > 1) {\r\n                p = 1;\r\n            }\r\n            if (p > this.bundleArrProgress) {\r\n                this.bundleArrProgress = p;\r\n            }\r\n            if (this.bundleArrProgress >= 1) {\r\n                // 去除小数\r\n                this.bundleArrProgress = 1;\r\n            }\r\n        }\r\n\r\n        let progress:number;\r\n        if (this.designResProgress>=1 && this.bundleArrProgress>=1) {\r\n            progress = this.layerProgress * this.layerPercent;\r\n        }else{\r\n            progress = this.bundleArrProgress * this.bundleArrPercent\r\n            + this.designResProgress * this.designResPercent;\r\n        }\r\n\r\n        // progress = this.designResProgress * this.designResPercent\r\n        //     + this.bundleArrProgress * this.bundleArrPercent\r\n        //     + this.layerProgress * this.layerPercent;\r\n\r\n        // 防止计算过后，是0.999999的情况    \r\n        progress = Math.ceil(progress * 10000) / 10000;\r\n\r\n        if (progress > this.progressBar.progress) {\r\n            this.setProgressBar(this.progressBar, progress);\r\n            this.setString(this.percentNode, Math.ceil(progress * 100) + \"%\");\r\n\r\n            let pos = this.flagNode.getPosition();\r\n            pos.x = progress * this.progressLength + this.startGap;\r\n            this.flagNode.setPosition(pos);\r\n        }\r\n        if (progress >= 1 && this.designResProgress>=1) {\r\n            // myLog.i(\"load end:\" + ServerCtr.GetInstance().loginState);\r\n            if (ServerCtr.GetInstance().loginState == GLoginState.noYet) {\r\n                return;\r\n            }\r\n            // if (ServerCtr.GetInstance().loginState == GLoginState.loginFail) {\r\n            //     this.showHintLayer(\"登陆失败，请保证网络畅通后，重启游戏\", () => {\r\n            //         game.restart();\r\n            //     });\r\n            //     return;\r\n            // }\r\n            this.progressBar = undefined;\r\n            playerModel.init();\r\n            this.openHomeLayer();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import {designManager} from \"db://assets/scripts/game/manager/designManager\";\r\nimport {UserData} from \"db://assets/scripts/game/model/UserData\";\r\nimport {Node, SpriteFrame, sp} from \"cc\"\r\nimport * as cc from \"cc\";\r\nimport {constants} from \"db://assets/scripts/game/data/constants\";\r\nimport {resManager} from \"db://assets/scripts/game/manager/resManager\";\r\nimport {cocosUtil} from \"db://assets/scripts/utils/cocosUtil\";\r\nimport {myLog} from \"db://assets/scripts/common/myLog\";\r\nimport { Label } from \"cc\";\r\nimport { log } from \"cc\";\r\n\r\ndeclare module \"cc\" {\r\n    interface Node {\r\n        localize(args:any, misc_cat?:any):string;\r\n        localizeName(id:number, cat:string):string;\r\n        localizeInfo(id:number, cat:string):string;\r\n        // 对图片节点进行本地化\r\n        // bundle: 包名\r\n        //  args : key值\r\n        //  misc_cat : set值\r\n        localizeImg(bundle?:string, args?:any, misc_cat?:any):string;\r\n        localizeAnim(args?:any,misc_cat?:any):string;\r\n        localizeFormat(lang:string):string;\r\n    }\r\n}\r\n\r\nNode.prototype.localize = function (args:any, misc_cat?:any):string {\r\n    return localizeManager._localize(this, args, misc_cat);\r\n}\r\n\r\nNode.prototype.localizeName = function (id:number, cat:string):string {\r\n    return localizeManager._localize(this, `name${id}`, cat);\r\n}\r\n\r\nNode.prototype.localizeInfo = function (id:number, cat:string):string {\r\n    return localizeManager._localize(this, `info${id}`, cat);\r\n}\r\n\r\nNode.prototype.localizeImg = function (bundle?:string, args?:any, misc_cat?:any):string {\r\n    return localizeManager._localize(this, args, misc_cat, bundle);\r\n}\r\nNode.prototype.localizeAnim = function (args?:any,misc_cat?:any):string {\r\n    return localizeManager._localize(this, args, misc_cat);\r\n}\r\n\r\nNode.prototype.localizeFormat = function (lang:string):string {\r\n    return localizeManager._localizeFormat(this, lang)\r\n}\r\n\r\nexport class Localization  {\r\n\r\n\r\n    private static _instance: Localization;\r\n    public static get instance(): Localization {\r\n        if (!this._instance) {\r\n            this._instance = new Localization();\r\n        }\r\n        return this._instance;\r\n    }\r\n    private constructor() {};\r\n\r\n    private _langIndex = {};\r\n    get langIndex(): {} {\r\n        return this._langIndex;\r\n    }\r\n\r\n    set langIndex(value: {}) {\r\n        this._langIndex = value;\r\n    }\r\n    private _myFonts:{} = null; //缓存语言对应字体,key-本地语言标识,val-Font类\r\n    get myFonts(): {} {\r\n        return this._langIndex;\r\n    }\r\n\r\n    set myFonts(value: {}) {\r\n        this._langIndex = value;\r\n    }\r\n    private node2ResInfo = {}; //缓存图片节点的初始资源名,和bundle名  {node.getPathInHierarchy():{bundle:Bundle,bundleName:\"包名\",respath:\"资源路径\"}}\r\n    //缓存节点的初始字体大小, node.getPathInHierarchy()->fontsize\r\n    private node2FontSize = {};\r\n\r\n    // 本地化语言杂项表\r\n    private _localization: any = {};\r\n    get localization(): any {\r\n        return this._localization;\r\n    }\r\n\r\n    set localization(value: any) {\r\n        this._localization = value;\r\n    }\r\n\r\n    //|--------------------------------------------\r\n\r\n    //  从excel的表中初始化本地化配置\r\n    //  注意:在加载完designManager和resManager后,该函数必须在该类正式被使用前调用\r\n    initLocalization(){\r\n        //初始化默认本地表数据\r\n        let tbData = designManager.getTable(constants.tableName.localization)\r\n        for (let i in tbData) {\r\n            let row = tbData[i];\r\n            if (row.id == 1){\r\n                this._localization.lang = row.text;\r\n                continue;\r\n            }\r\n            // type表\r\n            if (!this._localization[row.type]) {\r\n                this._localization[row.type] = {};\r\n            }\r\n            // cat表\r\n            if (!this._localization[row.type][row.cat]) {\r\n                this._localization[row.type][row.cat] = {};\r\n            }\r\n            /* 取文字或资源路径*/\r\n            let txt= row.text || row.res;\r\n            //对不同语言的text进行分别解析\r\n            for (const txtLang in txt) {\r\n                if (!this._localization[row.type][row.cat][row.key]){\r\n                    this._localization[row.type][row.cat][row.key] = {};\r\n                }\r\n                if (!this._localization[row.type][row.cat][row.key+'_parsed']){\r\n                    this._localization[row.type][row.cat][row.key+'_parsed'] = {};\r\n                }\r\n                this._localization[row.type][row.cat][row.key][txtLang] = txt[txtLang];\r\n                this._localization[row.type][row.cat][row.key+'_parsed'][txtLang] = this.loc_parse_string(txt[txtLang]);\r\n            }\r\n        }\r\n\r\n        //初始化附属本地表数据\r\n        for (const tbName in designManager.getAllTables()) {\r\n            if (tbName.startsWith(\"loc_\")) {\r\n                let catName = tbName.substring(4);\r\n                let tbData = designManager.getTable(tbName);\r\n                for (const i in tbData) {\r\n                    let row = tbData[i];\r\n                    if (!row.cat) {\r\n                        row.cat = catName;\r\n                    }\r\n                    // type表\r\n                    if (!this._localization[row.type]) {\r\n                        this._localization[row.type] = {};\r\n                    }\r\n                    // cat表\r\n                    if (!this._localization[row.type][row.cat]) {\r\n                        this._localization[row.type][row.cat] = {};\r\n                    }\r\n                    /* 取文字或资源路径*/\r\n                    let txt= row.text || row.res;\r\n                    //对不同语言的text进行分别解析\r\n                    for (const txtLang in txt) {\r\n                        if (!this._localization[row.type][row.cat][row.key]){\r\n                            this._localization[row.type][row.cat][row.key] = {};\r\n                        }\r\n                        if (!this._localization[row.type][row.cat][row.key+'_parsed']){\r\n                            this._localization[row.type][row.cat][row.key+'_parsed'] = {};\r\n                        }\r\n                        this._localization[row.type][row.cat][row.key][txtLang] = txt[txtLang];\r\n                        this._localization[row.type][row.cat][row.key+'_parsed'][txtLang] = this.loc_parse_string(txt[txtLang]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        //初始化字体索引，语言选择的ToggleContainer组件使用\r\n        let langObj = this._localization.lang;\r\n        let index = 0;\r\n        for (const key of Object.keys(langObj)) {\r\n            index++;\r\n            this._langIndex[key] = index;\r\n        }\r\n\r\n        //加载字体文件\r\n        if (!this._myFonts){\r\n            this._myFonts = {};\r\n            for (const key in this._langIndex) {\r\n                let fontarr = designManager.getTable(constants.tableName.font);\r\n                let fontpath:string = null;\r\n\r\n                for (const i in fontarr){\r\n                    let row = fontarr[i];\r\n                    if (row.key == key){\r\n                        fontpath = row.font;\r\n                        if (!this._myFonts[key]){\r\n                            this._myFonts[key] = {};\r\n                        }\r\n                        this._myFonts[key].scale = row.scale;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (fontpath && fontpath !== `system`){\r\n                    resManager.loadAsset(constants.bundles.common,`font/${fontpath}`,cc.Font,null, (err,font)=>{\r\n                        if (!this._myFonts[key]){\r\n                            this._myFonts[key] = {};\r\n                        }\r\n                        if (err) {\r\n                            console.log(\"Failed to load font:\", err);\r\n                            this._myFonts[key].font = null;\r\n                            return;\r\n                        }\r\n                        this._myFonts[key].font = font;\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        //根据系统语言初始化默认语言\r\n        let temLang = \"en\";\r\n        if(!UserData.getInstance().$localization){\r\n            let la = navigator.language;\r\n            for (const key in this._localization.lang) {\r\n                if(this._localization.lang.hasOwnProperty(key)){\r\n                    if (la.replace(\"-\",\"_\") == key || la+\"_CN\" == key) {\r\n                        temLang = key;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            UserData.getInstance().$localization = temLang;\r\n        }\r\n        \r\n    }\r\n\r\n    // 根据设置的选项,改变玩家数据中的本地化属性值\r\n    set_language(toggle_index: number) {\r\n        //确定每个字体的\r\n        for (const key in this._langIndex) {\r\n            if (toggle_index == this._langIndex[key]-1) {\r\n                UserData.getInstance().$localization = key;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 根据本地化语言的font配置,设置目标节点的文字格式,不改变内容\r\n    _localizeFormat(item:Node, lang:string):string {\r\n        //判断组件类型\r\n        let label = item.getComponent(cc.Label);\r\n        let richText = item.getComponent(cc.RichText);\r\n        let editBox = item.getComponent(cc.EditBox);\r\n        if (!label && !richText && !editBox) {\r\n            return 'ERROR';\r\n        }\r\n\r\n        if (label){\r\n            //首次先存储默认的节点文字大小\r\n            if (!this.node2FontSize[item.getPathInHierarchy()]){\r\n                this.node2FontSize[item.getPathInHierarchy()] = label.fontSize;\r\n            }\r\n            if (this._myFonts[lang]){\r\n                label.font = this._myFonts[lang].font;\r\n            }else{\r\n                label.useSystemFont = true;\r\n            }\r\n            label.fontSize = this.node2FontSize[item.getPathInHierarchy()]*(this._myFonts[lang].scale ? this._myFonts[lang].scale : 1);\r\n\r\n        }\r\n        if (richText){\r\n            //首次先存储默认的节点文字大小\r\n            if (!this.node2FontSize[item.getPathInHierarchy()]){\r\n                this.node2FontSize[item.getPathInHierarchy()] = label.fontSize;\r\n            }\r\n\r\n            if (this._myFonts[lang]){\r\n                richText.font = this._myFonts[lang].font;\r\n            }else{\r\n                richText.useSystemFont = true;\r\n            }\r\n            richText.fontSize = this.node2FontSize[item.getPathInHierarchy()]*(this._myFonts[lang].scale ? this._myFonts[lang].scale : 1);\r\n        }\r\n        if (editBox){\r\n            //pass\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    /**\r\n     * 根据玩家设置动态的设置节点的文字为本地化语言\r\n     *\r\n     * 如果节点组件是Sprite类型,则先按配置找资源路径,如果找不到,就找初始化时资源的同包同名_语言后缀的资源\r\n     *\r\n     * @param item  creator中的包含Label,RichText,editBox或Sprite组件的节点对象;也可以传null,则直接返回字符串\r\n     * @param args  可以是{}或者string类型,如果是string,则传入策划表中的key值;如果是{}类型,则对应策划表中type为parsed的数据,则其格式为:{cat:\"策划表的cat值\",key:\"策划表的key值\",vars:[根据#n#序号排序的变量]}\r\n     * @param misc_cat  如果为空,则args必须为{}对象,对应策划表中的cat值,一般为游戏中的prefab名\r\n     * @param bundle    如果节点是Sprite类型,则需要传入该参数,表示资源路径的bundle包名\r\n     */\r\n    _localize(item:Node | null, args?:any, misc_cat?:any, bundle?:string):string {\r\n        let retText = `ERROR`;\r\n        let lang = UserData.getInstance().$localization;\r\n        let localz = this._localization;\r\n\r\n        let label:cc.Label = null;\r\n        let richText:cc.RichText = null;\r\n        let editBox:cc.EditBox = null;\r\n        let sprite:cc.Sprite = null;\r\n        let skeleton:sp.Skeleton = null;\r\n\r\n        if (item){\r\n            // myLog.i(`-----------item:${item.getPathInHierarchy()},args:${args},cat:${misc_cat}, bundle:${bundle}`);\r\n        }\r\n\r\n        if (args && typeof args !== 'object') {\r\n            if (misc_cat && localz.misc[misc_cat]) {\r\n                retText = localz.misc[misc_cat][args]? localz.misc[misc_cat][args][lang] || `ERROR` : `ERROR`;\r\n            }\r\n        }else if (args && typeof args == 'object') {\r\n            let oriText = localz.parsed[args.cat][args.key] ? localz.parsed[args.cat][args.key][lang] || null : null;\r\n            if (oriText && oriText.includes(\"%\")){\r\n                retText = oriText.format(...args.vars);\r\n            }else{\r\n                let parsedText = localz.parsed[args.cat][args.key] ? localz.parsed[args.cat][args.key+`_parsed`][lang] || null : null;\r\n                if (parsedText){\r\n                    //组装最终字符串\r\n                    for (const strObj of parsedText) {\r\n                        retText = '';\r\n                        strObj.strings.forEach((val) => {\r\n                            if (typeof val === `number`){\r\n                                retText += args.vars[val-1]; //因为策划表中占位符序号从1开始,数组里需要从0开始,所以这里要减一\r\n                            }else if(typeof val === 'string'){\r\n                                retText += val;\r\n                            }else{\r\n                                retText += `ERROR`;\r\n                            }\r\n                        })\r\n                    }\r\n                    if (retText === ''){\r\n                        retText = `ERROR`;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!item){\r\n            return retText;\r\n        }\r\n\r\n        //判断组件类型\r\n        label = item.getComponent(cc.Label);\r\n        richText = item.getComponent(cc.RichText);\r\n        editBox = item.getComponent(cc.EditBox);\r\n\r\n        sprite = item.getComponent(cc.Sprite);\r\n\r\n        skeleton = item.getComponent(sp.Skeleton);\r\n\r\n        \r\n\r\n        if (!label && !richText && !editBox && !sprite && !skeleton) {\r\n            return retText;\r\n        }\r\n\r\n        //设置字体以及字体内容\r\n        if ((retText!='ERROR' && retText != '') || sprite || skeleton) {\r\n            if (label){\r\n                //首次先存储默认的节点文字大小\r\n                if (!this.node2FontSize[item.getPathInHierarchy()]){\r\n                    this.node2FontSize[item.getPathInHierarchy()] = label.fontSize;\r\n                }\r\n                label.string = retText;\r\n                if (this._myFonts[lang].font){\r\n                    label.font = this._myFonts[lang].font;\r\n                }else{\r\n                    label.useSystemFont = true;\r\n                }\r\n                label.fontSize = this.node2FontSize[item.getPathInHierarchy()]*(this._myFonts[lang].scale ? this._myFonts[lang].scale : 1);\r\n            }\r\n            if (richText){\r\n                //首次先存储默认的节点文字大小\r\n                if (!this.node2FontSize[item.getPathInHierarchy()]){\r\n                    this.node2FontSize[item.getPathInHierarchy()] = richText.fontSize;\r\n                }\r\n                richText.string = retText;\r\n                if (this._myFonts[lang].font){\r\n                    richText.font = this._myFonts[lang].font;\r\n                }else{\r\n                    richText.useSystemFont = true;\r\n                }\r\n                richText.fontSize = this.node2FontSize[item.getPathInHierarchy()]*(this._myFonts[lang].scale ? this._myFonts[lang].scale : 1);\r\n            }\r\n            if (editBox){\r\n                editBox.string = retText;\r\n            }\r\n\r\n            //设置图片资源\r\n            if (sprite){\r\n                //首次把资源原始信息存下,以便后面通过非配置切换的时候,根据规则替换新的资源\r\n                if (!this.node2ResInfo[item.getPathInHierarchy()]){\r\n                    let respath:string = null;\r\n                    let bdname:string = null;\r\n                    // 根据spriteFrame信息,确定初始资源的包名和路径\r\n                    let bd = cc.assetManager.bundles.find((val, key) =>{\r\n                        let bdinfo = val.getAssetInfo(sprite.spriteFrame._uuid);\r\n                        if (bdinfo && bdinfo.path){\r\n                            myLog.i(`-----------uuid:${sprite.spriteFrame._uuid}`);\r\n                            myLog.i(`--------bdinfo:${JSON.stringify(bdinfo)}`);\r\n                            respath = bdinfo.path;\r\n                            myLog.i(`---------respath:${respath}`);\r\n                            respath = respath.substring(0,respath.lastIndexOf(`/spriteFrame`));\r\n                            myLog.i(`---------mid respath:${respath}`);\r\n                            bdname = key;\r\n                            return true;\r\n                        }\r\n                        return false;\r\n                    })\r\n\r\n                    if (!respath){\r\n                        retText = 'ERROR';\r\n                    }\r\n\r\n                    //判断资源名是否已经本地化,是则截取本地化标识符之前的路径\r\n                    if (respath && respath.includes(`_@@`)){\r\n                        respath = respath.split(`_@@`)[0];\r\n                        myLog.i(`---------final respath:${respath}`);\r\n                    }\r\n                    \r\n                    if (bd && respath && bdname){\r\n                        this.node2ResInfo[item.getPathInHierarchy()] = {};\r\n                        this.node2ResInfo[item.getPathInHierarchy()].bundle = bd;\r\n                        this.node2ResInfo[item.getPathInHierarchy()].respath = respath;\r\n                        this.node2ResInfo[item.getPathInHierarchy()].bundleName = bdname;\r\n                    }\r\n                }\r\n\r\n                let bSuccess = false;\r\n                if (retText != 'ERROR' && retText != '') { //使用配置文件中的资源名\r\n                    if (!bundle){\r\n                        //bundle参数没有的话,先看看缓存中是否有存当前节点的bundle\r\n                        if (this.node2ResInfo[item.getPathInHierarchy()]){\r\n                            bundle = this.node2ResInfo[item.getPathInHierarchy()].bundleName;\r\n                        }\r\n                    }\r\n\r\n                    if (bundle) {\r\n                        resManager.loadSpriteFrame(bundle, retText, (err, spriteFrame: SpriteFrame) => {\r\n                            if (err) {\r\n                                retText = `ERROR`;\r\n                                myLog.e(`loadSpriteFrame err: item-->${item?.getPathInHierarchy()}, args-->${args}, misc_cat-->${misc_cat}, bundle-->${bundle}`);\r\n                                return;\r\n                            }\r\n                            if (!cocosUtil.isValid(item)) {\r\n                                retText = `ERROR`;\r\n                                return;\r\n                            }\r\n                            if (!cocosUtil.isValid(sprite)) {\r\n                                retText = `ERROR`;\r\n                                return;\r\n                            }\r\n                            sprite.spriteFrame = spriteFrame;\r\n                            bSuccess = true;\r\n                            return;\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (!bSuccess){\r\n                    //如果按配置设置资源失败,则尝试使用原始资源同目录下的:原资源名_@@语言标识,为名字的资源\r\n                    if (!this.node2ResInfo[item.getPathInHierarchy()]){\r\n                        return 'ERROR';\r\n                    }\r\n                    bundle = this.node2ResInfo[item.getPathInHierarchy()].bundleName;\r\n                    retText = `${this.node2ResInfo[item.getPathInHierarchy()].respath}_@@${lang}`;\r\n                }\r\n\r\n                resManager.loadSpriteFrame(bundle, retText, (err, spriteFrame: SpriteFrame) => {\r\n                    if (err) {\r\n                        retText = `ERROR`;\r\n                        myLog.e(`loadSpriteFrame err: item-->${item?.getPathInHierarchy()}, args-->${args}, misc_cat-->${misc_cat}, bundle-->${bundle}`);\r\n                        return;\r\n                    }\r\n                    if (!cocosUtil.isValid(item)) {\r\n                        retText = `ERROR`;\r\n                        return;\r\n                    }\r\n                    if (!cocosUtil.isValid(sprite)) {\r\n                        retText = `ERROR`;\r\n                        return;\r\n                    }\r\n                    sprite.spriteFrame = spriteFrame;\r\n                    bSuccess = true;\r\n                    return;\r\n                });\r\n            }\r\n\r\n            if (skeleton){\r\n                try{\r\n                    if (retText != 'ERROR' && retText != ''){\r\n                        skeleton.setSkin(retText);\r\n                    }else{\r\n                        skeleton.setSkin(lang);\r\n                    }\r\n                }catch(e){\r\n                    myLog.e(e);\r\n                    retText = `ERROR`;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return retText;\r\n\r\n        // let loc_target: any = null;\r\n        // let ret_string: string | null = null;\r\n        //\r\n        // switch (args.type) {\r\n        //     case 'other':\r\n        //         loc_target = localz.descriptions.Other[args.key];\r\n        //         break;\r\n        //     case 'descriptions':\r\n        //     case 'unlocks':\r\n        //         loc_target = localz.descriptions[args.set][args.key];\r\n        //         break;\r\n        //     case 'tutorial':\r\n        //         loc_target = localz.tutorial_parsed[args.key];\r\n        //         break;\r\n        //     case 'quips':\r\n        //         loc_target = localz.quips_parsed[args.key];\r\n        //         break;\r\n        //     case 'raw_descriptions':\r\n        //         loc_target = localz.descriptions[args.set][args.key];\r\n        //         const multi_line: string[] = [];\r\n        //         if (loc_target) {\r\n        //             const lines = args.type === 'unlocks' ? loc_target.unlock_parsed : args.type === 'name' ? loc_target.name_parsed : loc_target.text_parsed;\r\n        //             for (const line of lines) {\r\n        //                 let final_line = '';\r\n        //                 for (const part of line) {\r\n        //                     let assembled_string = '';\r\n        //                     for (const subpart of part.strings) {\r\n        //                         assembled_string += typeof subpart === 'string' ? subpart : args.vars[Number(subpart[1])] || 'ERROR';\r\n        //                     }\r\n        //                     final_line += assembled_string;\r\n        //                 }\r\n        //                 multi_line.push(final_line);\r\n        //             }\r\n        //         }\r\n        //         return multi_line;\r\n        //     case 'text':\r\n        //         loc_target = localz.misc.v_text_parsed[args.key];\r\n        //         break;\r\n        //     case 'variable':\r\n        //         loc_target = localz.misc.v_dictionary_parsed[args.key];\r\n        //         if (!loc_target) return 'ERROR';\r\n        //         if (loc_target.multi_line) {\r\n        //             const assembled_strings: string[] = [];\r\n        //             for (const v of loc_target) {\r\n        //                 let assembled_string = '';\r\n        //                 for (const subpart of v[1].strings) {\r\n        //                     assembled_string += typeof subpart === 'string' ? subpart : args.vars[Number(subpart[1])];\r\n        //                 }\r\n        //                 assembled_strings.push(assembled_string);\r\n        //             }\r\n        //             return assembled_strings.length ? assembled_strings : ['ERROR'];\r\n        //         } else {\r\n        //             let assembled_string = '';\r\n        //             for (const subpart of loc_target[0].strings) {\r\n        //                 assembled_string += typeof subpart === 'string' ? subpart : args.vars[Number(subpart[1])];\r\n        //             }\r\n        //             ret_string = assembled_string || 'ERROR';\r\n        //         }\r\n        //         break;\r\n        //     case 'name_text':\r\n        //         try {\r\n        //             ret_string = localz.descriptions[(args.set || args.node.config.center.set)][args.key || args.node.config.center.key].name;\r\n        //         } catch {\r\n        //             ret_string = 'ERROR';\r\n        //         }\r\n        //         break;\r\n        //     case 'name':\r\n        //         loc_target = localz.descriptions[(args.set || args.node.config.center.set)][args.key || args.node.config.center.key];\r\n        //         break;\r\n        // }\r\n        //\r\n        // if (ret_string) return ret_string;\r\n        //\r\n        // if (loc_target) {\r\n        //     const lines = args.type === 'unlocks' ? loc_target.unlock_parsed : args.type === 'name' ? loc_target.name_parsed : loc_target.text_parsed;\r\n        //     for (const line of lines) {\r\n        //         const final_line: any[] = [];\r\n        //         for (const part of line) {\r\n        //             let assembled_string = '';\r\n        //             for (const subpart of part.strings) {\r\n        //                 assembled_string += typeof subpart === 'string' ? subpart : args.vars[Number(subpart[1])] || 'ERROR';\r\n        //             }\r\n        //             const desc_scale = G.LANG.font.DESCSCALE * (G.F_MOBILE_UI ? 1.5 : 1);\r\n        //             if (args.type === 'name') {\r\n        //                 final_line.push({\r\n        //                     n: G.UIT.O,\r\n        //                     config: {\r\n        //                         object: {\r\n        //                             string: [assembled_string],\r\n        //                             colours: [(part.control.V && args.vars.colours[Number(part.control.V)]) || (part.control.C && loc_colour(part.control.C)) || G.C.UI.TEXT_LIGHT],\r\n        //                             bump: true,\r\n        //                             silent: true,\r\n        //                             pop_in: 0,\r\n        //                             pop_in_rate: 4,\r\n        //                             maxw: 5,\r\n        //                             shadow: true,\r\n        //                             y_offset: -0.6,\r\n        //                             spacing: Math.max(0, 0.32 * (17 - assembled_string.length)),\r\n        //                             scale: (0.55 - 0.004 * assembled_string.length) * (part.control.s ? Number(part.control.s) : 1),\r\n        //                         },\r\n        //                     },\r\n        //                 });\r\n        //             } else if (part.control.E) {\r\n        //                 const _float = part.control.E === '1';\r\n        //                 const _silent = true;\r\n        //                 const _pop_in = part.control.E === '1' ? 0 : undefined;\r\n        //                 const _bump = part.control.E === '2';\r\n        //                 const _spacing = part.control.E === '2' ? 1 : undefined;\r\n        //                 final_line.push({\r\n        //                     n: G.UIT.O,\r\n        //                     config: {\r\n        //                         object: {\r\n        //                             string: [assembled_string],\r\n        //                             colours: [part.control.V ? args.vars.colours[Number(part.control.V)] : loc_colour(part.control.C || '')],\r\n        //                             float: _float,\r\n        //                             silent: _silent,\r\n        //                             pop_in: _pop_in,\r\n        //                             bump: _bump,\r\n        //                             spacing: _spacing,\r\n        //                             scale: 0.32 * (part.control.s ? Number(part.control.s) : 1) * desc_scale,\r\n        //                         },\r\n        //                     },\r\n        //                 });\r\n        //             } else if (part.control.X) {\r\n        //                 final_line.push({\r\n        //                     n: G.UIT.C,\r\n        //                     config: {\r\n        //                         align: 'm',\r\n        //                         colour: loc_colour(part.control.X),\r\n        //                         r: 0.05,\r\n        //                         padding: 0.03,\r\n        //                         res: 0.15,\r\n        //                     },\r\n        //                     nodes: [\r\n        //                         {\r\n        //                             n: G.UIT.T,\r\n        //                             config: {\r\n        //                                 text: assembled_string,\r\n        //                                 colour: loc_colour(part.control.C || ''),\r\n        //                                 scale: 0.32 * (part.control.s ? Number(part.control.s) : 1) * desc_scale,\r\n        //                             },\r\n        //                         },\r\n        //                     ],\r\n        //                 });\r\n        //             } else {\r\n        //                 final_line.push({\r\n        //                     n: G.UIT.T,\r\n        //                     config: {\r\n        //                         detailed_tooltip: part.control.T ? (G.P_CENTERS[part.control.T] || G.P_TAGS[part.control.T]) : undefined,\r\n        //                         text: assembled_string,\r\n        //                         shadow: args.shadow,\r\n        //                         colour: part.control.V ? args.vars.colours[Number(part.control.V)] : loc_colour(part.control.C || '', args.default_col),\r\n        //                         scale: 0.32 * (part.control.s ? Number(part.control.s) : 1) * desc_scale,\r\n        //                     },\r\n        //                 });\r\n        //             }\r\n        //         }\r\n        //         if (args.type === 'name' || args.type === 'text') return final_line;\r\n        //         args.nodes?.push(final_line);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    //解析单行字符串,主要解析变量的占位符；占位符也可以用%d来表示，则在本地化的时候，会对string进行format\r\n    private loc_parse_string(line: string): any[] {\r\n        const parsed_line:any[] = [];\r\n        let control: { [key: string]: string | null } = {};\r\n        let _c: boolean | null = null;\r\n        let _c_name: string | null = null;\r\n        let _c_val: string | null = null;\r\n        let _c_gather: boolean | null = null;\r\n        let _s_gather: boolean | null = null;\r\n        let _s_ref: number = null;\r\n        let str_parts: any[] = [];\r\n        let str_it = 1;\r\n\r\n        for (let i = 0; i < line.length; i++) {\r\n            const char = line.charAt(i);\r\n            if (char === '{') { // Start of a control section, extract all controls\r\n                if (str_parts[0]) parsed_line.push({ strings: str_parts, control: control || {} });\r\n                str_parts = [];\r\n                str_it = 1;\r\n                control = {};\r\n                _c = true;\r\n                _c_name = null;\r\n                _c_val = null;\r\n                _c_gather = null;\r\n                _s_gather = null;\r\n                _s_ref = null;\r\n            } else if (_c && char !== ':' && char !== '}' && !_c_gather) {\r\n                _c_name = (_c_name || '') + char;\r\n            } else if (_c && char === ':') {\r\n                _c_gather = true;\r\n            } else if (_c && char !== ',' && char !== '}' && _c_gather) {\r\n                _c_val = (_c_val || '') + char;\r\n            } else if (_c && (char === ',' || char === '}')) {\r\n                _c_gather = null;\r\n                if (_c_name) control[_c_name] = _c_val;\r\n                _c_name = null;\r\n                _c_val = null;\r\n                if (char === '}') _c = null;\r\n            } else if (!_c && char !== '#' && !_s_gather) {\r\n                str_parts[str_it - 1] = (str_parts[str_it - 1] || '') + (control['X'] ? char.replace(/\\s+/g, '') : char);\r\n            } else if (!_c && char === '#' && !_s_gather) {\r\n                _s_gather = true;\r\n                if (str_parts[str_it - 1]) str_it++;\r\n            } else if (!_c && char === '#' && _s_gather) {\r\n                _s_gather = null;\r\n                if (_s_ref) {\r\n                    str_parts[str_it - 1] = _s_ref;\r\n                    str_it++;\r\n                    _s_ref = null;\r\n                }\r\n            } else if (!_c && _s_gather) {\r\n                _s_ref = (_s_ref || null) + Number(char);\r\n            }\r\n\r\n            if (i === line.length - 1) {\r\n                if (str_parts[0]) parsed_line.push({ strings: str_parts, control: control || {} });\r\n                return parsed_line;\r\n            }\r\n        }\r\n\r\n        return parsed_line;\r\n    }\r\n}\r\nexport const localizeManager = Localization.instance;","import { sys } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { constants } from \"../data/constants\";\r\n\r\n\r\nclass LocalStorageManager {\r\n\r\n    private static _instance: LocalStorageManager;\r\n    private constructor() { };\r\n    public static get instance(): LocalStorageManager {\r\n        if (!this._instance) {\r\n            this._instance = new LocalStorageManager();\r\n        }\r\n        return this._instance;\r\n    };\r\n\r\n    getKey(): string {\r\n        if (constants.gameName) {\r\n            return constants.gameName + \"_gameData\";\r\n        }\r\n        return \"gameData\";\r\n    }\r\n\r\n    getGameData() {\r\n        let key = this.getKey();\r\n        let data = sys.localStorage.getItem(key);\r\n        if (data) {\r\n            data = JSON.parse(data);\r\n            return data;\r\n        }\r\n\r\n        return {};\r\n    }\r\n    setGameData(data: object) {\r\n        let key = this.getKey();\r\n        sys.localStorage.setItem(key, JSON.stringify(data));\r\n    }\r\n\r\n    uidKey = constants.gameName + \"_uid\";\r\n    set uid(uid: string) {\r\n        sys.localStorage.setItem(this.uidKey, uid + \"\");\r\n        myLog.i(\"保存uid:\" + uid);\r\n    }\r\n    get uid() {\r\n        return sys.localStorage.getItem(this.uidKey);\r\n    }\r\n\r\n    openIdKey = constants.gameName + \"_openId\";\r\n    set openId(openId: string) {\r\n        sys.localStorage.setItem(this.openIdKey, openId + \"\");\r\n        myLog.i(\"保存openId：\" + openId);\r\n    }\r\n    get openId() {\r\n        return sys.localStorage.getItem(this.openIdKey);\r\n    }\r\n\r\n}\r\n\r\nexport const localStorageManager = LocalStorageManager.instance;\r\n","\r\n// 中文\r\nexport const localText = {\r\n    clickGameStart: \"点击游戏开始\",\r\n    adAwardHint: \"完整观看视频获得奖励\",\r\n    noRewardAd: \"暂无广告可观看，请稍后再试\",\r\n    noAd: \"需要接入激励视频广告\",\r\n    defaultError: \"发生错误 st:%d\",\r\n    lackItemHint: \"缺少 %s\",\r\n    itemGet: \"获得 %sx%d\",\r\n    timeCd: \"%s后回来\",\r\n    cd: \"不要太频繁哦，请稍后再来\",\r\n    propGet: \"获得%d个%s\",\r\n    lv: \"等级\",\r\n    maxLv: \"已满级\",\r\n    point: \"点\",\r\n    energyTimeHint: \"持续时间：%d天%d小时\",\r\n    ci: \"次\",\r\n    daySignHasGet: \"今日已签到\",\r\n    daySignOutdate: \"签到时间已过\",\r\n    daySignNoLeave: \"没有需要补签的\",\r\n    dayIndex: \"第%d天\",\r\n    daySignFinalAwardHint: \"签到7天后，才能领取\",\r\n    hasGet: \"已领取\",\r\n    get: \"领取\",\r\n    notHas: \"还未获得\",\r\n    equipSuccess: \"穿戴成功\",\r\n    full: \"已达上限\",\r\n    wei: \"位\",\r\n    ge: \"个\",\r\n    notGet: \"不可领取，目前数量为%d\",\r\n    weaponEquipAdd: \"提升%d%武器装备的攻击力\",\r\n\r\n    coinGetHint: \"获得%d金币\",\r\n    lackDiamond: \"钻石不足\",\r\n}\r\n\r\n","import { find, macro, Node, sp, tween, Tween, UIOpacity, UITransform, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { Label } from 'cc';\r\nimport { localizeManager } from '../../../localization';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LuckyDrawLayer')\r\nexport class LuckyDrawLayer extends BaseLayer {\r\n\r\n    uiNode: Node;\r\n\r\n    itemLayer: Node;\r\n    circleNodeNum: number = 16;\r\n\r\n    choseNum: number = 0;\r\n    choseArr: any = [];\r\n\r\n    starShineArr: any = [];\r\n    starShineIndex: number = 0;\r\n    showChoseIndex: number = 0;\r\n    showChoseItemUI: Node;\r\n\r\n    startCircle: boolean = false;\r\n    circleEnd: boolean = false;\r\n    btnStart: Node;\r\n    hintNode: Node;\r\n    coinLayer: Node;\r\n    coinNumNode: Node;\r\n    coinNum: number = 0;\r\n\r\n    resultUILayer: Node;\r\n    resultBgNode: Node;\r\n    resultItemLayer: Node;\r\n    resultItemNode: Node;\r\n    resultBtnSure: Node;\r\n\r\n    // 一些特效\r\n    pdNode: Node;\r\n    fireNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.uiNode = this.getNodeByPath(\"ui\");\r\n\r\n        this.btnStart = this.getNodeByPath(\"ui/btnStart\");\r\n        this.hintNode = this.getNodeByPath(\"ui/hint\");\r\n\r\n        this.itemLayer = this.getNodeByPath(\"ui/itemLayer\");\r\n        let itemNode = this.itemLayer.children[0];\r\n        itemNode.parent = null;\r\n        let arr = [\r\n            { x: 0, y: 100 },\r\n            { x: 100, y: 0 },\r\n            { x: 0, y: -100 },\r\n            { x: -100, y: 0 },\r\n        ];\r\n        let lastItemNode = itemNode;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let info = arr[i];\r\n            for (let k = 1; k <= 4; k++) {\r\n                let node = cocosUtil.instantiate(itemNode);\r\n                node.parent = this.itemLayer;\r\n                let pos = lastItemNode.getPosition();\r\n                pos.x += info.x;\r\n                pos.y += info.y;\r\n                node.position = pos;\r\n                lastItemNode = node;\r\n            }\r\n        }\r\n\r\n        this.coinLayer = this.getNodeByPath(\"ui/coinLayer\");\r\n        this.coinNumNode = this.getNodeByPath(\"ui/coinLayer/num\");\r\n\r\n        this.pdNode = this.getNodeByPath(\"pd\");\r\n        this.fireNode = this.getNodeByPath(\"fire\");\r\n\r\n        this.resultUILayer = this.getNodeByPath(\"resultUi\");\r\n        this.resultBgNode = this.getNodeByPath(\"resultUi/resultBg\");\r\n        this.resultItemLayer = this.getNodeByPath(\"resultUi/itemLayer\");\r\n        this.resultItemNode = this.resultItemLayer.children[0];\r\n        this.resultItemNode.parent = null;\r\n        this.resultBtnSure = this.getNodeByPath(\"resultUi/btnSure\");\r\n\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n    }\r\n\r\n    initUI() {\r\n        this.node.getChildByPath(\"ui/title/Label\").localize(\"title\", constants.layers.LuckyDrawLayer);\r\n        this.btnStart.getChildByName(\"ui_text_go_on\").localizeImg();\r\n        this.hintNode.localize(\"hint\", constants.layers.LuckyDrawLayer);\r\n        this.resultBtnSure.getChildByName(\"text\").localizeImg();\r\n\r\n        this.resultUILayer.active = false;\r\n        this.pdNode.active = false;\r\n        this.fireNode.active = false;\r\n        this.hintNode.active = false;\r\n        this.setString(this.coinNumNode, this.coinNum);\r\n\r\n        this.initItemArr();\r\n        this.btnStart.active = false;\r\n        cocosUtil.tweenScaleIn(this.uiNode, 0.3, () => {\r\n            this.btnStart.active = true;\r\n            cocosUtil.tweenScaleIn(this.btnStart);\r\n        });\r\n    }\r\n\r\n    initItemArr() {\r\n        // 转盘上显示的\r\n        let showArr = [];\r\n        // 最终随机到的\r\n        this.choseArr = [];\r\n        // 选择的个数\r\n        this.choseNum = Math.random() > 0.5 ? 3 : 5;\r\n\r\n        // 随机池子\r\n        let arr = [];\r\n        // 强制选择\r\n        let forceChoseArr = [];\r\n\r\n        // 武器\r\n        utilTools.forArr(mapModel.weaponSystem.weaponArr, (info: any) => {\r\n            let item: any = {};\r\n            item.name = constants.tableName.weapon;\r\n            item.info = info;\r\n            let row = designManager.getRowById(item.name, info.id);\r\n            if (row.lv == constants.design.maxLv - 1) {\r\n                // 4级必选中\r\n                let temp = utilTools.copyObj(item);\r\n                temp.info.id++;\r\n                forceChoseArr.push(temp);\r\n                return;\r\n            }\r\n            let lv = row.lv;\r\n            while (lv < constants.design.maxLv) {\r\n                let temp = utilTools.copyObj(item);\r\n                arr.push(temp);\r\n                lv++;\r\n            }\r\n        });\r\n\r\n        // 主动技能\r\n        utilTools.forArr(mapModel.skillSystem.skillArr, (info: any) => {\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill;\r\n            item.info = info;\r\n            let row = designManager.getRowById(item.name, info.id);\r\n            if (mapModel.skillSystem.canBreakthrough(row.type)) {\r\n                if (row.lv == constants.design.maxLv - 1) {\r\n                    // 4级必选中\r\n                    let temp = utilTools.copyObj(item);\r\n                    temp.info.id++;\r\n                    forceChoseArr.push(temp);\r\n                    return;\r\n                }     \r\n            }\r\n            let lv = row.lv;\r\n            while (lv < constants.design.maxLv) {\r\n                let temp = utilTools.copyObj(item);\r\n                arr.push(temp);\r\n                lv++;\r\n            }\r\n        });\r\n\r\n        // 被动技能\r\n        utilTools.forArr(mapModel.skillSystem.skill2Arr, (info: any) => {\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill2;\r\n            item.info = info;\r\n            let row = designManager.getRowById(item.name, info.id);\r\n            if (row.lv == constants.design.maxLv - 1) {\r\n                // 4级必选中\r\n                let temp = utilTools.copyObj(item);\r\n                temp.info.id++;\r\n                forceChoseArr.push(temp);\r\n                return;\r\n            }\r\n            let lv = row.lv;\r\n            while (lv < constants.design.maxLv) {\r\n                let temp = utilTools.copyObj(item);\r\n                arr.push(temp);\r\n                lv++;\r\n            }\r\n        });\r\n\r\n        showArr = showArr.concat(forceChoseArr);\r\n\r\n        // 处理强制选择的\r\n        while (forceChoseArr.length > this.choseNum) {\r\n            // 超过选择的数量要移除\r\n            utilTools.getRandomItemByArr(forceChoseArr, true);\r\n        }\r\n        this.choseArr = this.choseArr.concat(forceChoseArr);\r\n\r\n        // 随机池子补满金币\r\n        while (arr.length < this.circleNodeNum - showArr.length) {\r\n            let item: any = {};\r\n            item.name = constants.tableName.prop;\r\n            item.id = constants.propIds.coin;\r\n            item.num = Math.floor(Math.random() * 100) + 1;\r\n            arr.push(item);\r\n        }\r\n\r\n        // 接下来从池子中随机\r\n        while (this.choseArr.length < this.choseNum) {\r\n            let item = utilTools.getRandomItemByArr(arr, true);\r\n            if (!item) {\r\n                break;\r\n            }\r\n            this.choseArr.push(item);\r\n            showArr.push(item);\r\n        }\r\n\r\n        // 补满转盘\r\n        while (showArr.length < this.circleNodeNum) {\r\n            let item = utilTools.getRandomItemByArr(arr, true);\r\n            if (!item) {\r\n                break;\r\n            }\r\n            showArr.push(item);\r\n        }\r\n\r\n        // 随机打乱\r\n        showArr = utilTools.randomArr(showArr, true);\r\n        this.choseArr = utilTools.randomArr(this.choseArr, true);\r\n\r\n        utilTools.forArr(this.itemLayer.children, (itemUI: any, index: number) => {\r\n            let item = showArr[index];\r\n            let row = this.getRowByItem(item);\r\n            item.uiIndex = index;\r\n            itemUI.item = item;\r\n            this.setSpriteFrame(find(\"icon\", itemUI), row.icon);\r\n            find(\"shine\", itemUI).active = false;\r\n            find(\"star\", itemUI).active = false;\r\n            find(\"chose\", itemUI).active = false;\r\n\r\n            // 出场动画\r\n            itemUI.active = false;\r\n            this.scheduleOnce(() => {\r\n                itemUI.active = true;\r\n                cocosUtil.tweenScaleIn(itemUI);\r\n            }, 0.2 + Math.random() * 0.2);\r\n        });\r\n\r\n        // myLog.i(showArr, this.choseArr);\r\n\r\n    }\r\n\r\n    getRowByItem(item: any) {\r\n        let row = null;\r\n        switch (item.name) {\r\n            case constants.tableName.weapon:\r\n            case constants.tableName.skill:\r\n            case constants.tableName.skill2:\r\n                row = designManager.getRowById(item.name, item.info.id);\r\n                break;\r\n            case constants.tableName.prop:\r\n                row = designManager.getRowById(item.name, item.id);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return row;\r\n    }\r\n\r\n    getCatNameByItem(item: any) {\r\n        let catName = null;\r\n        switch (item.name) {\r\n            case constants.tableName.weapon:\r\n            case constants.tableName.skill:\r\n            case constants.tableName.skill2:\r\n                catName = constants.catName[`${item.name}System`];\r\n                break;\r\n            case constants.tableName.prop:\r\n                catName = constants.catName.propSystem;\r\n                break;\r\n        }\r\n        return catName;\r\n    }\r\n\r\n    // 开始处理动画表现\r\n    startAnimation() {\r\n        utilTools.waterfall([\r\n            (result: any, cb: Function) => {\r\n                // 转一圈\r\n                this.circleShineAnimation(() => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                // 转第二圈\r\n                this.circleShineAnimation(() => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                // 整圈闪烁\r\n                this.totalShineAnimation(() => {\r\n                    // 提示跳过动画\r\n                    this.hintNode.active = true;\r\n                    tween(this.hintNode.getComponent(UIOpacity)).delay(0.5).to(0.5, { opacity: 0 }).to(0.5, { opacity: 255 }).union().repeatForever().start();\r\n                    \r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                // 选择数量闪烁\r\n                this.choseNumAnimation(() => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.unscheduleAllCallbacks();\r\n                this.pdNode.active = true;\r\n                this.startCircle = true;\r\n                tween(this.coinLayer).to(0.2, { scale: v3(1.1, 1.1, 1) }).to(0.2, { scale: v3(1, 1, 1) }).union().repeatForever().start();\r\n                // 加金币\r\n                this.schedule(() => {\r\n                    if (this.startCircle && !this.circleEnd) {\r\n                        this.coinNum += 2;\r\n                        this.setString(this.coinNumNode, this.coinNum);\r\n                    }\r\n                }, 0.02, macro.REPEAT_FOREVER);\r\n                // // 提示跳过动画\r\n                // this.scheduleOnce(() => {\r\n                //     this.hintNode.active = true;\r\n                //     tween(this.hintNode.getComponent(UIOpacity)).delay(0.5).to(0.5, { opacity: 0 }).to(0.5, { opacity: 255 }).union().repeatForever().start();\r\n                // }, 0.5);\r\n                // 开始转圈\r\n                this.startShineStarCircle();\r\n            }\r\n        ]);\r\n\r\n        // 放烟花\r\n        let posArr = [\r\n            v3(-100, 200, 0),\r\n            v3(0, -100, 0),\r\n            v3(150, -250, 0),\r\n            v3(300, -500, 0),\r\n            v3(100, -450, 0),\r\n        ];\r\n\r\n        cocosUtil.schedule(this, () => {\r\n            if (posArr.length <= 0) {\r\n                return;\r\n            }\r\n            let skinName = Math.random() > 0.5 ? \"huang\" : \"lan\";\r\n            let scale = 0.8 + Math.random() * 0.2;\r\n            let pos = utilTools.getRandomItemByArr(posArr, true);\r\n            let fireNode = cocosUtil.instantiate(this.fireNode);\r\n            fireNode.parent = this.fireNode.parent;\r\n            fireNode.active = true;\r\n            fireNode.position = pos;\r\n            fireNode.scale = v3(scale, scale, 1);\r\n            fireNode.getComponent(sp.Skeleton).setSkin(skinName);\r\n            let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(fireNode, AnimationCtrl);\r\n            aniCtrl.playAnimationOnce(\"animation\", () => {\r\n                fireNode.parent = null;\r\n            });\r\n        }, 1.5, macro.REPEAT_FOREVER, 0, true);\r\n\r\n    }\r\n\r\n    startShineStarCircle() {\r\n        let chs = this.itemLayer.children;\r\n        let index = 5;\r\n        this.starShineArr = [];\r\n        this.starShineIndex = index + this.choseNum - 1;\r\n        this.showChoseIndex = 0;\r\n        this.showChoseItemUI = null;\r\n\r\n        for (let i = 0; i < this.choseNum; i++) {\r\n            let itemUI = chs[index];\r\n            index++;\r\n            this.initStarShineItemUI(itemUI);\r\n            this.starShineArr.push(itemUI);\r\n        }\r\n        this.schedule(this.addNextStarShine, 0.05, macro.REPEAT_FOREVER);\r\n\r\n        this.scheduleOnce(this.startShowChoseItem, 3 + 2 * Math.random());\r\n    }\r\n\r\n    startShowChoseItem() {\r\n        let item = this.choseArr[this.showChoseIndex];\r\n        if (!item) {\r\n            return;\r\n        }\r\n        this.showChoseItemUI = this.itemLayer.children[item.uiIndex];\r\n        this.showChoseIndex++;\r\n    }\r\n\r\n    initStarShineItemUI(itemUI: Node) {\r\n        let uiOpacity = find(\"shine\", itemUI).getComponent(UIOpacity);\r\n        uiOpacity.node.active = true;\r\n        uiOpacity.opacity = 255;\r\n\r\n        let starNode = find(\"star\", itemUI);\r\n        starNode.angle = Math.random() * 360;\r\n        let animationCtrl: AnimationCtrl = cocosUtil.addComponentOnce(starNode, AnimationCtrl);\r\n        animationCtrl.getComponent(UIOpacity).opacity = 255;\r\n        animationCtrl.node.active = true;\r\n        animationCtrl.playAnimation(\"3\", false, () => {\r\n            animationCtrl.node.active = false;\r\n        });\r\n    }\r\n\r\n    addNextStarShine(dt: number) {\r\n        let chs = this.itemLayer.children;\r\n        this.starShineIndex++;\r\n        if (this.starShineIndex >= this.circleNodeNum) {\r\n            this.starShineIndex = 0;\r\n        }\r\n        let itemUI = chs[this.starShineIndex];\r\n        if (this.showChoseItemUI == itemUI) {\r\n            // 选中了\r\n            this.showChoseItemUI = null;\r\n            this.unschedule(this.addNextStarShine);\r\n            find(\"chose\", itemUI).active = true;\r\n            let starNode = find(\"star\", itemUI);\r\n            starNode.active = true;\r\n            starNode.angle = 0;\r\n            starNode.getComponent(UIOpacity).opacity = 255;\r\n            let animationCtrl: AnimationCtrl = cocosUtil.addComponentOnce(starNode, AnimationCtrl);\r\n            animationCtrl.playAnimation(\"2\", false, () => {\r\n                starNode.active = false;\r\n            });\r\n            \r\n            // @ts-ignore\r\n            // this.playerAddItem(itemUI.item); // 2024-10-24 放到结果展示中去添加\r\n            tween(itemUI).to(0.2, { scale: v3(1.5, 1.5, 1) }).to(0.2, { scale: v3(1, 1, 1) }).call(() => {\r\n                if (this.showChoseIndex >= this.choseArr.length) {\r\n                    // 已经全部完成\r\n                    this.showChoseResult();\r\n                } else {\r\n                    // 继续展示下一个\r\n                    this.schedule(this.addNextStarShine, 0.05, macro.REPEAT_FOREVER);\r\n                    this.startShowChoseItem();\r\n                }\r\n            }).start();\r\n            \r\n            return;\r\n        }\r\n        this.initStarShineItemUI(itemUI);\r\n        this.starShineArr.push(itemUI);\r\n        let outItemUI = this.starShineArr.shift();\r\n        let shineNode = find(\"shine\", outItemUI);\r\n        tween(shineNode.getComponent(UIOpacity)).to(dt * 6, { opacity: 0 }).start();\r\n    }\r\n\r\n    playerAddItem(item: any) {\r\n        let row = this.getRowByItem(item);\r\n        switch (item.name) {\r\n            case constants.tableName.weapon:\r\n                mapModel.weaponSystem.addWeapon(row.type);\r\n                item.info = utilTools.copyObj(mapModel.weaponSystem.getWeaponInfoByType(row.type));\r\n                break;\r\n            case constants.tableName.skill:\r\n                mapModel.skillSystem.addSkill(row.type);\r\n                item.info = utilTools.copyObj(mapModel.skillSystem.getSkillInfoByType(row.type));\r\n                break;\r\n            case constants.tableName.skill2:\r\n                mapModel.skillSystem.addSkill2(row.type);\r\n                item.info = utilTools.copyObj(mapModel.skillSystem.getSkill2InfoByType(row.type));\r\n                break;\r\n            case constants.tableName.prop:\r\n                mapModel.propSystem.getProp(item.id, item.num);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 已全部完成\r\n    async showChoseResult() {\r\n        this.unscheduleAllCallbacks();\r\n        this.circleEnd = true;\r\n        mapModel.propSystem.getProp(constants.propIds.coin, this.coinNum);\r\n\r\n        this.itemLayer.children.forEach((itemUI: Node) => {\r\n            find(\"shine\", itemUI).active = false;\r\n            find(\"star\", itemUI).active = false;\r\n        });\r\n\r\n        this.resultUILayer.active = true;\r\n        this.resultBtnSure.active = false;\r\n        this.resultItemLayer.removeAllChildren();\r\n        await cocosUtil.tweenFadeIn(this.resultBgNode, 0.5);\r\n\r\n        let itemTransform = this.resultItemNode.getComponent(UITransform);\r\n        let itemHeight = itemTransform.height;\r\n        let itemGap = 20;\r\n\r\n        let chs = this.itemLayer.children;\r\n        for (let i = 0; i < this.choseArr.length; i++) {\r\n            let item = this.choseArr[i];\r\n            this.playerAddItem(item); // 2024-10-24\r\n            this.scheduleOnce(() => {\r\n                let node = chs[item.uiIndex];\r\n                let pos = cocosUtil.convertToWorldSpace(node);\r\n                node = cocosUtil.instantiate(node);\r\n                node.parent = this.resultItemLayer;\r\n                node.position = cocosUtil.convertToNodeSpace(node, pos);\r\n                let targetPos = v3(0, 0, 0);\r\n                targetPos.y = -itemHeight * 0.5 - (itemHeight + itemGap) * i;\r\n                tween(node).to(0.2, { position: targetPos }).to(0.1, { scale: v3(0.3, 0.3, 1) }).call(() => {\r\n                    let itemUI = cocosUtil.instantiate(this.resultItemNode);\r\n                    itemUI.parent = this.resultItemLayer;\r\n                    itemUI.position = targetPos;\r\n                    this.refreshResultItemUI(itemUI, item);\r\n                    let shineNode = find(\"shine\", itemUI);\r\n                    shineNode.active = true;\r\n                    cocosUtil.tweenScaleIn2(itemUI, 0.2, () => {\r\n                        cocosUtil.tweenFadeOut(shineNode, 0.6);\r\n                        if (i == this.choseArr.length - 1) {\r\n                            this.resultBtnSure.active = true;\r\n                            cocosUtil.tweenScaleIn2(this.resultBtnSure);\r\n                        }\r\n                    });\r\n                }).start();\r\n            }, i * 0.3);\r\n        }\r\n    }\r\n\r\n    refreshResultItemUI(itemUI: Node, item: any) {\r\n        let row = this.getRowByItem(item);\r\n        this.setSpriteFrame(find(\"icon\", itemUI), row.icon);\r\n        // this.setString(find(\"name\", itemUI), row.name);\r\n        find(\"name\", itemUI).localizeName(row.id, this.getCatNameByItem(item));\r\n\r\n        let info = row.info;\r\n        if (item.name == constants.tableName.prop) {\r\n            info = localText.coinGetHint.format(item.num);\r\n        }\r\n        // this.setString(find(\"info\", itemUI), info);\r\n        if (item.name == constants.tableName.prop) {\r\n            find(\"info\", itemUI).getComponent(Label).string = `${localizeManager._localize(null,`info${row.id}`, this.getCatNameByItem(item))} x${item.num}`\r\n        }else{\r\n            find(\"info\", itemUI).localizeInfo(row.id, this.getCatNameByItem(item));\r\n        }\r\n        \r\n\r\n        let starLayer = find(\"starLayer\", itemUI);\r\n        if (item.name == constants.tableName.prop) {\r\n            starLayer.active = false;\r\n            return;\r\n        }\r\n        starLayer.active = true;\r\n        this.setNumItemLayer(starLayer, constants.design.maxLv, (starNode: Node, num: number) => {\r\n            let iconNode = find(\"icon\", starNode);\r\n            let icon2Node = find(\"icon2\", starNode);\r\n            let yinNode = find(\"yin\", starNode);\r\n            if (row.lv >= num) {\r\n                iconNode.active = true;\r\n                icon2Node.active = false;\r\n                yinNode.active = false;\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    iconNode.active = false;\r\n                    icon2Node.active = true;\r\n                }\r\n            } else {\r\n                iconNode.active = false;\r\n                yinNode.active = true;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    choseNumAnimation(endCb: Function) {\r\n        let chs = this.itemLayer.children;\r\n        let index = 5;\r\n        let arr = [];\r\n        for (let i = 0; i < this.choseNum; i++) {\r\n            let itemUI = chs[index];\r\n            arr.push(itemUI);\r\n            index++;\r\n            this.scheduleOnce(() => {\r\n                let uiOpacity = find(\"shine\", itemUI).getComponent(UIOpacity);\r\n                uiOpacity.node.active = true;\r\n                uiOpacity.opacity = 0;\r\n                tween(uiOpacity).to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 }).union().repeatForever().start();\r\n                if (i == this.choseNum - 1) {\r\n                    this.scheduleOnce(() => {\r\n                        utilTools.forArr(arr, (node: Node) => {\r\n                            find(\"shine\", node).active = false;\r\n                            Tween.stopAllByTarget(find(\"shine\", node).getComponent(UIOpacity));\r\n                        });\r\n                        endCb();\r\n                    }, 0.35);\r\n                }\r\n            }, i * 0.35);\r\n        }\r\n    }\r\n\r\n    totalShineAnimation(endCb: Function) {\r\n        let time = 0.3;\r\n        utilTools.forArr(this.itemLayer.children, (itemUI: Node, index: number) => {\r\n            let uiOpacity = find(\"shine\", itemUI).getComponent(UIOpacity);\r\n            uiOpacity.node.active = true;\r\n            uiOpacity.opacity = 0;\r\n            tween(uiOpacity).to(time, { opacity: 255 }).to(time, { opacity: 0 }).union().repeat(3).call(() => {\r\n                if (index == 0) {\r\n                    endCb();\r\n                }\r\n            }).start()\r\n        });\r\n    }\r\n\r\n    circleShineAnimation(endCb?: Function) {\r\n        let chs = this.itemLayer.children;\r\n        let count = 0;\r\n        let opacityTime = 0.1;\r\n        let delayTime = 0.5;\r\n        for (let i = 13; i >= 5; i--) {\r\n            let node = chs[i];\r\n            let time = count * 0.05;\r\n\r\n            let shineNode = find(\"shine\", node);\r\n            shineNode.active = true;\r\n            let uiOpacity = shineNode.getComponent(UIOpacity);\r\n            uiOpacity.opacity = 0;\r\n            this.scheduleOnce(() => {\r\n                tween(uiOpacity).to(opacityTime, { opacity: 255 }).delay(delayTime).to(opacityTime, { opacity: 0 }).call(() => {\r\n                    if (i == 5) {\r\n                        endCb();\r\n                    }\r\n                }).start();\r\n            }, time);\r\n\r\n            if (i != 13 && i != 5) {\r\n                let sideNode = chs[(26 - i) % this.circleNodeNum];\r\n                let sideShineNode = find(\"shine\", sideNode);\r\n                sideShineNode.active = true;\r\n                let sideOpacity = sideShineNode.getComponent(UIOpacity);\r\n                sideOpacity.opacity = 0;\r\n                this.scheduleOnce(() => {\r\n                    tween(sideOpacity).to(opacityTime, { opacity: 255 }).delay(delayTime).to(opacityTime, { opacity: 0 }).start();\r\n                }, time);\r\n            }\r\n            count++;\r\n        }\r\n    }\r\n\r\n    mapLeaveRet() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnStart() {\r\n        this.btnStart.active = false;\r\n        this.startAnimation();\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // onClickBg() {\r\n    //     if (!this.hintNode.active) {\r\n    //         return;\r\n    //     }\r\n    //     this.hintNode.active = false;\r\n    //     if (this.showChoseIndex >= 1) {\r\n    //         return;\r\n    //     }\r\n    //     this.circleEnd = true;\r\n    //     // 一次性给金币\r\n    //     let coin = 300;\r\n    //     if (this.choseNum >= 3) {\r\n    //         coin = 450;\r\n    //     }\r\n    //     coin = coin + 100 * Math.random();\r\n    //     coin = Math.floor(coin);\r\n    //     if (coin <= this.coinNum) {\r\n    //         coin = coin + 50 * Math.random();\r\n    //         coin = Math.floor(coin);\r\n    //     }\r\n    //     this.coinNum = coin;\r\n    //     this.setString(this.coinNumNode, this.coinNum);\r\n\r\n    //     this.unschedule(this.startShowChoseItem);\r\n    //     this.startShowChoseItem();\r\n    // }\r\n\r\n    onClickBg() {\r\n        if (!this.hintNode.active) {\r\n            return;\r\n        }\r\n        this.hintNode.active = false;\r\n        this.circleEnd = true;\r\n        // 一次性给金币\r\n        let coin = 300;\r\n        if (this.choseNum >= 3) {\r\n            coin = 450;\r\n        }\r\n        coin = coin + 100 * Math.random();\r\n        coin = Math.floor(coin);\r\n        if (coin <= this.coinNum) {\r\n            coin = coin + 50 * Math.random();\r\n            coin = Math.floor(coin);\r\n        }\r\n        this.coinNum = coin;\r\n        this.setString(this.coinNumNode, this.coinNum);\r\n\r\n        //直接展示结果\r\n        this.showChoseResult();\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnSure() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { EditBox, Label, Node, sp, Sprite, tween, v3, Vec3, VideoPlayer, view, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { TopUILayer } from './TopUILayer';\r\nimport {eventManager} from \"db://assets/scripts/game/manager/eventManager\";\r\nimport {msgac} from \"db://assets/scripts/game/data/msgac\";\r\nimport { localizeManager } from '../../../localization';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MainLayer')\r\nexport class MainLayer extends BaseLayer {\r\n\r\n    toggles: Node[] = [];\r\n    togglesLock = [true, false, false, false, true];\r\n\r\n    @property({ type: Node }) btnRedBox: Node = null;\r\n    @property({ type: Node }) handNode: Node = null;\r\n\r\n    emailRedPointNode: Node;\r\n    daySignRedPointNode: Node;\r\n    dayTaskRedPointNode: Node;\r\n    vipRedPointNode: Node;\r\n    duihuanBg: Node;\r\n    chapterBoxRedPointNode: Node;\r\n\r\n    btnShare: Node;\r\n    videoPlayer: Node;\r\n\r\n    shurukuang: EditBox;\r\n\r\n    //需要本地化的图片Node\r\n    btnRedBoxLabel:Node;\r\n    btnShareLabel: Node;\r\n    map_nameLabel: Node;\r\n    btnDaySignLabel: Node;\r\n    btnPyramidLabel: Node;\r\n    btnDayTaskLabel: Node;\r\n    btnGuessLabel: Node;\r\n    btnPortalLabel: Node;\r\n    btnSkinChangeLabel: Node;\r\n    btnSkinLabel: Node;\r\n    btnEquipComposeLabel: Node;\r\n    btnVipLabel: Node;\r\n    zjbxwzLabel: Node;\r\n    btnGo_ksyxLabel: Node;\r\n\r\n\r\n    //需要本地化的文字node\r\n    timeLabel: Node;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    onLoad() {\r\n        // this.chooseDesignResolution()\r\n        // let mapData = designManager.getTable(constants.tableName.map)\r\n        // let curMap = UserData.getInstance().getCurMap() - 1\r\n\r\n        // this.setSpriteFrame2(this.getNodeByPath(\"Map/map_name\"), \"homeLayer/map_name\" + (mapData[curMap].id), null, constants.bundles.wwqVec)\r\n        // this.setSpriteFrame2(this.getNodeByPath(\"Map/btnMap/icon\"), \"homeLayer/ui_map\" + (mapData[curMap].id), null, constants.bundles.wwqVec)\r\n        // this.getNodeByPath(\"btnGo/Label\").getComponent(Label).string = \"X\" + mapData[curMap].energy\r\n        // let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        // this.getNodeByPath(\"Map/timeLabel\").getComponent(Label).string = \"最高生存时间：\" + utilTools.getTimeStrChinese(leveldata.Time * 1000)\r\n        // RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnMap/icon\"),null, true)\r\n\r\n        this.emailRedPointNode = this.getNodeByPath(\"btnLetter/redPoint\");\r\n        this.daySignRedPointNode = this.getNodeByPath(\"btnsLeft/btnDaySign/redPoint\");\r\n        this.dayTaskRedPointNode = this.getNodeByPath(\"btnsLeft/btnDayTask/redPoint\");\r\n        this.vipRedPointNode = this.getNodeByPath(\"btnsRight/btnVip/redPoint\");\r\n        this.chapterBoxRedPointNode = this.getNodeByPath(\"Map/btnChapter/redPoint\");\r\n\r\n        this.btnShare = this.getNodeByPath(\"btnsRight/btnShare\")\r\n\r\n        this.btnRedBoxLabel = this.getNodeByPath(\"hongb/Label\");\r\n        this.btnShareLabel = this.getNodeByPath(\"btnsRight/btnShare/Label\");\r\n        this.map_nameLabel = this.getNodeByPath(\"Map/map_nameLabel\");\r\n        this.btnDaySignLabel = this.getNodeByPath(\"btnsLeft/btnDaySign/Label\");\r\n        this.btnPyramidLabel = this.getNodeByPath(\"btnsLeft/btnPyramid/Label\");\r\n        this.btnDayTaskLabel = this.getNodeByPath(\"btnsLeft/btnDayTask/Label\");\r\n        this.btnGuessLabel = this.getNodeByPath(\"btnsLeft/btnGuess/Label\");\r\n        this.btnPortalLabel = this.getNodeByPath(\"btnsLeft/btnPortal/Label\");\r\n        this.btnSkinChangeLabel = this.getNodeByPath(\"btnsRight/btnSkinChange/Label\");\r\n        this.btnSkinLabel = this.getNodeByPath(\"btnsRight/btnSkin/Label\");\r\n        this.btnEquipComposeLabel = this.getNodeByPath(\"btnsRight/btnEquipCompose/Label\");\r\n        this.btnVipLabel = this.getNodeByPath(\"btnsRight/btnVip/Label\");\r\n        this.zjbxwzLabel = this.getNodeByPath(\"Map/btnChapter/Label\");\r\n        this.btnGo_ksyxLabel = this.getNodeByPath(\"btnGo/ksyx_label\");\r\n        this.timeLabel = this.getNodeByPath(\"Map/timeLabel\");\r\n\r\n        if (this.btnPyramidLabel) {\r\n            if (UserData.getInstance().roleLv < designManager.config.qingdianLock) {\r\n                this.btnPyramidLabel.parent.getComponent(Sprite).color = constants.colors.yin.parseColor();\r\n                this.btnPyramidLabel.getComponent(Label).color = constants.colors.yin.parseColor();\r\n            }\r\n        }\r\n\r\n        if (this.btnDayTaskLabel) {\r\n            if (UserData.getInstance().roleLv < designManager.config.taksLock) {\r\n                this.btnDayTaskLabel.getComponent(Label).color = constants.colors.yin.parseColor()\r\n                this.btnDayTaskLabel.parent.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        if (this.btnGuessLabel) {\r\n            if (UserData.getInstance().roleLv < designManager.config.caiquanLock) {\r\n                this.btnGuessLabel.getComponent(Label).color = constants.colors.yin.parseColor()\r\n                this.btnGuessLabel.parent.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        // this.duihuanBg = this.getNodeByPath(\"patbg1\");\r\n        // this.duihuanBg.active = false\r\n\r\n        // this.videoPlayer = this.getNodeByPath(\"VideoPlayer\");\r\n        // this.videoPlayer.active = false\r\n\r\n       // this.shurukuang = this.duihuanBg.getChildByName(\"EditBox\").getComponent(EditBox)\r\n    }\r\n\r\n    onClickBtnDuihuan() {\r\n        this.duihuanBg.active = true\r\n        let tishi = this.duihuanBg.getChildByName(\"tishilabel\")\r\n        tishi.active = false\r\n    }\r\n\r\n    onClickBtnCloseTuihuan() {\r\n        this.duihuanBg.active = false\r\n    \r\n    }\r\n    onClickBtnTuihuan() {\r\n        let tishi = this.duihuanBg.getChildByName(\"tishilabel\")\r\n        tishi.active = false\r\n        let str = this.shurukuang.getComponent(EditBox).string\r\n        let strArr = str.split(\"_\")\r\n        if (strArr.length > 1) {\r\n            if (strArr[0] == \"tyq\") {\r\n                let curPath = \"\"\r\n                let index = strArr[1]\r\n                curPath = \"https://oss.game.xmtyq.com/game/video_wxgame/bpxt/tyq_\" + (index) + \".mp4?token=6d4ae1582d1f97a26ccf250d29313750\"\r\n                tishi.active = false\r\n                this.videoPlayer.getComponent(VideoPlayer).remoteURL = curPath\r\n                this.videoPlayer.active = true\r\n            } else {\r\n                tishi.active = true\r\n            }\r\n        } else {\r\n            tishi.active = true\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        // this.addEventArr([\r\n        //     msgac.mapEnter,\r\n        // ]);\r\n\r\n        if ((tyqSDK.channel == ChannelFlag.WECHAT_JJWS || tyqSDK.channel == ChannelFlag.WECHAT_MRTGD) && tyqAdManager.getChannel() != Channel.OPPO_MINI_GAME) {\r\n            this.btnShare.active = true;\r\n        } else {\r\n            this.btnShare.active = false;\r\n        }\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    refreshRedPoint() {\r\n        this.emailRedPointNode.active = playerModel.hasLetterAward();\r\n        this.daySignRedPointNode.active = playerModel.hasDaySignAward();\r\n        this.dayTaskRedPointNode.active = UserData.getInstance().roleLv >= designManager.config.taksLock && playerModel.hasDayTaskAward();\r\n        this.vipRedPointNode.active = playerModel.hasVipAward();\r\n        this.chapterBoxRedPointNode.active = playerModel.hasChapterBoxAward();\r\n    }\r\n\r\n    refreshLocalization() {\r\n        this.btnRedBoxLabel?.localize(\"redBox\",constants.layers.MainLayer)\r\n        this.btnShareLabel?.localize(\"share\",constants.layers.MainLayer)\r\n        this.map_nameLabel.getComponent(Label).string = `${UserData.getInstance().getCurMap()}.${localizeManager._localize(null,`name${UserData.getInstance().getCurMap()}`,constants.catName.mapSystem)}`\r\n        this.btnDaySignLabel?.localize(\"sign\",constants.layers.MainLayer)\r\n        this.btnPyramidLabel?.localize(\"pyramid\",constants.layers.MainLayer)\r\n        this.btnDayTaskLabel?.localize(\"dayTask\",constants.layers.MainLayer)\r\n        this.btnGuessLabel?.localize(\"guess\",constants.layers.MainLayer)\r\n        this.btnPortalLabel?.localize(\"portal\",constants.layers.MainLayer)\r\n        this.btnSkinChangeLabel?.localize(\"skinChange\",constants.layers.MainLayer)\r\n        this.btnSkinLabel?.localize(\"skin\",constants.layers.MainLayer)\r\n        this.btnEquipComposeLabel?.localize(\"equipCompose\",constants.layers.MainLayer)\r\n        this.btnVipLabel?.localize(\"vip\",constants.layers.MainLayer)\r\n        this.zjbxwzLabel?.localize(\"awardBox\",constants.layers.MainLayer)\r\n        this.btnGo_ksyxLabel?.localize(\"startGame\",constants.layers.MainLayer)\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        this.timeLabel.localize({cat:constants.layers.MainLayer, key:\"timeLabel\", vars:[utilTools.getTimeStrChinese(leveldata.Time * 1000)]})\r\n    }\r\n\r\n    start() {\r\n        let btnset = this.getNodeByPath(\"btnSet\")\r\n        let btnEmail = this.getNodeByPath(\"btnLetter\")\r\n        let TopUILayer = this.node.parent.parent.getChildByName(\"TopUILayer\")\r\n\r\n        if (btnset.position.y > TopUILayer.position.y - 84) {\r\n            btnset.position = v3(btnset.position.x, TopUILayer.position.y - 84, btnset.position.z)\r\n            btnEmail.position = v3(btnEmail.position.x, TopUILayer.position.y - 84, btnEmail.position.z)\r\n        }\r\n\r\n        let screen1 = view.getVisibleSize()\r\n        if (screen1.width / screen1.height >= 720 / 1440) {\r\n            let btnGo = this.getNodeByPath(\"btnGo\")\r\n            btnGo.position = new Vec3(btnGo.position.x, -360, btnGo.position.z)\r\n            let Map = this.getNodeByPath(\"Map\")\r\n            Map.position = new Vec3(Map.position.x, 30, Map.position.z)\r\n        }\r\n        if (UserData.getInstance()._isShowOpenLevel && UserData.getInstance().getCurMap() > 1) {\r\n            UserData.getInstance()._isShowOpenLevel = false\r\n            this.initMapLevel(UserData.getInstance().getCurMap() - 1, false)\r\n            let role = this.getNodeByPath(\"Map/role\")\r\n            role.active = false\r\n            tween(role).delay(1).call(function () {\r\n                role.active = true\r\n            }).start()\r\n            let self = this\r\n            tween(this.getNodeByPath(\"Map/btnMap\")).delay(0.35).to(0.35, { scale: v3(0, 0, 0) }).call(function () {\r\n                self.initMapLevel(UserData.getInstance().getCurMap(), true)\r\n            }).to(0.2, { scale: v3(1, 1, 1) }).start()\r\n        } else {\r\n            this.initMapLevel(UserData.getInstance().getCurMap(), true)\r\n        }\r\n\r\n        let arr = []\r\n        let propArr = designManager.getRowsByType(constants.tableName.CNTM, 1)\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i].award[0]\r\n            arr.push(data[0])\r\n        }\r\n        if (UserData.getInstance().isHaveProp(arr)) {\r\n            this.btnRedBox.removeFromParent()\r\n        } else {\r\n            tween(this.btnRedBox).to(3, { position: v3(180, 220, 0) }).to(3, { position: v3(-180, 120, 0) }).to(3, { position: v3(180, 20, 0) }).to(3, { position: v3(-180, -90, 0) }).to(3, { position: v3(180, 80, 0) }).to(3, { position: v3(-180, -80, 0) }).to(3, { position: v3(180, 20, 0) })\r\n                .to(3, { position: v3(-180, 120, 0) }).to(3, { position: v3(180, 220, 0) }).to(3, { position: v3(-180, 350, 0) }).union().repeatForever().start()\r\n        }\r\n\r\n        // let role = this.getNodeByPath(\"Map/role\")\r\n        // if (UserData.getInstance().getCurMap() == 1) {\r\n        //     tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).to(0.8, { position: v3(90, 0, 0) }).to(0.8, { position: v3(130, 0, 0) }).set({ scale: v3(1.5, 1.5, 0) }).to(0.5, { position: v3(90, 0, 0) }).to(0.8, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n        // } else if (UserData.getInstance().getCurMap() == 2) {\r\n        //     this.setSpineData2(role, constants.bundles.monster, \"monster22/ncg\", function () {\r\n        //         role.getComponent(sp.Skeleton).animation = \"walk\"\r\n        //         role.getComponent(sp.Skeleton).loop = true\r\n        //     })\r\n        //     tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n        // } else {\r\n        //     role.active = false\r\n        // }\r\n        // mapModel.loadMapRes((percent: number) => {\r\n        // }, () => { })\r\n\r\n        // RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnChapter\"), null, UserData.getInstance().checkChapterCanReward()) // 2024-10-28 用检查所有的章节奖励代替\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, UserData.getInstance().getPatrolState() <= 0)\r\n    }\r\n\r\n    initMapLevel(level, isaction) {\r\n\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        this.setSpriteFrame2(this.getNodeByPath(\"Map/map_name\"), \"homeLayer/map_name\" + (mapData[level - 1].id), null, constants.bundles.wwqVec)\r\n\r\n        let iconIndex = (mapData[level - 1].id - 1) % 2 + 1;\r\n        this.setSpriteFrame2(this.getNodeByPath(\"Map/btnMap/icon\"), \"homeLayer/ui_map\" + iconIndex, null, constants.bundles.wwqVec)\r\n\r\n        this.getNodeByPath(\"btnGo/Label\").getComponent(Label).string = \"X\" + mapData[level - 1].energy\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        this.timeLabel.localize({cat:constants.layers.MainLayer, key:\"timeLabel\", vars:[utilTools.getTimeStrChinese(leveldata.Time * 1000)]})\r\n\r\n        let role = this.getNodeByPath(\"Map/role\")\r\n        if (isaction) {\r\n\r\n            tween(role).stop()\r\n            let skin = \"skin1\";\r\n            if (level == 3 || level == 4) {\r\n                skin = \"skin2\";\r\n            }\r\n            if (level == 1 || level == 3) {\r\n                role.getComponent(sp.Skeleton).setSkin(skin);\r\n                tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).to(0.8, { position: v3(90, 0, 0) }).to(0.8, { position: v3(130, 0, 0) }).set({ scale: v3(1.5, 1.5, 0) }).to(0.5, { position: v3(90, 0, 0) }).to(0.8, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n            } else if (level == 2 || level == 4) {\r\n                this.setSpineData2(role, constants.bundles.monster, \"monster22/ncg\", function () {\r\n                    role.getComponent(sp.Skeleton).animation = \"walk\"\r\n                    role.getComponent(sp.Skeleton).loop = true\r\n                    role.getComponent(sp.Skeleton).setSkin(skin);\r\n                })\r\n                tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n            } else {\r\n                role.active = false\r\n            }\r\n        }\r\n\r\n        this.handNode.active = false;\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        if (UserData.getInstance().power >= mapData[curMap].energy) {\r\n            this.handNode.active = true;\r\n        }\r\n    }\r\n\r\n    onClickBtnGo() {\r\n        // let node = (this.getNodeByPath(\"prop_coin1\"))\r\n        // // let node = new Node\r\n        // // node.addComponent(Sprite)\r\n        // let btnGo = this.getNodeByPath(\"ui\")\r\n        // UserData.getInstance().showGetAnimal(btnGo, node, [0, 0], [0, 800])\r\n        // return\r\n\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n\r\n        if (UserData.getInstance().power < mapData[curMap].energy) {\r\n            this.createNotice(\"体力不足\")\r\n            return\r\n        }\r\n\r\n        UserData.getInstance().usePower(0 - mapData[curMap].energy)\r\n        let topUILayer = this.node.parent.parent.getChildByName(\"TopUILayer\")\r\n        topUILayer.getComponent(TopUILayer).showUseAnimal(1, 0 - mapData[curMap].energy)\r\n\r\n        playerModel.addDayTaskNum(7, mapData[curMap].energy);\r\n\r\n        mapModel.enterMapWithMapId(UserData.getInstance().getCurMap());\r\n    }\r\n\r\n    onClickBtnMap() {\r\n        myLog.i(\"btnMap\")\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.closeLayer()\r\n        this.openLayer(constants.layers.LevelLayer);\r\n    }\r\n\r\n    onClickBtnChapter() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        myLog.i(\"btnMap\")\r\n        this.closeLayer()\r\n        this.openLayer(constants.layers.ChapterLayer, { chapter: 11 });\r\n    }\r\n\r\n    onClickBtnPartol() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.PatrolLayer);\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, false)\r\n    }\r\n\r\n    onClickBtnSet() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SettingLayer);\r\n    }\r\n\r\n    onClickBtnDayTask() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.taksLock) {\r\n            // this.createNotice(\"角色\" + designManager.config.taksLock + \"级后解锁\");\r\n            this.createNotice(localizeManager._localize(null, {cat: constants.layers.MainLayer, key:\"unlockHint\", vars:[designManager.config.taksLock]}));\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.DayTaskLayer);\r\n    }\r\n\r\n    onClickBtnDaySign() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.DaySignLayer);\r\n    }\r\n\r\n    onClickBtnGuess() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.caiquanLock) {\r\n            // this.createNotice(\"角色\" + designManager.config.caiquanLock + \"级后解锁\");\r\n            this.createNotice(localizeManager._localize(null, {cat: constants.layers.MainLayer, key:\"unlockHint\", vars:[designManager.config.caiquanLock]}));\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.GuessGameLayer);\r\n    }\r\n\r\n    onClickBtnPyramid() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.qingdianLock) {\r\n            // this.createNotice(\"角色\" + designManager.config.qingdianLock + \"级后解锁\");\r\n            this.createNotice(localizeManager._localize(null, {cat: constants.layers.MainLayer, key:\"unlockHint\", vars:[designManager.config.qingdianLock]}));\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.PyramidDrawLayer);\r\n    }\r\n\r\n    onClickOpenLayer(event, data) {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(data);\r\n    }\r\n\r\n    onClickBtnLetter() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.LetterLayer);\r\n    }\r\n\r\n    onClickBtnEquipCompose() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.BlessLayer);\r\n    }\r\n\r\n    onClickBtnSkinChange() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SkinChangeLayer);\r\n    }\r\n\r\n    onClickBtnVip() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.VipLayer);\r\n    }\r\n\r\n    onClickBtnShare() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.ShareLayer);\r\n        tyqSDK.eventSendCustomEvent(\"参与活动分享\")\r\n    }\r\n\r\n}\r\n\r\n","\r\n\r\nimport { find, Node, ProgressBar, tween, Tween, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { GameCtrl } from '../item/GameCtrl';\r\nimport { Player } from '../item/Player';\r\nimport { ShineColor } from '../shader/ShineColor';\r\nimport { BulletSystem } from '../sys/BulletSystem';\r\nimport { HintSystem } from '../sys/HintSystem';\r\nimport { MapSystem } from '../sys/MapSystem';\r\nimport { MonsterSystem } from '../sys/MonsterSystem';\r\nimport { NumSystem } from '../sys/NumSystem';\r\nimport { PropSystem } from '../sys/PropSystem';\r\nimport { SkillSystem } from '../sys/SkillSystem';\r\nimport { WeaponSystem } from '../sys/WeaponSystem';\r\nimport { macro } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapLayer')\r\nexport class MapLayer extends BaseLayer {\r\n\r\n    fightCapNode: Node;\r\n\r\n    mapSystem: MapSystem;\r\n\r\n    player: Player;\r\n    gameCtrl: GameCtrl;\r\n\r\n    timeNode: Node;\r\n    expProgress: Node;\r\n    expLvNode: Node;\r\n    expBarColorArr = [\"#00FF00\", \"#00C2FF\", \"#FF00D6\", \"#FF2900\"];\r\n    expBarColorIndex = 0;\r\n    expBarShineColor: ShineColor;\r\n    expLvUpCount: number = 0;\r\n    coinNumNode: Node;\r\n    coinIconNode: Node;\r\n    diamondNumNode: Node;\r\n    killMonsterNumNode: Node;\r\n\r\n    bossHpLayer: Node;\r\n    bossDamProgressBar: ProgressBar;\r\n    bossHpProgress: Node;\r\n\r\n    skillBombIcon: Node;\r\n    skillBombAd: Node;\r\n    skillBombNum: Node;\r\n    skillBombCd: Node;\r\n\r\n    btnSkillHeal: Node;\r\n    skillHealIcon: Node;\r\n    skillHealAd: Node;\r\n    skillHealNum: Node;\r\n    skillHealCd: Node;\r\n\r\n    skillMagnetAd: Node;\r\n    skillMagnetNum: Node;\r\n    skillLifeAd: Node;\r\n    skillLifeNum: Node;\r\n\r\n    monsterNumNode: Node;\r\n    showNumNode: Node;\r\n    playerPosNode: Node;\r\n    expNumNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.chooseDesignResolution();\r\n        this.getNodeByPath(\"bg\").active = false;\r\n        this.getNodeByPath(\"ui/btns\").active = playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment();\r\n        this.getNodeByPath(\"ui/skillBtns\").active = playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment();\r\n\r\n        this.fightCapNode = this.getNodeByPath(\"fightCap\");\r\n        this.fightCapNode.active = false;\r\n        this.gameCtrl = this.getNodeByPath(\"gameCtrl\").addComponent(GameCtrl);\r\n\r\n        this.mapSystem = mapModel.mapFightLayer.addComponent(MapSystem);\r\n        let mapLayer = find(\"map\", mapModel.mapFightLayer);\r\n\r\n        this.player = find(\"player\", mapLayer).addComponent(Player);\r\n        let monsterSystem = find(\"monsterLayer\", mapLayer).addComponent(MonsterSystem);\r\n        let bulletSystem = find(\"bulletLayer\", mapLayer).addComponent(BulletSystem);\r\n        let numSystem = find(\"numLayer\", mapLayer).addComponent(NumSystem);\r\n        let skillSystem = find(\"player/skillLayer\", mapLayer).addComponent(SkillSystem);\r\n        let weaponSystem = find(\"player/weaponLayer\", mapLayer).addComponent(WeaponSystem);\r\n        let hintSystem = find(\"hintLayer\", mapLayer).addComponent(HintSystem);\r\n        let propSystem = find(\"propLayer\", mapLayer).addComponent(PropSystem);\r\n\r\n        mapModel.setCompoments(this, this.player, this.mapSystem, monsterSystem, bulletSystem, numSystem, weaponSystem, skillSystem,\r\n            hintSystem, propSystem);\r\n\r\n        this.coinIconNode = this.getNodeByPath(\"ui/top/coinLayer/icon\");\r\n        this.coinNumNode = this.getNodeByPath(\"ui/top/coinLayer/num\");\r\n        this.diamondNumNode = this.getNodeByPath(\"ui/top/diamondLayer/num\");\r\n        this.killMonsterNumNode = this.getNodeByPath(\"ui/top/monsterLayer/num\");\r\n\r\n        this.expProgress = this.getNodeByPath(\"ui/expProgress\");\r\n        this.expLvNode = this.getNodeByPath(\"ui/expProgress/lv\")\r\n        this.expBarShineColor = this.getNodeByPath(\"ui/expProgress/bar\").addComponent(ShineColor);\r\n\r\n        this.bossHpLayer = this.getNodeByPath(\"ui/bossHpLayer\");\r\n        this.bossDamProgressBar = this.getNodeByPath(\"ui/bossHpLayer/damProgress\").getComponent(ProgressBar);\r\n        this.bossHpProgress = this.getNodeByPath(\"ui/bossHpLayer/hpProgress\");\r\n        this.bossHpLayer.active = false;\r\n\r\n        this.skillBombIcon = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/icon\");\r\n        this.skillBombAd = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/icon/ad\");\r\n        this.skillBombNum = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/icon/num\");\r\n        this.skillBombCd = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/cd\");\r\n\r\n        this.btnSkillHeal = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal\");\r\n        this.skillHealIcon = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/icon\");\r\n        this.skillHealAd = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/icon/ad\");\r\n        this.skillHealNum = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/icon/num\");\r\n        this.skillHealCd = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/cd\");\r\n\r\n        this.skillMagnetAd = this.getNodeByPath(\"ui/skillBtns/btnSkillMagnet/icon/ad\");\r\n        this.skillMagnetNum = this.getNodeByPath(\"ui/skillBtns/btnSkillMagnet/icon/num\");\r\n        this.skillLifeAd = this.getNodeByPath(\"ui/skillBtns/btnSkillLife/icon/ad\");\r\n        this.skillLifeNum = this.getNodeByPath(\"ui/skillBtns/btnSkillLife/icon/num\");\r\n\r\n        this.timeNode = this.getNodeByPath(\"ui/top/time\");\r\n\r\n        this.getNodeByPath(\"ui/infoDev\").active = playerModel.isInDevelopmentEnvironment();\r\n        this.monsterNumNode = this.getNodeByPath(\"ui/infoDev/monsterNum\");\r\n        this.showNumNode = this.getNodeByPath(\"ui/infoDev/showNum\");\r\n        this.playerPosNode = this.getNodeByPath(\"ui/infoDev/playerPos\");\r\n        this.expNumNode = this.getNodeByPath(\"ui/infoDev/expNum\");\r\n\r\n        let mapData = UserData.getInstance().mapData;\r\n        if (mapData) {\r\n            // 战斗中断\r\n            this.loadSaveMapData(mapData);\r\n        } else {\r\n            // 新的开始\r\n            mapModel.player.initData(this.layerData);\r\n            mapModel.weaponSystem.initData(this.layerData);\r\n        }\r\n\r\n        this.openUpdateSecond = true;\r\n        audioManager.playMusic(constants.audioNames.map);\r\n\r\n        this.schedule(this.popBuyLifeLayer, this.getPopBuyLifeTime());\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.mapLeave,\r\n            msgac.saveDataBefore,\r\n            msgac.commonResRefresh,\r\n            msgac.mapRefreshSkill,\r\n        ]);\r\n\r\n        // test 武器\r\n        // this.scheduleOnce(() => {\r\n        //     mapModel.weaponSystem.addWeapon(4);\r\n        // }, 1);\r\n\r\n        // // test 技能\r\n        // this.scheduleOnce(() => {\r\n        //     for (let i = 0; i < 1; i++) {\r\n        //         mapModel.skillSystem.addSkill(10);\r\n        //     }\r\n        // }, 1);\r\n        // this.scheduleOnce(() => {\r\n        //     mapModel.skillSystem.addSkill(7);\r\n        // }, 5);\r\n        // this.scheduleOnce(() => {\r\n        //     mapModel.skillSystem.addSkill(7);\r\n        // }, 8);\r\n\r\n        // // test 被动技能\r\n        // this.scheduleOnce(() => {\r\n        //     for (let i = 0; i < 6; i++) {\r\n        //         mapModel.skillSystem.addSkill2(12);\r\n        //     }\r\n        //     myLog.i(\"被动技能添加了\");\r\n        // }, 10);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        if (!UserData.getInstance().mapHand) {\r\n            UserData.getInstance().mapHand = 1;\r\n            this.scheduleOnce(() => {\r\n                this.popLayer(constants.layers.HandLayer);\r\n            });\r\n        }\r\n        tyqSDK.eventSendCustomEvent(\"进入战斗场景\", \"玩家人数\")\r\n        //console.log(\"mapModel.mapId = \", mapModel.mapId)\r\n        tyqSDK.eventLevelStart(mapModel.mapId)\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshExpLayer();\r\n        this.refreshBossHpLayer();\r\n        this.refreshResLayer();\r\n        this.refreshSkillLayer();\r\n    }\r\n\r\n    popBuyLifeLayer() {\r\n        if (UserData.getInstance().baoshi < designManager.config.backLifeDiamond) {\r\n            return;\r\n        }\r\n        // this.popLayer(constants.layers.BuyLifeLayer);\r\n    }\r\n\r\n    // 强弹复活购买界面间隔时间，单位：秒\r\n    getPopBuyLifeTime() {\r\n        return 60 * 3;\r\n    }\r\n\r\n    refreshSkillLayer() {\r\n        this.skillBombAd.active = false;\r\n        this.skillBombNum.active = false;\r\n        if (playerModel.skillBombNum > 0) {\r\n            this.skillBombNum.active = true;\r\n            this.setString(this.skillBombNum, playerModel.skillBombNum);\r\n        } else {\r\n            this.skillBombAd.active = true;\r\n        }\r\n\r\n        this.skillHealAd.active = false;\r\n        this.skillHealNum.active = false;\r\n        if (playerModel.skillHealNum > 0) {\r\n            this.skillHealNum.active = true;\r\n            this.setString(this.skillHealNum, playerModel.skillHealNum);\r\n        } else {\r\n            this.skillHealAd.active = true;\r\n        }\r\n\r\n        this.skillMagnetAd.active = false;\r\n        this.skillMagnetNum.active = false;\r\n        if (playerModel.skillMagnetNum > 0) {\r\n            this.skillMagnetNum.active = true;\r\n            this.setString(this.skillMagnetNum, playerModel.skillMagnetNum);\r\n        } else {\r\n            this.skillMagnetAd.active = true;\r\n        }\r\n\r\n        this.skillLifeAd.active = false;\r\n        this.skillLifeNum.active = false;\r\n        if (playerModel.skillLifeNum > 0) {\r\n            this.skillLifeNum.active = true;\r\n            this.setString(this.skillLifeNum, playerModel.skillLifeNum);\r\n        } else {\r\n            this.skillLifeAd.active = true;\r\n        }\r\n    }\r\n\r\n    mapRefreshSkillRet() {\r\n        this.refreshSkillLayer();\r\n    }\r\n\r\n    updateSecond() {\r\n        // if (mapModel.mapSystem.skillBombCd > 0) {\r\n        //     this.skillBombCd.active = true;\r\n        //     cocosUtil.setRenderableColor(this.skillBombIcon, constants.colors.yin.parseColor());\r\n        //     this.setString(this.skillBombCd, Math.ceil(mapModel.mapSystem.skillBombCd));\r\n        // } else {\r\n        //     this.skillBombCd.active = false;\r\n        //     cocosUtil.setRenderableColor(this.skillBombIcon, Color.WHITE);\r\n        // }\r\n        // if (mapModel.mapSystem.skillHealCd > 0) {\r\n        //     this.skillHealCd.active = true;\r\n        //     cocosUtil.setRenderableColor(this.skillHealIcon, constants.colors.yin.parseColor());\r\n        //     this.setString(this.skillHealCd, Math.ceil(mapModel.mapSystem.skillHealCd));\r\n        // } else {\r\n        //     this.skillHealCd.active = false;\r\n        //     cocosUtil.setRenderableColor(this.skillHealIcon, Color.WHITE);\r\n        // }\r\n        if (mapModel.player.hp / mapModel.player.hpMax < 0.25 && mapModel.player.hp > 0 && !mapModel.healAdCount) {\r\n            // 强制弹出激励视频，观看后，恢复血量\r\n            mapModel.healAdCount++;\r\n            myLog.i(\"==========血量小于0.25强弹广告治疗\");\r\n            sdkManager.openAd(\"血量小于0.25强弹广告治疗\", (st) => {\r\n                if (st == 1) {\r\n                    mapModel.player.useSkillHeal(0.25);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (mapModel.player.hp / mapModel.player.hpMax < 0.5 && !this.btnSkillHeal.isBreath) {\r\n            this.btnSkillHeal.isBreath = true;\r\n            cocosUtil.tweenBreath(this.btnSkillHeal);\r\n        }\r\n        if (mapModel.player.hp / mapModel.player.hpMax > 0.5 && this.btnSkillHeal.isBreath) {\r\n            this.btnSkillHeal.isBreath = false;\r\n            Tween.stopAllByTarget(this.btnSkillHeal);\r\n            this.btnSkillHeal.scale = v3(1, 1, 1);\r\n        }\r\n    }\r\n\r\n    refreshBossHpLayer() {\r\n        let bossMonster = mapModel.monsterSystem.bossMonster;\r\n        if (bossMonster) {\r\n            this.setProgressBar(this.bossHpProgress, bossMonster.hp / bossMonster.hpMax);\r\n            if (!this.bossHpLayer.active) {\r\n                this.bossHpLayer.active = true;\r\n                Tween.stopAllByTarget(this.bossDamProgressBar);\r\n                this.bossDamProgressBar.progress = this.bossHpProgress.getComponent(ProgressBar).progress;\r\n            }\r\n        } else {\r\n            this.bossHpLayer.active = false;\r\n        }\r\n    }\r\n\r\n    bossSubHp(dam: number) {\r\n        let pStart = this.bossHpProgress.getComponent(ProgressBar).progress;\r\n        this.bossDamProgressBar.progress = pStart;\r\n\r\n        mapModel.mapLayer.refreshBossHpLayer();\r\n        let pEnd = this.bossHpProgress.getComponent(ProgressBar).progress;\r\n\r\n        Tween.stopAllByTarget(this.bossDamProgressBar);\r\n        tween(this.bossDamProgressBar).to(0.5, { progress: pEnd }, { easing: \"quadOut\" }).start();\r\n    }\r\n\r\n    refreshResLayer() {\r\n        this.setString(this.coinNumNode, mapModel.coinNum);\r\n        this.setString(this.diamondNumNode, UserData.getInstance().baoshi);\r\n        this.setString(this.killMonsterNumNode, mapModel.killMonsterNum);\r\n    }\r\n\r\n    refreshExpLayer() {\r\n        let row = designManager.getRowById(constants.tableName.expLv, mapModel.expLv);\r\n        if (!row) {\r\n            return;\r\n        }\r\n        let total = row.exp;\r\n        let current = mapModel.expNum;\r\n        if (mapModel.expLv > 1) {\r\n            let lastRow = designManager.getRowById(constants.tableName.expLv, mapModel.expLv - 1);\r\n            total = row.exp - lastRow.exp;\r\n            current = mapModel.expNum - lastRow.exp;\r\n        }\r\n        this.setProgressBar(this.expProgress, current / total);\r\n        this.setString(this.expLvNode, mapModel.expLv);\r\n        // 闪白\r\n        this.expBarShineColor.startShine(constants.materials.shineColor, null, 0.2);\r\n\r\n        if (mapModel.expNum >= row.exp && mapModel.player.hp > 0) {\r\n            // 升级了\r\n            this.expLvUpCount++;\r\n            mapModel.expLv++;\r\n            if (mapModel.expLv % designManager.config.check == 0) {\r\n                mapModel.skillAllNum++;\r\n            }\r\n            this.expBarColorIndex++;\r\n            if (this.expBarColorIndex >= this.expBarColorArr.length) {\r\n                this.expBarColorIndex = 0;\r\n            }\r\n            cocosUtil.setRenderableColor(find(\"bar\", this.expProgress), this.expBarColorArr[this.expBarColorIndex]);\r\n            this.refreshExpLayer();\r\n            this.unschedule(this.onSkillSelect);\r\n            this.scheduleOnce(this.onSkillSelect, 0.5);\r\n            mapModel.player.addHpPercent(designManager.config.upgradeAddHpPercent);  // 2024-10-18 升级血量增加百分比\r\n        }\r\n    }\r\n\r\n    onSkillSelect() {\r\n        if (this.expLvUpCount <= 0) {\r\n            return;\r\n        }\r\n\r\n        if (mapModel.player.hp > 0 && !playerModel.isRecordAd) {\r\n            this.expProgress.active = false;\r\n            let obj: any = {};\r\n            obj.lvCount = this.expLvUpCount;\r\n            this.popLayer(constants.layers.SkillSelectLayer, obj, () => {\r\n                this.expProgress.active = true;\r\n            });\r\n        }\r\n\r\n        if (mapModel.player.hp > 0) {\r\n            this.expLvUpCount = 0;\r\n        }\r\n    }\r\n\r\n    popLayer(layerName: string, layerData?: any, layerCb?: Function) {\r\n        if (this.isShowingLayer(layerName)) {\r\n            return;\r\n        }\r\n        this.gameFightPause();\r\n        this.openLayer(layerName, layerData, () => {\r\n            this.gameFightResume();\r\n            if (layerCb) {\r\n                layerCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    refreshTimeNode() {\r\n        let timeStr = utilTools.getTimeStr(mapModel.time * 1000, true);\r\n        this.setString(this.timeNode, timeStr);\r\n    }\r\n\r\n    gameFightPause() {\r\n        this.mapSystem.fightPause();\r\n    }\r\n\r\n    gameFightResume() {\r\n        this.mapSystem.fightResume();\r\n    }\r\n\r\n    mapLeaveRet(data: any) {\r\n        UserData.getInstance().mapData = null;\r\n        this.closeLayer();\r\n        this.openLayer(constants.layers.HomeLayer, data);\r\n    }\r\n\r\n    commonResRefreshRet(data: any) {\r\n        this.refreshResLayer();\r\n    }\r\n\r\n    loadSaveMapData(mapData: any) {\r\n        mapModel.loadSaveData(mapData.mapModel);\r\n        mapModel.mapSystem.loadSaveData(mapData.mapData);\r\n        mapModel.propSystem.loadSaveData(mapData.propData);\r\n        mapModel.weaponSystem.loadSaveData(mapData.weaponData);\r\n        mapModel.skillSystem.loadSaveData(mapData.skillData);\r\n        mapModel.player.loadSaveData(mapData.player);\r\n        mapModel.monsterSystem.loadSaveData(mapData.monsterData);\r\n    }\r\n\r\n    saveDataBeforeRet(data: any) {\r\n        if (mapModel.player.hp <= 0) {\r\n            return;\r\n        }\r\n        mapModel.propSystem.saveDataBefore();\r\n\r\n        let mapData: any = {};\r\n        mapData.mapModel = mapModel.getSaveData();\r\n        mapData.mapData = mapModel.mapSystem.getSaveData();\r\n        mapData.propData = mapModel.propSystem.getSaveData();\r\n        mapData.weaponData = mapModel.weaponSystem.getSaveData();\r\n        mapData.skillData = mapModel.skillSystem.getSaveData();\r\n        mapData.player = mapModel.player.getSaveData();\r\n        mapData.monsterData = mapModel.monsterSystem.getSaveData();\r\n\r\n        UserData.getInstance().mapData = mapData;\r\n    }\r\n\r\n    onClickBtnSkillBomb() {\r\n        if (mapModel.mapSystem.skillBombCd > 0) {\r\n            this.createNotice(localText.cd);\r\n            return;\r\n        }\r\n        if (playerModel.skillBombNum > 0) {\r\n            mapModel.mapSystem.useSkillBomb();\r\n            this.refreshSkillLayer();\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-炸弹\", (st: number) => {\r\n            if (st == 1) {\r\n                let num = utilTools.getFloatValue(1, 3, true);\r\n                playerModel.skillBombNum += num;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnSkillHeal() {\r\n        if (mapModel.mapSystem.skillHealCd > 0) {\r\n            this.createNotice(localText.cd);\r\n            return;\r\n        }\r\n        if (playerModel.skillHealNum > 0) {\r\n            mapModel.mapSystem.useSkillHeal();\r\n            this.refreshSkillLayer();\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-治疗\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillHealNum += 4;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnSkillMagnet() {\r\n        if (playerModel.skillMagnetNum > 0) {\r\n            mapModel.mapSystem.useSkillMagnet();\r\n            this.refreshSkillLayer();\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-磁铁\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillMagnetNum++;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnSkillLife() {\r\n        if (playerModel.skillLifeNum > 0) {\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-自动复活\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillLifeNum++;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnPause(node: Node) {\r\n        this.popLayer(constants.layers.PauseLayer);\r\n    }\r\n\r\n    onClickBtnClose(node: Node) {\r\n        serverMsg.send(msgac.mapLeave);\r\n    }\r\n\r\n    onClickBtnSkillSelectLayer() {\r\n        this.popLayer(constants.layers.SkillSelectLayer);\r\n    }\r\n\r\n    onClickBtnResume() {\r\n        this.gameFightResume();\r\n    }\r\n\r\n    onClickBtnBoss() {\r\n        if (mapModel.time < 300) {\r\n            mapModel.time = 295;\r\n        } else if (mapModel.time < 600 && mapModel.time > 305) {\r\n            mapModel.time = 595;\r\n        } else if (mapModel.time > 605) {\r\n            mapModel.time = 895;\r\n        }\r\n    }\r\n\r\n    onClickBtnLuckyDraw() {\r\n        // this.popLayer(constants.layers.LuckyDrawLayer);\r\n        this.popLayer(constants.layers.BoxMonsterLayer);\r\n    }\r\n\r\n    onClickBtnAccountClear() {\r\n        UserData.getInstance().clearAccountData();\r\n    }\r\n\r\n    onClickBtnMonsterAdd() {\r\n        if (!this.monsterAddFlag) {\r\n            this.monsterAddFlag = 0;\r\n        }\r\n        this.monsterAddFlag++;\r\n    }\r\n\r\n    // 刷新debug面板\r\n    refreshDebugPannel(): void{\r\n        this.getNodeByPath(\"ui/btns\").active = playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment();\r\n        this.getNodeByPath(\"ui/skillBtns\").active = playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment();\r\n    }\r\n\r\n}\r\n\r\n","import { Camera, find, Node, Prefab, SpriteFrame, UITransform, view } from \"cc\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { utilTools } from \"../../utils/utilTools\";\r\nimport { Player } from \"../compoment/item/Player\";\r\nimport { MapLayer } from \"../compoment/layer/MapLayer\";\r\nimport { BulletSystem } from \"../compoment/sys/BulletSystem\";\r\nimport { HintSystem } from \"../compoment/sys/HintSystem\";\r\nimport { MapSystem } from \"../compoment/sys/MapSystem\";\r\nimport { MonsterSystem } from \"../compoment/sys/MonsterSystem\";\r\nimport { NumSystem } from \"../compoment/sys/NumSystem\";\r\nimport { PropSystem } from \"../compoment/sys/PropSystem\";\r\nimport { SkillSystem } from \"../compoment/sys/SkillSystem\";\r\nimport { WeaponSystem } from \"../compoment/sys/WeaponSystem\";\r\nimport { constants } from \"../data/constants\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { resManager } from \"../manager/resManager\";\r\nimport { serverMsg } from \"../other/serverMsg\";\r\nimport { playerModel } from \"./playerModel\";\r\nimport { PropItem, UserData } from \"./UserData\";\r\nimport { blockArrow } from \"../compoment/item/hint/blockArrow\";\r\nimport { HintNames } from \"../compoment/item/hint/Hint\";\r\nimport { screen } from \"cc\";\r\n\r\nclass MapModel {\r\n    private static _instance: MapModel;\r\n    private constructor() { }\r\n    public static get instance(): MapModel {\r\n        if (!this._instance) {\r\n            this._instance = new MapModel();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    // 半屏幕尺寸\r\n    visibleHalfSize: any;\r\n\r\n    mapFightLayer: Node;\r\n    mapFightCamera: Camera;\r\n    // 镜头初始视角\r\n    cameraOrthoHeight: number;\r\n\r\n    mapLayer: MapLayer;\r\n    player: Player;\r\n    mapSystem: MapSystem;\r\n    monsterSystem: MonsterSystem;\r\n    bulletSystem: BulletSystem;\r\n    numSystem: NumSystem;\r\n    skillSystem: SkillSystem;\r\n    weaponSystem: WeaponSystem;\r\n    hintSystem: HintSystem;\r\n    propSystem: PropSystem;\r\n\r\n    mapId: number;\r\n    floor: number;\r\n    // 战斗时长\r\n    time: number;\r\n\r\n    // 经验池数量\r\n    expPool: number;\r\n    // 经验增长模型\r\n    expTypeRow: any;\r\n    // 已获得的经验值\r\n    expNum: number;\r\n    // 经验等级\r\n    expLv: number;\r\n\r\n    // 装备数组\r\n    equipIdArr = [];\r\n\r\n    // 金币数量\r\n    coinNum: number;\r\n    // 击杀怪物数量\r\n    killMonsterNum: number;\r\n\r\n    // 出怪计划\r\n    mapLevelArr: any[];\r\n    // 当前出怪计划id\r\n    mapLevelType: number;\r\n\r\n    // 出BOSS期间暂存出怪计划，BOSS之后读取\r\n    mapLevelArr_Backup: any[] = [];\r\n\r\n    // 3选1全都要次数\r\n    skillAllNum: number;\r\n\r\n    monsterPrefabObj: any = {};\r\n    bulletPrefabObj: any = {};\r\n\r\n    // 距离多远后隐藏节点，变成单纯的移动计算，不显示节点\r\n    dataRadius: number;\r\n    // 距离多远后，销毁节点数据\r\n    destroyRadius: number;\r\n\r\n    healAdCount: number = 0;\r\n\r\n    initData(data: any, now: Date) {\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n\r\n        let visibleSize = view.getVisibleSize();\r\n        let aa = view.getDesignResolutionSize();\r\n        let bb = screen.windowSize;\r\n        let cc = view.getResolutionPolicy();\r\n        this.visibleHalfSize = {\r\n            width: visibleSize.width * 0.5,\r\n            height: visibleSize.height * 0.5\r\n        };\r\n        this.dataRadius = visibleSize.height * 0.6;\r\n        this.destroyRadius = visibleSize.height * 1.5;\r\n\r\n        this.mapFightCamera = find(\"CanvasMapFight/Camera\").getComponent(Camera);\r\n        this.cameraOrthoHeight = this.mapFightCamera.orthoHeight;\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.mapId = this.mapId;\r\n        data.floor = this.floor;\r\n        data.time = this.time;\r\n        data.expPool = this.expPool;\r\n        data.expTypeRow = this.expTypeRow;\r\n        data.expNum = this.expNum;\r\n        data.expLv = this.expLv;\r\n        data.coinNum = this.coinNum;\r\n        data.killMonsterNum = this.killMonsterNum;\r\n        data.mapLevelArr = this.mapLevelArr;\r\n        data.mapLevelArr_Backup = this.mapLevelArr_Backup;\r\n        data.skillAllNum = this.skillAllNum;\r\n        data.equipIdArr = this.equipIdArr;\r\n        data.healAdCount = this.healAdCount;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.mapId = data.mapId;\r\n        this.floor = data.floor;\r\n        this.time = data.time;\r\n        this.expPool = data.expPool;\r\n        this.expTypeRow = data.expTypeRow;\r\n        this.expNum = data.expNum;\r\n        this.expLv = data.expLv;\r\n        this.coinNum = data.coinNum;\r\n        this.killMonsterNum = data.killMonsterNum;\r\n        this.mapLevelArr = data.mapLevelArr;\r\n        this.mapLevelArr_Backup = data.mapLevelArr_Backup;\r\n        this.skillAllNum = data.skillAllNum;\r\n        this.equipIdArr = data.equipIdArr;\r\n        this.healAdCount = data.healAdCount;\r\n    }\r\n\r\n    enterMapWithMapId(mapId: number, floor: number = 0) {\r\n        let obj: any = {};\r\n        obj.mapId = mapId;\r\n        obj.floor = floor;\r\n\r\n        let row = designManager.getRowById(constants.tableName.map, mapId);\r\n\r\n        // hp atk weaponId\r\n        if (row.type == constants.mapTypes.main) {\r\n            obj.hp = UserData.getInstance().life;\r\n            obj.atk = UserData.getInstance().attack;\r\n            if (UserData.getInstance().wearProp[0] > 0) {\r\n                let curDrop = designManager.getRowById(constants.tableName.prop, UserData.getInstance().wearProp[0])\r\n                if (curDrop && curDrop.type == 11) {\r\n                    obj.weaponId = curDrop.weaponid\r\n                } else {\r\n                    obj.weaponId = 0\r\n                }\r\n            } else {\r\n                obj.weaponId = 0\r\n            }\r\n        } else if (row.type == constants.mapTypes.tower) {\r\n            let info = UserData.getInstance().getTowerRoleProInfo(true);\r\n            obj.hp = info.hp;\r\n            obj.atk = info.atk;\r\n            let propRow = designManager.getRowById(constants.tableName.prop, UserData.getInstance().$towerWeaponId);\r\n            obj.weaponId = propRow.weaponid;\r\n        }\r\n\r\n        serverMsg.send(msgac.mapEnter, obj);\r\n    }\r\n\r\n    loadMapFightLayer() {\r\n        return new Promise((resolve) => {\r\n            if (this.mapFightLayer) {\r\n                resolve();\r\n                return;\r\n            }\r\n            resManager.loadAsset(constants.bundles.layer, constants.layers.MapFightLayer, Prefab, () => { }, (err, prefab) => {\r\n                this.mapFightLayer = cocosUtil.instantiate(prefab);\r\n                this.mapFightLayer.parent = find(\"CanvasMapFight\");\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    setCompoments(mapLayer: MapLayer, player: Player, mapSystem: MapSystem, monsterSystem: MonsterSystem,\r\n        bulletSystem: BulletSystem, numSystem: NumSystem, weaponSystem: WeaponSystem, skillSystem: SkillSystem,\r\n        hintSystem: HintSystem, propSystem: PropSystem) {\r\n        this.mapLayer = mapLayer;\r\n        this.player = player;\r\n        this.mapSystem = mapSystem;\r\n        this.monsterSystem = monsterSystem;\r\n        this.bulletSystem = bulletSystem;\r\n        this.numSystem = numSystem;\r\n        this.weaponSystem = weaponSystem;\r\n        this.skillSystem = skillSystem;\r\n        this.hintSystem = hintSystem;\r\n        this.propSystem = propSystem;\r\n    }\r\n\r\n    isInScreenVisible(node: Node) {\r\n        if (!node || !node.parent) {\r\n            return false;\r\n        }\r\n        let pos = cocosUtil.convertToWorldSpace(node);\r\n        let playerPos = cocosUtil.convertToWorldSpace(this.player.node);\r\n        let tf = node.getComponent(UITransform);\r\n        let add = tf.width + tf.height;\r\n        if ((Math.abs(pos.x - playerPos.x) <= this.visibleHalfSize.width + add + 150)\r\n            && (Math.abs(pos.y - playerPos.y) <= this.visibleHalfSize.height + add)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    mapEnter(data: any) {\r\n        console.log(\"mapEnter---------\")\r\n        if (this.mapId) {\r\n            data.st = 2;\r\n            return;\r\n        }\r\n        this.mapFightCamera.orthoHeight = this.cameraOrthoHeight;\r\n\r\n        let mapId = data.mapId;\r\n\r\n        this.mapId = mapId;\r\n        this.floor = data.floor;\r\n\r\n        let mapRow = designManager.getRowById(constants.tableName.map, mapId);\r\n\r\n        // test\r\n        // arr = [arr[0]];\r\n\r\n        this.time = 0;\r\n\r\n        this.expPool = 0;\r\n        this.expTypeRow = designManager.getRowById(constants.tableName.expType, mapRow.expType * 100 + 1);\r\n        this.expNum = 0;\r\n        this.expLv = 1;\r\n\r\n        this.coinNum = 0;\r\n        this.killMonsterNum = 0;\r\n\r\n        this.healAdCount = 0;\r\n\r\n        this.skillAllNum = 0;\r\n        this.equipIdArr = [];\r\n\r\n        playerModel.skillBombNum = 1;\r\n        playerModel.skillHealNum = 1;\r\n        playerModel.skillMagnetNum = 0;\r\n        playerModel.skillLifeNum = 0;\r\n\r\n        this.mapLevelArr_Backup = [];\r\n\r\n        this.createMapLevelArr();\r\n\r\n        data.st = 1;\r\n    }\r\n\r\n    createMapLevelArr() {\r\n        this.mapLevelArr = [];\r\n        // 2024-10-25 如果有暂存的出怪计划，则从暂存的出怪计划中读取\r\n        if (this.mapLevelArr_Backup && this.mapLevelArr_Backup.length>0) {\r\n            this.mapLevelArr = utilTools.copyObj(this.mapLevelArr_Backup);\r\n            this.mapLevelArr_Backup = [];\r\n            return;\r\n        }\r\n\r\n        this.mapLevelType = this.mapId;\r\n        let arr = designManager.getRowsByType(constants.tableName.level, this.mapLevelType);\r\n        if (!arr || arr.length < 1) {\r\n            this.mapLevelType = 9999;\r\n            arr = designManager.getRowsByType(constants.tableName.level, this.mapLevelType) // 2024-10-24 读取默认出怪计划\r\n            \r\n            // return;\r\n        }\r\n\r\n        arr.forEach((row: any) => {\r\n            if (row.startTime <= mapModel.time) {\r\n                return;\r\n            }\r\n            let mapLevel: any = {};\r\n            mapLevel.id = row.id;\r\n            mapLevel.row = row;\r\n            mapLevel.timeCount = 0;\r\n            mapLevel.createCount = 0;\r\n            this.mapLevelArr.push(mapLevel);\r\n        });\r\n    }\r\n\r\n    mapLeave(data: any) {\r\n        if (!this.mapId) {\r\n            data.st = 2;\r\n            return;\r\n        }\r\n\r\n        this.mapFightLayer.destroy();\r\n        this.mapFightLayer = null;\r\n\r\n        this.mapId = 0;\r\n        this.floor = 0;\r\n\r\n        data.st = 1;\r\n    }\r\n\r\n    // 进入地图之前，加载必要的资源\r\n    loadMapRes(progressCb: Function, endCb: Function) {\r\n        this.loadMonsterAndBulletRes((percent: number) => {\r\n            progressCb(percent);\r\n        }, () => {\r\n            this.loadMapFightLayer().then(() => {\r\n                endCb();\r\n            });\r\n        });\r\n    }\r\n\r\n    loadMonsterAndBulletRes(progressCb: Function, endCb: Function) {\r\n        let sum = 3;\r\n        let onePercent = 1 / sum;\r\n        let monsterPercent = 0;\r\n        let bulletPercent = 0;\r\n        let otherPercent = 0;\r\n\r\n        let tmpFunc = () => {\r\n            let p = monsterPercent * onePercent + bulletPercent * onePercent + otherPercent * onePercent;\r\n            progressCb(p);\r\n        };\r\n        let tmpFunc2 = () => {\r\n            if (monsterPercent + bulletPercent + otherPercent == sum) {\r\n                endCb();\r\n            }\r\n        };\r\n\r\n        console.log(`monster begin time:${Date.now()}`);\r\n        this.loadMonsterPrefabArr((percent: number) => {\r\n            monsterPercent = percent;\r\n            tmpFunc();\r\n        }, () => {\r\n            monsterPercent = 1;\r\n            tmpFunc2();\r\n            console.log(`monster begin promise time:${Date.now()}`);\r\n            new Promise(() => {\r\n                let idArr = [];\r\n                let pathArr = [];\r\n                let arr = designManager.getRowsByType(constants.tableName.level, this.mapLevelType);\r\n                utilTools.forArr(arr, (row: any) => {\r\n                    if (idArr.indexOf(row.monsterId) == -1) {\r\n                        idArr.push(row.monsterId);\r\n                    }\r\n                });\r\n                idArr.forEach((id: number) => {\r\n                    // if (commonArr.indexOf(id) == -1) {\r\n                        let row = designManager.getRowById(constants.tableName.monster, id);\r\n                        let path = row.prefab + \"/monster\";\r\n                        pathArr.push(path);\r\n                    // }\r\n                });\r\n                resManager.loadAssetByPathArr(constants.bundles.monster, pathArr, Prefab, null, (assetArr: any) => {\r\n                    assetArr.forEach((asset: any) => {\r\n                        let path = asset.path;\r\n                        let name = path.split(\"/\")[0];\r\n                        this.monsterPrefabObj[name] = asset;\r\n                    });\r\n                });\r\n            });\r\n            console.log(`monster end time:${Date.now()}`);\r\n        });\r\n        console.log(`Bullet begin time:${Date.now()}`);\r\n        this.loadBulletRes((percent: number) => {\r\n            bulletPercent = percent;\r\n            tmpFunc();\r\n        }, () => {\r\n            bulletPercent = 1;\r\n            tmpFunc2();\r\n            console.log(`Bullet end time:${Date.now()}`);\r\n        });\r\n        console.log(`Other begin time:${Date.now()}`);\r\n        this.loadOtherRes((percent: number) => {\r\n            otherPercent = percent;\r\n            tmpFunc();\r\n        }, () => {\r\n            otherPercent = 1;\r\n            tmpFunc2();\r\n            console.log(`Other begin Promise time:${Date.now()}`);\r\n            new Promise(() => {\r\n                let arr = designManager.getTable(constants.tableName.prop);\r\n                let weaponPrefabArr = [];\r\n                let pathArr = [];\r\n                arr.forEach(info => {\r\n                    let row = info;\r\n                    if (row.icon != \"\") {\r\n                        let icon = \"prop/\" + row.icon;\r\n                        if (row.type == 11) {\r\n                            let wRow = designManager.getRowById(constants.tableName.weapon, row.weaponid);\r\n                            icon = \"weapon/\" + wRow.icon;\r\n                            let prefab = wRow.prefab;\r\n                            if (weaponPrefabArr.indexOf(prefab) == -1) {\r\n                                weaponPrefabArr.push(prefab);\r\n                            }\r\n                        }\r\n                        if (icon !=\"\" && pathArr.indexOf(icon) == -1) {\r\n                            pathArr.push(icon);\r\n                        }\r\n                    }\r\n                });\r\n                resManager.loadAssetByPathArr(constants.bundles.icon, pathArr, SpriteFrame, null,null);\r\n\r\n                //补充加载hint包和weapon包预设资源\r\n                pathArr = [];\r\n                for (const name in HintNames) {\r\n                    pathArr.push(HintNames[name]);\r\n                }\r\n                resManager.loadAssetByPathArr(constants.bundles.hint, pathArr, Prefab, null,null);\r\n                resManager.loadAssetByPathArr(constants.bundles.weapon, weaponPrefabArr, Prefab, null,null);\r\n            });\r\n            console.log(`Other end time:${Date.now()}`);\r\n        });\r\n\r\n    }\r\n\r\n    // 其他碎片资源，比如：背景图，围栏等\r\n    loadOtherRes(progressCb: Function, endCb: Function) {\r\n        let mapRow = designManager.getRowById(constants.tableName.map, this.mapId);\r\n        let pathArr = [\r\n            \"map/\" + mapRow.bg,\r\n            \"wall/\" + mapRow.wall + \"_v\",\r\n            \"wall/\" + mapRow.wall + \"_h\"\r\n        ];\r\n        // {   //加载进度的方式\r\n        //     let arr = designManager.getTable(constants.tableName.prop);\r\n        //         arr.forEach(info => {\r\n        //             let row = info;\r\n        //             let icon = \"prop/\" + row.icon;\r\n        //             if (row.type == 11) {\r\n        //                 let wRow = designManager.getRowById(constants.tableName.weapon, row.weaponid);\r\n        //                 icon = \"weapon/\" + wRow.icon;\r\n        //             }\r\n        //             if (icon !=\"\" && pathArr.indexOf(icon) == -1) {\r\n        //                 pathArr.push(icon);\r\n        //             }\r\n        //         });\r\n        //         resManager.loadAssetByPathArr(constants.bundles.icon, pathArr, SpriteFrame, progressCb,endCb);\r\n        // }\r\n        {   //不加载进度的方式\r\n            resManager.loadAssetByPathArr(constants.bundles.icon, pathArr, SpriteFrame, progressCb, endCb);\r\n            console.log(`Other end loadAssetByPathArr time:${Date.now()}`);\r\n        }\r\n        \r\n        // pathArr = [\r\n        //     \"prop/\",\r\n        //     \"weapon/\",\r\n        // ]\r\n        // resManager.loadAssetByBundleDirs(constants.bundles.icon, pathArr, SpriteFrame, progressCb, endCb); //Q：用这个方法来导入有问题，不知道为什么\r\n    }\r\n\r\n    // 加载子弹的资源\r\n    loadBulletRes(progressCb: Function, endCb: Function) {\r\n        // {   //原本的方式\r\n        //     let arr = [];\r\n        //     let pathArr = [];\r\n        //     arr.forEach((info: any) => {\r\n        //         let row = info;\r\n        //         let path = row.prefab;\r\n        //         if (path!=\"\" && pathArr.indexOf(path) == -1) {\r\n        //             pathArr.push(path);\r\n        //         }\r\n        //     });\r\n        //     resManager.loadAssetByPathArr(constants.bundles.bullet, pathArr, Prefab, progressCb, (assetArr: any) => {\r\n        //         assetArr.forEach((asset: any) => {\r\n        //             this.bulletPrefabObj[asset.name] = asset;\r\n        //         });\r\n        //         endCb();\r\n        //     });\r\n        // }\r\n\r\n        {   //修改后加载进度的方式\r\n            this.bulletPrefabObj = {};\r\n            let arr = designManager.getTable(constants.tableName.bullet);\r\n            let arr2 = designManager.getTable(constants.tableName.skill);\r\n            let arr3 = designManager.getTable(constants.tableName.skill2);\r\n            let pathArr = [];\r\n            let pathArr2 = [];\r\n            let pathArr3 = [];\r\n            arr.forEach((info: any) => {\r\n                let row = info;\r\n                let path = row.prefab;\r\n                if (path!=\"\" && pathArr.indexOf(path) == -1) {\r\n                    pathArr.push(path);\r\n                }\r\n            });\r\n    \r\n            arr2.forEach((info: any) => {\r\n                let row = info;\r\n                let path = row.icon.split(\"|\")[1];\r\n                if (path && path!=\"\" && pathArr2.indexOf(path) == -1) {\r\n                    pathArr2.push(path);\r\n                }\r\n            });\r\n            arr3.forEach((info: any) => {\r\n                let row = info;\r\n                let path = row.icon.split(\"|\")[1];\r\n                if (path && path!=\"\" && pathArr3.indexOf(path) == -1) {\r\n                    pathArr3.push(path);\r\n                }\r\n            });\r\n    \r\n            resManager.loadAssetByPathArr(constants.bundles.bullet, pathArr, Prefab, null, (assetArr: any) => {\r\n                assetArr.forEach((asset: any) => {\r\n                    this.bulletPrefabObj[asset.name] = asset;\r\n                });\r\n    \r\n               resManager.loadAssetByPathArr(constants.bundles.bullet, pathArr2, SpriteFrame, null, ()=>{\r\n                   resManager.loadAssetByPathArr(constants.bundles.icon, pathArr3, SpriteFrame, null,endCb);\r\n               });\r\n            });\r\n        }\r\n\r\n        // {   //不加载进度方式\r\n        //     endCb();\r\n        //     new Promise(()=>{\r\n        //         this.bulletPrefabObj = {};\r\n        //         let arr = designManager.getTable(constants.tableName.bullet);\r\n        //         let arr2 = designManager.getTable(constants.tableName.skill);\r\n        //         let arr3 = designManager.getTable(constants.tableName.skill2);\r\n        //         let pathArr = [];\r\n        //         let pathArr2 = [];\r\n        //         let pathArr3 = [];\r\n        //         arr.forEach((info: any) => {\r\n        //             let row = info;\r\n        //             let path = row.prefab;\r\n        //             if (path && path!=\"\" && pathArr.indexOf(path) == -1) {\r\n        //                 pathArr.push(path);\r\n        //             }\r\n        //         });\r\n        \r\n        //         arr2.forEach((info: any) => {\r\n        //             let row = info;\r\n        //             let path = row.icon.split(\"|\")[1];\r\n        //             if (path && path!=\"\" && pathArr2.indexOf(path) == -1) {\r\n        //                 pathArr2.push(path);\r\n        //             }\r\n        //         });\r\n        //         arr3.forEach((info: any) => {\r\n        //             let row = info;\r\n        //             let path = row.icon.split(\"|\")[1];\r\n        //             if (path && path!=\"\" && pathArr3.indexOf(path) == -1) {\r\n        //                 pathArr3.push(path);\r\n        //             }\r\n        //         });\r\n        \r\n        //         resManager.loadAssetByPathArr(constants.bundles.bullet, pathArr, Prefab, null, (assetArr: any) => {\r\n        //             assetArr.forEach((asset: any) => {\r\n        //                 this.bulletPrefabObj[asset.name] = asset;\r\n        //             });\r\n        \r\n        //             resManager.loadAssetByPathArr(constants.bundles.bullet, pathArr2, SpriteFrame, null, ()=>{\r\n        //                 resManager.loadAssetByPathArr(constants.bundles.icon, pathArr3, SpriteFrame, null,null);\r\n        //             });\r\n        //             // endCb();\r\n        //         });\r\n        //     });\r\n        // }\r\n        \r\n        \r\n    }\r\n\r\n    // 加载怪物资源\r\n    loadMonsterPrefabArr(progressCb: Function, endCb: Function) {\r\n        this.monsterPrefabObj = {};\r\n        let idArr = [];\r\n        let pathArr = [];\r\n        // 召唤怪和通用怪目前较少，暂时直接在这里添加\r\n        let commonArr = [1,2,14];\r\n        \r\n        commonArr.forEach((id: number)=>{\r\n            if (idArr.indexOf(id) == -1) {\r\n                idArr.push(id);\r\n            }\r\n        });\r\n\r\n        idArr.forEach((id: number) => {\r\n            let row = designManager.getRowById(constants.tableName.monster, id);\r\n                let path = row.prefab + \"/monster\";\r\n                pathArr.push(path);\r\n        });\r\n        console.log(`monster begin loadAssetByPathArr time:${Date.now()}`);\r\n        resManager.loadAssetByPathArr(constants.bundles.monster, pathArr, Prefab, progressCb, (assetArr: any) => {\r\n            assetArr.forEach((asset: any) => {\r\n                let path = asset.path;\r\n                let name = path.split(\"/\")[0];\r\n                this.monsterPrefabObj[name] = asset;\r\n            });\r\n            endCb();\r\n        });\r\n    }\r\n\r\n    parseDesignPropArr(reward: any) {\r\n        let arr = [];\r\n        reward.forEach((item: any) => {\r\n            let data: PropItem = {\r\n                Id: item[0],\r\n                Num: item[1]\r\n            };\r\n            arr.push(data);\r\n        });\r\n        return arr;\r\n    }\r\n\r\n}\r\n\r\nexport const mapModel = MapModel.instance;","import { BoxCollider2D, director, find, macro, Node, RenderTexture, Sprite, SpriteFrame, tween, Tween, UIOpacity, UITransform, v3, Vec2, Vec3, view, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { physicsWorld } from '../../engine/PhysicsWorld';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { Bullet } from '../item/bullet/Bullet';\r\nimport { Monster } from '../item/monsters/Monster';\r\nimport { Prop } from '../item/prop/Prop';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { path } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapSystem')\r\nexport class MapSystem extends BaseLayer {\r\n\r\n    mapFightBgLayer: Node;\r\n\r\n    staticNode: Node;\r\n    // 炸弹\r\n    bombAnimationCtrl: AnimationCtrl;\r\n    // 预警\r\n    warnAnimationCtrl: AnimationCtrl;\r\n    // 技能炸弹\r\n    skillBombAniCtrl: AnimationCtrl;\r\n\r\n    // boss出现位置提示\r\n    bossPosHintAnimationCtrl: AnimationCtrl;\r\n\r\n    // 宝箱提示\r\n    boxHintNode: Node;\r\n    boxArrowNode: Node;\r\n\r\n    mapRow: any;\r\n    pauseVal: number;\r\n\r\n    // 围栏\r\n    wallLayer: Node;\r\n    wallShineNode: Node;\r\n    wallTopNode: Node;\r\n    wallBottomNode: Node;\r\n    wallLeftNode: Node;\r\n    wallRightNode: Node;\r\n    wallTopVal: number;\r\n    wallBottomVal: number;\r\n    wallLeftVal: number;\r\n    wallRightVal: number;\r\n    wallCenterPos: Vec3;\r\n\r\n    // 是否停止时间统计\r\n    stopTimeCount: boolean;\r\n    // 经验池产出时间累计\r\n    expTimeCount: number;\r\n    // 击杀怪物数量累计，用于木箱的产生\r\n    killMonsterCount: number;\r\n    // 复活次数\r\n    backlifeCount: number = 0;\r\n\r\n    // 技能：炸弹cd\r\n    skillBombCd: number = 0;\r\n    // 技能：治疗cd\r\n    skillHealCd: number = 0;\r\n\r\n    nineForArr: any = [\r\n        { x: -1, y: 1 }, { x: 0, y: 1 }, { x: 1, y: 1 },\r\n        { x: -1, y: 0 }, { x: 0, y: 0 }, { x: 1, y: 0 },\r\n        { x: -1, y: -1 }, { x: 0, y: -1 }, { x: 1, y: -1 }\r\n    ];\r\n\r\n    // Vec3集中缓存\r\n    vec3Obj = {\r\n        nodePos: v3(0, 0, 0),\r\n    };\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.mapFightBgLayer = this.getNodeByPath(\"map/bg\");\r\n\r\n        this.wallLayer = this.getNodeByPath(\"map/wallLayer\");\r\n        this.wallTopNode = this.getNodeByPath(\"map/wallLayer/top\");\r\n        this.wallBottomNode = this.getNodeByPath(\"map/wallLayer/bottom\");\r\n        this.wallLeftNode = this.getNodeByPath(\"map/wallLayer/left\");\r\n        this.wallRightNode = this.getNodeByPath(\"map/wallLayer/right\");\r\n        this.wallShineNode = this.getNodeByPath(\"map/wallLayer/shine\");\r\n        this.wallLayer.active = false;\r\n\r\n        this.staticNode = this.getNodeByPath(\"static\");\r\n\r\n        this.bombAnimationCtrl = this.getNodeByPath(\"static/bomb\").addComponent(AnimationCtrl);\r\n        this.bombAnimationCtrl.node.active = false;\r\n\r\n        this.skillBombAniCtrl = this.getNodeByPath(\"static/skillBomb\").addComponent(AnimationCtrl);\r\n        this.skillBombAniCtrl.node.active = false;\r\n\r\n        this.warnAnimationCtrl = this.getNodeByPath(\"static/warn\").addComponent(AnimationCtrl);\r\n        this.warnAnimationCtrl.node.active = false;\r\n        this.screenAdapterBG(this.warnAnimationCtrl.node);\r\n\r\n        this.bossPosHintAnimationCtrl = this.getNodeByPath(\"map/bossPosHint\").addComponent(AnimationCtrl);\r\n        this.bossPosHintAnimationCtrl.node.active = false;\r\n\r\n        this.boxHintNode = this.getNodeByPath(\"static/boxHint\");\r\n        this.boxHintNode.active = false;\r\n        this.boxArrowNode = this.getNodeByPath(\"static/boxHint/arrow\");\r\n        cocosUtil.tweenBreath(this.getNodeByPath(\"static/boxHint/icon\"), 0.4, 1.2);\r\n        cocosUtil.tweenBreath(this.getNodeByPath(\"static/boxHint/arrow/icon\"), 0.2, 1.2);\r\n\r\n        // if (playerModel.isInDevelopmentEnvironment()) {\r\n        //     PhysicsSystem2D.instance.debugDrawFlags = EPhysics2DDrawFlags.Shape;\r\n        // }\r\n        // PhysicsSystem2D.instance.enable = false;\r\n\r\n        this.mapRow = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n        this.expTimeCount = 0;\r\n        this.pauseVal = 0;\r\n        this.killMonsterCount = 0;\r\n        this.stopTimeCount = false;\r\n\r\n        // 镜头视角慢恢复\r\n        this.schedule(this.refreshCamera, 0.5, macro.REPEAT_FOREVER);\r\n\r\n        // 开启逻辑帧\r\n        this.schedule(this.updateLogic, 0.01, macro.REPEAT_FOREVER);\r\n\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n    }\r\n\r\n    start() {\r\n        this.scheduleOnce(() => {\r\n            if (UserData.getInstance().mapData) {\r\n                // 战斗中断恢复的\r\n                return;\r\n            }\r\n            // 初始经验\r\n            for (let i = 0; i < 20; i++) {\r\n                let pos = cocosUtil.getRectPos(mapModel.player.node, 400, 700, 600, 1000, true);\r\n                this.createExp(1, pos, true);\r\n            }\r\n\r\n            if (playerModel.isInDevelopmentEnvironment()) {\r\n                // 初始测试道具\r\n                let pos = cocosUtil.getLeavePos(mapModel.player.node, 0,400,true);\r\n                mapModel.propSystem.addProp(constants.propIds.coin, pos);\r\n                pos = cocosUtil.getLeavePos(mapModel.player.node, 0,600,true);\r\n                mapModel.propSystem.addProp(constants.propIds.coin, pos);\r\n            }\r\n            \r\n        }, 0.5);\r\n\r\n        this.refreshMapFightWindow();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.initMapFightBg();\r\n        this.initWallLayer();\r\n    }\r\n\r\n    initWallLayer() {\r\n        let path = \"wall/\" + this.mapRow.wall + \"_h\";\r\n        this.setSpriteFrame2(this.wallTopNode, path);\r\n        this.setSpriteFrame2(this.wallBottomNode, path);\r\n\r\n        path = \"wall/\" + this.mapRow.wall + \"_v\";\r\n        this.setSpriteFrame2(this.wallLeftNode, path);\r\n        this.setSpriteFrame2(this.wallRightNode, path);\r\n    }\r\n\r\n    initMapFightBg() {\r\n        // this.mapFightBgLayer.children.forEach((node: Node) => {\r\n        //     let path = \"map/\" + this.mapRow.bg;\r\n        //     this.setSpriteFrame2(node, path);\r\n        // });\r\n        let path = \"map/\" + this.mapRow.bg;\r\n        this.setSpriteFrame2(this.mapFightBgLayer, path)\r\n    }\r\n\r\n    refreshMapFightWindow() {\r\n        // 相机跟随\r\n        let pos = mapModel.player.node.getPosition();\r\n        pos.z = mapModel.mapFightCamera.node.getPosition().z;\r\n        mapModel.mapFightCamera.node.setPosition(pos);\r\n\r\n        // this.refreshMapBgLayer();\r\n    }\r\n    refreshMapBgLayer() {\r\n        // 计算出玩家当前位置是属于哪个格子\r\n        let x = Math.floor((mapModel.player.node.getPosition().x + 512) / 1024);\r\n        let y = Math.floor((mapModel.player.node.getPosition().y + 512) / 1024);\r\n        // 遍历九宫调整位置\r\n        this.nineForArr.forEach((info: any, index: number) => {\r\n            let bgNode = this.mapFightBgLayer.children[index];\r\n            if (!bgNode) {\r\n                return;\r\n            }\r\n            let posX = (x + info.x) * 1024;\r\n            let posY = (y + info.y) * 1024;\r\n            bgNode.setPosition(posX, posY);\r\n        });\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.expTimeCount = this.expTimeCount;\r\n        data.killMonsterCount = this.killMonsterCount;\r\n        data.backlifeCount = this.backlifeCount;\r\n        data.skillBombCd = this.skillBombCd;\r\n        data.skillHealCd = this.skillHealCd;\r\n        data.stopTimeCount = this.stopTimeCount;\r\n\r\n        // 镜头高度\r\n        data.orthoHeight = mapModel.mapFightCamera.orthoHeight;\r\n\r\n        // 围栏\r\n        let wall = null;\r\n        if (this.wallLayer.active) {\r\n            wall = {};\r\n            wall.centerPos = this.wallCenterPos;\r\n        }\r\n        data.wall = wall;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.expTimeCount = data.expTimeCount;\r\n        this.killMonsterCount = data.killMonsterCount;\r\n        this.backlifeCount = data.backlifeCount;\r\n        this.skillBombCd = data.skillBombCd;\r\n        this.skillHealCd = data.skillHealCd;\r\n        this.stopTimeCount = data.stopTimeCount;\r\n\r\n        mapModel.mapFightCamera.orthoHeight = data.orthoHeight;\r\n\r\n        // 围栏\r\n        if (data.wall) {\r\n            let wall = data.wall;\r\n            this.showWallLayer(wall.centerPos);\r\n        }\r\n    }\r\n\r\n    bossDead() {\r\n        this.stopTimeCount = false;\r\n        mapModel.mapSystem.hideWallLayer();\r\n        if (mapModel.monsterSystem.bossMonster.isBoss == 2) {\r\n            // 最后一个BOSS\r\n            mapModel.mapSystem.doSettlement(true);\r\n        } else {\r\n            mapModel.createMapLevelArr(); \r\n        }\r\n        mapModel.monsterSystem.bossMonster = null;\r\n        mapModel.mapLayer.refreshBossHpLayer();\r\n    }\r\n\r\n    doSettlement(isWin: boolean = false) {\r\n        let row = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n        let arr: PropItem[] = [];\r\n\r\n        // 金币\r\n        let coinNum = mapModel.coinNum + Math.floor(mapModel.time / 60 * 100) + Math.floor(mapModel.killMonsterNum / 5);\r\n        arr.push({ Id: constants.propIds.coin, Num: coinNum });\r\n\r\n        // 装备\r\n        for (let i in mapModel.equipIdArr) {\r\n            arr.push({ Id: mapModel.equipIdArr[i], Num: 1 });\r\n        }\r\n\r\n        // 必拿奖励\r\n        if (row.reward4) {\r\n            arr = arr.concat(mapModel.parseDesignPropArr(row.reward4));\r\n        }\r\n\r\n        // 通关奖励 \r\n        if (isWin && row.reward5) {\r\n            arr = arr.concat(mapModel.parseDesignPropArr(row.reward5));\r\n        }\r\n\r\n        // 按照品质排序\r\n        utilTools.sortArr(arr, (prop1, prop2) => {\r\n            let row1 = designManager.getRowById(constants.tableName.prop, prop1.Id);\r\n            let row2 = designManager.getRowById(constants.tableName.prop, prop2.Id);\r\n            if (row1.quality < row2.quality) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n\r\n        let obj: any = {};\r\n\r\n        let time = Math.floor(mapModel.time);\r\n        obj.time = time;\r\n        let levelData = UserData.getInstance().getLevelData(mapModel.mapId);\r\n        if (time >= levelData.Time) {\r\n            levelData.Time = time;\r\n            UserData.getInstance().setLevelData(levelData);\r\n            obj.isBest = true;\r\n        }\r\n        obj.bestTime = levelData.Time;\r\n\r\n        UserData.getInstance().getRewardProp(arr);\r\n\r\n        obj.isWin = isWin;\r\n        obj.award = arr;\r\n        mapModel.mapLayer.popLayer(constants.layers.SettlementLayer, obj);\r\n       \r\n        tyqSDK.eventLevelEnd(mapModel.mapId, isWin)\r\n        tyqSDK.showInterstitialAd()\r\n        if (time >= 15 * 60) {\r\n            //  myLog.i(\"第\" + mapModel.mapId +\"关-15分钟\")\r\n            tyqSDK.eventSendCustomEvent(\"第\" + mapModel.mapId + \"关-15分钟\")\r\n        } else if (time >= 10 * 60) {\r\n            // myLog.i(\"第\" + mapModel.mapId +\"关-10分钟\")\r\n            tyqSDK.eventSendCustomEvent(\"第\" + mapModel.mapId + \"关-10分钟\")\r\n        } else if (time >= 5 * 60) {\r\n            //  myLog.i(\"第\" + mapModel.mapId +\"关-5分钟\")\r\n            tyqSDK.eventSendCustomEvent(\"第\" + mapModel.mapId + \"关-5分钟\")\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获得距离参考点pos最近的怪物或者宝箱节点\r\n     * @param pos 参考点，默认是玩家位置\r\n     */\r\n    getMinDisTargetNode(pos?: Vec3): Node {\r\n        let minDis = 999999;\r\n        let minDisNode = null;\r\n        mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n            if (!monster.node.activeInHierarchy) {\r\n                return;\r\n            }\r\n            let dis = monster.distancePlayer;\r\n            if (pos) {\r\n                dis = Vec2.distance(pos, monster.node.position);\r\n            }\r\n            if (dis < minDis) {\r\n                minDis = monster.distancePlayer;\r\n                minDisNode = monster.node;\r\n            }\r\n        });\r\n\r\n        mapModel.propSystem.forVisiblePropCollider((prop: Prop) => {\r\n            let propNode = prop.node;\r\n            let propPos = propNode.getPosition();\r\n            if (!pos) {\r\n                pos = mapModel.player.node.position;\r\n            }\r\n            let tmpDis = Vec2.distance(pos, propPos);\r\n            if (tmpDis > minDis) {\r\n                return;\r\n            }\r\n            minDis = tmpDis;\r\n            minDisNode = propNode;\r\n        });\r\n\r\n        return minDisNode;\r\n    }\r\n\r\n    // 开始播放预警动画\r\n    startWarning(aniName: string) {\r\n        if (!aniName) {\r\n            return;\r\n        }\r\n        this.warnAnimationCtrl.node.active = true;\r\n        this.warnAnimationCtrl.playAnimation(aniName, false, () => {\r\n            this.warnAnimationCtrl.node.active = false;\r\n            if (aniName == \"11\") {\r\n                // 镜头拉远\r\n                this.cameraMove(mapModel.cameraOrthoHeight + 200);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 镜头拉动\r\n    cameraMove(orthoHeight: number) {\r\n        if (orthoHeight == mapModel.mapFightCamera.orthoHeight) {\r\n            return;\r\n        }\r\n        tween(mapModel.mapFightCamera).to(3, { orthoHeight: orthoHeight }).start();\r\n    }\r\n\r\n    // 主动技能：治疗\r\n    useSkillHeal() {\r\n        // this.skillHealCd = designManager.config.hp_cd;\r\n        playerModel.skillHealNum--;\r\n        mapModel.player.useSkillHeal(0.25);\r\n    }\r\n\r\n    useSkillMagnet() {\r\n        playerModel.skillMagnetNum--;\r\n        mapModel.propSystem.getProp(constants.propIds.magnet);\r\n    }\r\n\r\n    // 主动技能：炸弹\r\n    async useSkillBomb() {\r\n        // this.skillBombCd = designManager.config.boom_cd;\r\n        playerModel.skillBombNum--;\r\n        this.skillBombAniCtrl.node.active = true;\r\n        this.skillBombAniCtrl.playAnimation(\"1\", false, () => {\r\n            this.skillBombAniCtrl.node.active = false;\r\n        });\r\n        await cocosUtil.waitTimeAsync(this, 0.8);\r\n        // 屏幕内的小怪全部阵亡\r\n        let hitArr = [];\r\n        mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n            if (monster.row.type != constants.monsterTypes.common) {\r\n                return;\r\n            }\r\n            let dam = monster.hp;\r\n            monster.waitHit = true;\r\n            let hitInfo: any = {};\r\n            hitInfo.monster = monster;\r\n            hitInfo.dam = dam;\r\n            hitArr.push(hitInfo);\r\n        });\r\n        mapModel.monsterSystem.batchHitMonster(hitArr, hitArr.length);\r\n\r\n        // 怪物子弹全部消失\r\n        mapModel.bulletSystem.forVisibleMonsterBullet((bullet: Bullet) => {\r\n            bullet.recycleSelf();\r\n        });\r\n    }\r\n\r\n    // 玩家吃到炸弹\r\n    bomb() {\r\n        // 屏幕闪白\r\n        this.bombAnimationCtrl.node.active = true;\r\n        this.bombAnimationCtrl.playAnimationOnce(\"bomb\", () => {\r\n            this.bombAnimationCtrl.node.active = false;\r\n        });\r\n        this.scheduleOnce(() => { // 2024-10-22 闪白完了之后结算爆炸\r\n            // 范围内的小怪全部阵亡\r\n            let hitArr = [];\r\n            mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n                if (monster.row.type != constants.monsterTypes.common) {\r\n                    return;\r\n                }\r\n                // 2024-10-18 改成全屏炸弹\r\n                // if (monster.distancePlayer > 300) {\r\n                //     return;\r\n                // }\r\n                let dam = monster.hp;\r\n                monster.waitHit = true;\r\n                let hitInfo: any = {};\r\n                hitInfo.monster = monster;\r\n                hitInfo.dam = dam;\r\n                hitArr.push(hitInfo);\r\n            });\r\n            mapModel.monsterSystem.batchHitMonster(hitArr, hitArr.length);\r\n\r\n            // 怪物子弹全部消失\r\n            mapModel.bulletSystem.forVisibleMonsterBullet((bullet: Bullet) => {\r\n                bullet.recycleSelf();\r\n            });\r\n        }, 0.2)\r\n    }\r\n\r\n    // 怪物阵亡\r\n    monsterDead(id: number, worldPos: Vec3) {\r\n        let row = designManager.getRowById(constants.tableName.monster, id);\r\n\r\n        // 经验产生\r\n        if (utilTools.isProb(row.expProb)) {\r\n            let exp = utilTools.getFloatValue(row.expMin, row.expMax, true);\r\n            this.createExp(exp, worldPos);\r\n        }\r\n\r\n        // 击杀数量统计\r\n        mapModel.killMonsterNum++;\r\n        mapModel.mapLayer.refreshResLayer();\r\n\r\n        // 木箱产生\r\n        this.killMonsterCount++;\r\n        if (this.killMonsterCount >= designManager.config.woodBoxKillNum) {\r\n            this.killMonsterCount -= designManager.config.woodBoxKillNum;\r\n            // 玩家周围随机位置\r\n            let pos = cocosUtil.getAroundPos(mapModel.player.node, 300, view.getVisibleSize().height * 2, true);\r\n            // 2024-10-22 修改，不再产出木箱，直接是道具\r\n            // mapModel.propSystem.addProp(constants.propIds.box1, pos);\r\n\r\n            // 按照权重，产生道具\r\n            let tb = designManager.getTable(constants.tableName.box1);\r\n            let arr = [];\r\n            for (let i in tb) {\r\n                let row = tb[i];\r\n                if (row.mapId == 0 || row.mapId == mapModel.mapId) {\r\n                    arr.push(row);\r\n                }\r\n            }\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            let isIt = false;\r\n            if(ret.propId != constants.propIds.addHpPercent && mapModel.player.hp <= mapModel.player.hpMax*0.5 && mapModel.propSystem.getPropNums(constants.propIds.addHpPercent) < 2){// 如果当前玩家血量过低，则产生鸡腿的概率增加4倍\r\n                for (let i = 0; i < designManager.config.skillPropAddMult; i++) {\r\n                    if (ret.propId == constants.propIds.addHpPercent) {\r\n                        console.log(`产生了一个回血道具，当前道具数量：${mapModel.propSystem.getPropNums(constants.propIds.addHpPercent)}`)\r\n                        isIt = true;\r\n                        break;\r\n                    }else{\r\n                        ret = utilTools.getRowByWeight(arr);\r\n                    }                   \r\n                }\r\n            } \r\n            if (!isIt && ret.propId != constants.propIds.bomb && mapModel.monsterSystem.aliveMonsterNum >= 100 && mapModel.propSystem.getPropNums(constants.propIds.bomb) < 2) {// 如果当前怪物数量太多，则产生炸弹的概率增加4倍\r\n                for (let i = 0; i < designManager.config.skillPropAddMult; i++) {\r\n                    if (ret.propId == constants.propIds.bomb) {\r\n                        console.log(`产生了一个炸弹道具，当前道具数量：${mapModel.propSystem.getPropNums(constants.propIds.bomb)}`)\r\n                        isIt = true;\r\n                        break;\r\n                    }else{\r\n                        ret = utilTools.getRowByWeight(arr);\r\n                    }                   \r\n                }\r\n            }\r\n            if (!isIt && ret.propId != constants.propIds.magnet && mapModel.propSystem.getPropNums(constants.propIds.exp) >= 100 && mapModel.propSystem.getPropNums(constants.propIds.magnet) < 2) {// 如果当前经验数量太多，则产生吸铁石的概率增加4倍\r\n                for (let i = 0; i < designManager.config.skillPropAddMult; i++) {\r\n                    if (ret.propId == constants.propIds.magnet) {\r\n                        console.log(`产生了一个吸铁石道具，当前道具数量：${mapModel.propSystem.getPropNums(constants.propIds.magnet)}`)\r\n                        isIt = true;\r\n                        break;\r\n                    }else{\r\n                        ret = utilTools.getRowByWeight(arr);\r\n                    }                   \r\n                }\r\n            }\r\n            let num = utilTools.getFloatValue(ret.minNum, ret.maxNum, true);\r\n            let extraObj: any = {};\r\n            extraObj.num = num;\r\n            extraObj.propId = ret.propId;\r\n            let propId = ret.propId;\r\n            let row = designManager.getRowById(constants.tableName.prop, propId);\r\n            if (row.type == 8 || row.type == 11) {\r\n                propId = constants.propIds.equip;\r\n            }\r\n            mapModel.propSystem.addProp(propId, pos, extraObj);\r\n        }\r\n\r\n        // 道具掉落\r\n        if (row.propProbArr) {\r\n            for (let i = 0; i < row.propProbArr.length; i++) {\r\n                let prob = row.propProbArr[i];\r\n                if (!utilTools.isProb(prob)) {\r\n                    continue;\r\n                }\r\n                let propId = row.propIdArr[i];\r\n                let propNum = row.propNumArr[i];\r\n                let direction: Vec3 = cocosUtil.getCircleDirectionArr(1)[0];\r\n                let pos = worldPos.clone().add(direction.multiplyScalar(80));\r\n                let extraObj: any = {};\r\n                extraObj.num = propNum;\r\n                mapModel.propSystem.addProp(propId, pos, extraObj);\r\n            }\r\n        }\r\n\r\n        // 每日任务\r\n        switch (row.type) {\r\n            case constants.monsterTypes.common:\r\n                playerModel.addDayTaskNum(4, 1);\r\n                break;\r\n            case constants.monsterTypes.elite:\r\n                playerModel.addDayTaskNum(5, 1);\r\n                break;\r\n            case constants.monsterTypes.boss:\r\n                playerModel.addDayTaskNum(6, 1);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // // test\r\n        // if (Math.random() > 0.5) {\r\n        //     // 炸弹\r\n        //     mapModel.propSystem.addProp(501, worldPos);\r\n        // } else {\r\n        //     // 磁铁\r\n        //     mapModel.propSystem.addProp(301, worldPos);\r\n        // }\r\n    }\r\n\r\n    // 经验产生\r\n    createExp(exp: number, worldPos: Vec3, force: boolean = false) {\r\n        myLog.d(\"debug\", `log enter createExp`);\r\n        if (!force) {\r\n            if (exp > mapModel.expPool) {\r\n                exp = mapModel.expPool;\r\n            }\r\n            if (exp <= 0) {\r\n                return;\r\n            }\r\n            mapModel.expPool -= exp;\r\n        }\r\n        let extraObj: any = {};\r\n        extraObj.num = exp;\r\n        myLog.d(`产生经验：${exp}`)\r\n        mapModel.propSystem.addProp(constants.propIds.exp, worldPos, extraObj);\r\n    }\r\n\r\n    addExp(num: number) {\r\n        mapModel.expNum += num;\r\n        mapModel.mapLayer.refreshExpLayer();\r\n    }\r\n\r\n    addCoin(num: number) {\r\n        mapModel.coinNum += num;\r\n        mapModel.mapLayer.refreshResLayer();\r\n    }\r\n\r\n    adjustInWall(node: Node | Vec3, height: number = 0) {\r\n        if (!this.wallLayer.active) {\r\n            return;\r\n        }\r\n\r\n        let tf = null;\r\n        let pos = null;\r\n        if (node instanceof Node) {\r\n            tf = node.getComponent(UITransform);\r\n            pos = node.getPosition(this.vec3Obj.nodePos);\r\n        } else {\r\n            pos = node;\r\n        }\r\n        if (pos.x >= this.wallRightVal) {\r\n            pos.x = this.wallRightVal;\r\n        }\r\n        if (pos.x <= this.wallLeftVal) {\r\n            pos.x = this.wallLeftVal;\r\n        }\r\n        if (pos.y >= this.wallTopVal) {\r\n            pos.y = this.wallTopVal;\r\n        }\r\n        if (tf) {\r\n            height = tf.height;\r\n        }\r\n        if (pos.y <= this.wallBottomVal + height * 0.4) {\r\n            pos.y = this.wallBottomVal + height * 0.4;\r\n        }\r\n        if (node instanceof Node) {\r\n            node.position = pos;\r\n        }\r\n    }\r\n\r\n    showWallLayer(centerPos?: Vec3) {\r\n        this.wallLayer.active = true;\r\n        let hWidth = 33;\r\n        let hHeight = 51;\r\n        let vWidth = 32;\r\n        let vHeight = 27;\r\n        if (mapModel.mapId == 2) {\r\n            hWidth = 36;\r\n            hHeight = 32;\r\n            vWidth = 43;\r\n            vHeight = 55;\r\n        }\r\n\r\n        // 宽1200 高1500\r\n        let width = Math.ceil(1200 / hWidth) * hWidth;\r\n        let height = Math.ceil(1500 / vHeight) * vHeight;\r\n\r\n        if (!centerPos) {\r\n            centerPos = mapModel.player.node.getPosition().clone();\r\n            centerPos.y += 400;\r\n        }\r\n        this.wallCenterPos = centerPos;\r\n\r\n        let top = this.wallTopNode;\r\n        top.getComponent(UITransform).width = width;\r\n        top.getComponent(UITransform).height = hHeight;\r\n        top.getComponent(BoxCollider2D).size.width = width;\r\n        top.getComponent(BoxCollider2D).size.height = hHeight;\r\n        let pos = v3(centerPos.x, centerPos.y + height * 0.5, 0);\r\n        top.setPosition(pos);\r\n\r\n        let bottom = this.wallBottomNode;\r\n        bottom.getComponent(UITransform).width = top.getComponent(UITransform).width;\r\n        bottom.getComponent(UITransform).height = top.getComponent(UITransform).height;\r\n        bottom.getComponent(BoxCollider2D).size.width = top.getComponent(BoxCollider2D).size.width;\r\n        bottom.getComponent(BoxCollider2D).size.height = top.getComponent(BoxCollider2D).size.height;\r\n        pos = v3(centerPos.x, centerPos.y - height * 0.5, 0);\r\n        bottom.setPosition(pos);\r\n\r\n        let left = this.wallLeftNode;\r\n        left.getComponent(UITransform).width = vWidth;\r\n        left.getComponent(UITransform).height = height;\r\n        left.getComponent(BoxCollider2D).size.width = vWidth;\r\n        left.getComponent(BoxCollider2D).size.height = height;\r\n        pos = v3(centerPos.x - width * 0.5 + vWidth * 0.5, centerPos.y, 0);\r\n        left.setPosition(pos);\r\n\r\n        let right = this.wallRightNode;\r\n        right.getComponent(UITransform).width = left.getComponent(UITransform).width;\r\n        right.getComponent(UITransform).height = left.getComponent(UITransform).height;\r\n        right.getComponent(BoxCollider2D).size.width = left.getComponent(BoxCollider2D).size.width;\r\n        right.getComponent(BoxCollider2D).size.height = left.getComponent(BoxCollider2D).size.height;\r\n        pos = v3(centerPos.x + width * 0.5 - vWidth * 0.5, centerPos.y, 0);\r\n        right.setPosition(pos);\r\n\r\n        this.refreshWallSideVal();\r\n\r\n        this.wallTopNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallBottomNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallLeftNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallRightNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallShineNode.active = true;\r\n        this.wallShineNode.position = v3(centerPos.x, centerPos.y - 15);\r\n        this.wallShineNode.getComponent(UITransform).width = width * 0.5 + 10;\r\n        this.wallShineNode.getComponent(UITransform).height = height * 0.5 + 10;\r\n\r\n        let shineOpacity = this.wallShineNode.getComponent(UIOpacity);\r\n        Tween.stopAllByTarget(shineOpacity);\r\n        tween(shineOpacity).to(0.3, { opacity: 255 }).to(0.3, { opacity: 0 }).union().repeat(3).call(() => {\r\n            this.wallShineNode.active = false;\r\n            this.wallTopNode.getComponent(UIOpacity).opacity = 255;\r\n            this.wallBottomNode.getComponent(UIOpacity).opacity = 255;\r\n            this.wallLeftNode.getComponent(UIOpacity).opacity = 255;\r\n            this.wallRightNode.getComponent(UIOpacity).opacity = 255;\r\n        }).start();\r\n\r\n    }\r\n\r\n    refreshWallSideVal() {\r\n        this.wallTopVal = this.wallTopNode.position.y - 20;\r\n        this.wallBottomVal = this.wallBottomNode.position.y + 30;\r\n        this.wallLeftVal = this.wallLeftNode.position.x + 20;\r\n        this.wallRightVal = this.wallRightNode.position.x - 20;\r\n    }\r\n\r\n    hideWallLayer() {\r\n        this.wallLayer.active = false;\r\n    }\r\n\r\n    fightPause() {\r\n        this.pauseVal++;\r\n        if (this.pauseVal > 1) {\r\n            return;\r\n        }\r\n\r\n        let camera = mapModel.mapFightCamera;\r\n        let width = view.getVisibleSize().width;\r\n        let height = view.getVisibleSize().height;\r\n        let texture = new RenderTexture();\r\n        texture.reset({ width: width, height: height });\r\n\r\n        // 原生平台上会出现花屏（UI摄像机残留问题），因此暂时隐藏UI根节点，等待截屏完成后再恢复\r\n        find(\"Canvas/Camera\").active = false;\r\n\r\n        camera.targetTexture = texture;\r\n        // 执行渲染，单个渲染会报错，那就直接全部渲染一次吧（单个渲染：cc.director.root.pipeline.render([camera.camera]);）\r\n        director.root.frameMove(0);\r\n        camera.targetTexture = null;\r\n\r\n        find(\"Canvas/Camera\").active = true;\r\n\r\n        let sp = new SpriteFrame();\r\n        sp.texture = texture;\r\n\r\n        mapModel.mapLayer.fightCapNode.getComponent(Sprite).spriteFrame = sp;\r\n        mapModel.mapLayer.fightCapNode.active = true;\r\n\r\n        this.node.active = false;\r\n    }\r\n\r\n    fightResume() {\r\n        this.pauseVal--;\r\n        if (this.pauseVal > 0) {\r\n            return;\r\n        }\r\n        let camera = mapModel.mapFightCamera;\r\n        camera.targetTexture = null;\r\n\r\n        this.node.active = true;\r\n        mapModel.mapLayer.fightCapNode.active = false;\r\n        mapModel.player.stopMove();\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (!this.stopTimeCount) {\r\n            // 时间\r\n            mapModel.time += dt;\r\n\r\n            // 经验池\r\n            this.expTimeCount += dt;\r\n            while (this.expTimeCount >= 1) {\r\n                myLog.d(`expTimeCount：${this.expTimeCount}`);\r\n                this.expTimeCount--;\r\n                if (mapModel.expTypeRow) {\r\n                    myLog.d(`mapModel.expTypeRow-->time:${mapModel.time}, startT:${mapModel.expTypeRow.startTime}, endT:${mapModel.expTypeRow.endTime}`);\r\n                    if (mapModel.time >= mapModel.expTypeRow.startTime && mapModel.time <= mapModel.expTypeRow.endTime) {\r\n                        mapModel.expPool += mapModel.expTypeRow.expSpeed;\r\n                        myLog.d(`当前经验池---${mapModel.expPool}`,)\r\n                    } else {\r\n                        mapModel.expTypeRow = designManager.getRowById(constants.tableName.expType, mapModel.expTypeRow.id + 1);\r\n                    }\r\n                    this.setString(mapModel.mapLayer.expNumNode, mapModel.expPool);\r\n                }\r\n            }\r\n        }\r\n        mapModel.mapLayer.refreshTimeNode();\r\n\r\n        if (this.skillBombCd > 0) {\r\n            this.skillBombCd -= dt;\r\n        } else {\r\n            this.skillBombCd = 0;\r\n        }\r\n        if (this.skillHealCd > 0) {\r\n            this.skillHealCd -= dt;\r\n        } else {\r\n            this.skillHealCd = 0;\r\n        }\r\n\r\n        // 各个子系统\r\n        mapModel.weaponSystem.updateLogic(dt);\r\n        mapModel.monsterSystem.updateLogic(dt);\r\n        mapModel.skillSystem.updateLogic(dt);\r\n        mapModel.propSystem.updateLogic(dt);\r\n        mapModel.bulletSystem.updateLogic(dt);\r\n    }\r\n\r\n    updatePhysicsWorld() {\r\n        physicsWorld.step(mapModel.mapFightLayer);\r\n    }\r\n\r\n    updateBoxHintLayer(dt: number) {\r\n        let minDis = 999999;\r\n        let minProp: Prop = null;\r\n        let playerPos = mapModel.player.node.position;\r\n        mapModel.propSystem.forAllPropById(constants.propIds.box2, (prop: Prop) => {\r\n            let node = prop.node;\r\n            let pos = node.position;\r\n            let tf = node.getComponent(UITransform);\r\n            let add = (tf.width + tf.height) * 0.5;\r\n            if ((Math.abs(pos.x - playerPos.x) <= mapModel.visibleHalfSize.width + add)\r\n                && (Math.abs(pos.y - playerPos.y) <= mapModel.visibleHalfSize.height + add)) {\r\n                return;\r\n            }\r\n            let dis = Vec2.distance(pos, playerPos);\r\n            if (dis < minDis) {\r\n                minDis = dis;\r\n                minProp = prop;\r\n            }\r\n        });\r\n        if (!minProp) {\r\n            this.boxHintNode.active = false;\r\n            return;\r\n        }\r\n        this.boxHintNode.active = true;\r\n\r\n        let direction = minProp.node.getPosition().subtract(playerPos);\r\n        let angle = utilTools.radianToAngle(Math.atan2(direction.y, direction.x));\r\n        this.boxArrowNode.angle = angle;\r\n\r\n        let propPos = minProp.node.position;\r\n        let gap = 80;\r\n\r\n        let x = propPos.x - playerPos.x;\r\n        let halfWidth = view.getVisibleSize().width * 0.5 - gap;\r\n        if (x > halfWidth) {\r\n            x = halfWidth;\r\n        } else if (x < -halfWidth) {\r\n            x = -halfWidth;\r\n        }\r\n\r\n        let y = propPos.y - playerPos.y;\r\n        let halfHeight = view.getVisibleSize().height * 0.5 - gap;\r\n        if (y > halfHeight - 320) {\r\n            y = halfHeight - 320;\r\n        } else if (y < -halfHeight) {\r\n            y = -halfHeight;\r\n        }\r\n\r\n        this.boxHintNode.position = v3(x, y);\r\n\r\n\r\n    }\r\n\r\n    // 获得3选1数组\r\n    getSelectItemArr() {\r\n        let arr = [];\r\n\r\n        // 武器\r\n        let hasFull = false;\r\n        if (mapModel.weaponSystem.weaponArr.length >= constants.design.weaponNum) {\r\n            hasFull = true;\r\n        }\r\n        let row = designManager.getLastRow(constants.tableName.weapon);\r\n        for (let i = 1; i <= row.type; i++) {\r\n            let info = mapModel.weaponSystem.getWeaponInfoByType(i);\r\n            if (info) {\r\n                let row = designManager.getRowById(constants.tableName.weapon, info.id);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    continue;\r\n                }\r\n            } else if (hasFull) {\r\n                continue;\r\n            }\r\n            let item: any = {};\r\n            item.name = constants.tableName.weapon;\r\n            item.weight = 1;\r\n            item.type = i;\r\n            item.info = info;\r\n            arr.push(item);\r\n        }\r\n\r\n        // 主动技能\r\n        hasFull = false;\r\n        if (mapModel.skillSystem.skillArr.length >= constants.design.skill1Num) {\r\n            hasFull = true;\r\n        }\r\n        row = designManager.getLastRow(constants.tableName.skill);\r\n        for (let i = 1; i <= row.type; i++) {\r\n            let info = mapModel.skillSystem.getSkillInfoByType(i);\r\n            if (info) {\r\n                let row = designManager.getRowById(constants.tableName.skill, info.id);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    continue;\r\n                }else if (row.lv >= constants.design.maxLv - 1){ //2024-10-18 判断4级技能对应的突破被动技能是否拥有\r\n                    if (!mapModel.skillSystem.canBreakthrough(row.type)) {\r\n                        continue;\r\n                    }\r\n                }\r\n            } else if (hasFull) {\r\n                continue;\r\n            }\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill;\r\n            item.weight = 1;\r\n            item.type = i;\r\n            item.info = info;\r\n            arr.push(item);\r\n        }\r\n\r\n        // 被动技能\r\n        hasFull = false;\r\n        if (mapModel.skillSystem.skill2Arr.length >= constants.design.skill2Num) {\r\n            hasFull = true;\r\n        }\r\n        row = designManager.getLastRow(constants.tableName.skill2);\r\n        for (let i = 1; i <= row.type; i++) {\r\n            let info = mapModel.skillSystem.getSkill2InfoByType(i);\r\n            if (info) {\r\n                let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    continue;\r\n                }\r\n            } else if (hasFull) {\r\n                continue;\r\n            }\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill2;\r\n            item.weight = 1;\r\n            item.type = i;\r\n            item.info = info;\r\n            arr.push(item);\r\n        }\r\n\r\n\r\n        arr = utilTools.getRowsByWeightAndNum(arr, 3);\r\n        while (arr.length < 3) {\r\n            // 补充鸡腿\r\n            let item: any = {};\r\n            item.name = constants.tableName.prop;\r\n            item.id = constants.propIds.addHpPercent;\r\n            arr.push(item);\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    refreshCamera(dt: number) {\r\n        if (mapModel.mapFightCamera.orthoHeight <= mapModel.cameraOrthoHeight) {\r\n            return;\r\n        }\r\n        mapModel.mapFightCamera.orthoHeight--;\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.updateBoxHintLayer(dt);\r\n    }\r\n\r\n    lateUpdate(dt: number): void {\r\n\r\n        // //背景跟随\r\n        let position = mapModel.player.node.getPosition();\r\n        let bg = this.mapFightBgLayer;\r\n        let sprite = bg.getComponent(Sprite);\r\n        let material = sprite.getMaterial(0);\r\n        let uvOffset = new Vec2(position.x / 1024.0, -position.y / 1024.0);\r\n        material.setProperty(\"tilingOffset\", uvOffset);\r\n        bg.position = position;\r\n    }\r\n\r\n}\r\n\r\n","import { js } from \"cc\";\r\n\r\nexport class MapWrap<K extends string | number, V>{\r\n\tprotected _objects;\r\n\tprotected _size = 0;\r\n\r\n\tconstructor(array?: Array<[K, V]>) {\r\n\t\tthis._objects = js.createMap(true);\r\n\t\tthis._size = 0;\r\n\t\tif (array) {\r\n\t\t\tfor (let i = 0; i < array.length; i++) {\r\n\t\t\t\tthis.set(array[i][0], array[i][1]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic set size(size) {\r\n\t\tthis._size = size;\r\n\t}\r\n\r\n\tpublic set objects(objects) {\r\n\t\tthis._objects = objects\r\n\t}\r\n\r\n\tpublic get size(): number {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic clear(): void {\r\n\t\tthis._objects = js.createMap(true);\r\n\t\tthis._size = 0;\r\n\t}\r\n\r\n\tpublic has(key: K): boolean {\r\n\t\treturn key as any in this._objects;\r\n\t}\r\n\r\n\tpublic set(key: K, value: V): void {\r\n\t\tif (!this.has(key)) {\r\n\t\t\tthis._size++;\r\n\t\t}\r\n\t\tthis._objects[key] = value;\r\n\t}\r\n\r\n\tpublic get(key: K): V {\r\n\t\tif (!this.has(key)) return null;\r\n\t\treturn this._objects[key];\r\n\t}\r\n\r\n\tpublic delete(key: K): void {\r\n\t\tif (this.has(key)) {\r\n\t\t\tdelete this._objects[key];\r\n\t\t\tthis._size--;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic keys(): K[] {\r\n\t\tlet keys = Object.keys(this._objects);\r\n\t\treturn keys as any;\r\n\t}\r\n\r\n\tpublic values<V>(): V[] {\r\n\t\tlet keys = this.keys();\r\n\t\tlet values = [];\r\n\t\tkeys.forEach(key => {\r\n\t\t\tvalues.push(this.get(key));\r\n\t\t})\r\n\t\treturn values;\r\n\t}\r\n\r\n\tpublic toArray(isNumberKey?: boolean): Array<[K, V]> {\r\n\t\tlet rets = [];\r\n\t\tlet keys = this.keys();\r\n\t\tkeys.forEach(key => {\r\n\t\t\trets.push([!isNumberKey ? key : parseInt(key as any), this.get(key)]);\r\n\t\t})\r\n\t\treturn rets;\r\n\t}\r\n\r\n\tpublic forEach<T>(callBack: { (value: V, key: K): T }): T {\r\n\t\tlet keys = this.keys();\r\n\t\tfor (let i = 0; i < keys.length; i++) {\r\n\t\t\tlet result = callBack(this._objects[keys[i]], keys[i]);\r\n\t\t\tif (!!result) return result;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic rforEach<T>(callBack: { (value: V, key: K): T }): T {\r\n\t\tlet keys = this.keys();\r\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\r\n\t\t\tlet result = callBack(this._objects[keys[i]], keys[i]);\r\n\t\t\tif (!!result) return result;\r\n\t\t}\r\n\t}\r\n}","\r\n\r\nexport default function MD5(data){\r\n    // for test/debug\r\n    function fflog(msg) {\r\n        try {\r\n            //console.log(msg);\r\n        } catch(e) {}\r\n    }\r\n \r\n    // convert number to (unsigned) 32 bit hex, zero filled string\r\n    function to_zerofilled_hex(n) {\r\n        var t1 = (n >>> 24).toString(16);\r\n        var t2 = (n & 0x00FFFFFF).toString(16);\r\n        return \"00\".substr(0, 2 - t1.length) + t1 +\r\n            \"000000\".substr(0, 6 - t2.length) + t2;\r\n    }\r\n \r\n    // convert array of chars to array of bytes (note: Unicode not supported)\r\n    function chars_to_bytes(ac) {\r\n        var retval = [];\r\n        for (var i = 0; i < ac.length; i++) {\r\n            retval = retval.concat(str_to_bytes(ac[i]));\r\n        }\r\n        return retval;\r\n    }\r\n \r\n \r\n    // convert a 64 bit unsigned number to array of bytes. Little endian\r\n    function int64_to_bytes(num) {\r\n        var retval = [];\r\n        for (var i = 0; i < 8; i++) {\r\n            retval.push(num & 0xFF);\r\n            num = num >>> 8;\r\n        }\r\n        return retval;\r\n    }\r\n \r\n    //  32 bit left-rotation\r\n    function rol(num, places) {\r\n        return ((num << places) & 0xFFFFFFFF) | (num >>> (32 - places));\r\n    }\r\n \r\n    // The 4 MD5 functions\r\n    function fF(b, c, d) {\r\n        return (b & c) | (~b & d);\r\n    }\r\n \r\n    function fG(b, c, d) {\r\n        return (d & b) | (~d & c);\r\n    }\r\n \r\n    function fH(b, c, d) {\r\n        return b ^ c ^ d;\r\n    }\r\n \r\n    function fI(b, c, d) {\r\n        return c ^ (b | ~d);\r\n    }\r\n \r\n    // pick 4 bytes at specified offset. Little-endian is assumed\r\n    function bytes_to_int32(arr, off) {\r\n        return (arr[off + 3] << 24) | (arr[off + 2] << 16) | (arr[off + 1] << 8) | (arr[off]);\r\n    }\r\n \r\n    /*\r\n     Conver string to array of bytes in UTF-8 encoding\r\n     See:\r\n     http://www.dangrossman.info/2007/05/25/handling-utf-8-in-javascript-php-and-non-utf8-databases/\r\n     http://stackoverflow.com/questions/1240408/reading-bytes-from-a-javascript-string\r\n     How about a String.getBytes(<ENCODING>) for Javascript!? Isn't it time to add it?\r\n     */\r\n    function str_to_bytes(str) {\r\n        // alert(\"got \" + str.length + \" chars\")\r\n        var retval = [ ];\r\n        for (var i = 0; i < str.length; i++)\r\n            if (str.charCodeAt(i) <= 0x7F) {\r\n                retval.push(str.charCodeAt(i));\r\n            } else {\r\n                var tmp = encodeURIComponent(str.charAt(i)).substr(1).split('%');\r\n                for (var j = 0; j < tmp.length; j++) {\r\n                    retval.push(parseInt(tmp[j], 0x10));\r\n                }\r\n            }\r\n        return retval;\r\n    };\r\n \r\n \r\n    // convert the 4 32-bit buffers to a 128 bit hex string. (Little-endian is assumed)\r\n    function int128le_to_hex(a, b, c, d) {\r\n        var ra = \"\";\r\n        var t = 0;\r\n        var ta = 0;\r\n        for (var i = 3; i >= 0; i--) {\r\n            ta = arguments[i];\r\n            t = (ta & 0xFF);\r\n            ta = ta >>> 8;\r\n            t = t << 8;\r\n            t = t | (ta & 0xFF);\r\n            ta = ta >>> 8;\r\n            t = t << 8;\r\n            t = t | (ta & 0xFF);\r\n            ta = ta >>> 8;\r\n            t = t << 8;\r\n            t = t | ta;\r\n            ra = ra + to_zerofilled_hex(t);\r\n        }\r\n        return ra;\r\n    }\r\n \r\n    // check input data type and perform conversions if needed\r\n    var databytes = null;\r\n    // String\r\n    if (typeof data == 'string') {\r\n        // convert string to array bytes\r\n        databytes = str_to_bytes(data);\r\n    } else if (data.constructor == Array) {\r\n        if (data.length === 0) {\r\n            // if it's empty, just assume array of bytes\r\n            databytes = data;\r\n        } else if (typeof data[0] == 'string') {\r\n            databytes = chars_to_bytes(data);\r\n        } else if (typeof data[0] == 'number') {\r\n            databytes = data;\r\n        } else {\r\n            fflog(\"input data type mismatch\");\r\n            return null;\r\n        }\r\n    } else {\r\n        fflog(\"input data type mismatch\");\r\n        return null;\r\n    }\r\n \r\n    // save original length\r\n    var org_len = databytes.length;\r\n \r\n    // first append the \"1\" + 7x \"0\"\r\n    databytes.push(0x80);\r\n \r\n    // determine required amount of padding\r\n    var tail = databytes.length % 64;\r\n    // no room for msg length?\r\n    if (tail > 56) {\r\n        // pad to next 512 bit block\r\n        for (var i = 0; i < (64 - tail); i++) {\r\n            databytes.push(0x0);\r\n        }\r\n        tail = databytes.length % 64;\r\n    }\r\n    for (i = 0; i < (56 - tail); i++) {\r\n        databytes.push(0x0);\r\n    }\r\n    // message length in bits mod 512 should now be 448\r\n    // append 64 bit, little-endian original msg length (in *bits*!)\r\n    databytes = databytes.concat(int64_to_bytes(org_len * 8));\r\n \r\n    // initialize 4x32 bit state\r\n    var h0 = 0x67452301;\r\n    var h1 = 0xEFCDAB89;\r\n    var h2 = 0x98BADCFE;\r\n    var h3 = 0x10325476;\r\n \r\n    // temp buffers\r\n    var a = 0,\r\n        b = 0,\r\n        c = 0,\r\n        d = 0;\r\n \r\n \r\n    function _add(n1, n2) {\r\n        return 0x0FFFFFFFF & (n1 + n2)\r\n    }\r\n \r\n    // function update partial state for each run\r\n    var updateRun = function(nf, sin32, dw32, b32) {\r\n        var temp = d;\r\n        d = c;\r\n        c = b;\r\n        //b = b + rol(a + (nf + (sin32 + dw32)), b32);\r\n        b = _add(b,\r\n            rol(\r\n                _add(a,\r\n                    _add(nf, _add(sin32, dw32))\r\n                ), b32\r\n            )\r\n        );\r\n        a = temp;\r\n    };\r\n \r\n \r\n    // Digest message\r\n    for (i = 0; i < databytes.length / 64; i++) {\r\n        // initialize run\r\n        a = h0;\r\n        b = h1;\r\n        c = h2;\r\n        d = h3;\r\n \r\n        var ptr = i * 64;\r\n \r\n        // do 64 runs\r\n        updateRun(fF(b, c, d), 0xd76aa478, bytes_to_int32(databytes, ptr), 7);\r\n        updateRun(fF(b, c, d), 0xe8c7b756, bytes_to_int32(databytes, ptr + 4), 12);\r\n        updateRun(fF(b, c, d), 0x242070db, bytes_to_int32(databytes, ptr + 8), 17);\r\n        updateRun(fF(b, c, d), 0xc1bdceee, bytes_to_int32(databytes, ptr + 12), 22);\r\n        updateRun(fF(b, c, d), 0xf57c0faf, bytes_to_int32(databytes, ptr + 16), 7);\r\n        updateRun(fF(b, c, d), 0x4787c62a, bytes_to_int32(databytes, ptr + 20), 12);\r\n        updateRun(fF(b, c, d), 0xa8304613, bytes_to_int32(databytes, ptr + 24), 17);\r\n        updateRun(fF(b, c, d), 0xfd469501, bytes_to_int32(databytes, ptr + 28), 22);\r\n        updateRun(fF(b, c, d), 0x698098d8, bytes_to_int32(databytes, ptr + 32), 7);\r\n        updateRun(fF(b, c, d), 0x8b44f7af, bytes_to_int32(databytes, ptr + 36), 12);\r\n        updateRun(fF(b, c, d), 0xffff5bb1, bytes_to_int32(databytes, ptr + 40), 17);\r\n        updateRun(fF(b, c, d), 0x895cd7be, bytes_to_int32(databytes, ptr + 44), 22);\r\n        updateRun(fF(b, c, d), 0x6b901122, bytes_to_int32(databytes, ptr + 48), 7);\r\n        updateRun(fF(b, c, d), 0xfd987193, bytes_to_int32(databytes, ptr + 52), 12);\r\n        updateRun(fF(b, c, d), 0xa679438e, bytes_to_int32(databytes, ptr + 56), 17);\r\n        updateRun(fF(b, c, d), 0x49b40821, bytes_to_int32(databytes, ptr + 60), 22);\r\n        updateRun(fG(b, c, d), 0xf61e2562, bytes_to_int32(databytes, ptr + 4), 5);\r\n        updateRun(fG(b, c, d), 0xc040b340, bytes_to_int32(databytes, ptr + 24), 9);\r\n        updateRun(fG(b, c, d), 0x265e5a51, bytes_to_int32(databytes, ptr + 44), 14);\r\n        updateRun(fG(b, c, d), 0xe9b6c7aa, bytes_to_int32(databytes, ptr), 20);\r\n        updateRun(fG(b, c, d), 0xd62f105d, bytes_to_int32(databytes, ptr + 20), 5);\r\n        updateRun(fG(b, c, d), 0x2441453, bytes_to_int32(databytes, ptr + 40), 9);\r\n        updateRun(fG(b, c, d), 0xd8a1e681, bytes_to_int32(databytes, ptr + 60), 14);\r\n        updateRun(fG(b, c, d), 0xe7d3fbc8, bytes_to_int32(databytes, ptr + 16), 20);\r\n        updateRun(fG(b, c, d), 0x21e1cde6, bytes_to_int32(databytes, ptr + 36), 5);\r\n        updateRun(fG(b, c, d), 0xc33707d6, bytes_to_int32(databytes, ptr + 56), 9);\r\n        updateRun(fG(b, c, d), 0xf4d50d87, bytes_to_int32(databytes, ptr + 12), 14);\r\n        updateRun(fG(b, c, d), 0x455a14ed, bytes_to_int32(databytes, ptr + 32), 20);\r\n        updateRun(fG(b, c, d), 0xa9e3e905, bytes_to_int32(databytes, ptr + 52), 5);\r\n        updateRun(fG(b, c, d), 0xfcefa3f8, bytes_to_int32(databytes, ptr + 8), 9);\r\n        updateRun(fG(b, c, d), 0x676f02d9, bytes_to_int32(databytes, ptr + 28), 14);\r\n        updateRun(fG(b, c, d), 0x8d2a4c8a, bytes_to_int32(databytes, ptr + 48), 20);\r\n        updateRun(fH(b, c, d), 0xfffa3942, bytes_to_int32(databytes, ptr + 20), 4);\r\n        updateRun(fH(b, c, d), 0x8771f681, bytes_to_int32(databytes, ptr + 32), 11);\r\n        updateRun(fH(b, c, d), 0x6d9d6122, bytes_to_int32(databytes, ptr + 44), 16);\r\n        updateRun(fH(b, c, d), 0xfde5380c, bytes_to_int32(databytes, ptr + 56), 23);\r\n        updateRun(fH(b, c, d), 0xa4beea44, bytes_to_int32(databytes, ptr + 4), 4);\r\n        updateRun(fH(b, c, d), 0x4bdecfa9, bytes_to_int32(databytes, ptr + 16), 11);\r\n        updateRun(fH(b, c, d), 0xf6bb4b60, bytes_to_int32(databytes, ptr + 28), 16);\r\n        updateRun(fH(b, c, d), 0xbebfbc70, bytes_to_int32(databytes, ptr + 40), 23);\r\n        updateRun(fH(b, c, d), 0x289b7ec6, bytes_to_int32(databytes, ptr + 52), 4);\r\n        updateRun(fH(b, c, d), 0xeaa127fa, bytes_to_int32(databytes, ptr), 11);\r\n        updateRun(fH(b, c, d), 0xd4ef3085, bytes_to_int32(databytes, ptr + 12), 16);\r\n        updateRun(fH(b, c, d), 0x4881d05, bytes_to_int32(databytes, ptr + 24), 23);\r\n        updateRun(fH(b, c, d), 0xd9d4d039, bytes_to_int32(databytes, ptr + 36), 4);\r\n        updateRun(fH(b, c, d), 0xe6db99e5, bytes_to_int32(databytes, ptr + 48), 11);\r\n        updateRun(fH(b, c, d), 0x1fa27cf8, bytes_to_int32(databytes, ptr + 60), 16);\r\n        updateRun(fH(b, c, d), 0xc4ac5665, bytes_to_int32(databytes, ptr + 8), 23);\r\n        updateRun(fI(b, c, d), 0xf4292244, bytes_to_int32(databytes, ptr), 6);\r\n        updateRun(fI(b, c, d), 0x432aff97, bytes_to_int32(databytes, ptr + 28), 10);\r\n        updateRun(fI(b, c, d), 0xab9423a7, bytes_to_int32(databytes, ptr + 56), 15);\r\n        updateRun(fI(b, c, d), 0xfc93a039, bytes_to_int32(databytes, ptr + 20), 21);\r\n        updateRun(fI(b, c, d), 0x655b59c3, bytes_to_int32(databytes, ptr + 48), 6);\r\n        updateRun(fI(b, c, d), 0x8f0ccc92, bytes_to_int32(databytes, ptr + 12), 10);\r\n        updateRun(fI(b, c, d), 0xffeff47d, bytes_to_int32(databytes, ptr + 40), 15);\r\n        updateRun(fI(b, c, d), 0x85845dd1, bytes_to_int32(databytes, ptr + 4), 21);\r\n        updateRun(fI(b, c, d), 0x6fa87e4f, bytes_to_int32(databytes, ptr + 32), 6);\r\n        updateRun(fI(b, c, d), 0xfe2ce6e0, bytes_to_int32(databytes, ptr + 60), 10);\r\n        updateRun(fI(b, c, d), 0xa3014314, bytes_to_int32(databytes, ptr + 24), 15);\r\n        updateRun(fI(b, c, d), 0x4e0811a1, bytes_to_int32(databytes, ptr + 52), 21);\r\n        updateRun(fI(b, c, d), 0xf7537e82, bytes_to_int32(databytes, ptr + 16), 6);\r\n        updateRun(fI(b, c, d), 0xbd3af235, bytes_to_int32(databytes, ptr + 44), 10);\r\n        updateRun(fI(b, c, d), 0x2ad7d2bb, bytes_to_int32(databytes, ptr + 8), 15);\r\n        updateRun(fI(b, c, d), 0xeb86d391, bytes_to_int32(databytes, ptr + 36), 21);\r\n \r\n        // update buffers\r\n        h0 = _add(h0, a);\r\n        h1 = _add(h1, b);\r\n        h2 = _add(h2, c);\r\n        h3 = _add(h3, d);\r\n    }\r\n    // Done! Convert buffers to 128 bit (LE)\r\n    return int128le_to_hex(h3, h2, h1, h0);//.toUpperCase();\r\n}","import { BoxCollider2D, Color, Component, find, macro, Node, PhysicsSystem2D, ProgressBar, sp, Tween, v2, v3, Vec2, Vec3, view, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { ShineColor } from '../../shader/ShineColor';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Monster')\r\nexport class Monster extends Component {\r\n\r\n    id: number;\r\n    hp: number = 0;\r\n    hpMax: number;\r\n    atk: number = 0;\r\n    speed: number = 0;\r\n    speedCutPrecent: number = 0; //减速百分比\r\n    row: any;\r\n    isBoss: number = 0;\r\n\r\n    isPauseMove: boolean;\r\n    canFace: boolean = true;\r\n    distancePlayer: number;\r\n\r\n    bodyNode: Node;\r\n    collider: BoxCollider2D;\r\n    hpProgress: ProgressBar;\r\n\r\n    isSpine: boolean;\r\n    shineColor: ShineColor;\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    direction: Vec3;\r\n    touchPlayerTimeCount: number = 0;\r\n    targetDirection: Vec3;\r\n\r\n    // Vec3集中缓存\r\n    vec3Obj = {\r\n        playerPos: v3(0, 0, 0),\r\n        nodePos: v3(0, 0, 0),\r\n        nodeScale: v3(0, 0, 0),\r\n        hpScale: v3(0, 0, 0),\r\n        bodyNodeScale: v3(0, 0, 0),\r\n\r\n        outVec3: v3(0, 0, 0),\r\n        vec3Temp: v3(0, 0, 0),\r\n    };\r\n\r\n    // 射线检测距离\r\n    raycastDis: number = 0;\r\n    sideRadian: number = 0;\r\n\r\n    waitHit: boolean;\r\n\r\n    monsterUtil: any;\r\n\r\n    // 测试移动卡住bug用\r\n    tempMoveCount = 0;\r\n    hasNum:number = 0; // 缓解怪物重叠碰撞导致卡住不动\r\n\r\n    onLoad() {\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.collider = this.node.getComponent(BoxCollider2D);\r\n\r\n        let hpProgressNode = find(\"hpProgress\", this.node);\r\n        if (hpProgressNode) {\r\n            this.hpProgress = hpProgressNode.getComponent(ProgressBar);\r\n        }\r\n\r\n        if (this.bodyNode.getComponent(sp.Skeleton)) {\r\n            this.isSpine = true;\r\n        } else {\r\n            this.isSpine = false;\r\n        }\r\n        this.shineColor = this.bodyNode.addComponent(ShineColor);\r\n        this.animationCtrl = this.bodyNode.addComponent(AnimationCtrl);\r\n\r\n        this.vec3Obj.bodyNodeScale = this.bodyNode.getScale().clone();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n\r\n    }\r\n\r\n    onDisable() {\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    setBodySkin() {\r\n        let sk = this.bodyNode.getComponent(sp.Skeleton);\r\n        if (!sk) {\r\n            return;\r\n        }\r\n        if (this.row.type != constants.monsterTypes.boss) {\r\n            return;\r\n        }\r\n        let flag = 1;\r\n        if (mapModel.mapId == 3 || mapModel.mapId == 4) {\r\n            flag = 2;\r\n        }\r\n        sk.setSkin(\"skin\" + flag);\r\n    }\r\n\r\n    init(id: number) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n\r\n        this.node.setScale(v3(1, 1, 1));\r\n\r\n        this.unscheduleAllCallbacks();\r\n        Tween.stopAllByTarget(this.node);\r\n        if (this.shineColor) {\r\n            this.shineColor.removeShineColorMaterial();\r\n        }\r\n\r\n        this.tempMoveCount = 0;\r\n        this.hasNum = 0;\r\n\r\n        this.canFace = true;\r\n        this.isPauseMove = false;\r\n        this.distancePlayer = 0;\r\n        this.touchPlayerTimeCount = 0;\r\n        this.targetDirection = null;\r\n\r\n        this.collider.enabled = true;\r\n        this.animationCtrl.playAnimation(constants.animations.walk);\r\n\r\n        let row = designManager.getRowById(constants.tableName.monster, id);\r\n        this.row = row;\r\n\r\n        this.waitHit = false;\r\n\r\n        this.raycastDis = this.collider.size.width / 2;\r\n        this.sideRadian = Math.random() > 0.5 ? Math.PI / 2 : -Math.PI / 2;\r\n\r\n        // 初始位置生成规则：屏幕边缘的随机一个位置\r\n        let size = view.getVisibleSize();\r\n        let pos = cocosUtil.getRectPos(mapModel.player.node, size.width + 100, size.height + 100);\r\n        this.node.position = pos;\r\n\r\n        this.id = id;\r\n        this.atk = row.atk;\r\n        this.hp = row.hp;\r\n        this.speed = row.speed;\r\n        this.speedCutPrecent = 0;\r\n        if (mapModel.floor > 0) {\r\n            let floorRow = designManager.getRowById(constants.tableName.towerFloor, mapModel.floor);\r\n            let hp = this.hp * (1 + floorRow.hp / 100);\r\n            this.hp = Math.ceil(hp);\r\n            this.atk = Math.ceil(this.atk * (1 + floorRow.atk / 100));\r\n        }\r\n\r\n        if (row.type != constants.monsterTypes.boss) {\r\n            // 额外加强\r\n            let mapRow = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n            let atkP = 1;\r\n            if (mapRow && mapRow.atk > 0) {\r\n                atkP = mapRow.atk;\r\n            }\r\n            let hpP = 1;\r\n            if (mapRow && mapRow.hp > 0) {\r\n                hpP = mapRow.hp;\r\n            }\r\n            this.atk = this.atk * atkP;\r\n            this.hp = this.hp * hpP;\r\n\r\n\r\n            // 怪物随着时间加强\r\n            let arr = designManager.getTable(constants.tableName.monsterTimeAdd);\r\n            let addRow = null;\r\n            for (let i = 0; i < arr.length; i++) {\r\n                let row = arr[i];\r\n                if (mapModel.time <= row.time) {\r\n                    addRow = row;\r\n                    break;\r\n                }\r\n            }\r\n            if (!addRow) {\r\n                addRow = designManager.getLastRow(constants.tableName.monsterTimeAdd);\r\n            }\r\n            this.speed = Math.ceil(this.speed * addRow.speed);\r\n            this.hp = Math.ceil(this.hp * addRow.hp);\r\n            this.atk = Math.ceil(this.atk * addRow.atk);\r\n        }\r\n\r\n        this.hpMax = this.hp;\r\n        this.isBoss = 0;\r\n\r\n        this.refreshHpLayer();\r\n        this.setBodySkin();\r\n\r\n        try {\r\n            let monsterStr = \"Monster\" + id;\r\n            switch (id) {\r\n                case 13:\r\n                case 16:\r\n                case 17:\r\n                    monsterStr = \"Monster13\";\r\n                    break;\r\n                case 12:\r\n                case 18:\r\n                    monsterStr = \"Monster12\";\r\n                    break;\r\n                case 25:\r\n                    monsterStr = \"Monster4\";\r\n                    break;\r\n                case 26:\r\n                    monsterStr = \"Monster5\";\r\n                    break;\r\n                case 27:\r\n                    monsterStr = \"Monster6\";\r\n                    break;\r\n                case 28:\r\n                    monsterStr = \"Monster23\";\r\n                    break;\r\n                case 29:\r\n                    monsterStr = \"Monster22\";\r\n                    break;\r\n                case 30:\r\n                    monsterStr = \"Monster21\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            let monsterUtil = cocosUtil.addComponentOnce(this, monsterStr);\r\n            monsterUtil.unscheduleAllCallbacks();\r\n            this.monsterUtil = monsterUtil;\r\n            // @ts-ignore\r\n            monsterUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.id = this.id;\r\n        data.hp = this.hp;\r\n        data.atk = this.atk;\r\n        data.pos = this.node.position;\r\n        data.isBoss = this.isBoss;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.hp = data.hp;\r\n        this.atk = data.atk;\r\n        this.node.position = data.pos;\r\n        this.isBoss = data.isBoss;\r\n\r\n        this.refreshHpLayer();\r\n        if (this.isBoss) {\r\n            // 缓存boss对象\r\n            mapModel.monsterSystem.bossMonster = this;\r\n            mapModel.mapLayer.refreshBossHpLayer();\r\n        }\r\n    }\r\n\r\n    animationEndCallback(aniName: string) {\r\n        this.recycleSelf();\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.monsterSystem.recycleMonsterNode(this.node);\r\n    }\r\n\r\n    // 蹭到玩家\r\n    contactBeginPlayer() {\r\n        this.touchPlayer();\r\n        this.unschedule(this.touchPlayer);\r\n        this.schedule(this.touchPlayer, this.row.touchTime, macro.REPEAT_FOREVER);\r\n    }\r\n    // 结束蹭玩家\r\n    contactEndPlayer() {\r\n        this.unschedule(this.touchPlayer);\r\n    }\r\n    touchPlayer() {\r\n        if (this.touchPlayerTimeCount < this.row.touchTime) {\r\n            return;\r\n        }\r\n        this.touchPlayerTimeCount = 0;\r\n        mapModel.player.hitWithDam(this.atk);\r\n    }\r\n\r\n    // 来自玩家的挤压\r\n    playerForceMove(movePos: Vec3) {\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n\r\n        playerPos.subtract(pos).negative();\r\n        // 只有挡在玩家前进方向的怪物才需要推开\r\n        let radian = Vec2.angle(playerPos, movePos);\r\n        if (radian > Math.PI * 0.7) {\r\n            return;\r\n        }\r\n        playerPos.normalize().multiplyScalar(movePos.length());\r\n        pos.add(playerPos);\r\n        this.node.setPosition(pos);\r\n    }\r\n\r\n    // 来自其他怪物的挤压\r\n    monsterForceMove(monster: Monster, movePos: Vec3) {\r\n        if (this.isPauseMove) {\r\n            return;\r\n        }\r\n\r\n        let monsterPos = monster.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n\r\n        monsterPos.subtract(pos).negative();\r\n        // 只有挡在怪物前进方向的怪物才需要推开\r\n        let radian = Vec2.angle(monsterPos, movePos);\r\n        if (radian > Math.PI * 0.7) {\r\n            return;\r\n        }\r\n        monsterPos.normalize().multiplyScalar(movePos.length());\r\n        pos.add(monsterPos);\r\n        this.node.setPosition(pos);\r\n    }\r\n\r\n    // 受到伤害\r\n    hitWithDam(dam: number, shineColor?: Color, extraObj?: any) {\r\n        if (this.hp <= 0 || dam <= 0) {\r\n            return;\r\n        }\r\n\r\n        // 再加上玩家局外的攻击力\r\n        dam = dam + mapModel.player.atk;\r\n\r\n        // 是否有减速效果\r\n        if (extraObj && extraObj.speedCutPrecent && extraObj.speedCutDuration && this.row.type == constants.monsterTypes.common) {\r\n            this.unschedule(this.resetSpeedCutPrecent);\r\n            this.speedCutPrecent = extraObj.speedCutPrecent;\r\n            this.scheduleOnce(this.resetSpeedCutPrecent, extraObj.speedCutDuration)\r\n        }\r\n\r\n        // 缩放\r\n        this.bodyNode.scale = this.vec3Obj.bodyNodeScale;\r\n        cocosUtil.tweenHitScale(this.bodyNode, 0.05);\r\n\r\n        if (this.shineColor && this.row.type != constants.monsterTypes.boss) {\r\n            // 闪白\r\n            let materialPath = constants.materials.shineColor;\r\n            if (this.isSpine) {\r\n                materialPath = constants.materials.shineColorSpine;\r\n            }\r\n            this.shineColor.startShine(materialPath, shineColor);\r\n        }\r\n\r\n        this.hp -= dam;\r\n        if (this.hp < 0) {\r\n            this.hp = 0;\r\n        }\r\n        this.refreshHpLayer();\r\n        if (this.isBoss) {\r\n            mapModel.mapLayer.bossSubHp(dam);\r\n        }\r\n        if (this.id == constants.monsterIds.boxMonster) {\r\n            // 宝箱怪掉金币\r\n            mapModel.propSystem.addProp(constants.propIds.boxMonsterCoin, cocosUtil.convertToWorldSpace(this.node));\r\n        }\r\n\r\n        if (this.hp <= 0) {\r\n            // 怪物阵亡\r\n            mapModel.mapSystem.monsterDead(this.id, cocosUtil.convertToWorldSpace(this.node));\r\n            this.unschedule(this.touchPlayer);\r\n            this.collider.enabled = false;\r\n            this.animationCtrl.playAnimation(constants.animations.die, false, (aniName: string) => {\r\n                mapModel.monsterSystem.monsterDead(this.id);\r\n                this.animationEndCallback(aniName);\r\n                if (this.monsterUtil && this.monsterUtil.selfDead) {\r\n                    this.monsterUtil.selfDead();\r\n                }\r\n            });\r\n            if (this.monsterUtil) {\r\n                this.monsterUtil.unscheduleAllCallbacks();\r\n            }\r\n        }\r\n        // 伤害数字\r\n        let color = null;\r\n        if (dam >= designManager.config.damColor2) {\r\n            color = \"#f56d0a\";\r\n        } else if (dam >= designManager.config.damColor1) {\r\n            color = \"#e1b600\";\r\n        }\r\n        mapModel.numSystem.addNum(dam, cocosUtil.convertToWorldSpace(this.node), color);\r\n    }\r\n\r\n    refreshHpLayer() {\r\n        if (!this.hpProgress) {\r\n            return;\r\n        }\r\n        this.hpProgress.progress = this.hp / this.hpMax;\r\n    }\r\n\r\n    setDirection(direction: Vec3) {\r\n        this.direction = direction.normalize();\r\n    }\r\n\r\n    getBulletDirection() {\r\n        let direction = null;\r\n        if (this.node.getScale().x > 0) {\r\n            // 向左\r\n            direction = v3(-1, 0, 0);\r\n        } else {\r\n            // 向右\r\n            direction = v3(1, 0, 0);\r\n        }\r\n        return direction;\r\n    }\r\n\r\n    getInfoPosition(index?: number, isWorld?: boolean) {\r\n        let p = this.node.getPosition();\r\n        let infoNode = find(\"info\", this.node);\r\n        if (index > 0) {\r\n            infoNode = find(\"info\" + index, this.node);\r\n        }\r\n        if (infoNode) {\r\n            infoNode.active = false;\r\n            // 位置修正\r\n            let infoPos = infoNode.getPosition();\r\n            if (this.node.scale.x < 0) {\r\n                infoPos.x = -infoPos.x;\r\n            }\r\n            p.x += infoPos.x;\r\n            p.y += infoPos.y;\r\n        }\r\n        if (isWorld) {\r\n            p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        }\r\n\r\n        return p;\r\n    }\r\n\r\n    getMoveSpeed() {\r\n        return this.speed * (1 - this.speedCutPrecent);\r\n    }\r\n\r\n    resetSpeedCutPrecent(){\r\n        this.speedCutPrecent = 0;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        // 向目标点移动，默认是玩家\r\n        mapModel.player.node.getPosition(this.vec3Obj.playerPos);\r\n        this.node.getPosition(this.vec3Obj.nodePos);\r\n        let direction = null;\r\n        if (this.monsterUtil && this.monsterUtil.getDirection) {\r\n            direction = this.monsterUtil.getDirection();\r\n        } else {\r\n            direction = this.vec3Obj.playerPos.subtract(this.vec3Obj.nodePos).normalize();\r\n        }\r\n\r\n        let targetDirection = null;\r\n        for (let i = 0; i < 2; i++) {\r\n            let dir = direction;\r\n            if (i == 1) {\r\n                dir = Vec3.rotateZ(this.vec3Obj.outVec3, direction, Vec3.ZERO, this.sideRadian);\r\n                dir = dir.normalize();\r\n            }\r\n            let mp = dir.multiplyScalar(this.raycastDis);\r\n            cocosUtil.vec3CopyVal(this.vec3Obj.vec3Temp, this.vec3Obj.nodePos);\r\n            let endPos = this.vec3Obj.vec3Temp.add(mp);\r\n            endPos = cocosUtil.convertToWorldSpaceWithPos(this.node, endPos);\r\n            let colliderArr = PhysicsSystem2D.instance.testPoint(v2(endPos.x, endPos.y));\r\n            let has = false;\r\n            for (let k = 0; k < colliderArr.length; k++) {\r\n                let collider = colliderArr[k];\r\n                if (collider != this.collider && (collider.node != this.node)\r\n                    && collider.group == physicsGroup.MONSTER) {\r\n                        has = true;// 这里会导致怪物停滞，很多怪物重叠的时候\r\n                        { // 2024-10-24 优化上面问题\r\n                            this.hasNum++;\r\n                            if(this.hasNum>10){\r\n                                has = false;\r\n                                this.hasNum = 0;\r\n                            }\r\n                        }\r\n                        \r\n                    break;\r\n                }\r\n            }\r\n            if (!has) {\r\n                targetDirection = dir;\r\n                break;\r\n            }\r\n        }\r\n        this.targetDirection = targetDirection;\r\n\r\n        if (!this.targetDirection) {\r\n            return;\r\n        }\r\n\r\n        this.targetDirection = this.targetDirection.clone();\r\n    }\r\n\r\n    tempPos:Vec3;\r\n    isStop:boolean = false;\r\n    move(dt: number) {\r\n        this.touchPlayerTimeCount += dt;\r\n\r\n        if (this.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        this.tempMoveCount++;\r\n        if (this.tempMoveCount>=1000) {\r\n            if (Vec2.distance(this.node.getPosition() ,this.tempPos) <= 1) {\r\n                console.log(\"怪物停着没有动过！！！！\");\r\n                this.isStop = true;\r\n            }\r\n        }else if(this.tempMoveCount == 1){\r\n            this.tempPos = this.node.getPosition();\r\n        }\r\n\r\n        mapModel.player.node.getPosition(this.vec3Obj.playerPos);\r\n        this.node.getPosition(this.vec3Obj.nodePos);\r\n        this.distancePlayer = Vec2.distance(this.vec3Obj.nodePos, this.vec3Obj.playerPos);\r\n\r\n        // 朝向玩家\r\n        if (mapModel.player.hp > 0 && this.canFace) {\r\n            this.node.getScale(this.vec3Obj.nodeScale);\r\n            if (this.hpProgress) {\r\n                this.hpProgress.node.getScale(this.vec3Obj.hpScale);\r\n            }\r\n            if (this.vec3Obj.nodePos.x >= this.vec3Obj.playerPos.x) {\r\n                this.vec3Obj.nodeScale.x = Math.abs(this.vec3Obj.nodeScale.x);\r\n                if (this.hpProgress) {\r\n                    this.vec3Obj.hpScale.x = 1;\r\n                }\r\n            } else {\r\n                this.vec3Obj.nodeScale.x = -Math.abs(this.vec3Obj.nodeScale.x);\r\n                if (this.hpProgress) {\r\n                    this.vec3Obj.hpScale.x = -1;\r\n                }\r\n            }\r\n            this.node.scale = this.vec3Obj.nodeScale;\r\n            if (this.hpProgress) {\r\n                this.hpProgress.node.scale = this.vec3Obj.hpScale;\r\n            }\r\n        }\r\n\r\n        let speed = this.getMoveSpeed();\r\n        if (speed <= 0 || this.isPauseMove) {\r\n            return;\r\n        }\r\n\r\n        if (this.monsterUtil && this.monsterUtil.moveStop) {\r\n            return;\r\n        }\r\n\r\n        if (this.monsterUtil && this.monsterUtil.minDisPlayer > 0 && this.distancePlayer <= this.monsterUtil.minDisPlayer) {\r\n            return;\r\n        }\r\n\r\n        if (!this.targetDirection) {\r\n            return;\r\n        }\r\n\r\n        let dis = speed * dt;\r\n        let movePos = this.targetDirection.normalize().multiplyScalar(dis);\r\n        this.direction = movePos;\r\n\r\n        this.node.position = this.vec3Obj.nodePos.add(movePos);\r\n        if (this.row.type == constants.monsterTypes.boss) {\r\n            mapModel.mapSystem.adjustInWall(this.node);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 小雷达\r\n@ccclass('Monster12')\r\nexport class Monster12 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1012;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        if (this.monster.id == 18) {\r\n            this.bulletId = 1016;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 4);\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 3 + Math.random() * 2;\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 精英机器人\r\n@ccclass('Monster13')\r\nexport class Monster13 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1013;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        if (this.monster.id == 16) {\r\n            this.bulletId = 1014;\r\n        } else if (this.monster.id == 17) {\r\n            this.bulletId = 1015;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 2);\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 2 + Math.random();\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, find, tween, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 炸弹巨人\r\n@ccclass('Monster21')\r\nexport class Monster21 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1017;\r\n\r\n    otherCollider1: BoxCollider2D;\r\n    otherCollider2: BoxCollider2D;\r\n    otherCollider3: BoxCollider2D;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.otherCollider1 = find(\"collider1\", this.node).getComponent(BoxCollider2D);\r\n        this.otherCollider2 = find(\"collider2\", this.node).getComponent(BoxCollider2D);\r\n        this.otherCollider3 = find(\"collider3\", this.node).getComponent(BoxCollider2D);\r\n\r\n        this.resetColliders();\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    resetColliders() {\r\n        this.otherCollider1.enabled = false;\r\n        this.otherCollider2.enabled = false;\r\n        this.otherCollider3.enabled = false;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        this.scheduleOnce(() => {\r\n            let arr: any = [\r\n                { id: 2, weight: 10 },\r\n                { id: 3, weight: 10 },\r\n            ];\r\n\r\n            let skill1Tag = this.getSkill1Tag();\r\n            if (skill1Tag > 0) {\r\n                arr.push({ id: 1, weight: 100, tag: skill1Tag });\r\n            }\r\n\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            if (ret) {\r\n                this[\"useSkill\" + ret.id](ret);\r\n            } else {\r\n                this.startSkillLogic();\r\n            }\r\n        }, 1.5 + Math.random());\r\n    }\r\n\r\n    getSkill1Tag() {\r\n        if (this.monster.distancePlayer >= 560) {\r\n            return 0;\r\n        }\r\n        let pos = mapModel.player.node.position.clone().subtract(this.node.position);\r\n        let angle = cocosUtil.vec2XAngle(pos);\r\n        if ((angle >= 345 || angle <= 15) || (angle >= 165 && angle <= 195)) {\r\n            // 中间\r\n            return 1;\r\n        }\r\n        if ((angle >= 30 && angle <= 60) || (angle >= 120 && angle <= 150)) {\r\n            // 上面\r\n            return 2;\r\n        }\r\n        if ((angle >= 300 && angle <= 330) || (angle >= 210 && angle <= 240)) {\r\n            // 下面\r\n            return 3;\r\n        }\r\n        return 0;\r\n\r\n    }\r\n    useSkill1(info: any) {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n\r\n        let otherCollider = this[\"otherCollider\" + info.tag];\r\n        otherCollider.enabled = true;\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attackHand\" + info.tag, () => {\r\n            otherCollider.enabled = false;\r\n            this.monster.canFace = true;\r\n            this.moveStop = false;\r\n            this.startSkillLogic();\r\n        });\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        let dis = 500 + Math.random() * 100;\r\n\r\n        let time = 1;\r\n        let extraObj: any = {};\r\n        extraObj.duration = time;\r\n        extraObj.monster = this.monster;\r\n        extraObj.dis = dis;\r\n        mapModel.hintSystem.addHint(HintNames.blockArrow, cocosUtil.convertToWorldSpace(this.node), 0, extraObj);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.moveStop = true;\r\n            this.monster.canFace = false;\r\n            let pos = mapModel.player.node.position.clone();\r\n            pos.subtract(this.node.position).normalize().multiplyScalar(dis);\r\n            let targetPos = this.node.position.clone().add(pos);\r\n\r\n            tween(this.node).to(1, { position: targetPos }, {\r\n                easing: \"smooth\", onUpdate: () => {\r\n                    mapModel.mapSystem.adjustInWall(this.node);\r\n                }\r\n            }).start();\r\n\r\n            this.monster.animationCtrl.playAnimationOnce(\"attack2\", () => {\r\n                this.monster.canFace = true;\r\n                this.moveStop = false;\r\n                this.startSkillLogic();\r\n            });\r\n        }, time);\r\n\r\n    }\r\n\r\n    useSkill3() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n\r\n        // 发射4个跟踪子弹\r\n        let direction = this.monster.getBulletDirection();\r\n        this.scheduleOnce(() => {\r\n            for (let i = 0; i < 4; i++) {\r\n                this.scheduleOnce(() => {\r\n                    let pos = this.monster.getInfoPosition(i, true);\r\n                    mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, pos, direction);\r\n                }, i * 0.2);\r\n            }\r\n        }, 0.45);\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack3\", () => {\r\n            this.moveStop = false;\r\n            this.monster.canFace = true;\r\n            this.startSkillLogic();\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪\r\n@ccclass('Monster22')\r\nexport class Monster22 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    // 光波\r\n    bulletId: number = 1018;\r\n    // 水滴\r\n    bulletId2: number = 1019;\r\n    // 泥浆\r\n    bulletId3: number = 1020;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    startSkillLogic() {\r\n        this.scheduleOnce(() => {\r\n            let arr: any = [\r\n                { id: 1, weight: 10 },\r\n                { id: 2, weight: 10 },\r\n            ];\r\n\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            if (ret) {\r\n                this[\"useSkill\" + ret.id]();\r\n            } else {\r\n                this.startSkillLogic();\r\n            }\r\n        }, 1.5 + Math.random());\r\n    }\r\n\r\n    useSkill1() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack1\", () => {\r\n            this.monster.canFace = true;\r\n            this.moveStop = false;\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.5);\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        // 一圈水滴\r\n        let arr = cocosUtil.getCircleDirectionArr(8);\r\n        utilTools.forArr(arr, (direction: any) => {\r\n            mapModel.bulletSystem.addBullet(this.bulletId2, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node), direction, this.bulletId3);\r\n        });\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    selfDead() {\r\n        mapModel.bulletSystem.addBullet(this.bulletId3, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node), null, 2);\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 盾兵\r\n@ccclass('Monster23')\r\nexport class Monster23 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    otherCollider: BoxCollider2D;\r\n\r\n    isFollow: boolean;\r\n\r\n    monsterId: number = 14;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n        this.isFollow = false;\r\n\r\n        this.otherCollider = this.getComponents(BoxCollider2D)[1];\r\n        this.resetCollider();\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    resetCollider() {\r\n        this.otherCollider.enabled = false;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        this.scheduleOnce(() => {\r\n            let arr: any = [\r\n                { id: 1, weight: 10 },\r\n                { id: 2, weight: 10 },\r\n            ];\r\n\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            if (ret) {\r\n                this[\"useSkill\" + ret.id]();\r\n            } else {\r\n                this.startSkillLogic();\r\n            }\r\n        }, 1.5 + Math.random());\r\n    }\r\n\r\n    useSkill1() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n        this.isFollow = true;\r\n        this.monster.collider.enabled = false;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.isFollow = false;\r\n        }, 1);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.otherCollider.enabled = true;\r\n            this.monster.collider.enabled = true;\r\n        }, 1.5);\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack1\", () => {\r\n            this.monster.canFace = true;\r\n            this.moveStop = false;\r\n            this.resetCollider();\r\n            this.startSkillLogic();\r\n        });\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        // 召唤小怪\r\n        for (let i = 0; i < 3; i++) {\r\n            this.scheduleOnce(() => {\r\n                let pos = cocosUtil.getAroundPos(this.node, 150 + 50 * Math.random(), 300);\r\n                mapModel.mapSystem.adjustInWall(pos, 160);\r\n                let worldPos = cocosUtil.convertToWorldSpaceWithPos(this.node, pos);\r\n\r\n                let extraObj: any = {};\r\n                extraObj.monsterId = this.monsterId;\r\n                mapModel.hintSystem.addHint(HintNames.targetPos3, worldPos, 0, extraObj);\r\n            }, i * 0.6);\r\n        }\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.isFollow) {\r\n            this.node.position = mapModel.player.node.getPosition();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 章鱼\r\n@ccclass('Monster3')\r\nexport class Monster3 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1001;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 5);\r\n\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 4 + Math.random() * 2;\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 狙击手\r\n@ccclass('Monster4')\r\nexport class Monster4 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    // 跟踪导弹\r\n    bulletId1: number = 1002;\r\n    // 一颗大子弹\r\n    bulletId2: number = 1003;\r\n\r\n    // 距离玩家最小距离\r\n    minDisPlayer: number = 300;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 2;\r\n        this.scheduleOnce(() => {\r\n            let ret = Math.random();\r\n            if (ret < 0.4) {\r\n                this.useSkill1();\r\n            } else if (ret < 0.7) {\r\n                this.useSkill1(3);\r\n            } else {\r\n                this.useSkill2();\r\n            }\r\n        }, time);\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack\", () => {\r\n            this.startSkillLogic();\r\n            this.moveStop = false;\r\n        });\r\n        this.scheduleOnce(() => {\r\n            // 发射一颗大子弹\r\n            let pos = this.monster.getInfoPosition(0, true);\r\n            let direction = this.monster.getBulletDirection();\r\n            mapModel.bulletSystem.addBullet(this.bulletId2, physicsGroup.MONSTER_BULLET, pos, direction);\r\n        }, 0.5);\r\n    }\r\n\r\n    useSkill1(num: number = 1) {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack\", () => {\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            // 发射三颗跟踪子弹\r\n            let pos = this.monster.getInfoPosition(0, true);\r\n            let direction = this.monster.getBulletDirection();\r\n\r\n            mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos, direction);\r\n\r\n            if (num == 3) {\r\n                let radian = utilTools.angleToRadian(50);\r\n                let direction2 = Vec3.rotateZ(this.outVec3, direction, Vec3.ZERO, radian);\r\n                mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos, direction2);\r\n\r\n                let direction3 = Vec3.rotateZ(this.outVec3, direction, Vec3.ZERO, -radian);\r\n                mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos, direction3);\r\n            }\r\n\r\n        }, 0.5);\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, tween, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 电锯人\r\n@ccclass('Monster5')\r\nexport class Monster5 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    otherCollider1: BoxCollider2D;\r\n    otherCollider2: BoxCollider2D;\r\n\r\n    // 齿轮子弹\r\n    bulletId: number = 1004;\r\n\r\n    otherColliderOffset: any;\r\n    otherColliderSize: any;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.otherCollider1 = monster.getComponents(BoxCollider2D)[1];\r\n        this.otherCollider2 = monster.getComponents(BoxCollider2D)[2];\r\n        this.resetOtherCollider();\r\n\r\n        this.startSkillLogic();\r\n\r\n    }\r\n\r\n    resetOtherCollider() {\r\n        this.otherCollider1.enabled = true;\r\n        this.otherCollider2.enabled = false;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 2 + Math.random() * 2;\r\n        this.scheduleOnce(() => {\r\n            if (this.monster.hp <= 0) {\r\n                return;\r\n            }\r\n            if (Math.random() < 0.6) {\r\n                this.attackWithSkill1();\r\n                return;\r\n            }\r\n            this.attackWithSkill2();\r\n        }, time);\r\n    }\r\n\r\n    attackWithSkill1() {\r\n        this.otherCollider1.enabled = false;\r\n        this.otherCollider2.enabled = true;\r\n        this.monster.animationCtrl.playAnimation(\"attack1\", true);\r\n        let speed = this.monster.speed;\r\n        this.monster.speed += speed * 2;\r\n        this.scheduleOnce(() => {\r\n            this.resetOtherCollider();\r\n            this.monster.animationCtrl.playAnimation(constants.animations.walk, true);\r\n            this.monster.speed = speed;\r\n            this.startSkillLogic();\r\n        }, 3);\r\n    }\r\n\r\n    attackWithSkill2() {\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack2\", () => {\r\n            this.startSkillLogic();\r\n        });\r\n\r\n        let pos = this.monster.node.getPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(pos).normalize();\r\n        direction.multiplyScalar(200);\r\n        pos.add(direction);\r\n\r\n        tween(this.monster.node).to(0.5, { position: pos }, { easing: \"quadOut\" }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            // 一圈子弹\r\n            let p = this.monster.getInfoPosition();\r\n            let arr = cocosUtil.getCircleDirectionArr(10);\r\n            p = cocosUtil.convertToWorldSpaceWithPos(this.monster.node, p);\r\n            utilTools.forArr(arr, (direction: any) => {\r\n                mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n            });\r\n        }, 0.5);\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, macro, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子\r\n@ccclass('Monster6')\r\nexport class Monster6 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    // 闪电\r\n    bulletId1: number = 1006;\r\n    // 大电球\r\n    bulletId2: number = 1007;\r\n    // 静态扳手\r\n    bulletId3: number = 1009;\r\n\r\n    numCount: number = 0;\r\n\r\n    otherCollider1: BoxCollider2D;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.otherCollider1 = monster.getComponents(BoxCollider2D)[1];\r\n        this.otherCollider1.enabled = false;\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    // 向指定目标方向移动\r\n    getDirection() {\r\n        let pos = this.monster.node.getPosition();\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        if (pos.x < playerPos.x) {\r\n            playerPos.x -= 150;\r\n        } else {\r\n            playerPos.x += 150;\r\n        }\r\n        playerPos.subtract(pos).normalize();\r\n\r\n        return playerPos;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 1 + Math.random();\r\n        this.scheduleOnce(() => {\r\n            let arr = [\r\n                { id: 3, weight: 10 },\r\n                { id: 4, weight: 20 }\r\n            ];\r\n            if (this.monster.distancePlayer <= 260) {\r\n                arr.push({ id: 1, weight: 20 });\r\n            }\r\n            if (this.monster.distancePlayer <= 460) {\r\n                arr.push({ id: 2, weight: 10 });\r\n            }\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            this[\"useSkill\" + ret.id]();\r\n        }, time);\r\n    }\r\n\r\n    useSkill4() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimation(\"attack4\", true);\r\n        this.numCount = 0;\r\n\r\n        this.schedule(() => {\r\n            this.numCount++;\r\n            let pos = this.monster.getInfoPosition(3, true);\r\n\r\n            let arr = cocosUtil.getCircleDirectionArr(6, 150);\r\n\r\n            for (let i = 0; i < 1; i++) {\r\n                let index = Math.floor(Math.random() * arr.length);\r\n                let targetPos = mapModel.player.node.getPosition().add(arr[index]);\r\n                arr.splice(index, 1);\r\n                mapModel.bulletSystem.addBullet(this.bulletId3, physicsGroup.MONSTER_BULLET, pos, null, targetPos);\r\n            }\r\n\r\n            if (this.numCount >= 3) {\r\n                this.moveStop = false;\r\n                this.monster.animationCtrl.playAnimation(\"walk\", true);\r\n                this.unscheduleAllCallbacks();\r\n                this.startSkillLogic();\r\n            }\r\n        }, 2, macro.REPEAT_FOREVER, 0);\r\n    }\r\n\r\n\r\n    // 大电球\r\n    useSkill3() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack3\", () => {\r\n            this.moveStop = false;\r\n            this.startSkillLogic();\r\n        });\r\n\r\n        let pos = this.monster.getInfoPosition(2, true);\r\n        mapModel.bulletSystem.addBullet(this.bulletId2, physicsGroup.MONSTER_BULLET, pos, null);\r\n    }\r\n\r\n    // 与玩家的距离<=460才会触发\r\n    // 闪电尾\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack2\", () => {\r\n            this.moveStop = false;\r\n            this.monster.canFace = true;\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            let pos = this.monster.getInfoPosition(0, true);\r\n            mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos);\r\n        }, 1);\r\n    }\r\n\r\n    // 与玩家的距离<=260才会触发\r\n    useSkill1() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack1\", () => {\r\n            this.moveStop = false;\r\n            this.otherCollider1.enabled = false;\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            this.otherCollider1.enabled = true;\r\n        }, 0.05);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 雷球\r\n@ccclass('Monster9')\r\nexport class Monster9 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1011;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 3);\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 3 + Math.random() * 1;\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { macro, Node, UITransform, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Bullet } from '../item/bullet/Bullet';\r\nimport { Monster } from '../item/monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MonsterSystem')\r\nexport class MonsterSystem extends BaseLayer {\r\n\r\n    // 按照怪物id进行UI分层\r\n    idMonsterLayerObj: any = {};\r\n\r\n    monsterCreateArr: any = [];\r\n\r\n    bossMonster: Monster;\r\n    bossCreateInfo: any;\r\n\r\n    // 一共产生的怪物数量\r\n    monsterNum: number = 0;\r\n    // 当前在显示的怪物数量\r\n    showMonsterNum: number = 0;\r\n    // 当前存活的怪物数量\r\n    aliveMonsterNum: number = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.schedule(this.refreshMonsterShow, 0.5, macro.REPEAT_FOREVER);\r\n        this.schedule(this.createMonsterLogic, 0.1, macro.REPEAT_FOREVER);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n    }\r\n\r\n    getSaveData() {\r\n        let monsterData: any = {};\r\n        monsterData.arr = [];\r\n        monsterData.bossCreateInfo = this.bossCreateInfo;\r\n\r\n        this.forAliveMonster((monster: Monster) => {\r\n            let info = monster.getSaveData();\r\n            monsterData.arr.push(info);\r\n        });\r\n\r\n        return monsterData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.arr, (info: any) => {\r\n            let monster = this.createMonster(info.id);\r\n            monster.loadSaveData(info);\r\n        });\r\n\r\n        this.bossCreateInfo = data.bossCreateInfo;\r\n        if (this.bossCreateInfo) {\r\n            this.createMonsterWithInfo(this.bossCreateInfo.id, this.bossCreateInfo.isBoss, this.bossCreateInfo.warn);\r\n        }\r\n    }\r\n\r\n    // 怪物显示优化\r\n    refreshMonsterShow(dt: number) {\r\n        let destroyCount = 1;\r\n        let showCount = 3;\r\n        let hideCount = 1;\r\n        let showNum = 0;\r\n        let aliveNum = 0;\r\n        let tmpArr = [];\r\n        this.forAliveMonster((monster: Monster, monsterNode: Node) => {\r\n            aliveNum++;\r\n            let row = designManager.getRowById(constants.tableName.monster, monster.id);\r\n            if (monster.distancePlayer < mapModel.dataRadius || !row.isData) {\r\n                // 显示怪物\r\n                showNum++;\r\n                if (!monsterNode.active && showCount > 0) {\r\n                    monsterNode.active = true;\r\n                    showCount--;\r\n                }\r\n            } else if (monster.distancePlayer < mapModel.destroyRadius) {\r\n                // 隐藏怪物\r\n                if (monsterNode.active && hideCount > 0) {\r\n                    hideCount--;\r\n                    monsterNode.active = false;\r\n                }\r\n            } else {\r\n                if (row.type == constants.monsterTypes.common && destroyCount > 0) {\r\n                    // 销毁怪物\r\n                    destroyCount--;\r\n                    tmpArr.push(monsterNode);\r\n                }\r\n            }\r\n        });\r\n        utilTools.forArr(tmpArr, (monsterNode: Node) => {\r\n            monsterNode.getComponent(Monster).recycleSelf();\r\n            aliveNum--;\r\n        });\r\n        this.setString(mapModel.mapLayer.showNumNode, showNum);\r\n        this.showMonsterNum = showNum;\r\n        this.aliveMonsterNum = aliveNum;\r\n    }\r\n\r\n    // 怪物生成逻辑\r\n    updateMapLevel(dt: number) {\r\n        // console.log(mapModel.time);\r\n        let removeIdArr = [];\r\n        utilTools.forArr(mapModel.mapLevelArr, (mapLevel: any) => {\r\n            // test\r\n            // mapLevel.row.maxNum = 100;\r\n            // mapLevel.row.createTime = 0.1;\r\n\r\n            if (mapLevel.row.maxNum > 0 && mapLevel.createCount >= mapLevel.row.maxNum) {\r\n                removeIdArr.push(mapLevel.id);\r\n                return;\r\n            }\r\n            if (mapLevel.row.endTime > 0 && mapModel.time > mapLevel.row.endTime + 0.5) {\r\n                removeIdArr.push(mapLevel.id);\r\n                return;\r\n            }\r\n\r\n            // 预警动画\r\n            if (mapLevel.row.warn && !mapLevel.hasWarn && mapModel.time >= mapLevel.row.startTime && !mapLevel.row.isBoss) {\r\n                mapLevel.hasWarn = true;\r\n                mapModel.mapSystem.startWarning(mapLevel.row.warn);\r\n            }\r\n\r\n            // 还没到达生成时间点\r\n            if (mapModel.time < mapLevel.row.startTime) {\r\n                return;\r\n            }\r\n\r\n            mapLevel.timeCount += dt;\r\n            \r\n            // 获取怪物生成数量\r\n            let num = utilTools.getFloatValue(mapLevel.row.createNum[0],mapLevel.row.createNum[1],true);\r\n\r\n            if (mapLevel.timeCount >= mapLevel.row.createTime || mapLevel.createCount == 0) {\r\n                // 生成怪物\r\n                if (mapLevel.createCount != 0) {\r\n                    mapLevel.timeCount -= mapLevel.row.createTime;\r\n                }\r\n                if (mapLevel.timeCount < 0) {\r\n                    console.log(\"stop...\");\r\n                }\r\n                for (let i = 0; i < num; i++) {\r\n                    mapLevel.createCount++;\r\n                    // console.log(`${mapLevel.id}-->生成了一只怪物：${mapLevel.row.monsterId}`);\r\n                    if (mapLevel.row.isBoss) {\r\n                        this.createMonsterWithInfo(mapLevel.row.monsterId, mapLevel.row.isBoss, mapLevel.row.warn);\r\n                        return true;\r\n                    }\r\n                    this.monsterCreateArr.push({ monsterId: mapLevel.row.monsterId, isBoss: mapLevel.row.isBoss });              \r\n                }\r\n                \r\n                if (playerModel.isRecordAd && mapModel.mapLayer.monsterAddFlag > 0) {\r\n                    for (let i = 0; i < mapModel.mapLayer.monsterAddFlag; i++) {\r\n                        this.monsterCreateArr.push({ monsterId: mapLevel.row.monsterId, isBoss: mapLevel.row.isBoss });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        let tmpArr = [];\r\n        utilTools.forArr(mapModel.mapLevelArr, (mapLevel: any) => {\r\n            if (removeIdArr.indexOf(mapLevel.id) != -1) {\r\n                return;\r\n            }\r\n            tmpArr.push(mapLevel);\r\n        });\r\n        mapModel.mapLevelArr = tmpArr;\r\n    }\r\n\r\n    createMonsterLogic(dt: number) {\r\n        if (!playerModel.isRecordAd && this.showMonsterNum >= 200) {\r\n            return;\r\n        }\r\n        let count = Math.ceil(this.monsterCreateArr.length / 10);\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            let info = this.monsterCreateArr.shift();\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this.createMonsterWithInfo(info.monsterId, info.isBoss);\r\n        }\r\n    }\r\n\r\n    getMonsterLayerNameById(id: number) {\r\n        return \"monsterLayer\" + id;\r\n    }\r\n\r\n    getMonsterLayerById(monsterId: number) {\r\n        let monsterLayer = this.idMonsterLayerObj[monsterId];\r\n        if (!monsterLayer) {\r\n            monsterLayer = new Node(this.getMonsterLayerNameById(monsterId));\r\n            monsterLayer.addComponent(UITransform);\r\n            monsterLayer.setPosition(0, 0);\r\n            monsterLayer.parent = this.node;\r\n            this.idMonsterLayerObj[monsterId] = monsterLayer;\r\n\r\n            let row = designManager.getRowById(constants.tableName.monster, monsterId);\r\n            let nodePoolUtil = monsterLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(mapModel.monsterPrefabObj[row.prefab]);\r\n        }\r\n        return monsterLayer;\r\n    }\r\n\r\n    createMonster(monsterId: number, worldPos?: Vec3) {\r\n        try {\r\n            let nodePoolUtil: NodePoolUtil = this.getMonsterLayerById(monsterId).getComponent(NodePoolUtil);\r\n            let monsterNode = nodePoolUtil.getNode();\r\n            let monster: Monster = cocosUtil.addComponentOnce(monsterNode, Monster);\r\n            monster.init(monsterId);\r\n            if (worldPos) {\r\n                monster.node.position = cocosUtil.convertToNodeSpace(monster.node, worldPos);\r\n            }\r\n\r\n            this.monsterNum++;\r\n            this.setString(mapModel.mapLayer.monsterNumNode, this.monsterNum);\r\n\r\n            return monster;\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        \r\n    }\r\n\r\n    async createMonsterWithInfo(monsterId: number, isBoss: number, warn?: string) {\r\n        // // test\r\n        // if (isBoss) {\r\n        //     monsterId = 23;\r\n        // }\r\n\r\n        if (isBoss) {\r\n            // 停止计时\r\n            mapModel.mapSystem.stopTimeCount = true;\r\n            // 2024-10-25 先将原来的出怪计划暂存, 为了不用分开配置BOSS前后的计划\r\n            if (mapModel.mapLevelArr.length > 0) {\r\n                mapModel.mapLevelArr_Backup = []\r\n                mapModel.mapLevelArr_Backup = utilTools.copyObj(mapModel.mapLevelArr);\r\n            }\r\n            \r\n            // 移除所有怪物计划\r\n            mapModel.mapLevelArr = []; \r\n            this.monsterCreateArr = [];\r\n\r\n            this.bossCreateInfo = {\r\n                id: monsterId,\r\n                isBoss: isBoss,\r\n                warn: warn\r\n            };\r\n            if (this.getMonsterNumByType(constants.monsterTypes.elite) > 0) {\r\n                // 如果有精英怪，就要等精英怪打死后才能出现\r\n                return;\r\n            }\r\n\r\n            mapModel.mapSystem.startWarning(warn);\r\n            await cocosUtil.waitTimeAsync(this, 2);\r\n            this.bossCreateInfo = undefined;\r\n        }\r\n\r\n        let monster = this.createMonster(monsterId);\r\n\r\n        if (isBoss) {\r\n            monster.isBoss = isBoss;\r\n\r\n            // BOSS产生位置和预警\r\n            let pos = mapModel.player.node.getPosition();\r\n            pos.y += 400;\r\n            monster.node.position = pos;\r\n            monster.monsterUtil.moveStop = true;\r\n            monster.canFace = false;\r\n            monster.node.parent.active = false;\r\n            monster.collider.enabled = false;\r\n            this.scheduleOnce(() => {\r\n                monster.node.parent.active = true;\r\n                cocosUtil.tweenScaleIn(monster.node, 0.5, () => {\r\n                    monster.monsterUtil.moveStop = false;\r\n                    monster.canFace = true;\r\n                    monster.collider.enabled = true;\r\n                });\r\n\r\n                // let time = 0.5;\r\n                // monster.node.setScale(0, 0, 1);\r\n                // tween(monster.node).to(time, {\r\n                //     scale: v3(1.2, 1.2, 1)\r\n                // }).to(time / 2, {\r\n                //     scale: v3(1, 1, 1)\r\n                // }).call(() => {\r\n                //     monster.monsterUtil.moveStop = false;\r\n                //     monster.canFace = true;\r\n                // }).start();\r\n\r\n            }, 0.8);\r\n            mapModel.mapSystem.bossPosHintAnimationCtrl.node.active = true;\r\n            mapModel.mapSystem.bossPosHintAnimationCtrl.node.position = pos;\r\n            mapModel.mapSystem.bossPosHintAnimationCtrl.playAnimation(\"aa\", false, () => {\r\n                mapModel.mapSystem.bossPosHintAnimationCtrl.node.active = false;\r\n            });\r\n\r\n            // 销毁所有普通怪物\r\n            let hitArr = [];\r\n            this.forAliveMonster((monster: Monster) => {\r\n                if (monster.row.type != constants.monsterTypes.common) {\r\n                    return;\r\n                }\r\n                monster.waitHit = true;\r\n                let info: any = {};\r\n                info.monster = monster;\r\n                hitArr.push(info);\r\n            });\r\n            this.batchHitMonster(hitArr, hitArr.length);\r\n\r\n            // 怪物子弹全部消失\r\n            mapModel.bulletSystem.forVisibleMonsterBullet((bullet: Bullet) => {\r\n                bullet.recycleSelf();\r\n            });\r\n\r\n            // 显示围栏\r\n            mapModel.mapSystem.showWallLayer();\r\n\r\n            // 缓存boss对象\r\n            this.bossMonster = monster;\r\n\r\n            mapModel.mapLayer.refreshBossHpLayer();\r\n        }\r\n\r\n        return monster;\r\n    }\r\n\r\n    getMonsterNumByType(type: number = 0) {\r\n        let num = 0;\r\n        this.forAliveMonster((monster: Monster) => {\r\n            if (!type) {\r\n                num++;\r\n                return;\r\n            }\r\n            if (monster.row.type == type) {\r\n                num++;\r\n            }\r\n        });\r\n\r\n        return num;\r\n    }\r\n\r\n    monsterDead(id: number) {\r\n        let row = designManager.getRowById(constants.tableName.monster, id);\r\n        if (row.type == constants.monsterTypes.boss) {\r\n            mapModel.mapSystem.bossDead();\r\n        }\r\n        if (id == constants.monsterIds.boxMonster) {\r\n            // 宝箱怪阵亡弹窗\r\n            mapModel.mapLayer.popLayer(constants.layers.BoxMonsterLayer);\r\n        }\r\n\r\n        if (row.type == constants.monsterTypes.elite && this.bossCreateInfo) {\r\n            this.createMonsterWithInfo(this.bossCreateInfo.id, this.bossCreateInfo.isBoss, this.bossCreateInfo.warn);\r\n        }\r\n    }\r\n\r\n    // 分批怪物受击\r\n    batchHitMonster(hitArr: any, num: number = 2) {\r\n        let killMonsterFunc = () => {\r\n            for (let i = 0; i < num; i++) {\r\n                let hitInfo = hitArr.shift();\r\n                if (!hitInfo) {\r\n                    return;\r\n                }\r\n                let monster: Monster = hitInfo.monster;\r\n                if (monster.waitHit) {\r\n                    let dam = monster.hp;\r\n                    if (hitInfo.dam) {\r\n                        dam = hitInfo.dam;\r\n                    }\r\n                    monster.hitWithDam(dam);\r\n                    monster.waitHit = false;\r\n                }\r\n            }\r\n            this.scheduleOnce(() => {\r\n                killMonsterFunc();\r\n            });\r\n        };\r\n        killMonsterFunc();\r\n    }\r\n\r\n    recycleMonsterNode(monsterNode: Node) {\r\n        let monster = monsterNode.getComponent(Monster);\r\n        monster.hp = 0;\r\n        let monsterId = monster.id;\r\n        let nodePoolUtil = this.getMonsterLayerById(monsterId).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(monsterNode);\r\n    }\r\n\r\n    // 遍历屏幕范围内的存活怪物\r\n    forVisibleMonster(cb: (monster: Monster) => void) {\r\n        utilTools.forArr(this.node.children, (monsterLayer: Node) => {\r\n            utilTools.forArr(monsterLayer.children, (monsterNode: Node) => {\r\n                if (!monsterNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(monsterNode)) {\r\n                    return;\r\n                }\r\n                let monster = monsterNode.getComponent(Monster);\r\n                if (monster.hp <= 0) {\r\n                    return;\r\n                }\r\n                cb(monster);\r\n            });\r\n        });\r\n    }\r\n\r\n    // 遍历所有的存活怪物\r\n    forAliveMonster(cb: (monster: Monster, monsterNode: Node) => void) {\r\n        utilTools.forArr(this.node.children, (monsterLayer: Node) => {\r\n            utilTools.forArr(monsterLayer.children, (monsterNode: Node) => {\r\n                let monster = monsterNode.getComponent(Monster);\r\n                if (monster.hp <= 0) {\r\n                    return;\r\n                }\r\n                cb(monster, monsterNode);\r\n            });\r\n        });\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.updateMapLevel(dt);\r\n        this.forAliveMonster((monster: Monster) => {\r\n            monster.updateLogic(dt);\r\n        });\r\n    }\r\n\r\n    update(dt: number) {\r\n        // 怪物移动\r\n        this.forAliveMonster((monster: Monster) => {\r\n            monster.move(dt);\r\n        });\r\n    }\r\n}\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MoreGameLayer')\r\nexport class MoreGameLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property({ type: Node }) audioIconOpen: Node = null;\r\n    @property({ type: Node }) audioIconClose: Node = null;\r\n\r\n    onLoad() {\r\n        // this.fitNodeWidget(this.btnClose, 100)\r\n        this.node.getChildByName(\"icon\").localizeImg();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n        tyqSDK.hideCustomRectCenterAd()\r\n    }\r\n\r\n    start() {\r\n        ///   console.log(\"tyqSDK.showCustomRectCenterAd\")\r\n        let self = this\r\n        tyqSDK.showCustomRectCenterAd(function () {\r\n            self.closeBless()\r\n        })\r\n    }\r\n\r\n    closeBless() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    refreshAudioLayer() {\r\n        if (audioManager.musicVolume > 0) {\r\n            this.audioIconOpen.active = true;\r\n            this.audioIconClose.active = false;\r\n        } else {\r\n            this.audioIconOpen.active = false;\r\n            this.audioIconClose.active = true;\r\n        }\r\n    }\r\n\r\n\r\n    onClickBtnHome() {\r\n        tyqSDK.hideCustomRectCenterAd()\r\n        serverMsg.send(msgac.mapLeave);\r\n    }\r\n\r\n    onClickBtnAudio() {\r\n        if (audioManager.musicVolume > 0) {\r\n            audioManager.setMusicVolume(0);\r\n            audioManager.setEffectVolume(0);\r\n        } else {\r\n            audioManager.setMusicVolume(1);\r\n            audioManager.setEffectVolume(1);\r\n        }\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Color, IAssembler, RenderData, v3, Vec2 } from \"cc\";\r\nimport { JSB } from \"cc/env\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { MotionStreakUtil } from \"./MotionStreakUtil\";\r\n\r\nconst _tangent = new Vec2();\r\n// const _miter = new Vec2();\r\nconst _normal = new Vec2();\r\nconst _vec2 = new Vec2();\r\nlet QUAD_INDICES;\r\n\r\nfunction normal(out: Vec2, dir: Vec2) {\r\n    // get perpendicular\r\n    out.x = -dir.y;\r\n    out.y = dir.x;\r\n    return out;\r\n}\r\n\r\nfunction computeMiter(miter, lineA, lineB, halfThick, maxMultiple) {\r\n    // get tangent line\r\n    lineA.add(lineB, _tangent);\r\n    _tangent.normalize();\r\n\r\n    // get miter as a unit vector\r\n    miter.x = -_tangent.y;\r\n    miter.y = _tangent.x;\r\n    _vec2.x = -lineA.y;\r\n    _vec2.y = lineA.x;\r\n\r\n    // get the necessary length of our miter\r\n    let multiple = 1 / miter.dot(_vec2);\r\n    if (maxMultiple) {\r\n        multiple = Math.min(multiple, maxMultiple);\r\n    }\r\n    return halfThick * multiple;\r\n}\r\n\r\nexport const MotionStreakAssemblerUtil: IAssembler = {\r\n    createData(comp: MotionStreakUtil) {\r\n        const renderData = comp.requestRenderData();\r\n        renderData.dataLength = 4;\r\n        renderData.resize(16, (16 - 2) * 3);\r\n        return renderData;\r\n    },\r\n\r\n    tmpVec3: v3(0, 0, 0),\r\n    update(comp: MotionStreakUtil, dt: number) {\r\n        const stroke = comp.stroke / 2;\r\n\r\n        const node = comp.node;\r\n        const tx = node.getPosition().x;\r\n        const ty = node.getPosition().y;\r\n\r\n        const points = comp.points;\r\n\r\n        let cur;\r\n        if (points.length > 1) {\r\n            const point = points[0];\r\n            const difx = point.point.x - tx;\r\n            const dify = point.point.y - ty;\r\n            if ((difx * difx + dify * dify) < comp.minSeg) {\r\n                cur = point;\r\n            }\r\n        }\r\n\r\n        if (!cur) {\r\n            cur = new MotionStreakUtil.Point();\r\n            points.unshift(cur);\r\n        }\r\n\r\n        cur.setPoint(tx, ty);\r\n        cur.time = comp.fadeTime + dt;\r\n\r\n        let vertexCount = 0;\r\n        let indexCount = 0;\r\n\r\n        if (points.length < 2) {\r\n            return;\r\n        }\r\n\r\n        const renderData = comp.renderData!;\r\n        this.updateRenderDataCache(comp, renderData);\r\n        const color = comp.color;\r\n        const cr = color.r;\r\n        const cg = color.g;\r\n        const cb = color.b;\r\n        const ca = color.a;\r\n\r\n        const prev = points[1];\r\n        prev.distance = Vec2.subtract(_vec2, cur.point, prev.point).length();\r\n        _vec2.normalize();\r\n        prev.setDir(_vec2.x, _vec2.y);\r\n        cur.setDir(_vec2.x, _vec2.y);\r\n\r\n        renderData.dataLength = points.length * 2;\r\n\r\n        const data = renderData.data;\r\n        const fadeTime = comp.fadeTime;\r\n        let findLast = false;\r\n        for (let i = points.length - 1; i >= 0; i--) {\r\n            const p = points[i];\r\n            const point = p.point;\r\n            const dir = p.dir;\r\n            p.time -= dt;\r\n\r\n            if (p.time < 0) {\r\n                points.splice(i, 1);\r\n                continue;\r\n            }\r\n\r\n            const progress = p.time / fadeTime;\r\n\r\n            const next = points[i - 1];\r\n            if (!findLast) {\r\n                if (!next) {\r\n                    points.splice(i, 1);\r\n                    continue;\r\n                }\r\n\r\n                point.x = next.point.x - dir.x * progress;\r\n                point.y = next.point.y - dir.y * progress;\r\n            }\r\n            findLast = true;\r\n\r\n            normal(_normal, dir);\r\n\r\n            const da = progress * ca;\r\n            const c = ((da << 24) >>> 0) + (cb << 16) + (cg << 8) + cr;\r\n\r\n            let offset = vertexCount;\r\n\r\n            let tmpX = point.x + _normal.x * stroke;\r\n            let tmpY = point.y + _normal.y * stroke;\r\n            this.tmpVec3.x = tmpX;\r\n            this.tmpVec3.y = tmpY;\r\n            let pos = cocosUtil.convertToWorldSpaceWithPos(node, this.tmpVec3);\r\n            data[offset].x = pos.x;\r\n            data[offset].y = pos.y;\r\n\r\n            data[offset].u = 1;\r\n            data[offset].v = progress;\r\n            data[offset].color._val = c;\r\n\r\n            offset += 1;\r\n\r\n            // data[offset].x = point.x - _normal.x * stroke;\r\n            // data[offset].y = point.y - _normal.y * stroke;\r\n            tmpX = point.x - _normal.x * stroke;\r\n            tmpY = point.y - _normal.y * stroke;\r\n            this.tmpVec3.x = tmpX;\r\n            this.tmpVec3.y = tmpY;\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(node, this.tmpVec3);\r\n            data[offset].x = pos.x;\r\n            data[offset].y = pos.y;\r\n\r\n            data[offset].u = 0;\r\n            data[offset].v = progress;\r\n            data[offset].color._val = c;\r\n\r\n            vertexCount += 2;\r\n        }\r\n\r\n        indexCount = vertexCount <= 2 ? 0 : (vertexCount - 2) * 3;\r\n\r\n        renderData.resize(vertexCount, indexCount); // resize\r\n\r\n        if (JSB) {\r\n            const indexCount = renderData.indexCount;\r\n            this.createQuadIndices(comp, indexCount);\r\n            renderData.chunk.setIndexBuffer(QUAD_INDICES);\r\n\r\n            //  Fill all dataList to vData\r\n            this.updateWorldVertexAllData(comp);\r\n\r\n            renderData.updateRenderData(comp, comp.texture!);\r\n            // No need update WorldMatrix, so change dirty flag\r\n            // A dirty hack\r\n            renderData.renderDrawInfo.setVertDirty(false);\r\n            comp.node.hasChangedFlags = 0;\r\n        }\r\n    },\r\n\r\n    updateWorldVertexAllData(comp: MotionStreakUtil) {\r\n        const renderData = comp.renderData!;\r\n        const stride = renderData.floatStride;\r\n        const dataList = renderData.data;\r\n        const vData = renderData.chunk.vb;\r\n        for (let i = 0; i < dataList.length; i++) {\r\n            const offset = i * stride;\r\n            vData[offset + 0] = dataList[i].x;\r\n            vData[offset + 1] = dataList[i].y;\r\n            vData[offset + 2] = dataList[i].z;\r\n            vData[offset + 3] = dataList[i].u;\r\n            vData[offset + 4] = dataList[i].v;\r\n            Color.toArray(vData, dataList[i].color, offset + 5);\r\n        }\r\n    },\r\n\r\n    createQuadIndices(comp, indexCount) {\r\n        const renderData = comp.renderData!;\r\n        const chunk = renderData.chunk;\r\n        const vid = 0;\r\n        const meshBuffer = chunk.meshBuffer;\r\n        let indexOffset = meshBuffer.indexOffset;\r\n        QUAD_INDICES = null;\r\n        QUAD_INDICES = new Uint16Array(indexCount);\r\n        for (let i = 0, l = indexCount; i < l; i += 2) {\r\n            const start = vid + i;\r\n            QUAD_INDICES[indexOffset++] = start;\r\n            QUAD_INDICES[indexOffset++] = start + 2;\r\n            QUAD_INDICES[indexOffset++] = start + 1;\r\n            QUAD_INDICES[indexOffset++] = start + 1;\r\n            QUAD_INDICES[indexOffset++] = start + 2;\r\n            QUAD_INDICES[indexOffset++] = start + 3;\r\n        }\r\n    },\r\n\r\n    updateRenderDataCache(comp: MotionStreakUtil, renderData: RenderData) {\r\n        if (renderData.passDirty) {\r\n            renderData.updatePass(comp);\r\n        }\r\n        if (renderData.nodeDirty) {\r\n            renderData.updateNode(comp);\r\n        }\r\n        if (renderData.textureDirty && comp.texture) {\r\n            renderData.updateTexture(comp.texture);\r\n            renderData.material = comp.getRenderMaterial(0);\r\n        }\r\n        if (renderData.hashDirty) {\r\n            renderData.updateHash();\r\n        }\r\n    },\r\n\r\n    updateRenderData(comp: MotionStreakUtil) {\r\n    },\r\n\r\n    updateColor(comp: MotionStreakUtil) {\r\n    },\r\n\r\n    fillBuffers(comp: MotionStreakUtil, renderer: any) {\r\n        const renderData = comp.renderData!;\r\n        const chunk = renderData.chunk;\r\n        const dataList = renderData.data;\r\n\r\n        const vertexCount = renderData.vertexCount;\r\n        const indexCount = renderData.indexCount;\r\n\r\n        const vData = chunk.vb;\r\n        let vertexOffset = 0;\r\n        for (let i = 0; i < vertexCount; i++) {\r\n            const vert = dataList[i];\r\n            vData[vertexOffset++] = vert.x;\r\n            vData[vertexOffset++] = vert.y;\r\n            vData[vertexOffset++] = vert.z;\r\n            vData[vertexOffset++] = vert.u;\r\n            vData[vertexOffset++] = vert.v;\r\n            Color.toArray(vData, vert.color, vertexOffset);\r\n            vertexOffset += 4;\r\n        }\r\n\r\n        // fill index data\r\n        const bid = chunk.bufferId;\r\n        const vid = chunk.vertexOffset;\r\n        const meshBuffer = chunk.meshBuffer;\r\n        const ib = chunk.meshBuffer.iData;\r\n        let indexOffset = meshBuffer.indexOffset;\r\n        for (let i = 0, l = indexCount; i < l; i += 2) {\r\n            const start = vid + i;\r\n            ib[indexOffset++] = start;\r\n            ib[indexOffset++] = start + 2;\r\n            ib[indexOffset++] = start + 1;\r\n            ib[indexOffset++] = start + 1;\r\n            ib[indexOffset++] = start + 2;\r\n            ib[indexOffset++] = start + 3;\r\n        }\r\n\r\n        meshBuffer.indexOffset += renderData.indexCount;\r\n        meshBuffer.setDirty();\r\n    },\r\n};\r\n\r\nexport const MotionStreakAssemblerManager = {\r\n    getAssembler(comp: MotionStreakUtil) {\r\n        return MotionStreakAssemblerUtil;\r\n    },\r\n};\r\n\r\nMotionStreakUtil.Assembler = MotionStreakAssemblerManager;\r\n","import { Texture2D, UIRenderer, Vec2, _decorator } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nclass Point {\r\n    public point = new Vec2();\r\n    public dir = new Vec2();\r\n    public distance = 0;\r\n    public time = 0;\r\n\r\n    constructor(point?: Vec2, dir?: Vec2) {\r\n        if (point) this.point.set(point);\r\n        if (dir) this.dir.set(dir);\r\n    }\r\n\r\n    public setPoint(x, y) {\r\n        this.point.x = x;\r\n        this.point.y = y;\r\n    }\r\n\r\n    public setDir(x, y) {\r\n        this.dir.x = x;\r\n        this.dir.y = y;\r\n    }\r\n}\r\n\r\n@ccclass('MotionStreakUtil')\r\nexport class MotionStreakUtil extends UIRenderer {\r\n    public static Point = Point;\r\n\r\n    /**\r\n     * @en The fade time to fade.\r\n     * @zh 拖尾的渐隐时间，以秒为单位。\r\n     * @example\r\n     * motionStreak.fadeTime = 3;\r\n     */\r\n    @property\r\n    fadeTime = 1;\r\n\r\n    /**\r\n     * @en The minimum segment size.\r\n     * @zh 拖尾之间最小距离。\r\n     * @example\r\n     * motionStreak.minSeg = 3;\r\n     */\r\n    @property\r\n    minSeg = 10;\r\n\r\n    /**\r\n     * @en The stroke's width.\r\n     * @zh 拖尾的宽度。\r\n     * @example\r\n     * motionStreak.stroke = 64;\r\n     */\r\n    @property\r\n    stroke = 10;\r\n\r\n    /**\r\n     * @en The texture of the MotionStreak.\r\n     * @zh 拖尾的贴图。\r\n     * @example\r\n     * motionStreak.texture = newTexture;\r\n     */\r\n    @property(Texture2D)\r\n    texture: Texture2D;\r\n\r\n    /**\r\n     * @en The fast Mode.\r\n     * @zh 是否启用了快速模式。当启用快速模式，新的点会被更快地添加，但精度较低。\r\n     * @example\r\n     * motionStreak.fastMode = true;\r\n     */\r\n    @property\r\n    fastMode: boolean = true;\r\n\r\n    public get points() {\r\n        return this._points;\r\n    }\r\n\r\n\r\n    private _points: Point[] = [];\r\n\r\n    onLoad() {\r\n        if (!this.texture) {\r\n            // 动态加载拖尾纹理\r\n        }\r\n    }\r\n\r\n    public onEnable() {\r\n        super.onEnable();\r\n        this.reset();\r\n    }\r\n\r\n    protected _flushAssembler() {\r\n        const assembler = MotionStreakUtil.Assembler.getAssembler(this);\r\n\r\n        if (this._assembler !== assembler) {\r\n            this._assembler = assembler;\r\n        }\r\n\r\n        if (!this.renderData) {\r\n            if (this._assembler && this._assembler.createData) {\r\n                this._renderData = this._assembler.createData(this);\r\n                this.renderData!.material = this.material;\r\n                this._updateColor();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @en Remove all living segments of the ribbon.\r\n     * @zh 删除当前所有的拖尾片段。\r\n     * @example\r\n     * // Remove all living segments of the ribbon.\r\n     * myMotionStreak.reset();\r\n     */\r\n    public reset() {\r\n        this._points.length = 0;\r\n        if (this.renderData) this.renderData.clear();\r\n    }\r\n\r\n    public lateUpdate(dt) {\r\n        if (this._assembler) this._assembler.update(this, dt);\r\n    }\r\n\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _render(render: any) {\r\n        if (this.texture) {\r\n            render.commitComp(this, this.renderData, this.texture, this._assembler, null);\r\n        }\r\n    }\r\n}\r\n","\r\nexport const msgac = {\r\n\r\n    openLayer: 101,\r\n    showNotice: 102,\r\n    overDay: 103,\r\n    joystick: 104,\r\n    commonResRefresh: 105,\r\n    globalTouchStart: 121,\r\n    globalTouchMove: 122,\r\n    globalTouchEnd: 123,\r\n    jumpLayer: 124,\r\n    refreshRedPoint: 125,\r\n    refreshLocalization: 126, //刷新本地化语言\r\n    refreshDebugPannel: 127, //刷新调试面板\r\n    refreshMapFightWindow: 128, //刷新战斗窗口\r\n\r\n    saveDataBefore: 201,\r\n    saveDataAfter: 202,\r\n\r\n    updateDropData: 301,\r\n    wearDrop: 302,\r\n\r\n    playerMsgStart: 1000,\r\n    energyObjRefresh: 1001,\r\n    playerMsgEnd: 1999,\r\n\r\n    mapMsgStart: 2000,\r\n    mapEnter: 2001,\r\n    mapLeave: 2002,\r\n    mapRefreshSkill : 2003,\r\n    mapMsgEnd: 2999,\r\n\r\n    redPointEvent: 30001,\r\n    homeHideMenu: 30002,\r\n\r\n    ac2KeyObj: {},\r\n    init: () => {\r\n        for (let key in msgac) {\r\n            let ac = msgac[key];\r\n            if (typeof (ac) != 'number') {\r\n                continue;\r\n            }\r\n            msgac.ac2KeyObj[ac] = key;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n","import { _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { constants } from '../../data/constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"MsgBoxLayer\")\r\nexport class MsgBoxLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let hint = this.layerData.hint;\r\n        this.getNodeByPath(\"ui/title\").localize(\"hint\", constants.catName.common);\r\n        this.getNodeByPath(\"ui/btnClose/text\").localize(\"close\", constants.catName.common);\r\n        this.setString(this.getNodeByPath(\"ui/hint\"), hint);\r\n\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","class MyLog {\r\n    private static _instance: MyLog;\r\n    private constructor() { }\r\n    public static get instance(): MyLog {\r\n        if (!this._instance) {\r\n            this._instance = new MyLog();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    isOpen: boolean = true;\r\n\r\n    public i(...params: any[]) {\r\n        if (!this.isOpen) {\r\n            return;\r\n        }\r\n        // params.unshift(new Date().toLocaleTimeString());\r\n        // console.info.apply(console, params);\r\n        myLog.writeLog(\"info\", ...params);\r\n    }\r\n\r\n    public d(...params: any[]) {\r\n    \r\n        \r\n        // params.unshift(new Date().toLocaleTimeString());\r\n        // console.debug.apply(console, params);\r\n\r\n        myLog.writeLog(\"debug\", ...params);\r\n    }\r\n\r\n    public w(...params: any[]) {\r\n        if (!this.isOpen) {\r\n            return;\r\n        }\r\n        // params.unshift(new Date().toLocaleTimeString());\r\n        // console.warn.apply(console, params);\r\n\r\n        myLog.writeLog(\"warn\", ...params);\r\n    }\r\n\r\n    public e(...params: any[]) {\r\n        myLog.writeLog(\"error\", ...params);\r\n    }\r\n\r\n    public writeLog(level:string, ...params: any[]) {\r\n        \r\n        // const err = new Error();\r\n        // const stackLines = err.stack?.split('\\n');\r\n\r\n        // let fileLineInfo = '';\r\n        // if (stackLines && stackLines.length>2) {\r\n        //     const callerLine = stackLines[2];\r\n        //     const match = callerLine.match(/\\((.*):(\\d+):(\\d+)\\)/);\r\n        //     if (match) {\r\n        //         fileLineInfo = `${match[1]}:${match[2]}`;\r\n        //     }\r\n        // }\r\n\r\n        // params.unshift(fileLineInfo);\r\n        params.unshift(new Date().toLocaleTimeString());\r\n\r\n        switch (level) {\r\n            case \"error\":\r\n                console.error.apply(console, params);\r\n                break;\r\n            case \"warn\":\r\n                console.warn.apply(console, params);\r\n                break;\r\n            case \"info\":\r\n                console.info.apply(console, params);\r\n                break;\r\n            case \"debug\":\r\n                console.debug.apply(console, params);\r\n                break;\r\n            default:\r\n                console.log(...params);\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const myLog = MyLog.instance;","import { Component, Node, Prefab, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('NodePoolUtil')\r\nexport class NodePoolUtil extends Component {\r\n\r\n    itemNode: any;\r\n\r\n    freeNodeArr: any = [];\r\n    itemNodeArr: any = [];\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    init(itemNode: Node | Prefab) {\r\n        if (itemNode instanceof Prefab) {\r\n            itemNode = cocosUtil.instantiate(itemNode);\r\n        }\r\n        this.itemNode = itemNode;\r\n    }\r\n\r\n    getNode() {\r\n        let node = this.freeNodeArr.shift();\r\n        if (!node) {\r\n            if (!this.itemNode) {\r\n                myLog.e(this.node);\r\n                return null;\r\n            }\r\n            node = cocosUtil.instantiate(this.itemNode);\r\n            node.parent = this.node;\r\n        }\r\n        if (!node.active) {\r\n            node.active = true;\r\n        }\r\n        node.use = true;\r\n\r\n        return node;\r\n    }\r\n\r\n    recycleNode(node: Node) {\r\n        if (!this.itemNode) {\r\n            this.itemNode = node;\r\n        }\r\n        node.active = false;\r\n        if (this.freeNodeArr.indexOf(node) == -1) {\r\n            this.freeNodeArr.push(node);\r\n        }\r\n        // @ts-ignore\r\n        node.use = false;\r\n    }\r\n\r\n    recycleAllNode() {\r\n        utilTools.forArr(this.node.children, (node: Node) => {\r\n            this.recycleNode(node);\r\n        });\r\n    }\r\n\r\n    forEachUseNode(cb: Function) {\r\n        utilTools.forArr(this.node.children, (node: any, index: number) => {\r\n            if (!node.use) {\r\n                return;\r\n            }\r\n            cb(node, index);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","// @ts-nocheck\r\n\r\nimport { Component, find, instantiate, Label, Node, NodePool, UIOpacity, UITransform, v3, _decorator } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('NoticeLayer')\r\nexport class NoticeLayer extends Component {\r\n\r\n    contentLayer: Node;\r\n    textPool: NodePool;\r\n    textItem: Node;\r\n\r\n    maxContentWidth: number = 580;\r\n    minContentWidth: number = 150;\r\n    contentBGAdd: number = 150;\r\n\r\n    orignHeight: number = 0;\r\n\r\n    // 多条飘字之间的y间隔\r\n    spaceY: number = 5;\r\n\r\n    status: any = {\r\n        fadeIn: 1,\r\n        delay: 2,\r\n        fadeOut: 3\r\n    };\r\n\r\n    // 移动速度，像素/每秒\r\n    speedY: number = 300;\r\n    // 透明度变化速度，透明度/每秒\r\n    speedOpacity: number = 255 / 0.3;\r\n    // 展示不动的时间。单位：秒\r\n    delayTime: number = 1.5;\r\n    // 渐显和渐隐移动的距离\r\n    moveDy: number = 150;\r\n\r\n    // 要保证只能有一个处于fadeOut状态，其他的要处于队列等待\r\n    fadeOutNode: Node = null;\r\n\r\n    onLoad() {\r\n        this.contentLayer = find(\"contentLayer\", this.node);\r\n        this.textItem = find(\"contentLayer/textItem\", this.node);\r\n\r\n        this.textPool = new NodePool();\r\n        this.textPool.put(this.textItem);\r\n        this.textItem = instantiate(this.textItem);\r\n\r\n        this.orignHeight = find(\"content\", this.textItem).getComponent(UITransform).height;\r\n\r\n    }\r\n\r\n    noticeShow(content) {\r\n        var node = this.textPool.get();\r\n        if (!node) {\r\n            node = instantiate(this.textItem);\r\n        }\r\n        node.active = true;\r\n\r\n        let contentNode = find(\"content\", node);\r\n        contentNode.getComponent(UITransform).height = this.orignHeight;\r\n        contentNode.getComponent(Label).overflow = Label.Overflow.NONE;\r\n        contentNode.getComponent(Label).string = content + \"\";\r\n        // 调用这个方法之后，才能在本帧获得准确宽度\r\n        contentNode.getComponent(Label).updateRenderData(true);\r\n\r\n        let width = contentNode.getComponent(UITransform).width;\r\n        if (width > this.maxContentWidth) {\r\n            contentNode.getComponent(Label).overflow = Label.Overflow.SHRINK;\r\n            contentNode.getComponent(UITransform).width = this.maxContentWidth;\r\n            contentNode.getComponent(UITransform).height = this.orignHeight * 2 + 10;\r\n            width = this.maxContentWidth;\r\n        } else if (width < this.minContentWidth) {\r\n            width = this.minContentWidth;\r\n        }\r\n\r\n        // 设置背景图片宽度和高度\r\n        node.getComponent(UITransform).width = width + this.contentBGAdd;\r\n        node.getComponent(UITransform).height = contentNode.getComponent(UITransform).height + 10;\r\n\r\n        node.setPosition(0, -this.moveDy);\r\n        node.moveY = this.moveDy;\r\n        node.moveDy = 0;\r\n        node.setScale(v3(1, 1, 1));\r\n        node.getComponent(UIOpacity).opacity = 0;\r\n        node.status = this.status.fadeIn;\r\n        node.parent = this.contentLayer;\r\n\r\n    }\r\n\r\n    createNotice(content) {\r\n        this.noticeShow(content + \"\");\r\n    }\r\n\r\n    update(dt: number) {\r\n        let chs = this.contentLayer.children;\r\n        let backArr = [];\r\n        for (let i in chs) {\r\n            let node = chs[i];\r\n            switch (node.status) {\r\n                case this.status.fadeIn:\r\n                    var dy = dt * this.speedY;\r\n\r\n                    var pos = node.getPosition();\r\n                    pos.y += dy;\r\n                    node.setPosition(pos);\r\n\r\n                    node.moveDy += dy;\r\n                    var opacity = node.getComponent(UIOpacity).opacity + this.speedOpacity * dt;\r\n                    if (opacity > 255) {\r\n                        opacity = 255;\r\n                    }\r\n                    node.getComponent(UIOpacity).opacity = opacity;\r\n                    if (node.moveDy >= node.moveY) {\r\n                        node.moveDy = 0;\r\n                        node.getComponent(UIOpacity).opacity = 255;\r\n                        node.status = this.status.delay;\r\n                        node.time = 0;\r\n                        node.delayTime = this.delayTime;\r\n                    }\r\n                    break;\r\n                case this.status.delay:\r\n                    node.delayTime -= dt;\r\n                    if (node.delayTime <= 0) {\r\n                        node.delayTime = 0;\r\n                        node.status = this.status.fadeOut;\r\n                    }\r\n                    break;\r\n                case this.status.fadeOut:\r\n                    if (this.fadeOutNode && this.fadeOutNode != node) {\r\n                        break;\r\n                    }\r\n                    this.fadeOutNode = node;\r\n                    var dy = dt * this.speedY;\r\n\r\n                    var pos = node.getPosition();\r\n                    pos.y += dy;\r\n                    node.setPosition(pos);\r\n\r\n                    var opacity = node.getComponent(UIOpacity).opacity - this.speedOpacity * dt;\r\n                    if (opacity < 0) {\r\n                        opacity = 0;\r\n                    }\r\n                    node.getComponent(UIOpacity).opacity = opacity;\r\n                    if (opacity <= 0) {\r\n                        backArr.push(node);\r\n                        this.fadeOutNode = null;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        for (let i in backArr) {\r\n            let node = backArr[i];\r\n            node.parent = null;\r\n            this.textPool.put(node);\r\n        }\r\n\r\n        // 修正位置，保证不重叠\r\n        chs = this.contentLayer.children;\r\n        if (chs.length >= 2) {\r\n            let lastNode = chs[chs.length - 1];\r\n            for (let i = chs.length - 2; i >= 0; i--) {\r\n                let node = chs[i];\r\n\r\n                let dy = (node.getComponent(UITransform).height + lastNode.getComponent(UITransform).height) * 0.5 + this.spaceY;\r\n                if (node.position.y - lastNode.position.y < dy) {\r\n                    let pos = node.getPosition();\r\n                    pos.y = lastNode.position.y + dy;\r\n                    node.setPosition(pos);\r\n                }\r\n                lastNode = node;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { Color, Component, find, Label, Node, tween, UIOpacity, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('NumSystem')\r\nexport class NumSystem extends Component {\r\n\r\n    numNode: Node;\r\n\r\n    nodePoolUtil: NodePoolUtil;\r\n\r\n    onLoad() {\r\n        this.numNode = find(\"num\", this.node);\r\n        this.nodePoolUtil = this.addComponent(NodePoolUtil);\r\n        this.nodePoolUtil.recycleNode(this.numNode);\r\n    }\r\n\r\n    addNum(num: number | string, worldPos: Vec3, color?: any) {\r\n        let numNode = this.nodePoolUtil.getNode();\r\n\r\n        let pos = cocosUtil.convertToNodeSpace(numNode, worldPos);\r\n        let dx = Math.random() * 20;\r\n        dx = Math.random() > 0.5 ? dx : -dx;\r\n        pos.x += dx;\r\n        numNode.setPosition(pos);\r\n\r\n        numNode.setScale(v3(1, 1, 1));\r\n        numNode.getComponent(UIOpacity).opacity = 255;\r\n        numNode.getComponent(Label).string = \"\" + num;\r\n        if (!color) {\r\n            color = Color.WHITE;\r\n        }\r\n        cocosUtil.setRenderableColor(numNode, color);\r\n\r\n        let dy = 20 + Math.random() * 10;\r\n        tween(numNode).by(0.3, {\r\n            position: v3(0, dy, 0),\r\n            scale: v3(0.5, 0.5, 0)\r\n        }).by(0.3, {\r\n            scale: v3(-0.3, -0.3, 0),\r\n        }, {\r\n            onUpdate(node: Node, ratio: number) {\r\n                numNode.getComponent(UIOpacity).opacity = (1 - ratio) * 255;\r\n            }\r\n        }).call(() => {\r\n            this.nodePoolUtil.recycleNode(numNode);\r\n        }).start();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Node, Prefab, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { find } from 'cc';\r\nimport { localizeManager } from '../../../localization';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PatrolFastLayer')\r\nexport class PatrolFastLayer extends BaseUILayer {\r\n\r\n\r\n    // @property({ type: Node }) musicToggle: Node = null;\r\n\r\n    @property({ type: Prefab }) propIten: Prefab = null;\r\n    @property({ type: Node }) addPropLayer: Node = null;\r\n\r\n\r\n    _rewardArr = []\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n    }\r\n\r\n\r\n    start() {\r\n        let rewardArr = UserData.getInstance().getPatrolRewardByTime(designManager.config.towerPressTime * 60)\r\n        this._rewardArr = rewardArr\r\n        for (let index = 0; index < rewardArr.length && index < 2; index++) {\r\n            let element = rewardArr[index];\r\n            let item = instantiate(this.propIten)\r\n            item.getComponent(PropItemPrefab).setView(element.Id, element.Num, PropItemPrefab.Type_UnWear)\r\n            item.getComponent(PropItemPrefab).setScale(100)\r\n            this.addPropLayer.addChild(item)\r\n        }\r\n        let item = instantiate(this.propIten)\r\n        item.getComponent(PropItemPrefab).setView(0, 0, PropItemPrefab.Type_UnKnow)\r\n        item.getComponent(PropItemPrefab).setScale(100)\r\n        this.addPropLayer.addChild(item)\r\n\r\n        find(\"ui/bg/xunluotitle\", this.node).localizeImg();\r\n        find(\"ui/btns/btnGoOn/Label\",this.node).localize(\"getFree\", constants.catName.common);\r\n        find(\"ui/bg/Label\", this.node).localize({cat:constants.layers.PatrolFastLayer, key:\"hint\", vars:[designManager.config.towerPressTime]});\r\n\r\n    }\r\n\r\n    onGetRewardTili() {\r\n        //  UserData.getInstance().getCurPatrolData()\r\n        //  this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (UserData.getInstance().power < designManager.config.quickEarn) {\r\n            this.toast(localizeManager._localize(null, \"noStamina\", constants.catName.common));\r\n            return\r\n        }\r\n\r\n        UserData.getInstance().usePower(0 - designManager.config.quickEarn)\r\n        UserData.getInstance().getRewardProp(this._rewardArr)\r\n\r\n        playerModel.addDayTaskNum(7, designManager.config.quickEarn);\r\n        playerModel.addDayTaskNum(8);\r\n\r\n        this.openLayer(constants.layers.RewardLayer, { propArr: this._rewardArr })\r\n        this.closeLayer()\r\n    }\r\n\r\n    onGetRewardVideo() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        sdkManager.openAd(\"快速巡逻\", (state: number) => {\r\n            if (state == 1) {\r\n                UserData.getInstance().getRewardProp(this._rewardArr)\r\n                this.closeLayer()\r\n                this.openLayer(constants.layers.RewardLayer, { propArr: this._rewardArr })\r\n                playerModel.addDayTaskNum(8);\r\n            }\r\n        })\r\n        // cc.find('Canvas').addChild(coin);\r\n        //   this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Button, instantiate, Label, Node, Prefab, sp, Sprite, tween, v3, _decorator } from 'cc';\r\nimport { CountTimeUtil } from '../../../utils/CountTimeUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { find } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PatrolLayer')\r\nexport class PatrolLayer extends BaseUILayer {\r\n\r\n\r\n    // @property({ type: Node }) musicToggle: Node = null;\r\n    @property({ type: Node }) btnPatrol: Node = null;\r\n    // @property({ type: Node }) patrolTimelabel: Node = null;\r\n    @property({ type: Node }) addCoinlabel: Node = null;\r\n    @property({ type: Node }) addExplabel: Node = null;\r\n    @property({ type: Node }) addPropLayer: Node = null;\r\n    @property({ type: Node }) maxPatrolTimelabel: Node = null;\r\n    @property({ type: Node }) curPatrolTimelabel: Node = null;\r\n\r\n    @property({ type: Prefab }) propIten: Prefab = null;\r\n\r\n    @property({ type: Node }) monster: Node = null;\r\n\r\n\r\n    @property({ type: Node }) handNode: Node = null;\r\n\r\n    _rewardArr = []\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n        this.handNode.active = false;\r\n    }\r\n\r\n\r\n\r\n    start() {\r\n        this.initBtnPatrol()\r\n        find(\"ui/patline/info\",this.node).localize(\"title\",constants.layers.PatrolLayer);\r\n        find(\"ui/btnclose\",this.node).localize(\"click2close\",constants.catName.common);\r\n        find(\"ui/btns/btnGoOn/Label\",this.node).localize(\"btnQuickEarningseds\",constants.layers.PatrolLayer);\r\n        this.addCoinlabel.localize({cat:constants.layers.PatrolLayer, key:\"earnings\",vars:[designManager.config.towerCoin * 60]});\r\n        this.addExplabel.localize({cat:constants.layers.PatrolLayer, key:\"earnings\",vars:[designManager.config.towerExp * 60]});\r\n        this.curPatrolTimelabel.localize({cat:constants.layers.PatrolLayer, key:\"curPatrolTime\",vars:[utilTools.getTimeStrChinese(UserData.getInstance().getPatrolTime() * 1000, false)]});\r\n        this.maxPatrolTimelabel.localize({cat:constants.layers.PatrolLayer, key:\"maxPatrolTime\",vars:[designManager.config.towerTop / 60]});\r\n        // this.addCoinlabel.string = (designManager.config.towerCoin * 60) + \"/小时\"\r\n        // this.addExplabel.string = (designManager.config.towerExp * 60) + \"/小时\"\r\n        // this.maxPatrolTimelabel.string = \"最长巡逻时间\" + (designManager.config.towerTop / 60) + \"小时\"\r\n\r\n        // this.curPatrolTimelabel.string = \"巡逻时间：\" + utilTools.getTimeStrChinese(UserData.getInstance().getPatrolTime() * 1000, false)\r\n\r\n        let rewardArr = UserData.getInstance().getPatrolReward()\r\n        this._rewardArr = rewardArr\r\n        rewardArr.forEach(element => {\r\n            let item = instantiate(this.propIten)\r\n            item.getComponent(PropItemPrefab).setView(element.Id, element.Num, PropItemPrefab.Type_UnWear)\r\n            item.getComponent(PropItemPrefab).setScale(100)\r\n            this.addPropLayer.addChild(item)\r\n        });\r\n        let monster = this.monster\r\n        tween(this.monster).show().set({ position: v3(222, -95, 0) }).call(function () {\r\n            monster.getComponent(sp.Skeleton).animation = \"walk\"\r\n            monster.getComponent(sp.Skeleton).loop = true\r\n        }).to(1, { position: v3(50, -95, 0) }).call(function () {\r\n            monster.getComponent(sp.Skeleton).animation = \"die\"\r\n            monster.getComponent(sp.Skeleton).loop = false\r\n        }).delay(0.3).hide().delay(0.8).union().repeatForever().start()\r\n    }\r\n\r\n    initBtnPatrol() {\r\n        let curTime = UserData.getInstance().getPatrolState()\r\n        if (curTime > 0) {\r\n            this.btnPatrol.getComponent(Button).interactable = false\r\n            this.btnPatrol.getComponent(Sprite).grayscale = true\r\n            let self = this\r\n            this.btnPatrol.getChildByName(\"Label\").getComponent(CountTimeUtil).setTime(curTime, function () {\r\n                self.btnPatrol.getComponent(Button).interactable = true\r\n                self.btnPatrol.getComponent(Sprite).grayscale = false\r\n                // self.btnPatrol.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n                self.btnPatrol.getChildByName(\"Label\").localize(\"get\",constants.catName.common);\r\n            })\r\n            RedPointLogicMgr.ins().setRPointView(this.btnPatrol, null, false)\r\n        } else {\r\n            RedPointLogicMgr.ins().setRPointView(this.btnPatrol, null, true)\r\n            // this.btnPatrol.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n            this.btnPatrol.getChildByName(\"Label\").localize(\"get\",constants.catName.common);\r\n            this.handNode.active = true;\r\n        }\r\n    }\r\n\r\n    onGetRewardNormal() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.handNode.active = false;\r\n\r\n        UserData.getInstance().getCurPatrolData()\r\n        this.showGetReward(this._rewardArr)\r\n        this.initBtnPatrol()\r\n        this.curPatrolTimelabel.localize({cat:constants.layers.PatrolLayer, key:\"curPatrolTime\",vars:[utilTools.getTimeStrChinese(UserData.getInstance().getPatrolTime() * 1000, false)]})\r\n        // this.curPatrolTimelabel.string = \"巡逻时间：\" + utilTools.getTimeStrChinese(UserData.getInstance().getPatrolTime() * 1000, false)\r\n\r\n        //   this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n    }\r\n\r\n    onGetRewardVideo() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (this.handNode.active) {\r\n            return;\r\n        }\r\n\r\n        this.openLayer(constants.layers.PatrolFastLayer)\r\n        // sdkManager.openAd(\"快速巡逻\", (state: number) => {\r\n        //     if (state == 1) {\r\n        //         UserData.getInstance().getPatrolRewardByTime(designManager.config.towerPressTime * 60)\r\n        //         this.showGetReward(this._rewardArr)\r\n        //     }\r\n        // })\r\n        //   cc.find('Canvas').addChild(coin);\r\n        //   this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (this.handNode.active) {\r\n            return;\r\n        }\r\n\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { tyqSDKConfig } from '../../../tyqSDK/tyqSDKConfig';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ItemLayer } from '../base/ItemLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PauseLayer')\r\nexport class PauseLayer extends BaseLayer {\r\n\r\n    weaponItemLayer: ItemLayer;\r\n    skill1ItemLayer: ItemLayer;\r\n    skill2ItemLayer: ItemLayer;\r\n\r\n    audioIconOpen: Node;\r\n    audioIconClose: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.weaponItemLayer = this.getNodeByPath(\"ui/weaponLayer/bg/itemLayer\").addComponent(ItemLayer);\r\n        this.skill1ItemLayer = this.getNodeByPath(\"ui/skill1Layer/itemLayer\").addComponent(ItemLayer);\r\n        this.skill2ItemLayer = this.getNodeByPath(\"ui/skill2Layer/itemLayer\").addComponent(ItemLayer);\r\n\r\n        this.audioIconOpen = this.getNodeByPath(\"btnAudio/open\");\r\n        this.audioIconClose = this.getNodeByPath(\"btnAudio/close\");\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        if (tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > 0 && tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > UserData.getInstance().openLevel) {\r\n            if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n                this.openLayer(constants.layers.MoreGameLayer)\r\n            }\r\n        }\r\n        tyqAdManager.showDelayFullVideo()\r\n        this.addEventArr([\r\n            msgac.mapLeave\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.mapLeave\r\n        ]);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        find(\"ui/title/text\", this.node).localizeImg();\r\n        find(\"ui/weaponLayer/title/text\", this.node).localize(\"weapon\", constants.layers.PauseLayer);\r\n        find(\"ui/skill1Layer/title\", this.node).localize(\"skill\", constants.layers.PauseLayer);\r\n        find(\"ui/skill2Layer/title\", this.node).localize(\"skill2\", constants.layers.PauseLayer);\r\n        find(\"ui/btnGoOn/text\", this.node).localizeImg();\r\n\r\n        this.refreshWeaponLayer();\r\n        this.refreshSkill1Layer();\r\n        this.refreshSkill2Layer();\r\n\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n    refreshAudioLayer() {\r\n        if (audioManager.musicVolume > 0) {\r\n            this.audioIconOpen.active = true;\r\n            this.audioIconClose.active = false;\r\n        } else {\r\n            this.audioIconOpen.active = false;\r\n            this.audioIconClose.active = true;\r\n        }\r\n    }\r\n\r\n    refreshSkill2Layer() {\r\n        this.setNumItemLayer(this.skill2ItemLayer.node, constants.design.skill2Num, (itemUI: Node, num: number) => {\r\n            this.refreshItem(itemUI, num, constants.tableName.skill2);\r\n        });\r\n    }\r\n\r\n    refreshSkill1Layer() {\r\n        this.setNumItemLayer(this.skill1ItemLayer.node, constants.design.skill1Num, (itemUI: Node, num: number) => {\r\n            this.refreshItem(itemUI, num, constants.tableName.skill);\r\n        });\r\n    }\r\n\r\n    refreshWeaponLayer() {\r\n        this.setNumItemLayer(this.weaponItemLayer.node, constants.design.weaponNum, (itemUI: Node, num: number) => {\r\n            this.refreshItem(itemUI, num, constants.tableName.weapon);\r\n        });\r\n    }\r\n\r\n    refreshItem(itemUI: Node, num: number, name: string) {\r\n        let info = null;\r\n        switch (name) {\r\n            case constants.tableName.weapon:\r\n                info = mapModel.weaponSystem.weaponArr[num - 1];\r\n                break;\r\n            case constants.tableName.skill:\r\n                info = mapModel.skillSystem.skillArr[num - 1];\r\n                break;\r\n            case constants.tableName.skill2:\r\n                info = mapModel.skillSystem.skill2Arr[num - 1];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        let iconNode = find(\"icon\", itemUI);\r\n        let starLayer = find(\"starLayer\", itemUI);\r\n        if (!info) {\r\n            iconNode.active = false;\r\n            starLayer.active = false;\r\n            return;\r\n        }\r\n\r\n        iconNode.active = true;\r\n        starLayer.active = true;\r\n        let row = designManager.getRowById(name, info.id);\r\n        this.setSpriteFrame(iconNode, row.icon);\r\n        this.setNumItemLayer(starLayer, row.lv, (node: Node) => {\r\n            let icon = find(\"icon\", node);\r\n            let icon2 = find(\"icon2\", node);\r\n            if (row.lv >= constants.design.maxLv) {\r\n                icon.active = false;\r\n                icon2.active = true;\r\n            } else {\r\n                icon.active = true;\r\n                icon2.active = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    mapLeaveRet(data: any) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnGoOn(node: Node) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnHome() {\r\n        // serverMsg.send(msgac.mapLeave);\r\n        // return;\r\n        this.openLayer(constants.layers.BackHomeLayer);\r\n    }\r\n\r\n    onClickBtnAudio() {\r\n        if (audioManager.musicVolume > 0) {\r\n            audioManager.setMusicVolume(0);\r\n            audioManager.setEffectVolume(0);\r\n        } else {\r\n            audioManager.setMusicVolume(1);\r\n            audioManager.setEffectVolume(1);\r\n        }\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n}\r\n\r\n","\r\n\r\nexport enum physicsGroup {\r\n    DEFAULT = 1 << 0,\r\n    PLAYER = 1 << 1,\r\n    MONSTER = 1 << 2,\r\n    PLAYER_BULLET = 1 << 3,\r\n    MONSTER_BULLET = 1 << 4,\r\n    PROP = 1 << 5,\r\n    WALL = 1 << 6,\r\n    PLAYER_BULLET2 = 1 << 7,\r\n    SAFE_WALL = 1 << 8,\r\n}\r\n","import { Intersection2D, Node, PhysicsSystem2D, _decorator } from 'cc';\r\nimport { myLog } from '../../common/myLog';\r\nimport { utilTools } from '../../utils/utilTools';\r\nimport { BoxColliderUtil } from './BoxColliderUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nclass PhysicsWorld {\r\n\r\n    private static _instance: PhysicsWorld = null;\r\n    private cellSize = 100;\r\n\r\n    private colliderArr: any[];\r\n    private posToColliderArr: any = {};\r\n\r\n    public static getInstance() {\r\n        if (this._instance == null) {\r\n            this._instance = new PhysicsWorld();\r\n\r\n            // myLog.i(PhysicsSystem2D.instance.collisionMatrix);\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    private getPosKey(x: number, y: number): string {\r\n        return \"\" + x + \"_\" + y;\r\n    }\r\n\r\n    private forColliderRectKeyArr(collider: BoxColliderUtil, cb: Function) {\r\n        const rect = collider.worldAabb;\r\n\r\n        let minX = Math.floor(rect.x / this.cellSize);\r\n        let maxX = Math.ceil((rect.x + rect.width) / this.cellSize);\r\n\r\n        let minY = Math.floor(rect.y / this.cellSize);\r\n        let maxY = Math.ceil((rect.y + rect.height) / this.cellSize);\r\n\r\n        for (let i = minX; i <= maxX; i++) {\r\n            for (let j = minY; j <= maxY; j++) {\r\n                let key = this.getPosKey(i, j);\r\n                cb(key);\r\n            }\r\n        }\r\n    }\r\n\r\n    private addIntoPosToColliderArr(collider: BoxColliderUtil) {\r\n        this.forColliderRectKeyArr(collider, (key: string) => {\r\n            let arr = this.posToColliderArr[key];\r\n            if (!arr) {\r\n                arr = [];\r\n                this.posToColliderArr[key] = arr;\r\n            }\r\n            arr.push(collider);\r\n        });\r\n    }\r\n\r\n    private collectCollider(node: Node) {\r\n        if (!node.active || !node.activeInHierarchy) {\r\n            return;\r\n        }\r\n        let arr = node.getComponents(BoxColliderUtil);\r\n        utilTools.forArr(arr, (collider: BoxColliderUtil) => {\r\n            if (!collider.enabled) {\r\n                return;\r\n            }\r\n            collider.updateCollider();\r\n            this.colliderArr.push(collider);\r\n            this.addIntoPosToColliderArr(collider);\r\n        });\r\n        utilTools.forArr(node.children, (ch: Node) => {\r\n            this.collectCollider(ch);\r\n        });\r\n    }\r\n\r\n    public step(node: Node) {\r\n        this.colliderArr = [];\r\n        this.posToColliderArr = {};\r\n\r\n        // 收集所有碰撞器信息\r\n        this.collectCollider(node);\r\n\r\n        // 开始碰撞检测\r\n        utilTools.forArr(this.colliderArr, (collider: BoxColliderUtil) => {\r\n            this.forColliderRectKeyArr(collider, (key: string) => {\r\n                let arr = this.posToColliderArr[key];\r\n                if (!arr) {\r\n                    return;\r\n                }\r\n                utilTools.forArr(arr, (otherCollider: BoxColliderUtil) => {\r\n                    this.doIntersection(collider, otherCollider);\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    private doIntersection(collider1: BoxColliderUtil, collider2: BoxColliderUtil) {\r\n        if (collider1 == collider2 || collider1.node == collider2.node) {\r\n            return;\r\n        }\r\n        const collisionMatrix = PhysicsSystem2D.instance.collisionMatrix;\r\n        if ((collisionMatrix[collider1.group] & collider2.group) && (collisionMatrix[collider2.group] & collider1.group)) {\r\n            let ret = Intersection2D.polygonPolygon(collider1.worldPoints, collider2.worldPoints);\r\n            if (ret) {\r\n                // 开始碰撞\r\n                collider1.contactBegin(collider2);\r\n                // myLog.i(collider1.group, collider2.group, ret);\r\n            } else {\r\n                // 结束碰撞\r\n                collider1.contactEnd(collider2);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport const physicsWorld = PhysicsWorld.getInstance();\r\n\r\n\r\n\r\n","import { Collider2D, Color, Contact2DType, macro, Node, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { physicsGroup } from '../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ShineColor } from '../shader/ShineColor';\r\nimport { JoystickData } from './GameCtrl';\r\nimport { Monster } from './monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Player')\r\nexport class Player extends BaseLayer {\r\n\r\n    moveSpeed: number = 350;\r\n    hp: number = 100;\r\n    hpMax: number = 100;\r\n    hpMaxOrign: number = 100;\r\n    atk: number = 0;\r\n\r\n    bodyNode: Node;\r\n    effectAnimationCtrl: AnimationCtrl;\r\n    lightShine: boolean = false;\r\n    collider: Collider2D;\r\n    animationCtrl: AnimationCtrl;\r\n    shineColor: ShineColor;\r\n    hpProgress: Node;\r\n\r\n    movePos: Vec3;\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    // 存储碰撞中的怪物对象数组\r\n    monsterArr: any[] = [];\r\n\r\n    // 围栏碰撞器\r\n    wallCollider: any;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.collider = this.getComponent(Collider2D);\r\n\r\n        this.bodyNode = this.getNodeByPath(\"body\");\r\n        this.hpProgress = this.getNodeByPath(\"hpProgress\");\r\n        this.animationCtrl = this.bodyNode.addComponent(AnimationCtrl);\r\n        this.shineColor = this.bodyNode.addComponent(ShineColor);\r\n        this.effectAnimationCtrl = this.getNodeByPath(\"body/effect\").addComponent(AnimationCtrl);\r\n        this.effectAnimationCtrl.node.active = false;\r\n\r\n        this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n        this.collider.on(Contact2DType.END_CONTACT, this.contactEnd, this);\r\n\r\n        this.moveSpeed = designManager.config.roleSpeed;\r\n\r\n        this.setRoleSkin(this.bodyNode);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.joystick,\r\n        ]);\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    initData(data: any) {\r\n        this.hp = data.hp;\r\n        this.hpMax = this.hp;\r\n        this.hpMaxOrign = this.hp;\r\n        this.atk = data.atk;\r\n\r\n        this.initUI();\r\n    }\r\n\r\n    initUI() {\r\n        this.collider.enabled = true;\r\n        this.refreshHpLayer();\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.moveSpeed = this.moveSpeed;\r\n        data.hp = this.hp;\r\n        data.hpMax = this.hpMax;\r\n        data.hpMaxOrign = this.hpMaxOrign;\r\n        data.atk = this.atk;\r\n        data.pos = this.node.position;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.moveSpeed = data.moveSpeed;\r\n        this.hp = data.hp;\r\n        this.hpMax = data.hpMax;\r\n        this.hpMaxOrign = data.hpMaxOrign;\r\n        this.atk = data.atk;\r\n        this.node.position = data.pos;\r\n\r\n        this.refreshHpLayer();\r\n    }\r\n\r\n    // 提高生命上限百分比\r\n    addHpMaxPercent(p: number) {\r\n        let lastHpMax = this.hpMax;\r\n        let nowHpMax = this.hpMaxOrign * (1 + p);\r\n        nowHpMax = Math.round(nowHpMax);\r\n        let addHp = nowHpMax - lastHpMax;\r\n        this.hpMax = nowHpMax;\r\n        this.addHp(addHp);\r\n    }\r\n\r\n    // 增加血量百分比\r\n    addHpPercent(p: number) {\r\n        this.effectAnimationCtrl.node.active = true;\r\n        this.effectAnimationCtrl.playAnimation(\"zhiliao\", false, () => {\r\n            this.effectAnimationCtrl.node.active = false;\r\n        });\r\n        let val = this.hpMax * p;\r\n        this.addHp(val);\r\n    }\r\n    addHp(num: number) {\r\n        if (this.hp <= 0) {\r\n            // 已阵亡\r\n            return;\r\n        }\r\n        num = Math.ceil(num);\r\n\r\n        this.hp += num;\r\n\r\n        if (num > 0) {\r\n            // 回复血量\r\n            mapModel.numSystem.addNum(num, cocosUtil.convertToWorldSpace(this.node), Color.GREEN);\r\n        } else {\r\n            // 伤害数字\r\n            mapModel.numSystem.addNum(num, cocosUtil.convertToWorldSpace(this.node), Color.RED);\r\n        }\r\n        if (this.hp > this.hpMax) {\r\n            this.hp = this.hpMax;\r\n        }\r\n        if (this.hp < 0) {\r\n            this.hp = 0;\r\n        }\r\n        this.refreshHpLayer();\r\n    }\r\n\r\n    refreshHpLayer() {\r\n        this.setProgressBar(this.hpProgress, this.hp / this.hpMax);\r\n    }\r\n\r\n    useSkillHeal(percent: number) {\r\n        this.addHpPercent(percent);\r\n    }\r\n\r\n    backLife() {\r\n        this.hp = this.hpMax;\r\n        this.animationCtrl.playAnimation(constants.animations.walk, true);\r\n        this.effectAnimationCtrl.node.active = true;\r\n        this.effectAnimationCtrl.playAnimation(\"hudun\", true);\r\n        this.lightShine = true;\r\n        this.scheduleOnce(() => {\r\n            this.effectAnimationCtrl.node.active = false;\r\n            this.lightShine = false;\r\n        }, 3);\r\n        this.refreshHpLayer();\r\n        mapModel.mapLayer.gameFightResume();\r\n        mapModel.mapLayer.onSkillSelect();\r\n    }\r\n\r\n    hitWithDam(dam: number, shineColor?: Color, extraObj?: any) {\r\n        if (dam <= 0 || this.hp <= 0) {\r\n            return;\r\n        }\r\n        if (this.lightShine) {\r\n            // 无敌状态\r\n            return;\r\n        }\r\n\r\n        dam = dam * (1 - mapModel.skillSystem.getSkill2DamSubPercent());\r\n        dam = Math.ceil(dam);\r\n        this.addHp(-dam);\r\n        // 闪白\r\n        this.shineColor.startShine(constants.materials.shineColorSpine, shineColor);\r\n\r\n        if (this.hp <= 0) {\r\n            if (playerModel.skillLifeNum > 0) {\r\n                // 自动复活\r\n                playerModel.skillLifeNum--;\r\n                this.backLife();\r\n                eventManager.send(msgac.mapRefreshSkill);\r\n                return;\r\n            }\r\n            this.collider.enabled = false;\r\n            this.animationCtrl.playAnimation(constants.animations.die, false, () => {\r\n                // 弹出复活界面\r\n                mapModel.mapLayer.popLayer(constants.layers.BackLifeLayer);\r\n            });\r\n        }\r\n    }\r\n\r\n    addMonster(collider: Collider2D) {\r\n        if (collider.tag != 0) {\r\n            return;\r\n        }\r\n        let monster = collider.getComponent(Monster);\r\n        let index = this.monsterArr.indexOf(monster);\r\n        if (index == -1) {\r\n            monster.isPauseMove = true;\r\n            this.monsterArr.push(monster);\r\n        }\r\n    }\r\n\r\n    removeMonster(collider: Collider2D) {\r\n        if (collider.tag != 0) {\r\n            return;\r\n        }\r\n        let monster = collider.getComponent(Monster);\r\n        let index = this.monsterArr.indexOf(monster);\r\n        if (index != -1) {\r\n            monster.isPauseMove = false;\r\n            this.monsterArr.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            let monster = otherCollider.getComponent(Monster);\r\n            if (!monster) {\r\n                monster = otherCollider.node.parent.getComponent(Monster);\r\n            }\r\n            this.addMonster(otherCollider);\r\n            monster.contactBeginPlayer();\r\n            return;\r\n        }\r\n        if (otherCollider.group == physicsGroup.WALL) {\r\n            this.touchWall();\r\n            this.unschedule(this.touchWall);\r\n            this.wallCollider = otherCollider;\r\n            this.schedule(this.touchWall, 0.5, macro.REPEAT_FOREVER, 0);\r\n            return;\r\n        }\r\n    }\r\n\r\n    contactEnd(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (!cocosUtil.isValid(otherCollider)) {\r\n            return;\r\n        }\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            let monster = otherCollider.getComponent(Monster);\r\n            if (!monster) {\r\n                monster = otherCollider.node.parent.getComponent(Monster);\r\n            }\r\n            this.removeMonster(otherCollider);\r\n            monster.contactEndPlayer();\r\n            return;\r\n        }\r\n        if (otherCollider.group == physicsGroup.WALL) {\r\n            if (this.wallCollider == otherCollider) {\r\n                this.unschedule(this.touchWall);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n\r\n    touchWall() {\r\n        let dam = this.hpMax * 0.05;\r\n        dam = Math.ceil(dam);\r\n        this.hitWithDam(dam);\r\n    }\r\n\r\n    joystickRet(data: JoystickData) {\r\n        if (data.type == \"start\") {\r\n            if (this.hp <= 0) {\r\n                return;\r\n            }\r\n            this.animationCtrl.playAnimation(constants.animations.walk, true);\r\n            return;\r\n        }\r\n        if (data.type == \"move\") {\r\n            this.movePos = data.pos;\r\n            return;\r\n        }\r\n\r\n        if (data.type == \"end\") {\r\n            this.stopMove();\r\n        }\r\n    }\r\n\r\n    stopMove() {\r\n        this.movePos = null;\r\n        if (this.hp > 0) {\r\n            this.animationCtrl.playAnimation(constants.animations.standBy, true);\r\n        }\r\n    }\r\n\r\n    getMoveSpeed() {\r\n        return this.moveSpeed * (1 + mapModel.skillSystem.getSkill2PlayerSpeedAddPercent());\r\n    }\r\n\r\n    move(dt: number) {\r\n        if (!this.movePos || this.hp <= 0) {\r\n            return;\r\n        }\r\n        let nowPos = this.node.getPosition(this.outVec3);\r\n        let spd = this.getMoveSpeed();\r\n        let dis = spd * dt;\r\n        let movePos = this.movePos.clone().multiplyScalar(dis);\r\n        nowPos.add(movePos);\r\n        console.debug(`当前速度：${spd}, 移动距离：${dis}, movepos:${movePos}, nowpos:${nowPos}`)\r\n        this.node.setPosition(nowPos);\r\n        mapModel.mapSystem.adjustInWall(this.node);\r\n\r\n        let scale = this.bodyNode.getScale();\r\n        if (movePos.x >= 0) {\r\n            // 向右\r\n            this.bodyNode.setScale(-Math.abs(scale.x), scale.y);\r\n        } else {\r\n            // 向左\r\n            this.bodyNode.setScale(Math.abs(scale.x), scale.y);\r\n        }\r\n\r\n        mapModel.mapSystem.refreshMapFightWindow();\r\n\r\n        if (this.monsterArr.length > 0) {\r\n            // 模拟推开怪物\r\n            utilTools.forArr(this.monsterArr, (monster: Monster) => {\r\n                monster.playerForceMove(movePos.clone());\r\n            });\r\n        }\r\n\r\n        this.setString(mapModel.mapLayer.playerPosNode, Math.floor(nowPos.x) + \",\" + Math.floor(nowPos.y));\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.move(dt);\r\n    }\r\n\r\n}\r\n\r\n","import { utilTools } from \"../../utils/utilTools\";\r\nimport { ChapterLayer } from \"../compoment/layer/ChapterLayer\";\r\nimport { constants } from \"../data/constants\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { audioManager } from \"../manager/audioManager\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { eventManager } from \"../manager/eventManager\";\r\nimport { localStorageManager } from \"../manager/localStorageManager\";\r\nimport { mapModel } from \"./mapModel\";\r\nimport { UserData } from \"./UserData\";\r\n\r\nclass PlayerModel {\r\n    private static _instance: PlayerModel;\r\n    private constructor() { }\r\n    public static get instance(): PlayerModel {\r\n        if (!this._instance) {\r\n            this._instance = new PlayerModel();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    now: Date = new Date();\r\n    secondInterval: any;\r\n    saveTime: Date;\r\n    skillFreeRefreshCount = 0;\r\n\r\n    // 是否强制打开开发环境\r\n    isOpenDev: boolean = false;\r\n    // 运营录制视频版本\r\n    isRecordAd: boolean = false;\r\n\r\n    dayTaskObj: any = {};\r\n    energyObj: any = {};\r\n    daySignObj: any = {};\r\n    vipObj: any = {};\r\n    shareObj: any = {};\r\n\r\n    isLetterAward = 0;\r\n\r\n    skillBombNum = 1;\r\n    skillHealNum = 1;\r\n    skillMagnetNum = 0;\r\n    skillLifeNum = 0;\r\n\r\n    init() {\r\n        let now = new Date();\r\n        let data: any = UserData.getInstance().playerData;\r\n        utilTools.timeStrToDate(data);\r\n\r\n        audioManager.initData(data.audio);\r\n        this.initData(data.player, now);\r\n        mapModel.initData(data.fight, now);\r\n\r\n        this.openSecondInterval();\r\n        eventManager.on(msgac.saveDataBefore, this.onSaveData, this);\r\n    }\r\n\r\n    initData(data: any, now: Date) {\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n        if (data.saveTime) {\r\n            this.saveTime = data.saveTime;\r\n        } else {\r\n            this.saveTime = now;\r\n        }\r\n\r\n        if (data.skillFreeRefreshCount) {\r\n            this.skillFreeRefreshCount = data.skillFreeRefreshCount\r\n        } else {\r\n            this.skillFreeRefreshCount = 0;\r\n        }\r\n\r\n        if (data.dayTaskObj) {\r\n            this.dayTaskObj = data.dayTaskObj;\r\n        } else {\r\n            this.dayTaskObj = {\r\n                awardFlagArr: [],\r\n                taskObj: {},\r\n            };\r\n        }\r\n\r\n        if (data.energyObj) {\r\n            this.energyObj = data.energyObj;\r\n        } else {\r\n            this.energyObj = {\r\n                num: 0,\r\n                awardObj: {}\r\n            };\r\n        }\r\n        if (!this.energyObj.endTime) {\r\n            this.energyObj.endTime = new Date(now.getTime() + 7 * constants.times.day);\r\n        }\r\n\r\n        if (data.daySignObj) {\r\n            this.daySignObj = data.daySignObj;\r\n        } else {\r\n            let startTime = new Date(now.getTime());\r\n            startTime.setHours(0);\r\n            startTime.setMinutes(0);\r\n            startTime.setSeconds(0);\r\n            startTime.setMilliseconds(0);\r\n            this.daySignObj = {\r\n                startTime: startTime,\r\n                awardDayArr: [],\r\n                finalAward: 0\r\n            };\r\n        }\r\n\r\n        if (data.isLetterAward) {\r\n            this.isLetterAward = data.isLetterAward;\r\n        } else {\r\n            this.isLetterAward = 0;\r\n        }\r\n\r\n        if (data.vipObj) {\r\n            this.vipObj = data.vipObj;\r\n        } else {\r\n            this.vipObj = {\r\n                vip: 1,\r\n                adNum: 0,\r\n                dayAward: 0,\r\n                onceObj: {}\r\n            };\r\n        }\r\n\r\n        if (data.shareObj) {\r\n            this.shareObj = data.shareObj;\r\n        } else {\r\n            this.shareObj = {\r\n                dayNum: 0,\r\n                idAwardObj: {},\r\n                friendNum: 0,\r\n                friendAdNum: 0,\r\n                friendPassNum: 0\r\n            };\r\n        }\r\n\r\n        if (data.skillBombNum == undefined) {\r\n            this.skillBombNum = 1;\r\n        } else {\r\n            this.skillBombNum = data.skillBombNum;\r\n        }\r\n        if (data.skillHealNum == undefined) {\r\n            this.skillHealNum = 1;\r\n        } else {\r\n            this.skillHealNum = data.skillHealNum;\r\n        }\r\n        if (data.skillMagnetNum == undefined) {\r\n            this.skillMagnetNum = 0;\r\n        } else {\r\n            this.skillMagnetNum = data.skillMagnetNum;\r\n        }\r\n        if (data.skillLifeNum == undefined) {\r\n            this.skillLifeNum = 1;\r\n        } else {\r\n            this.skillLifeNum = data.skillLifeNum;\r\n        }\r\n\r\n        this.addDayTaskNum(1);\r\n    }\r\n\r\n    getSaveData(now: Date) {\r\n        let data: any = {};\r\n        data.saveTime = this.saveTime;\r\n        data.skillFreeRefreshCount = this.skillFreeRefreshCount;\r\n        data.dayTaskObj = this.dayTaskObj;\r\n        data.energyObj = this.energyObj;\r\n        data.daySignObj = this.daySignObj;\r\n        data.isLetterAward = this.isLetterAward;\r\n        data.vipObj = this.vipObj;\r\n        data.shareObj = this.shareObj;\r\n        data.skillBombNum = this.skillBombNum;\r\n        data.skillHealNum = this.skillHealNum;\r\n        data.skillMagnetNum = this.skillMagnetNum;\r\n        data.skillLifeNum = this.skillLifeNum;\r\n\r\n        return data;\r\n    }\r\n\r\n    onSaveData() {\r\n        let now = new Date();\r\n        let data: any = {};\r\n        data.player = this.getSaveData(now);\r\n        data.audio = audioManager.getSaveData(now);\r\n\r\n        UserData.getInstance().playerData = data;\r\n    }\r\n\r\n    openSecondInterval() {\r\n        if (this.secondInterval) {\r\n            clearInterval(this.secondInterval);\r\n        }\r\n        this.secondInterval = setInterval(this.updateSecond.bind(this), 1000);\r\n        this.updateSecond();\r\n    }\r\n\r\n    updateSecond() {\r\n        let now = new Date();\r\n        this.now = now;\r\n\r\n        if (utilTools.overDay(this.saveTime, now)) {\r\n            // 跨天了\r\n            this.saveTime = now;\r\n            this.overDay(now);\r\n            // 通知UI层\r\n            eventManager.send(msgac.overDay);\r\n        }\r\n\r\n        if (now.getTime() >= this.energyObj.endTime) {\r\n            this.energyObj = {\r\n                num: 0,\r\n                awardObj: {},\r\n                endTime: new Date(now.getTime() + 7 * constants.times.day)\r\n            };\r\n            eventManager.send(msgac.energyObjRefresh);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否处于开发环境\r\n     */\r\n    isInDevelopmentEnvironment(): boolean {\r\n        return this.isOpenDev;\r\n    }\r\n\r\n    overDay(now: Date) {\r\n        this.skillFreeRefreshCount = 0;\r\n        this.dayTaskObj = {\r\n            awardFlagArr: [],\r\n            taskObj: {},\r\n        };\r\n        this.vipObj.dayAward = 0;\r\n        this.shareObj.dayNum = 0;\r\n        UserData.getInstance().dayAct = 0;\r\n    }\r\n\r\n    // 清楚存档，方便开发测试用\r\n    clearGameData() {\r\n        localStorageManager.setGameData({});\r\n        this.init();\r\n    }\r\n\r\n    sendToUINotice(info: any) {\r\n        eventManager.send(msgac.showNotice, info);\r\n    }\r\n\r\n    getTaskInfoById(id: number) {\r\n        let info = this.dayTaskObj.taskObj[id];\r\n        if (!info) {\r\n            info = {\r\n                num: 0,\r\n                getAward: 0\r\n            };\r\n            this.dayTaskObj.taskObj[id] = info;\r\n        }\r\n        return info;\r\n    }\r\n\r\n    addDayTaskNum(id: number, num: number = 1) {\r\n        let info = this.getTaskInfoById(id);\r\n        info.num += num;\r\n        let row = designManager.getRowById(constants.tableName.dayTask, id);\r\n        if (info.num >= row.needNum && !info.getAward) {\r\n            switch (id) {\r\n                case 4:\r\n                case 5:\r\n                case 6:\r\n                    break;\r\n                default:\r\n                    eventManager.send(msgac.refreshRedPoint);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    getEnergyAwardInfoById(id: number) {\r\n        let info = this.energyObj.awardObj[id];\r\n        if (!info) {\r\n            info = {};\r\n            this.energyObj.awardObj[id] = info;\r\n        }\r\n        return info;\r\n    }\r\n\r\n    hasLetterAward() {\r\n        if (playerModel.isLetterAward) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    hasDaySignAward() {\r\n        let now = new Date();\r\n        let day = Math.floor((now.getTime() - playerModel.daySignObj.startTime) / constants.times.day);\r\n\r\n        let row = designManager.getRowById(constants.tableName.daySign, day + 1);\r\n        if (!row) {\r\n            return false;\r\n        }\r\n\r\n        if (playerModel.daySignObj.awardDayArr.indexOf(day) == -1) {\r\n            return true;;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    hasDayTaskAward() {\r\n        let tb = designManager.getTable(constants.tableName.dayTask);\r\n        for (let i in tb) {\r\n            let row = tb[i];\r\n            let info = playerModel.getTaskInfoById(row.id);\r\n            if (info.num >= row.needNum && !info.getAward) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    hasEnergyAward() {\r\n        let tb = designManager.getTable(constants.tableName.energyAward);\r\n        for (let i in tb) {\r\n            let row = tb[i];\r\n            if (UserData.getInstance().energy < row.num) {\r\n                break;\r\n            }\r\n            let info = playerModel.getEnergyAwardInfoById(row.id);\r\n            if (!info.award1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    addVipAdNum() {\r\n        this.vipObj.adNum++;\r\n        let row = designManager.getRowById(constants.tableName.vip, this.vipObj.vip);\r\n        if (this.vipObj.adNum >= row.adNum) {\r\n            let nextRow = designManager.getRowById(constants.tableName.vip, this.vipObj.vip + 1);\r\n            if (nextRow) {\r\n                // 提升VIP等级\r\n                this.vipObj.vip++;\r\n                this.vipObj.adNum = 0;\r\n                this.vipObj.dayAward = 0;\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    hasVipAward() {\r\n        if (!this.vipObj.dayAward || !this.vipObj.onceObj[this.vipObj.vip]) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    hasChapterBoxAward() {\r\n        for (let i = 1; i <= UserData.getInstance().openLevel; i++) {\r\n            let leveldata = UserData.getInstance().getLevelData(i);\r\n            for (let j = 0; j < constants.design.chapterBoxNum; j++) {\r\n                if (leveldata.Time >= ((j+1) * 5 ) * 60) {\r\n                    if (leveldata.ReceiveState[j] == 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\nexport const playerModel = PlayerModel.instance;\r\n\r\n","import { Component, ProgressBar, _decorator } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ProgressCtrl')\r\nexport class ProgressCtrl extends Component {\r\n\r\n    private progressBar: ProgressBar;\r\n    // 时间，单位：秒\r\n    private time: number;\r\n    private timeCount: number;\r\n    private endCb: Function;\r\n\r\n    onLoad() {\r\n        this.progressBar = this.getComponent(ProgressBar);\r\n        if (!this.progressBar) {\r\n            this.progressBar = this.getComponentInChildren(ProgressBar);\r\n        }\r\n    }\r\n\r\n    startLoadProgress(time: number, endCb?: Function) {\r\n        if (this.timeCount != undefined) {\r\n            // 重复调用了\r\n            return;\r\n        }\r\n        this.time = time;\r\n        this.endCb = endCb;\r\n        this.timeCount = 0;\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.timeCount == undefined || !this.progressBar) {\r\n            return;\r\n        }\r\n        this.timeCount += dt;\r\n        let p = this.timeCount / this.time;\r\n        this.progressBar.progress = p;\r\n        if (p >= 1) {\r\n            this.timeCount = undefined;\r\n            if (this.endCb) {\r\n                this.endCb();\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Collider2D, Contact2DType, find, Node, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { BaseLayer } from '../../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('Prop')\r\nexport class Prop extends BaseLayer {\r\n\r\n    id: number;\r\n    row: any;\r\n    extraObj: any;\r\n\r\n    bodyNode: Node;\r\n    aniNode: Node;\r\n    collider: BoxCollider2D;\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    propUtil: any;\r\n\r\n    isFollowPlayer: boolean;\r\n    followSpeed: number;\r\n\r\n    onLoad() {\r\n        this.collider = this.getComponent(BoxCollider2D);\r\n        this.animationCtrl = this.addComponent(AnimationCtrl);\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.aniNode = find(\"ani\", this.node);\r\n\r\n        if (this.collider) {\r\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n\r\n    }\r\n\r\n    init(id: number, worldPos: Vec3, extraObj?: any) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n        this.id = id;\r\n        this.row = designManager.getRowById(constants.tableName.prop, id);\r\n        this.extraObj = extraObj;\r\n        this.unscheduleAllCallbacks();\r\n        if (this.collider) {\r\n            this.collider.enabled = true;\r\n        }\r\n\r\n        this.isFollowPlayer = false;\r\n        this.followSpeed = -1000;\r\n\r\n        let pos = cocosUtil.convertToNodeSpace(this.node, worldPos);\r\n        this.node.setPosition(pos);\r\n\r\n        if (this.aniNode) {\r\n            this.aniNode.active = true;\r\n        }\r\n        this.setSpriteFrame(this.bodyNode, this.row.icon);\r\n\r\n        try {\r\n            this.propUtil = cocosUtil.addComponentOnce(this, \"Prop\" + id);\r\n            this.propUtil.unscheduleAllCallbacks();\r\n            this.propUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.group == physicsGroup.PLAYER_BULLET) {\r\n            if (this.id == constants.propIds.box1) {\r\n                // 打到木箱\r\n                this.collider.enabled = false;\r\n                this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n                    this.recycleSelf();\r\n                    // // 按照权重，产生道具\r\n                    // let tb = designManager.getTable(constants.tableName.box1);\r\n                    // let arr = [];\r\n                    // for (let i in tb) {\r\n                    //     let row = tb[i];\r\n                    //     if (row.mapId == 0 || row.mapId == mapModel.mapId) {\r\n                    //         arr.push(row);\r\n                    //     }\r\n                    // }\r\n                    // let ret = utilTools.getRowByWeight(arr);\r\n                    // let num = utilTools.getFloatValue(ret.minNum, ret.maxNum, true);\r\n                    // let extraObj: any = {};\r\n                    // extraObj.num = num;\r\n                    // extraObj.propId = ret.propId;\r\n                    // let propId = ret.propId;\r\n                    // let row = designManager.getRowById(constants.tableName.prop, propId);\r\n                    // if (row.type == 8 || row.type == 11) {\r\n                    //     propId = constants.propIds.equip;\r\n                    // }\r\n                    // mapModel.propSystem.addProp(propId, cocosUtil.convertToWorldSpace(this.node), extraObj);\r\n                });\r\n                // 2024-10-22 修改，播放动画同时产生道具\r\n                // 按照权重，产生道具\r\n                let tb = designManager.getTable(constants.tableName.box1);\r\n                let arr = [];\r\n                for (let i in tb) {\r\n                    let row = tb[i];\r\n                    if (row.mapId == 0 || row.mapId == mapModel.mapId) {\r\n                        arr.push(row);\r\n                    }\r\n                }\r\n                let ret = utilTools.getRowByWeight(arr);\r\n                let isIt = false;\r\n                if(ret.propId != constants.propIds.addHpPercent && mapModel.player.hp <= mapModel.player.hpMax*0.5 && mapModel.propSystem.getPropNums(constants.propIds.addHpPercent) < 2){// 如果当前玩家血量过低，则产生鸡腿的概率增加4倍\r\n                    for (let i = 0; i < designManager.config.skillPropAddMult; i++) {\r\n                        if (ret.propId == constants.propIds.addHpPercent) {\r\n                            isIt = true;\r\n                            break;\r\n                        }else{\r\n                            ret = utilTools.getRowByWeight(arr);\r\n                        }                   \r\n                    }\r\n                } \r\n                if (!isIt && ret.propId != constants.propIds.bomb && mapModel.monsterSystem.aliveMonsterNum >= 100 && mapModel.propSystem.getPropNums(constants.propIds.bomb) < 2) {// 如果当前怪物数量太多，则产生炸弹的概率增加4倍\r\n                    for (let i = 0; i < designManager.config.skillPropAddMult; i++) {\r\n                        if (ret.propId == constants.propIds.bomb) {\r\n                            isIt = true;\r\n                            break;\r\n                        }else{\r\n                            ret = utilTools.getRowByWeight(arr);\r\n                        }                   \r\n                    }\r\n                }\r\n                if (!isIt && ret.propId != constants.propIds.magnet && mapModel.propSystem.getPropNums(constants.propIds.exp) >= 100 && mapModel.propSystem.getPropNums(constants.propIds.magnet) < 2) {// 如果当前经验数量太多，则产生吸铁石的概率增加4倍\r\n                    for (let i = 0; i < designManager.config.skillPropAddMult; i++) {\r\n                        if (ret.propId == constants.propIds.magnet) {\r\n                            isIt = true;\r\n                            break;\r\n                        }else{\r\n                            ret = utilTools.getRowByWeight(arr);\r\n                        }                   \r\n                    }\r\n                }\r\n                let num = utilTools.getFloatValue(ret.minNum, ret.maxNum, true);\r\n                let extraObj: any = {};\r\n                extraObj.num = num;\r\n                extraObj.propId = ret.propId;\r\n                let propId = ret.propId;\r\n                let row = designManager.getRowById(constants.tableName.prop, propId);\r\n                if (row.type == 8 || row.type == 11) {\r\n                    propId = constants.propIds.equip;\r\n                }\r\n                mapModel.propSystem.addProp(propId, cocosUtil.convertToWorldSpace(this.node), extraObj);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    contactPlayer() {\r\n        if (this.propUtil && this.propUtil.notContact) {\r\n            return;\r\n        }\r\n        if (this.propUtil && this.propUtil.autoGet) {\r\n            // 自动获得\r\n            return;\r\n        }\r\n        this.node.active = true;\r\n        if (this.collider) {\r\n            this.collider.enabled = false;\r\n        }\r\n        this.isFollowPlayer = true;\r\n        if (this.aniNode) {\r\n            this.aniNode.active = false;\r\n        }\r\n        if (this.propUtil && this.propUtil.contactStart) {\r\n            this.propUtil.contactStart();\r\n        }\r\n    }\r\n\r\n    doDisPlayerGet(dis: number) {\r\n        if (this.collider) {\r\n            // 碰撞体来管理的\r\n            return;\r\n        }\r\n        if (dis > 100 + mapModel.skillSystem.getSkill2PropGetAddDis()) {\r\n            return;\r\n        }\r\n        this.contactPlayer();\r\n    }\r\n\r\n    // 玩家吃到道具\r\n    playerGetProp() {\r\n        this.recycleSelf();\r\n        this.isFollowPlayer = false;\r\n        let num = 1;\r\n        if (this.extraObj && this.extraObj.num > 0) {\r\n            num = this.extraObj.num;\r\n        }\r\n        let propId = this.id;\r\n        if (this.id == constants.propIds.equip) {\r\n            propId = this.extraObj.propId;\r\n        }\r\n        let extraObj = {\r\n            pos: cocosUtil.convertToWorldSpaceWithPos(this.node, this.node.position)\r\n        };\r\n        mapModel.propSystem.getProp(propId, num, extraObj);\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.propSystem.recyclePropNode(this.node);\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (!this.isFollowPlayer) {\r\n            return;\r\n        }\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n        this.followSpeed += 50;\r\n        let moveDis = this.followSpeed * dt;\r\n        let direction = playerPos.subtract(pos).normalize().multiplyScalar(moveDis);\r\n        pos.add(direction);\r\n        this.node.setPosition(pos);\r\n\r\n        if (moveDis > 0) {\r\n            playerPos = mapModel.player.node.getPosition();\r\n            let afterDirection = playerPos.subtract(pos);\r\n            let afterAngle = utilTools.radianToAngle(Vec2.angle(direction, afterDirection));\r\n            if (afterAngle > 90) {\r\n                this.playerGetProp();\r\n                return;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationTrack } from '../../base/AnimationTrack';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 宝箱怪金币\r\n@ccclass('Prop1001')\r\nexport class Prop1001 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    autoGet: boolean = true;\r\n    animationTrack: AnimationTrack;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        this.animationTrack = cocosUtil.addComponentOnce(this.node, AnimationTrack);\r\n        this.animationTrack.startShowThrow(() => {\r\n            this.prop.playerGetProp();\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 装备\r\n@ccclass('Prop1002')\r\nexport class Prop1002 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        let row = designManager.getRowById(constants.tableName.prop, this.prop.extraObj.propId);\r\n        this.prop.setSpriteFrame2(this.prop.bodyNode, \"prop/\" + row.icon);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { myLog } from '../../../../common/myLog';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 金币\r\n@ccclass('Prop101')\r\nexport class Prop101 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        let num = this.prop.extraObj.num;\r\n        let arr = designManager.getRowsByType(constants.tableName.prop, constants.propTypes.coin);\r\n        let propRow = null;\r\n        utilTools.forArr(arr, (row: any) => {\r\n            if (num >= row.p1 && num <= row.p2) {\r\n                propRow = row;\r\n                return true;\r\n            }\r\n        });\r\n        if (!propRow) {\r\n            myLog.e(\"coin num:\" + num + \" not in prop table\");\r\n            return;\r\n        }\r\n\r\n        this.prop.setSpriteFrame(this.prop.bodyNode, propRow.icon);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../../common/myLog';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 经验\r\n@ccclass('Prop201')\r\nexport class Prop201 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        let num = this.prop.extraObj.num;\r\n        let arr = designManager.getRowsByType(constants.tableName.prop, constants.propTypes.exp);\r\n        let propRow = null;\r\n        utilTools.forArr(arr, (row: any) => {\r\n            if (num >= row.p1 && num <= row.p2) {\r\n                propRow = row;\r\n                return true;\r\n            }\r\n        });\r\n        if (!propRow) {\r\n            myLog.e(\"exp num:\" + num + \" not in prop table\");\r\n            return;\r\n        }\r\n\r\n        // 根据经验值大小显示缩放比\r\n        let d = (propRow.p2 - propRow.p1) * 0.8;\r\n        let scale = 1;\r\n        if (num - propRow.p1 > d) {\r\n            scale = 1.3;\r\n        }\r\n        this.prop.bodyNode.setScale(v3(scale, scale, 1));\r\n\r\n        this.prop.setSpriteFrame(this.prop.bodyNode, propRow.icon);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, Component, find, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 宝箱\r\n@ccclass('Prop701')\r\nexport class Prop701 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    notContact: boolean;\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        this.notContact = true;\r\n\r\n        this.animationCtrl = cocosUtil.addComponentOnce(find(\"ani\", this.node), AnimationCtrl);\r\n        this.animationCtrl.node.active = true;\r\n        this.animationCtrl.playAnimationOnce(\"1\", () => {\r\n            this.animationCtrl.playAnimation(\"2\", true);\r\n            this.notContact = false;\r\n        });\r\n\r\n        this.prop.bodyNode.scale = v3(0, 0, 1);\r\n        this.prop.bodyNode.getComponent(Animation).play(\"boxAni\");\r\n    }\r\n\r\n    contactStart() {\r\n        this.animationCtrl.node.active = false;\r\n    }\r\n\r\n}\r\n\r\n","import { Label, Node, RichText, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { find } from 'cc';\r\nimport { localizeManager } from '../../../localization';\r\nimport { Vec3 } from 'cc';\r\nimport { UITransform } from 'cc';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropInfoLayer')\r\nexport class PropInfoLayer extends BaseUILayer {\r\n\r\n\r\n    @property({ type: Node, tooltip: \"道具节点\" }) propItem: Node = null;\r\n    @property({ type: Node, tooltip: \"按钮\" }) btnWear: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"属性图标\" }) attrIcon: Node = null;\r\n    @property({ type: Label, tooltip: \"属性\" }) attrlabel: Label = null;\r\n    @property({ type: Label, tooltip: \"属性值\" }) attrNumLab: Label = null;\r\n\r\n    @property({ type: Label, tooltip: \"装备详情\" }) propInfoLab: Label = null;\r\n    @property({ type: Label, tooltip: \"装备名字\" }) propNameLab: Label = null;\r\n\r\n    @property({ type: Label, tooltip: \"套装名字\" }) suitNameLab: Label = null;\r\n\r\n    @property({ type: RichText, tooltip: \"3套属性\" }) suitAttr3: RichText = null;\r\n    @property({ type: RichText, tooltip: \"5套属性\" }) suitAttr5: RichText = null;\r\n    @property({ type: Label, tooltip: \"套装数量\" }) suitNum: Label = null;\r\n\r\n    @property({ type: Node, tooltip: \"套装节点\" }) suitNode: Node = null;\r\n\r\n\r\n    _propId = 0\r\n    _propFlag = 0\r\n    _weaponLv = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this._propId = this.layerData.propId\r\n        this._propFlag = this.layerData.flag\r\n        this._weaponLv = this.layerData.weaponLv;\r\n\r\n        find(\"ui_d/ui_bt/Label\",this.node).localize(\"title\", constants.layers.PropInfoLayer);\r\n\r\n        let propData = designManager.getRowById(constants.tableName.prop, this._propId)\r\n\r\n        if (propData.atk > 0) {\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_gj\", null, constants.bundles.wwqVec)\r\n            let atk = propData.atk;\r\n            if (this._weaponLv > 0) {\r\n                atk = UserData.getInstance().weaponOptLvEffect(atk, this._weaponLv);\r\n            }\r\n            this.attrNumLab.string = \"+\" + atk\r\n            this.attrNumLab.color = constants.colors.blue.parseColor()\r\n            // this.attrlabel.string = \"攻击\"\r\n            this.attrlabel.string = localizeManager._localize(null, \"atk\", constants.catName.common);\r\n        } else if (propData.hp > 0) {\r\n            this.attrNumLab.string = \"+\" + propData.hp\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_sm\", null, constants.bundles.wwqVec)\r\n            // this.attrlabel.string = \"生命\"\r\n            this.attrlabel.string  = localizeManager._localize(null, \"hp\", constants.catName.common);\r\n            this.attrNumLab.color = constants.colors.green.parseColor()\r\n        }\r\n\r\n        // this.propInfoLab.string = \"\" + propData.info\r\n        // this.propNameLab.string = \"\" + propData.name\r\n        this.propInfoLab.node.localizeInfo(propData.id, constants.catName.propSystem);\r\n        this.propNameLab.node.localizeName(propData.id, constants.catName.propSystem);\r\n\r\n        this.propItem.getComponent(PropItemPrefab).setView(this._propId, 0, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_ShowType)\r\n        this.btnWear.off(Node.EventType.TOUCH_END, this.unWearProp, this);\r\n        this.btnWear.off(Node.EventType.TOUCH_END, this.wearProp, this);\r\n        if (this._propFlag & PropItemPrefab.Type_ToWear) {\r\n            // this.btnWear.getChildByName(\"Label\").getComponent(Label).string = \"穿戴\"\r\n            this.btnWear.getChildByName(\"Label\").getComponent(Label).string = localizeManager._localize(null, \"equip\", constants.layers.PropInfoLayer)\r\n            this.setSpriteFrame2(this.btnWear, \"btnres/ui_yellow\", null, constants.bundles.common)\r\n            this.btnWear.on(Node.EventType.TOUCH_END, this.wearProp, this);\r\n        } else if (this._propFlag & PropItemPrefab.Type_UnWear) {\r\n            // this.btnWear.getChildByName(\"Label\").getComponent(Label).string = \"卸下\"\r\n            this.btnWear.getChildByName(\"Label\").getComponent(Label).string = localizeManager._localize(null, \"unequip\", constants.layers.PropInfoLayer)\r\n            this.btnWear.on(Node.EventType.TOUCH_END, this.unWearProp, this);\r\n            this.setSpriteFrame2(this.btnWear, \"btnres/btn_purple\", null, constants.bundles.common)\r\n        } else {\r\n            this.btnWear.active = false\r\n        }\r\n\r\n        let suitId = propData.suit_id\r\n        if (suitId) {\r\n            this.suitNode.active = true\r\n            let suitData = designManager.getRowById(constants.tableName.suit, suitId)\r\n            // this.suitNameLab.string = suitData.name\r\n            this.suitNameLab.node.localizeName(suitId, constants.tableName.suit);\r\n\r\n            let suitNum = UserData.getInstance().getSuitNum(propData)\r\n            this.suitNum.string = \"(\" + suitNum + \"/5)\"\r\n\r\n            let getColor = function (num, color1, color2, str) {\r\n                let color = suitNum >= num ? color1 : color2\r\n                return \"<color=\" + color + \">\" + str + \"</color>\"\r\n            }\r\n\r\n            let atkStr3 = \"\"\r\n            if (suitData.effectAtk_3 > 0) {\r\n                // atkStr3 += getColor(3, \"#ffffff\", \"#4c5061\", \"攻击\") + getColor(3, \"#1096fd\", \"#4c5061\", \" +\" + suitData.effectAtk_3 + \"%\")\r\n                atkStr3 += getColor(3, \"#ffffff\", \"#4c5061\", localizeManager._localize(null, \"atk\", constants.catName.common)) + getColor(3, \"#1096fd\", \"#4c5061\", \" +\" + suitData.effectAtk_3 + \"%\")\r\n            }\r\n            \r\n            if (suitData.effectHP_3 > 0) {\r\n                if (atkStr3 != \"\") {\r\n                    atkStr3 += \" \"\r\n                }\r\n                // atkStr3 += getColor(3, \"#ffffff\", \"#4c5061\", \"血量\") + getColor(3, \"#38ff38\", \"#4c5061\", \" +\" + suitData.effectHP_3 + \"%\")\r\n                atkStr3 += getColor(3, \"#ffffff\", \"#4c5061\", localizeManager._localize(null, \"hp2\", constants.catName.common)) + getColor(3, \"#38ff38\", \"#4c5061\", \" +\" + suitData.effectHP_3 + \"%\")\r\n            }\r\n\r\n            this.suitAttr3.string = atkStr3\r\n\r\n            let atkStr5 = \"\"\r\n            if (suitData.effectAtk_5 > 0) {\r\n                // atkStr5 += getColor(5, \"#ffffff\", \"#4c5061\", \"攻击\") + getColor(5, \"#1096fd\", \"#4c5061\", \" +\" + suitData.effectAtk_5 + \"%\")\r\n                atkStr5 += getColor(5, \"#ffffff\", \"#4c5061\", localizeManager._localize(null, \"atk\", constants.catName.common)) + getColor(5, \"#1096fd\", \"#4c5061\", \" +\" + suitData.effectAtk_5 + \"%\")\r\n            }\r\n\r\n            if (suitData.effectHP_5 > 0) {\r\n                if (atkStr5 != \"\") {\r\n                    atkStr5 += \" \"\r\n                }\r\n                // atkStr5 += getColor(5, \"#ffffff\", \"#4c5061\", \"血量\") + getColor(5, \"#38ff38\", \"#4c5061\", \" +\" + suitData.effectHP_5 + \"%\")\r\n                atkStr5 += getColor(5, \"#ffffff\", \"#4c5061\", localizeManager._localize(null, \"hp2\", constants.catName.common)) + getColor(5, \"#38ff38\", \"#4c5061\", \" +\" + suitData.effectHP_5 + \"%\")\r\n            }\r\n            this.suitAttr5.string = atkStr5\r\n        } else {\r\n            this.suitNode.active = false\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.suitNum.node.position = new Vec3(this.suitNameLab.node.position.x+this.suitNameLab.node.getComponent(UITransform).width+10, this.suitNameLab.node.position.y,this.suitNameLab.node.position.z)\r\n    }\r\n\r\n    initBtnInfo() {\r\n\r\n    }\r\n\r\n    wearProp() {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, this._propId)\r\n        UserData.getInstance().setWearProp(propdata)\r\n        eventManager.send(msgac.wearDrop)\r\n        this.onClose()\r\n    }\r\n\r\n    unWearProp() {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, this._propId)\r\n        UserData.getInstance().unWearProp(propdata)\r\n        eventManager.send(msgac.wearDrop)\r\n        this.onClose()\r\n    }\r\n\r\n    onClose() {\r\n        this.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { find, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropInfoLayer2')\r\nexport class PropInfoLayer2 extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let row = designManager.getRowById(constants.tableName.prop, this.layerData.id);\r\n        // this.setString(this.getNodeByPath(\"ui/info\"), row.info);\r\n        // this.setString(this.getNodeByPath(\"ui/name/text\"), row.name);\r\n        this.getNodeByPath(\"ui/info\").localizeInfo(row.id, constants.catName.propSystem);\r\n        this.getNodeByPath(\"ui/name/text\").localizeName(row.id, constants.catName.propSystem);\r\n\r\n        this.setPropItem(row.id, this.getNodeByPath(\"ui/propItem/icon\"), 0, this.getNodeByPath(\"ui/propItem/bg\"));\r\n\r\n        let numNode = this.getNodeByPath(\"ui/propItem/num\");\r\n        if (this.layerData.num != undefined) {\r\n            numNode.active = true;\r\n            this.setString(find(\"val\", numNode), this.layerData.num);\r\n        } else {\r\n            numNode.active = false;\r\n        }\r\n\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBg() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Node, Label, Sprite, UITransform, v3, _decorator } from \"cc\";\r\nimport { myLog } from \"../../../common/myLog\";\r\nimport { constants } from \"../../data/constants\";\r\nimport { audioManager } from \"../../manager/audioManager\";\r\nimport { designManager } from \"../../manager/designManager\";\r\nimport { BaseUILayer } from \"../layer/BaseUILayer\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropItemPrefab')\r\nexport class PropItemPrefab extends BaseUILayer {\r\n\r\n    @property({ type: Sprite, tooltip: \"图标\" }) icon: Sprite = null;\r\n    @property({ type: Sprite, tooltip: \"图标背景\" }) bg: Sprite = null;\r\n    @property({ type: Node, tooltip: \"灰色遮罩\" }) greybg: Node = null;\r\n    @property({ type: Sprite, tooltip: \"图标背景\" }) typeIcon: Sprite = null;\r\n\r\n\r\n    @property({ type: Label, tooltip: \"数量\" }) numLabel: Label = null;\r\n\r\n    private _propId: number = 0\r\n    private _propFlag = 0\r\n\r\n    public static Type_HideNum = 1\r\n    public static Type_UnWear = 1 << 1 // 详情可以穿戴按钮\r\n    public static Type_ToWear = 1 << 2 // 详情可以卸下按钮\r\n    public static Type_Bless = 1 << 3   // 点击选择合成 \r\n    public static Type_UnTouch = 1 << 4  // 不能点击\r\n    public static Type_Grey = 1 << 5  // 灰色遮罩\r\n    public static Type_ShowType = 1 << 6  // 展示类型图标\r\n    public static Type_UnKnow = 1 << 7  // 展示类型图标\r\n    public static Type_BigIcon = 1 << 8  // 展示类型图标\r\n    public static Type_OnlyIcon = 1 << 9  // 展示类型图标\r\n\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    public get propId() {\r\n        return this._propId\r\n    }\r\n\r\n    setView(id, num, flag = 0) {\r\n        this._propId = id\r\n        let propdata = designManager.getRowById(constants.tableName.prop, id)\r\n        let self = this\r\n\r\n        let fun = function (sprite) {\r\n            self.setImageCustomSize(sprite, 95)\r\n        }\r\n        this.node.off(Node.EventType.TOUCH_END, this.openInfo, this);\r\n\r\n\r\n\r\n        if (flag & PropItemPrefab.Type_UnKnow) {\r\n            this.numLabel.string = \"x??\"\r\n            this.setSpriteFrame2(this.icon.node, \"prop/prop_unknow\", fun, constants.bundles.icon)\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            return\r\n        }\r\n\r\n\r\n        if (propdata) {\r\n            let icon = \"prop/\" + propdata.icon\r\n            if (propdata.type == 11) {\r\n                let weaponData = designManager.getRowById(constants.tableName.weapon, propdata.weaponid)\r\n                icon = \"weapon/\" + weaponData.icon\r\n            }\r\n            this.setSpriteFrame2(this.bg.node, \"prop/propbg\" + propdata.quality, null, constants.bundles.icon)\r\n            this.setSpriteFrame2(this.typeIcon.node, \"prop/propType\" + propdata.quality, null, constants.bundles.icon)\r\n            this.setSpriteFrame2(this.icon.node, icon, fun, constants.bundles.icon)\r\n\r\n            if (!(flag & PropItemPrefab.Type_UnTouch) && (propdata.type == 8 || propdata.type == 11)) {\r\n                this.node.on(Node.EventType.TOUCH_END, this.openInfo, this);\r\n            }\r\n        } else {\r\n            this.setSpriteFrame2(this.bg.node, \"heroLayer/propbg\", null, constants.bundles.wwqVec)\r\n            this.setSpriteFrame2(this.icon.node, \"prop/prop_seat_\" + num, fun, constants.bundles.icon)\r\n            this.numLabel.node.active = false\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            return\r\n        }\r\n\r\n        if (flag & PropItemPrefab.Type_OnlyIcon) {\r\n            this.bg.node.active = false\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            this.numLabel.node.active = false\r\n\r\n            return\r\n        }\r\n\r\n\r\n        if (flag & PropItemPrefab.Type_BigIcon) {\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            this.bg.node.active = false\r\n            this.node.scale = v3(3, 3, 3)\r\n            this.numLabel.node.active = false\r\n            return\r\n        }\r\n\r\n\r\n        this.numLabel.string = \"X\" + num\r\n        this._propFlag = flag\r\n\r\n        //  myLog.i(\"prop : \", this._propId, flag)\r\n        if (flag & PropItemPrefab.Type_HideNum) {\r\n            this.numLabel.node.active = false\r\n        }\r\n\r\n        if (flag & PropItemPrefab.Type_Grey) {\r\n            this.greybg.active = true\r\n        } else {\r\n            this.greybg.active = false\r\n        }\r\n\r\n        if (flag & PropItemPrefab.Type_ShowType) {\r\n            this.typeIcon.node.active = true\r\n        } else {\r\n            this.typeIcon.node.active = false\r\n        }\r\n    }\r\n\r\n    openInfo() {\r\n        myLog.i(\"点击装备\")\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.openLayer(constants.layers.PropInfoLayer, { propId: this._propId, flag: this._propFlag })\r\n    }\r\n\r\n    setScale(width) {\r\n        let bgWidth = this.bg.getComponent(UITransform).width\r\n        let bgHeight = this.bg.getComponent(UITransform).height\r\n        let scale = width / bgWidth\r\n        this.node.scale = v3(scale, scale, 1)\r\n\r\n        this.node.getComponent(UITransform).width = bgWidth * scale\r\n        this.node.getComponent(UITransform).height = bgHeight * scale\r\n    }\r\n\r\n    changeBg(resPath, bundleName) {\r\n        this.setSpriteFrame2(this.bg.node, resPath, null, bundleName)\r\n        \r\n    }\r\n\r\n}","import { Node, Prefab, UITransform, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Prop } from '../item/prop/Prop';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { SkillSystem } from './SkillSystem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropSystem')\r\nexport class PropSystem extends BaseLayer {\r\n\r\n    // 按照道具id进行UI分层\r\n    idPropLayerObj: any = {};\r\n    idPrefabObj: any = {};\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getPropLayerNameById(id: number) {\r\n        return \"propLayer\" + id;\r\n    }\r\n\r\n    getPropLayerById(id: number) {\r\n        let propLayer = this.idPropLayerObj[id];\r\n        if (!propLayer) {\r\n            propLayer = new Node(this.getPropLayerNameById(id));\r\n            propLayer.addComponent(UITransform);\r\n            propLayer.setPosition(0, 0);\r\n            propLayer.parent = this.node;\r\n            this.idPropLayerObj[id] = propLayer;\r\n\r\n            let nodePoolUtil = propLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(this.idPrefabObj[id]);\r\n        }\r\n        return propLayer;\r\n    }\r\n\r\n    saveDataBefore() {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            let nodePoolUtil = propLayer.getComponent(NodePoolUtil);\r\n            nodePoolUtil.forEachUseNode((node: Node) => {\r\n                let prop = node.getComponent(Prop);\r\n                if (prop.id == constants.propIds.boxMonsterCoin) {\r\n                    prop.playerGetProp();\r\n                    return;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    getSaveData() {\r\n        let propData: any = {};\r\n        propData.arr = [];\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            let nodePoolUtil = propLayer.getComponent(NodePoolUtil);\r\n            nodePoolUtil.forEachUseNode((node: Node) => {\r\n                let prop = node.getComponent(Prop);\r\n                if (prop.id == constants.propIds.boxMonsterCoin) {\r\n                    prop.playerGetProp();\r\n                    return;\r\n                }\r\n                let info: any = {};\r\n                info.id = prop.id;\r\n                info.worldPos = cocosUtil.convertToWorldSpace(node);\r\n                info.extraObj = prop.extraObj;\r\n                propData.arr.push(info);\r\n            });\r\n        });\r\n        return propData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.arr, (prop: any) => {\r\n            this.addProp(prop.id, prop.worldPos, prop.extraObj);\r\n        });\r\n    }\r\n\r\n    addProp(id: number, worldPos: Vec3, extraObj?: any) {\r\n        let nodePoolUtil = this.getPropLayerById(id).getComponent(NodePoolUtil);\r\n\r\n        let tmpFunc = () => {\r\n            let propNode = nodePoolUtil.getNode();\r\n            let prop = cocosUtil.addComponentOnce(propNode, Prop);\r\n            prop.init(id, worldPos, extraObj);\r\n            if (id==constants.propIds.exp) {\r\n                myLog.d(`init exp, num:${extraObj.num}, pos:${worldPos}`)\r\n            }\r\n        };\r\n\r\n        if (!this.idPrefabObj[id]) {\r\n            let name = \"prop\" + id;\r\n            resManager.loadAsset(constants.bundles.prefab, \"prop/\" + name + \"/\" + name, Prefab, null, (err, prefab) => {\r\n                if (!cocosUtil.isValid(this)) {\r\n                    return;\r\n                }\r\n                this.idPrefabObj[id] = prefab;\r\n                nodePoolUtil.init(prefab);\r\n                tmpFunc();\r\n                if (id==constants.propIds.exp) {\r\n                    myLog.d(`增加经验1:${extraObj.num}`);\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        tmpFunc();\r\n        if (id==constants.propIds.exp) {\r\n            myLog.d(`增加经验2:${extraObj.num}`);\r\n        }\r\n    }\r\n\r\n    // 玩家获得道具\r\n    getProp(id: number, num: number = 1, extraObj?: any) {\r\n        if (mapModel.player.hp <= 0) {\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        switch (id) {\r\n            case constants.propIds.exp:\r\n                mapModel.mapSystem.addExp(num + mapModel.skillSystem.getSkill2AddExp());\r\n                break;\r\n            case constants.propIds.coin:\r\n                let addcoin = mapModel.skillSystem.getSkill2AddCoin();\r\n                mapModel.mapSystem.addCoin(num+addcoin);\r\n                if (extraObj && extraObj.pos) {\r\n                    let skill = mapModel.skillSystem.getSkillCompomentByType(11);\r\n                    if (skill && skill.skillUtil) {\r\n                        let exObj = {\r\n                            pos: extraObj.pos,\r\n                            num: num,\r\n                            addCoin: addcoin,\r\n                        }\r\n                        skill.skillUtil.creatTower(exObj);\r\n                    }\r\n                }\r\n                break;\r\n            case constants.propIds.magnet:\r\n                // 磁铁-只吸经验\r\n                mapModel.propSystem.forAllPropById(constants.propIds.exp, (prop: Prop) => {\r\n                    prop.contactPlayer();\r\n                });\r\n                break;\r\n            case constants.propIds.addHpPercent:\r\n                // 回血\r\n                mapModel.player.addHpPercent(row.p1);\r\n                break;\r\n            case constants.propIds.bomb:\r\n                // 炸弹\r\n                mapModel.mapSystem.bomb();\r\n                break;\r\n            case constants.propIds.box2:\r\n                // 水果机\r\n                if (mapModel.player.hp > 0) {\r\n                    mapModel.mapLayer.popLayer(constants.layers.LuckyDrawLayer);\r\n                }\r\n                break;\r\n            case constants.propIds.boxMonsterCoin:\r\n                // 宝箱怪金币\r\n                mapModel.mapSystem.addCoin(1);\r\n                break;\r\n            case constants.propIds.diamond:\r\n                // 钻石，直接塞给玩家\r\n                UserData.getInstance().useBaoShi(num, true);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (row.type == 8 || row.type == 11) {\r\n            // 装备\r\n            mapModel.equipIdArr.push(id);\r\n        }\r\n    }\r\n\r\n    // 获得所有存在的指定道具id的数量\r\n    getPropNums(id:number):number{\r\n        let num = 0;\r\n        this.forAllPropById(id, (prop:Prop) => {\r\n            num++;\r\n        });\r\n        return num;\r\n    }\r\n\r\n    // 遍历所有存在的指定道具id\r\n    forAllPropById(propId: number, cb: (prop: Prop) => void) {\r\n        let layer = this.getPropLayerById(propId);\r\n        let nodePoolUtil = layer.getComponent(NodePoolUtil);\r\n        nodePoolUtil.forEachUseNode((node: Node) => {\r\n            let prop = node.getComponent(Prop);\r\n            if (prop.isFollowPlayer) {\r\n                return;\r\n            }\r\n            cb(prop);\r\n        });\r\n    }\r\n\r\n    // 遍历屏幕范围内的碰撞道具\r\n    forVisiblePropCollider(cb: (prop: Prop) => void) {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            utilTools.forArr(propLayer.children, (propNode: Node) => {\r\n                if (!propNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(propNode)) {\r\n                    return;\r\n                }\r\n                let prop = propNode.getComponent(Prop);\r\n                if (!prop.collider) {\r\n                    return;\r\n                }\r\n                cb(prop);\r\n            });\r\n        });\r\n    }\r\n\r\n    // 遍历屏幕范围内的所有可直接吃的道具\r\n    forVisiblePropContact(cb: (prop: Prop) => void) {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            utilTools.forArr(propLayer.children, (propNode: Node) => {\r\n                if (!propNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(propNode)) {\r\n                    return;\r\n                }\r\n                let prop = propNode.getComponent(Prop);\r\n                if (prop.collider) {\r\n                    return;\r\n                }\r\n                cb(prop);\r\n            });\r\n        });\r\n    }\r\n\r\n    // 遍历所有可直接吃的道具\r\n    forAllPropContact(cb: (prop: Prop) => void) {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            utilTools.forArr(propLayer.children, (propNode: Node) => {\r\n                // @ts-ignore\r\n                if (!propNode.use) {\r\n                    return;\r\n                }\r\n                let prop = propNode.getComponent(Prop);\r\n                if (prop.collider) {\r\n                    return;\r\n                }\r\n                cb(prop);\r\n            });\r\n        });\r\n    }\r\n\r\n    recyclePropNode(propNode: Node) {\r\n        let prop = propNode.getComponent(Prop);\r\n        let nodePoolUtil = this.getPropLayerById(prop.id).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(propNode);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        // 显示优化\r\n        for (let i in this.idPropLayerObj) {\r\n            let nodePoolUtil: NodePoolUtil = this.getPropLayerById(parseFloat(i)).getComponent(NodePoolUtil);\r\n            nodePoolUtil.forEachUseNode((node: Node) => {\r\n                let dis = Vec2.distance(node.getPosition(), mapModel.player.node.getPosition());\r\n                let prop = node.getComponent(Prop);\r\n                if (dis <= mapModel.dataRadius || (prop.propUtil && prop.propUtil.autoGet)) {\r\n                    node.active = true;\r\n                    prop.doDisPlayerGet(dis);\r\n                    return;\r\n                }\r\n                if (prop.isFollowPlayer) {\r\n                    return;\r\n                }\r\n                node.active = false;\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Label, Node, Prefab, sp, Sprite, SpriteFrame, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PyramidDrawLayer')\r\nexport class PyramidDrawLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n    @property({ type: Node }) itemLayer: Node = null;\r\n\r\n    @property({ type: Label }) coinLabel: Label = null;\r\n\r\n\r\n    private items = []\r\n\r\n    _index = 0\r\n    _dtTime = 0\r\n    _isStartRun = false\r\n    _endIndex = 0\r\n    _drawItemArr = []\r\n\r\n    _isDoubleDraw = false\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n\r\n        this.initItems()\r\n    }\r\n\r\n    closeBless() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    initItems() {\r\n        let data = designManager.getRowsByType(constants.tableName.CNTM, 3)\r\n        for (let index = 0; index < data.length; index++) {\r\n            this._drawItemArr.push(data[index].award)\r\n            let propItem = instantiate(this.propItem)\r\n            this.itemLayer.getChildByName(\"node\" + (index + 1)).addChild(propItem)\r\n            this.items[index] = propItem\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(data[index].award[0][0], data[index].award[0][1], PropItemPrefab.Type_UnTouch)\r\n            propItem.getComponent(PropItemPrefab).setScale(109)\r\n            propItem.getChildByName(\"xuanzhong\").active = false\r\n        }\r\n        this.initItemState()\r\n    }\r\n\r\n    initItemState() {\r\n        for (let index = 0; index < 10 && index < this.items.length; index++) {\r\n            let drawItem = this.items[index]\r\n            drawItem.getChildByName(\"grayMask\").active = UserData.getInstance().$pyramidState[index] == 1\r\n            drawItem.getChildByName(\"xuanzhong\").active = false\r\n        }\r\n        let drawItem = designManager.config[\"jinzita\"]\r\n        this.coinLabel.string = drawItem[UserData.getInstance().$pyramidDrawTime]\r\n\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (!this._isStartRun) {\r\n            return\r\n        }\r\n        this._dtTime += dt\r\n        if (this._dtTime > 0.1) {\r\n            this._dtTime = 0\r\n            this._index++\r\n            for (let index = 0; index < 10; index++) {\r\n                this.items[index].getChildByName(\"xuanzhong\").active = false\r\n            }\r\n            let itemsIndex = this.getDrawIndex(this._index, this._index >= this._endIndex)\r\n            this.items[itemsIndex].getChildByName(\"xuanzhong\").active = true\r\n            if (this._index >= this._endIndex) {\r\n                this._isStartRun = false\r\n                let curBet = this._drawItemArr[itemsIndex][0]\r\n                let propItem: PropItem = {\r\n                    Id: curBet[0],\r\n                    Num: this._isDoubleDraw ? curBet[1] * 2 : curBet[1]\r\n                };\r\n                UserData.getInstance().getRewardProp([propItem])\r\n                this.openLayer(constants.layers.RewardLayer, { propArr: [propItem] });\r\n\r\n                UserData.getInstance().setPyramidState(itemsIndex)\r\n                UserData.getInstance().$pyramidDrawTime++\r\n                if (UserData.getInstance().$pyramidDrawTime >= 10) {\r\n                    UserData.getInstance().$pyramidDrawTime = 0\r\n                    UserData.getInstance().$pyramidState = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n                }\r\n\r\n                this.initItemState()\r\n            }\r\n        }\r\n    }\r\n\r\n    getDrawIndex(index, isHero) {\r\n        if (UserData.getInstance().$pyramidDrawTime == 9) {\r\n            return 0\r\n        }\r\n        let arr = []\r\n        for (let i = isHero ? 1 : 0; i < UserData.getInstance().$pyramidState.length; i++) {\r\n            if (UserData.getInstance().$pyramidState[i] == 0) {\r\n                arr.push(i)\r\n            }\r\n        }\r\n        return arr[index % arr.length]\r\n    }\r\n\r\n    startDraw() {\r\n        if (this._isStartRun) {\r\n            return\r\n        }\r\n        let drawItem = designManager.config[\"jinzita\"]\r\n        if (UserData.getInstance().checkAndUseBaoshi(drawItem[UserData.getInstance().$pyramidDrawTime])) {\r\n            tyqSDK.eventSendCustomEvent(\"庆典消耗钻石——\"+drawItem[UserData.getInstance().$pyramidDrawTime])\r\n            this._isStartRun = true\r\n            this._isDoubleDraw = false\r\n            if (UserData.getInstance().$pyramidDrawTime == 9) {\r\n                this._endIndex = 10\r\n            } else {\r\n                this._endIndex = Math.floor(Math.random() * 10) + 20 - UserData.getInstance().$pyramidDrawTime\r\n            }\r\n            this._index = 0\r\n        }\r\n        else {\r\n            this.toast(\"钻石不足\")\r\n            this.openLayer(constants.layers.RewardItemLayer, { propId: 801, num: designManager.config.adDiamond })\r\n        }\r\n    }\r\n\r\n    doubleDraw() {\r\n        let self = this\r\n        sdkManager.openAd(\"参与庆典\", function (st) {\r\n            if (st == 1) {\r\n                if (self._isStartRun) {\r\n                    return\r\n                }\r\n                self._isStartRun = true\r\n                if (UserData.getInstance().$pyramidDrawTime == 9) {\r\n                    self._endIndex = 10\r\n                } else {\r\n                    self._endIndex = Math.floor(Math.random() * 10) + 20 - UserData.getInstance().$pyramidDrawTime\r\n                }\r\n                self._index = 0\r\n              //  self._isDoubleDraw = true\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n","import { _decorator, Node, find, isValid, AnimationClip, js, v3, sp, Vec3, UITransform, Prefab, instantiate } from 'cc';\r\nimport { constants } from '../data/constants';\r\nimport { msgac } from '../data/msgac';\r\nimport { UserData } from '../model/UserData';\r\nimport { eventManager } from './eventManager';\r\nimport GParam from './GParam';\r\nimport { MapWrap } from './MapWrap';\r\nimport { resManager } from './resManager';\r\n\r\nconst reg = /^[0-9]+.?[0-9]*$/;\r\n\r\nexport const RED_POINT_NAME = \"red_point\";\r\nexport const RED_POINT_LABEL_NAME = \"label\";\r\n\r\n\r\nexport enum RPointMask {\r\n\t/**客户端红点起始*/\r\n\tRPM_Client = 300,\r\n\tRPM_PropWear,\r\n\tRPM_BlessProp,\r\n\r\n}\r\n\r\n/**\r\n * 红点位置类型\r\n */\r\nexport enum RedpointPos {\r\n\tMain,\r\n\tright,\r\n}\r\n\r\n/** 无效值 */\r\nexport const INVALID_VALUE_ZERO = 0;\r\nexport const INVALID_VALUE = -1;\r\nexport const INVALID_STRING_VALUE = \"-1\";\r\n\r\nexport class RedPointLogicMgr {\r\n\tprotected static _instance: RedPointLogicMgr = null;\r\n\tpublic static ins(): RedPointLogicMgr {\r\n\t\tif (this._instance == null) {\r\n\t\t\tthis._instance = new RedPointLogicMgr();\r\n\t\t\tthis._instance.initGame()\r\n\t\t}\r\n\t\treturn this._instance;\r\n\t}\r\n\r\n\t/** 红点数值 */\r\n\tprotected _redPointMask: MapWrap<number, boolean>;\r\n\t/** 缓存更新 */\r\n\tprotected _waitSends: number[];\r\n\t/** 缓存计算 */\r\n\tprotected _waitChecks: number[];\r\n\t/** 定时器句柄 */\r\n\tprotected _updateHandler: number = INVALID_VALUE;\r\n\t/** 待解锁mask */\r\n\tprotected _unlockMasks: number[];\r\n\r\n\t/** 红点注册表 通过uuid进行注册 */\r\n\tprotected _targets: MapWrap<string, RPointNode[]>;\r\n\tprotected _targetWraps: MapWrap<string, Node>;\r\n\tprotected _masks: MapWrap<number, Node[]>;\r\n\r\n\t/** 更新 */\r\n\tprotected update() {\r\n\t\tthis.updateCheck();\r\n\t\tthis.updateVisit();\r\n\t\tthis.checkState();\r\n\t}\r\n\r\n\tpublic initGame() {\r\n\t\tthis.initEvent();\r\n\t\tthis._redPointMask = new MapWrap<number, boolean>();\r\n\t\tthis._waitSends = [];\r\n\t\tthis._waitChecks = [];\r\n\t\tthis._unlockMasks = [];\r\n\t\tthis._targets = new MapWrap<string, RPointNode[]>();\r\n\t\tthis._targetWraps = new MapWrap<string, Node>();\r\n\t\tthis._masks = new MapWrap<number, Node[]>();\r\n\t\tthis.stopUpdate();\r\n\t\t// 本地红点检测\r\n\t\tlet keys = Object.keys(RPointMask);\r\n\t\tfor (let key of keys) {\r\n\t\t\tif (!reg.test(key)) continue;\r\n\t\t\tthis._waitChecks.push(parseInt(key));\r\n\t\t}\r\n\t\tthis.checkState();\r\n\t\t// this.onCMSUserChange$tip();\r\n\t}\r\n\r\n\tprotected initEvent() {\r\n\t\teventManager.on(msgac.redPointEvent, this.onCMSGRPValueSetting, this)\r\n\t\t//eventManager.off(this)\r\n\t\t// GCtrl.ES.on(CMsg.rPoint.valueSetting, this, this.onCMSGRPValueSetting.bind(this), PRIORITY_VIEW);\r\n\t\t// GCtrl.ES.on(CMsg.client.bag.onBagItemChange, this, this.updateState.bind(this), PRIORITY_VIEW);\r\n\t\t// GCtrl.ES.on(CMsg.client.hero.onAddHero, this, this.updateState.bind(this), PRIORITY_VIEW);\r\n\t}\r\n\r\n\tprotected updateState() {\r\n\t\tlet keys = Object.keys(RPointMask);\r\n\t\tfor (let key of keys) {\r\n\t\t\tif (!reg.test(key)) continue;\r\n\t\t\tlet checkIndex = this._waitChecks.indexOf(parseInt(key));\r\n\t\t\tif (checkIndex === INVALID_VALUE) {\r\n\t\t\t\tthis._waitChecks.push(parseInt(key));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.checkState();\r\n\t}\r\n\r\n\t//在需要红点的地方用该方法进行注册\r\n\tpublic on(target: Node, nodes: RPointNode[]) {\r\n\t\tlet targetIt = this._targets.get(target.uuid);\r\n\t\tif (!targetIt) {\r\n\t\t\ttargetIt = [];\r\n\t\t\tthis._targets.set(target.uuid, targetIt);\r\n\t\t\tthis._targetWraps.set(target.uuid, target);\r\n\t\t}\r\n\t\ttargetIt.push(...nodes);\r\n\r\n\t\tfor (let node of nodes) {\r\n\t\t\tlet value = false;\r\n\t\t\tfor (let cMask of node.mask) {\r\n\t\t\t\tlet maskIt = this._masks.get(cMask);\r\n\t\t\t\tif (!maskIt) {\r\n\t\t\t\t\tmaskIt = [];\r\n\t\t\t\t\tthis._masks.set(cMask, maskIt);\r\n\t\t\t\t}\r\n\t\t\t\tif (maskIt.indexOf(target) == INVALID_VALUE) {\r\n\t\t\t\t\tmaskIt.push(target);\r\n\t\t\t\t}\r\n\t\t\t\tvalue = value || this._redPointMask.get(cMask);\r\n\t\t\t}\r\n\t\t\tthis.setRPointView(target, node.subPath, value, node.effectType, node.posType, node.cb);\r\n\t\t}\r\n\t}\r\n\r\n\t/**注销红点 */\r\n\tpublic off(target: Node) {\r\n\t\tlet targetIt = this._targets.get(target.uuid);\r\n\t\tif (!targetIt) return;\r\n\t\tfor (let node of targetIt) {\r\n\t\t\tfor (let cMask of node.mask) {\r\n\t\t\t\tlet maskIt = this._masks.get(cMask);\r\n\t\t\t\tif (maskIt) {\r\n\t\t\t\t\tlet index = maskIt.indexOf(target);\r\n\t\t\t\t\tif (index != INVALID_VALUE)\r\n\t\t\t\t\t\tmaskIt.splice(index, 1);\r\n\t\t\t\t\tif (maskIt.length == 0) this._masks.delete(cMask);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._targets.delete(target.uuid);\r\n\t\tthis._targetWraps.delete(target.uuid);\r\n\t}\r\n\r\n\tpublic loginOut() {\r\n\t\tthis.stopUpdate();\r\n\t\teventManager.offWithSender(this)\r\n\t\t//\tGCtrl.ES.off(this); \r\n\t\tthis._waitChecks = [];\r\n\t\tthis._waitSends = [];\r\n\t\tthis._targets.clear();\r\n\t\tthis._targetWraps.clear();\r\n\t\tthis._masks.clear();\r\n\t}\r\n\r\n\tpublic sendValueSettingMsg(mask: number, value: boolean, forceStop?: boolean) {\r\n\t\tlet target: RPointValue = { mask: mask, value: value, forceStop: forceStop }\r\n\t\t//eventManager.send(mask)\r\n\t\tthis.onCMSGRPValueSetting(this, new GParam(target))\r\n\t\t//GCtrl.ES.emit(CMsg.rPoint.valueSetting, GCtrl.param(target));\r\n\t}\r\n\r\n\tpublic sendValuesSettingMsgs(mask: number[], value: boolean, forceStop?: boolean) {\r\n\t\tfor (let i = 0; i < mask.length; i++) {\r\n\t\t\tthis.sendValueSettingMsg(mask[i], value, forceStop);\r\n\t\t}\r\n\t}\r\n\r\n\t/**定时检测红点 */\r\n\tpublic timingCheck() {\r\n\t\t//需要定时检测的红点\r\n\t\t//GameMgr.redMgr.sendValueSettingMsg(RPointMask.RPM_DrawFree, false);\r\n\t}\r\n\r\n\t/**\r\n\t  * 红点值变更\r\n\t  * @param _ \r\n\t  * @param param \r\n\t  */\r\n\tprotected onCMSGRPValueSetting(_, param: GParam) {\r\n\t\tlet rp = param.get<RPointValue>();\r\n\t\t// 如果传过来的红点为True，则表示必定红点；如果为false,则需要重新计算\r\n\t\tif (rp.value == true) {\r\n\t\t\t// 如果等待计算项中存在该红点，则删除\r\n\t\t\tlet checkIndex = this._waitChecks.indexOf(rp.mask);\r\n\t\t\tif (checkIndex != INVALID_VALUE) {\r\n\t\t\t\tthis._waitChecks.splice(checkIndex, 1);\r\n\t\t\t}\r\n\t\t\t// 如果当前的值为true，则不需要更新\r\n\t\t\tif (this._redPointMask.get(rp.mask)) return;\r\n\t\t\tthis._redPointMask.set(rp.mask, rp.value);\r\n\t\t\t// 更新更新待推送的红点\r\n\t\t\tif (this._waitSends.indexOf(rp.mask) != INVALID_VALUE) return;\r\n\t\t\tthis._waitSends.push(rp.mask);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (rp.forceStop == true) {\r\n\t\t\t\tlet checkIndex = this._waitChecks.indexOf(rp.mask);\r\n\t\t\t\tif (checkIndex != INVALID_VALUE) {\r\n\t\t\t\t\tthis._waitChecks.splice(checkIndex, 1);\r\n\t\t\t\t}\r\n\t\t\t\tthis._redPointMask.set(rp.mask, rp.value);\r\n\t\t\t\t// 更新更新待推送的红点\r\n\t\t\t\tif (this._waitSends.indexOf(rp.mask) != INVALID_VALUE) return;\r\n\t\t\t\tthis._waitSends.push(rp.mask);\r\n\t\t\t}\r\n\t\t\t// 重新检测红点的值\r\n\t\t\t// 如果当前待检测列表中存在该枚举，等待检测，否则加入待检测列表\r\n\t\t\telse if (this._waitChecks.indexOf(rp.mask) == INVALID_VALUE) {\r\n\t\t\t\tthis._waitChecks.push(rp.mask);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.checkState();\r\n\t}\r\n\r\n\r\n\tprotected startUpdate() {\r\n\t\tif (this._updateHandler != INVALID_VALUE) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._updateHandler = setInterval(this.update.bind(this), 100) as any;\r\n\t}\r\n\r\n\tprotected stopUpdate() {\r\n\t\tif (INVALID_VALUE == this._updateHandler) return;\r\n\t\tclearInterval(this._updateHandler);\r\n\t\tthis._updateHandler = INVALID_VALUE;\r\n\t}\r\n\r\n\tprotected checkState() {\r\n\t\tif (this._waitChecks.length > 0 || this._waitSends.length > 0) {\r\n\t\t\tif (this._updateHandler == INVALID_VALUE) this.startUpdate();\r\n\t\t}\r\n\t\telse if (this._waitChecks.length == 0 && this._waitSends.length == 0) {\r\n\t\t\tif (this._updateHandler != INVALID_VALUE) this.stopUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**更新状态 */\r\n\tprotected updateCheck() {\r\n\t\tif (this._waitChecks.length == 0) return;\r\n\t\tlet mask = this._waitChecks.shift();\r\n\t\tlet value = true;\r\n\t\tif (value) {\r\n\t\t\tvalue = false;\r\n\t\t\tswitch (mask) {\r\n\t\t\t\tcase RPointMask.RPM_Client: {\r\n\t\t\t\t\t//\tvalue = GameMgr.userMgr.checkVipRedPoint(mask === RPointMask.RPM_Vip_Frist);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase RPointMask.RPM_PropWear: {\r\n\t\t\t\t\tvalue = UserData.getInstance().checkBestPropToWear()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase RPointMask.RPM_BlessProp: {\r\n\t\t\t\t\tvalue = UserData.getInstance().checkPropCanBless()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvalue = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._redPointMask.get(mask) == value) return;\r\n\t\tthis._redPointMask.set(mask, value);\r\n\t\t// 更新更新待推送的红点\r\n\t\tif (this._waitSends.indexOf(mask) != INVALID_VALUE) return;\r\n\t\tthis._waitSends.push(mask);\r\n\t}\r\n\r\n\t/**表现更新 */\r\n\tprotected updateVisit() {\r\n\t\tif (this._waitSends.length == 0) return;\r\n\t\tlet mask = this._waitSends.shift();\r\n\t\tlet mask_value = this._redPointMask.get(mask);\r\n\r\n\t\t// 取出所有需要变更的节点\r\n\t\tlet maskIter = this._masks.get(mask);\r\n\t\tif (!maskIter || maskIter.length == 0) return;\r\n\t\tfor (let obj of maskIter) {\r\n\t\t\tlet targetIt = this._targets.get(obj.uuid);\r\n\t\t\tif (!targetIt) return;\r\n\t\t\tfor (let node of targetIt) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (node.mask.indexOf(mask) == INVALID_VALUE) continue;\r\n\t\t\t\tif (mask_value == true)\r\n\t\t\t\t\tthis.setRPointView(obj, node.subPath, mask_value, node.effectType, node.posType, node.cb);\r\n\t\t\t\telse {\r\n\t\t\t\t\t// 如果为false则需要取组合值\r\n\t\t\t\t\tlet value = false;\r\n\t\t\t\t\tfor (let cMask of node.mask) {\r\n\t\t\t\t\t\tif (this._redPointMask.get(cMask)) {\r\n\t\t\t\t\t\t\tvalue = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setRPointView(obj, node.subPath, value, node.effectType, node.posType, node.cb);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setRPointView(parent: Node, subPath: string | Node, value: boolean, effectType?: number, posType?: number, cb?: any) {\r\n\t\tlet node = parent;\r\n\t\tif (subPath) {\r\n\t\t\tif (typeof (subPath) == 'string') {\r\n\t\t\t\tnode = find(subPath, parent);\r\n\t\t\t} else {\r\n\t\t\t\tnode = subPath\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!node) return;\r\n\t\t//switch (effectType) {\r\n\t\t//\tcase RedpointEffect.REDPOINT: {\r\n\r\n\t\tlet aniNode = node.getChildByName(RED_POINT_NAME);\r\n\t\tif (!value) {\r\n\t\t\tif (aniNode)\r\n\t\t\t\taniNode.active = false;\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tif (aniNode) {\r\n\t\t\t\taniNode.active = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresManager.loadAsset(constants.bundles.prefab, \"redpoint/gth\", Prefab, () => { }, (err, prefab) => {\r\n\t\t\tlet red = instantiate(prefab)\r\n\t\t\tlet uiTransform = node.getComponent(UITransform) || node.addComponent(UITransform)\r\n\t\t\tswitch (posType) {\r\n\t\t\t\tcase RedpointPos.Main: {\r\n\t\t\t\t\tred.position = v3(uiTransform.width * (1 - uiTransform.anchorX), uiTransform.height * (1 - uiTransform.anchorY) - 20, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase RedpointPos.right:\r\n\t\t\t\t\tred.position = v3(uiTransform.width * (1 - uiTransform.anchorX) - 30, uiTransform.height * (1 - uiTransform.anchorY) - 0, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tred.position = v3(uiTransform.width * (1 - uiTransform.anchorX) - 25, uiTransform.height * (1 - uiTransform.anchorY) - 10, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//\tred.getComponent(UITransform).setSiblingIndex(8888)\r\n\t\t\tred.name = RED_POINT_NAME\r\n\t\t\tnode.addChild(red);\r\n\t\t\t// let sk = red.addComponent(sp.Skeleton);\r\n\t\t\t// sk.setAnimation(0, 'gth', false);\r\n\t\t\t// sk.setCompleteListener(function () {\r\n\t\t\t// \tsk.addAnimation(0, 'gth', false, 1.5);\r\n\t\t\t// })\r\n\t\t\t//sk.timeScale = 0.7\r\n\t\t})\r\n\r\n\t\t//break;\r\n\t\t//}\r\n\t\t//}\r\n\t\tcb && cb(node);\r\n\t}\r\n\r\n\t/**获取该节点红点应处于的状态 */\r\n\tpublic getMaskRedpointState(masks: number[]) {\r\n\t\tfor (let i = 0; i < masks.length; i++) {\r\n\t\t\tlet value = this._redPointMask.get(masks[i]);\r\n\t\t\tif (value) return value\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n\r\nexport interface RPointNode {\r\n\tmask: number[];\r\n\tsubPath: string;\r\n\tposType?: number;\r\n\teffectType?: number;\r\n\tcb?: Function;\r\n}\r\ninterface RPointValue {\r\n\tmask: number;\r\n\tvalue: boolean;\r\n\tforceStop?: boolean;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import { sys } from \"cc\";\r\nimport { constants } from \"../game/data/constants\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { SingleInstance } from \"./SingleInstance\";\r\n\r\nclass RedPointManager extends SingleInstance {\r\n\r\n    key: string = constants.gameName + \"_redPoint\";\r\n\r\n    getRedPointByLayer(layer: string) {\r\n        let obj: any = sys.localStorage.getItem(this.key);\r\n        let needSave = false;\r\n        if (!obj) {\r\n            obj = {};\r\n            needSave = true;\r\n        } else {\r\n            obj = JSON.parse(obj);\r\n        }\r\n\r\n        let layerObj = obj[layer];\r\n        if (!layerObj) {\r\n            layerObj = {};\r\n            obj[layer] = layerObj;\r\n            needSave = true;\r\n        }\r\n\r\n        if (needSave) {\r\n            sys.localStorage.setItem(this.key, JSON.stringify(obj));\r\n        }\r\n\r\n        return layerObj;\r\n    }\r\n\r\n    setRedPointByLayer(layer: string, layerObj: any) {\r\n        let obj: any = sys.localStorage.getItem(this.key);\r\n        if (!obj) {\r\n            obj = {};\r\n        } else {\r\n            obj = JSON.parse(obj);\r\n        }\r\n        obj[layer] = layerObj;\r\n        sys.localStorage.setItem(this.key, JSON.stringify(obj));\r\n\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    hasRedPointValue(layerName: string, key: string, value?: any) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n\r\n        if (value != undefined) {\r\n            if (Array.isArray(obj[key])) {\r\n                let rpIndex = obj[key].indexOf(value);\r\n                if (rpIndex != -1) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (Array.isArray(obj[key])) {\r\n            if (obj[key].length > 0) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (obj[key]) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    addRedPointValue(layerName: string, key: string, value?: any) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n        if (value) {\r\n            if (!Array.isArray(obj[key])) {\r\n                obj[key] = [];\r\n            }\r\n            let rpIndex = obj[key].indexOf(value);\r\n            if (rpIndex == -1) {\r\n                obj[key].push(value);\r\n                this.setRedPointByLayer(layerName, obj);\r\n            }\r\n        } else {\r\n            obj[key] = 1;\r\n            this.setRedPointByLayer(layerName, obj);\r\n        }\r\n    }\r\n\r\n    removeRedPointValue(layerName: string, key: string, value?: any) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n        let info = obj[key];\r\n\r\n        if (value != undefined) {\r\n            if (Array.isArray(info)) {\r\n                let rpIndex = info.indexOf(value);\r\n                if (rpIndex != -1) {\r\n                    obj[key].splice(rpIndex, 1);\r\n                    this.setRedPointByLayer(layerName, obj);\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (info) {\r\n            delete obj[key];\r\n            this.setRedPointByLayer(layerName, obj);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    clearRedPointLayer(layerName: string, key?: string) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n        if (key == undefined) {\r\n            // 清空所有\r\n            this.setRedPointByLayer(layerName, undefined);\r\n        } else {\r\n            delete obj[key];\r\n            this.setRedPointByLayer(layerName, obj);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst redPointManager = RedPointManager.getInstance<RedPointManager>();\r\n\r\nexport { redPointManager };\r\n\r\n","import { Node, UIRenderer, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RenderChildBatch')\r\nexport class RenderChildBatch extends UIRenderer {\r\n\r\n    private pathArr: string[] = [];\r\n    private path2RenderArr: Map<string, UIRenderer[]> = new Map();\r\n\r\n    private rootNodeArr: Node[] = [];\r\n\r\n    // 添加根子节点\r\n    public addRootItemNode(node: Node) {\r\n        if (this.rootNodeArr.indexOf(node) == -1) {\r\n            this.pauseRender(node, \"\");\r\n            this.rootNodeArr.push(node);\r\n        }\r\n    }\r\n    // 架空节点提交渲染的方法\r\n    private pauseRender(node: Node, rootPath: string) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let path = rootPath + node.name;\r\n        let renderable = node.getComponent(UIRenderer);\r\n        if (renderable) {\r\n            if (this.pathArr.indexOf(path) == -1) {\r\n                this.pathArr.push(path);\r\n            }\r\n            let renderArr = this.path2RenderArr.get(path);\r\n            if (!renderArr) {\r\n                renderArr = [];\r\n                this.path2RenderArr.set(path, renderArr);\r\n            }\r\n            if (renderArr.indexOf(renderable) == -1) {\r\n                if (!renderable._realRender) {\r\n                    renderable._realRender = renderable._render;\r\n                    renderable._render = function () { };\r\n                }\r\n                renderArr.push(renderable);\r\n            }\r\n        }\r\n\r\n        node.children.forEach((child: Node) => {\r\n            this.pauseRender(child, path + \"/\");\r\n        });\r\n    }\r\n\r\n    // 移除根子节点\r\n    public removeRootItemNode(node: Node) {\r\n        this.removeRender(node, \"\");\r\n        let index = this.rootNodeArr.indexOf(node);\r\n        if (index >= 0) {\r\n            this.rootNodeArr.splice(index, 1);\r\n        }\r\n    }\r\n    // 还原架空的方法\r\n    private removeRender(node: Node, rootPath: string) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let path = rootPath + node.name;\r\n        let arr = this.path2RenderArr.get(path);\r\n        if (arr) {\r\n            let renderable = node.getComponent(UIRenderer);\r\n            if (renderable) {\r\n                if (renderable._realRender) {\r\n                    renderable._render = renderable._realRender;\r\n                    delete renderable._realRender;\r\n                }\r\n                let index = arr.indexOf(renderable);\r\n                if (index != -1) {\r\n                    arr.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        node.children.forEach((child: Node) => {\r\n            this.removeRender(child, path + \"/\");\r\n        });\r\n    }\r\n\r\n    // 所有子节点渲染前调用\r\n    updateAssembler(batch: any) {\r\n\r\n    }\r\n\r\n    // 所有子节点渲染后调用\r\n    postUpdateAssembler(batch: any) {\r\n        this.pathArr.forEach((path: string) => {\r\n            let arr = this.path2RenderArr.get(path);\r\n            let tmpArr = [];\r\n            arr.forEach((renderable: UIRenderer) => {\r\n                if (!cocosUtil.isValid(renderable) || !cocosUtil.isValid(renderable.node)) {\r\n                    return;\r\n                }\r\n                tmpArr.push(renderable);\r\n                if (!renderable.node.activeInHierarchy) {\r\n                    return;\r\n                }\r\n                if (renderable._renderFlag && renderable._assembler) {\r\n                    renderable._realRender(batch);\r\n                }\r\n            });\r\n            this.path2RenderArr.set(path, tmpArr);\r\n        });\r\n    }\r\n\r\n    // 还原现场\r\n    onDestroy() {\r\n        this.pathArr.forEach((path: string) => {\r\n            let arr = this.path2RenderArr.get(path);\r\n            arr.forEach((renderable: UIRenderer) => {\r\n                if (!cocosUtil.isValid(renderable)) {\r\n                    return;\r\n                }\r\n                if (renderable._realRender) {\r\n                    renderable._render = renderable._realRender;\r\n                    delete renderable._realRender;\r\n                }\r\n            });\r\n        });\r\n        this.path2RenderArr = undefined;\r\n        this.pathArr = undefined;\r\n        this.rootNodeArr = undefined;\r\n    }\r\n\r\n}\r\n\r\n","import { Asset, assetManager, AssetManager, sp, SpriteFrame, Texture2D } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\n\r\nclass ResManager {\r\n\r\n    private static _instance: ResManager;\r\n    private constructor() { }\r\n    public static get instance(): ResManager {\r\n        if (!this._instance) {\r\n            this._instance = new ResManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * 从bundle中加载某个资源，优先使用缓存中的\r\n     * @param bundleName bundle名称\r\n     * @param path 资源路径\r\n     * @param assetType 资源类型\r\n     * @param onProgress 加载进度回调\r\n     * @param onComplete 加载完成回调\r\n     */\r\n    loadAsset(bundleName: string, path: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        if (assetType == SpriteFrame) {\r\n            path += \"/spriteFrame\";\r\n        } else if (assetType == Texture2D) {\r\n            path += \"/texture\";\r\n        }\r\n        let bundle = assetManager.getBundle(bundleName);\r\n        if (bundle && bundle.get(path, assetType)) {\r\n            if (onComplete) {\r\n                onComplete(null, bundle.get(path, assetType));\r\n            }\r\n            return;\r\n        }\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.load(path, assetType, (finish: number, total: number) => {\r\n                if (onProgress) {\r\n                    onProgress(finish / total);\r\n                }\r\n            }, (err, asset) => {\r\n                if (err) {\r\n                    myLog.e(\"ResManager.loadAsset error:\" + err.message, \"bundleName:\" + bundleName, \"path:\" + path, err);\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(null, asset);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n\r\n    /**\r\n     * 加载某个bundle中的批量同类型资源\r\n     * @param bundleName bundle名称\r\n     * @param pathArr 资源路径数组\r\n     * @param assetType 资源类型\r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadAssetByPathArr(bundleName: string, pathArr: string[], assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        let total = pathArr.length;\r\n        if (total <= 0) {\r\n            if (onComplete) {\r\n                onComplete([]);\r\n            }\r\n            return;\r\n        }\r\n        let lastPercent = 0;\r\n        let onePercent = 1 / total;\r\n        let assetPercents: Map<string, number> = new Map();\r\n        let count = 0;\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            let path = pathArr[i];\r\n            this.loadAsset(bundleName, path, assetType, (p: number) => {\r\n                assetPercents.set(path, p);\r\n                if (onProgress) {\r\n                    let percent = 0;\r\n                    assetPercents.forEach((p: number) => {\r\n                        percent = percent + onePercent * p;\r\n                    });\r\n                    if (percent >= lastPercent) {\r\n                        lastPercent = percent;\r\n                        onProgress(percent);\r\n                    }\r\n                }\r\n            }, (err, asset) => {\r\n                count++;\r\n                if (!err && asset) {\r\n                    asset.path = path;\r\n                    arr.push(asset);\r\n                }\r\n                if (count >= total) {\r\n                    if (onComplete) {\r\n                        onComplete(arr);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载某个bundle中的批量同类型资源\r\n     * @param bundleName bundle名称\r\n     * @param dirArr 资源路径数组\r\n     * @param assetType 资源类型\r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadAssetByBundleDirs(bundleName: string, dirArr: string[], assetType: any, onProgress?: Function, onComplete?: Function){\r\n        let total = dirArr.length;\r\n        if (total <= 0) {\r\n            if (onComplete) {\r\n                onComplete([]);\r\n            }\r\n            return;\r\n        }\r\n        let lastPercent = 0;\r\n        let onePercent = 1 / total;\r\n        let assetPercents: Map<string, number> = new Map();\r\n        let count = 0;\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            let path = dirArr[i];\r\n            this.loadAssetByBundleDir(bundleName,path, assetType, (p:number) =>{\r\n                assetPercents.set(path, p);\r\n                if (onProgress) {\r\n                    let percent = 0;\r\n                    assetPercents.forEach(()=>{\r\n                        percent = percent + onePercent *p;\r\n                    });\r\n                    if (percent >= lastPercent) {\r\n                        lastPercent = percent;\r\n                        onProgress(percent);\r\n                    }\r\n                }\r\n            },\r\n            (err, asset) =>{\r\n                count++;\r\n                if (!err && asset) {\r\n                    asset.path = path;\r\n                    arr.push(asset);\r\n                }\r\n                if (count >= total) {\r\n                    if (onComplete) {\r\n                        onComplete(arr);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载bundle某个目录下的所有同类型资源\r\n     * @param bundleName bundle名称\r\n     * @param dir 目录\r\n     * @param assetType 资源类型\r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadAssetByBundleDir(bundleName: string, dir: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        let bundle = assetManager.getBundle(bundleName);\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.loadDir(dir, assetType, (finish: number, total: number, item: AssetManager.RequestItem) => {\r\n                if (onProgress) {\r\n                    onProgress(finish / total, item);\r\n                }\r\n            }, (err, assetArr) => {\r\n                if (err) {\r\n                    myLog.e(\"ResManager.loadAssetByBundleDir loadDir error:\" + err.message, err);\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(assetArr);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    myLog.e(\"ResManager.loadAssetByBundleDir loadBundle error:\" + err.message, err);\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n\r\n    /**\r\n     * 单纯加载一批bundle\r\n     * @param nameArr bundle名称数组 \r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadBundleArr(nameArr: string[], onProgress?: Function, onComplete?: Function) {\r\n        let total = nameArr.length;\r\n        if (total <= 0) {\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n            return;\r\n        }\r\n        let count = 0;\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            let bundleName = nameArr[i];\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                count++;\r\n                if (!err) {\r\n                    arr.push(retBundle);\r\n                }\r\n                if (count >= total) {\r\n                    if (onComplete) {\r\n                        onComplete(arr);\r\n                    }\r\n                }\r\n                if (onProgress) {\r\n                    onProgress(count / total);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // 强制释放某资源\r\n    releaseAsset(asset: Asset) {\r\n        assetManager.releaseAsset(asset);\r\n    }\r\n\r\n    /**\r\n     * 加载资源清单数组\r\n     * @param assetConfigArr 资源清单数组\r\n        [\r\n            {\r\n                bundle : \"common\",\r\n                path : \"\",\r\n                type : Prefab\r\n            }\r\n        ]\r\n     * @param isAddRef 是否增加引用计数\r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadAssetConfigArr(assetConfigArr: [AssetConfig], isAddRef: boolean = false, onProgress?: Function, onComplete?: Function) {\r\n        let total = 0;\r\n        if (assetConfigArr && assetConfigArr.length > 0) {\r\n            total = assetConfigArr.length;\r\n        }\r\n        if (total <= 0) {\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n            return;\r\n        }\r\n\r\n        let index = 0;\r\n        let loadedAssetArr = [];\r\n        let tmpFunc = () => {\r\n            let asset = assetConfigArr[index];\r\n            if (!asset) {\r\n                // 全部加载完成\r\n                if (onComplete) {\r\n                    onComplete(loadedAssetArr);\r\n                }\r\n                return;\r\n            }\r\n            this.loadAsset(asset.bundle, asset.path, asset.type, null, (error, loadedAsset) => {\r\n                if (!error && loadedAsset) {\r\n                    loadedAssetArr.push(loadedAsset);\r\n                    if (isAddRef) {\r\n                        loadedAsset.addRef();\r\n                    }\r\n                    asset.asset = loadedAsset;\r\n                }\r\n                index++;\r\n                tmpFunc();\r\n                if (onProgress) {\r\n                    onProgress(index / total);\r\n                }\r\n            });\r\n        };\r\n        tmpFunc();\r\n    }\r\n\r\n\r\n    loadSpriteFrame(bundleName: string, path: string, cb?: Function) {\r\n        this.loadAsset(bundleName, path, SpriteFrame, null, (err, sp: SpriteFrame) => {\r\n            if (cb) {\r\n                cb(err, sp);\r\n            }\r\n        });\r\n    }\r\n\r\n    loadSpineData(bundleName: string, path: string, cb?: Function) {\r\n        this.loadAsset(bundleName, path, sp.SkeletonData, null, (err, sp: sp.SkeletonData) => {\r\n            if (cb) {\r\n                cb(err, sp);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\nconst resManager = ResManager.instance;\r\n\r\nclass ResLoader {\r\n\r\n    public loadedAssetArr: Asset[] = [];\r\n\r\n    public addAsset(asset: Asset) {\r\n        if (!asset) {\r\n            return;\r\n        }\r\n        if (this.loadedAssetArr.indexOf(asset) == -1) {\r\n            asset.addRef();\r\n            this.loadedAssetArr.push(asset);\r\n        }\r\n    }\r\n\r\n    public releaseAllAsset() {\r\n        this.loadedAssetArr.forEach((asset: Asset) => {\r\n            asset.decRef();\r\n        });\r\n        this.loadedAssetArr = [];\r\n    }\r\n\r\n}\r\n\r\nclass AssetConfig {\r\n    bundle: string;\r\n    path: string;\r\n    type: any;\r\n    // 加载成功后，得到的资源对象\r\n    asset?: any;\r\n}\r\n\r\nexport { resManager, ResLoader, AssetConfig };\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { find } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardItemLayer')\r\nexport class RewardItemLayer extends BaseUILayer {\r\n\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n    }\r\n\r\n    onEnable() {\r\n        let id = this.layerData.propId\r\n        let num = this.layerData.num\r\n\r\n        this.propItem.getComponent(PropItemPrefab).setView(id, num, PropItemPrefab.Type_UnTouch)\r\n\r\n        find(\"ui/info\", this.node).localize(\"title\", constants.layers.RewardItemLayer);\r\n        find(\"ui/btns/btnGoOn/Label\", this.node).localize(\"cancel\", constants.catName.common);\r\n        find(\"ui/btns/btnExit/Label\", this.node).localize(\"getFree\", constants.catName.common);\r\n    }\r\n\r\n    getRewardProp() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let prop: PropItem = {\r\n            Id: this.layerData.propId,\r\n            Num: this.layerData.num,\r\n        }\r\n        let self = this\r\n        let propdata = designManager.getRowById(constants.tableName.prop, this.layerData.propId)\r\n\r\n        sdkManager.openAd(\"获得道具\" + propdata.name, (st: number) => {\r\n            if (st == 1) {\r\n                UserData.getInstance().getRewardProp([prop])\r\n                self.closeLayer()\r\n            }\r\n        });\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, macro, Node, Prefab, sp, UITransform, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { find } from 'cc';\r\nimport { constants } from '../../data/constants';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardLayer')\r\nexport class RewardLayer extends BaseUILayer {\r\n\r\n    @property({ type: Prefab }) propItem: Prefab = null;\r\n    @property({ type: Node }) listLayer: Node = null;\r\n\r\n    @property({ type: Node }) yanhua: Node = null;\r\n    onLoad() {\r\n        super.onLoad()\r\n\r\n        find(\"ui/btns/btnGoOn/Label\",this.node).localize(\"btnSure\", constants.catName.common);\r\n        find(\"ui/gongxihuode\", this.node).localizeImg();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable()\r\n        this.showReward()\r\n        this.showYanhua()\r\n    }\r\n\r\n    showReward() {\r\n        let arr = this.layerData.propArr\r\n\r\n        let self = this\r\n        if (!this.layerData.notMoveAni) {\r\n            this.scheduleOnce(function () {\r\n                self.showGetReward(arr)\r\n            }, 0.5)\r\n        }\r\n\r\n        this.listLayer.getComponent(UITransform).width = Math.min(135 * arr.length, 675)\r\n        for (let index = 0; index < arr.length; index++) {\r\n            let element = arr[index];\r\n            //  UserData.getInstance().getRewardProp([propdata])\r\n            let propItem = instantiate(this.propItem)\r\n            this.listLayer.addChild(propItem)\r\n            propItem.getComponent(PropItemPrefab).setView(element.Id, element.Num, PropItemPrefab.Type_UnTouch)\r\n            propItem.getComponent(PropItemPrefab).setScale(120)\r\n        }\r\n    }\r\n\r\n    showYanhua() {\r\n        // 放烟花\r\n        let posArr = [\r\n            v3(-100, 200, 0),\r\n            v3(0, -100, 0),\r\n            v3(150, -250, 0),\r\n            v3(300, -500, 0),\r\n            v3(100, -450, 0),\r\n        ];\r\n\r\n        cocosUtil.schedule(this, () => {\r\n            if (posArr.length <= 0) {\r\n                return;\r\n            }\r\n            let skinName = Math.random() > 0.5 ? \"huang\" : \"lan\";\r\n            let scale = 0.8 + Math.random() * 0.2;\r\n            let pos = utilTools.getRandomItemByArr(posArr, true);\r\n            let fireNode = cocosUtil.instantiate(this.yanhua);\r\n            fireNode.parent = this.node;\r\n            fireNode.active = true;\r\n            fireNode.position = pos;\r\n            fireNode.scale = v3(scale, scale, 1);\r\n            fireNode.getComponent(sp.Skeleton).setSkin(skinName);\r\n            let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(fireNode, AnimationCtrl);\r\n            aniCtrl.playAnimationOnce(\"animation\", () => {\r\n                fireNode.parent = null;\r\n            });\r\n        }, 1.5, macro.REPEAT_FOREVER, 0, true);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Button, instantiate, Node, Prefab, Sprite, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardRedBoxLayer')\r\nexport class RewardRedBoxLayer extends BaseUILayer {\r\n\r\n    @property(Node) itemProp: Node = null;\r\n    @property(Node) proplayer: Node = null;\r\n\r\n    @property({ type: Prefab }) propItem: Prefab = null;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n  \r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.initList()\r\n        this.itemProp.active = false\r\n    }\r\n\r\n    initList(){\r\n        let propArr = designManager.getRowsByType(constants.tableName.CNTM, 1)\r\n        this.proplayer.removeAllChildren()\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i].award[0]\r\n            let item = instantiate(this.itemProp)\r\n            item.position = v3(0, 0, 0)\r\n            item.active = true\r\n            this.proplayer.addChild(item)\r\n            let propItem = instantiate(this.propItem)\r\n            propItem.getComponent(PropItemPrefab).setView(data[0], 0, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).changeBg(\"activityRes/itembg\", constants.bundles.wwqVec)\r\n            propItem.getComponent(PropItemPrefab).setScale(99)\r\n            item.addChild(propItem)\r\n            propItem.position = v3(0, -20, 0)\r\n            this.addButtonHander(item.getChildByName(\"btnGet\"), this.node, \"RewardRedBoxLayer\", \"onClickVideoGet\", data[0])\r\n\r\n            if (UserData.getInstance().isHaveProp(data[0])) {\r\n                item.getChildByName(\"btnGet\").getComponent(Sprite).grayscale = true\r\n                item.getChildByName(\"btnGet\").getComponent(Button).interactable = false\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickVideoGet(event, data) {\r\n        console.log(\"onClickVideoGet = \", data)\r\n        let self = this\r\n        sdkManager.openAd(\"领取皮肤\", function (st) {\r\n            if (st == 1) {\r\n                let propItem: PropItem = {\r\n                    Id: data,\r\n                    Num: 1\r\n                };\r\n                UserData.getInstance().getRewardProp([propItem])\r\n                self.openLayer(constants.layers.RewardLayer, { propArr: [propItem] });\r\n                self.initList()\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Button, instantiate, Node, Prefab, Sprite, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardSkinLayer')\r\nexport class RewardSkinLayer extends BaseUILayer {\r\n\r\n\r\n    @property(Node) itemProp: Node = null;\r\n    @property(Node) proplayer: Node = null;\r\n\r\n    @property({ type: Prefab }) propItem: Prefab = null;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n  \r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.initList()\r\n        this.itemProp.active = false\r\n    }\r\n\r\n    initList() {\r\n        this.proplayer.removeAllChildren()\r\n        let propArr = designManager.getRowsByType(constants.tableName.prop, 17)\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i]\r\n            if (data.p1 == 2) {\r\n                let item = instantiate(this.itemProp)\r\n                item.active = true\r\n                item.position = v3(0, 0, 0)\r\n                this.proplayer.addChild(item)\r\n                let propItem = instantiate(this.propItem)\r\n                propItem.getComponent(PropItemPrefab).setView(data.id, 0, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n                propItem.getComponent(PropItemPrefab).changeBg(\"activityRes/itembg\", constants.bundles.wwqVec)\r\n                propItem.getComponent(PropItemPrefab).setScale(99)\r\n                item.addChild(propItem)\r\n                propItem.position = v3(0, -20, 0)\r\n                this.addButtonHander(item.getChildByName(\"btnGet\"), this.node, \"RewardSkinLayer\", \"onClickVideoGet\", data.id)\r\n                if (UserData.getInstance().isHaveProp(data.id)) {\r\n                    item.getChildByName(\"btnGet\").getComponent(Sprite).grayscale = true\r\n                    item.getChildByName(\"btnGet\").getComponent(Button).interactable = false\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickVideoGet(event, data) {\r\n        console.log(\"onClickVideoGet = \", data)\r\n        let self = this\r\n        sdkManager.openAd(\"获取皮肤\", function (st) {\r\n            if (st == 1) {\r\n                let propItem: PropItem = {\r\n                    Id: data,\r\n                    Num: 1\r\n                };\r\n                UserData.getInstance().getRewardProp([propItem])\r\n                self.openLayer(constants.layers.RewardLayer, { propArr: [propItem] });\r\n                self.initList()\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","import { Component, find, game, instantiate, isValid, Layout, Node, ScrollView, sys, tween, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { RenderChildBatch } from './RenderChildBatch';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ScrollViewUtil')\r\nexport class ScrollViewUtil extends Component {\r\n\r\n    scrollView: ScrollView;\r\n    vertical: boolean = true;\r\n    gapX: number = 0;\r\n    gapY: number = 0;\r\n    paddingLeft: number = 0;\r\n    paddingRight: number = 0;\r\n    paddingTop: number = 0;\r\n    paddingBottom: number = 0;\r\n    contentNode: Node;\r\n    contentTransform: UITransform;\r\n\r\n    viewNode: Node;\r\n    viewWidth: number;\r\n    viewHeight: number;\r\n    viewTransform: UITransform;\r\n\r\n    itemUI: Node;\r\n    itemUITransform: UITransform;\r\n    itemUIWidth: number = 0;\r\n    itemUIHeight: number = 0;\r\n    // 缓存还未被使用的itemUI\r\n    itemUIFreeArr: any = [];\r\n    // 首个itemUI的坐标\r\n    startPosX: number = 0;\r\n    startPosY: number = 0;\r\n\r\n    // 一屏最多可以显示几行或者几列itemUI\r\n    viewNum: number = 0;\r\n    // 一行或者一列要显示几个\r\n    changeNum: number = 1;\r\n    // 最大行数或列数\r\n    maxLines: number = 1;\r\n\r\n    // 记录每帧需要刷新的数据\r\n    frameUpdateArr: any = [];\r\n    // 每帧最多能处理的时间间隔\r\n    frameTime: number = Math.floor(1000 / (game.getFrameRate() + 10));\r\n\r\n    itemArr: any = [];\r\n    refreshItemFunc: Function;\r\n\r\n    itemTween: boolean = false;\r\n    setDataFlag: boolean = false;\r\n\r\n    // 只会刷新行数或者列数索引区间内的节点\r\n    // 开始索引\r\n    startIndex: number = 0;\r\n    // 结束索引\r\n    stopIndex: number = 0;\r\n\r\n    private renderChildBatch: RenderChildBatch = null;\r\n\r\n    onLoad() {\r\n        this.scrollView = this.node.getComponent(ScrollView);\r\n        this.contentNode = this.scrollView.content;\r\n\r\n        this.itemUI = this.contentNode.children[0];\r\n        if (!this.itemUI) {\r\n            myLog.e(\"=============ScrollViewUtil itemUI is null:\" + this.node.name);\r\n        }\r\n        this.itemUITransform = this.itemUI.getComponent(UITransform);\r\n        this.itemUIWidth = this.itemUITransform.width;\r\n        this.itemUIHeight = this.itemUITransform.height;\r\n\r\n        // 获取排列间距参数\r\n        this.vertical = this.scrollView.vertical;\r\n        let contentLayout = this.contentNode.getComponent(Layout);\r\n        this.gapX = contentLayout.spacingX;\r\n        this.gapY = contentLayout.spacingY;\r\n        this.paddingLeft = contentLayout.paddingLeft;\r\n        this.paddingRight = contentLayout.paddingRight;\r\n        this.paddingTop = contentLayout.paddingTop;\r\n        this.paddingBottom = contentLayout.paddingBottom;\r\n        contentLayout.enabled = false;\r\n        this.contentTransform = this.contentNode.getComponent(UITransform);\r\n\r\n        let contentWidth = this.contentTransform.width;\r\n        let contentHeight = this.contentTransform.height;\r\n\r\n        this.viewNode = find(\"view\", this.node);\r\n        this.viewTransform = this.viewNode.getComponent(UITransform);\r\n        this.viewWidth = this.viewTransform.width;\r\n        this.viewHeight = this.viewTransform.height;\r\n\r\n        this.itemUIFreeArr = [];\r\n        this.contentNode.children.forEach((node: Node) => {\r\n            node.active = false;\r\n            this.itemUIFreeArr.push(node);\r\n        });\r\n\r\n        if (this.vertical) {\r\n            this.viewTransform.anchorX = 0.5;\r\n            this.viewTransform.anchorY = 1;\r\n            this.contentTransform.anchorX = 0.5;\r\n            this.contentTransform.anchorY = 1;\r\n            this.viewNum = Math.ceil(this.viewHeight / (this.itemUIHeight + this.gapY)) + 1;\r\n            this.changeNum = Math.floor((contentWidth + this.gapX - this.paddingLeft - this.paddingRight) / (this.itemUIWidth + this.gapX));\r\n        } else {\r\n            this.viewTransform.anchorX = 0;\r\n            this.viewTransform.anchorY = 0.5;\r\n            this.contentTransform.anchorX = 0;\r\n            this.contentTransform.anchorY = 0.5;\r\n            this.viewNum = Math.ceil(this.viewWidth / (this.itemUIWidth + this.gapX)) + 1;\r\n            this.changeNum = Math.floor((contentHeight + this.gapY - this.paddingTop - this.paddingBottom) / (this.itemUIHeight + this.gapY));\r\n        }\r\n        if (this.changeNum < 1) {\r\n            this.changeNum = 1;\r\n        }\r\n\r\n        // 首个itemUI的坐标\r\n        this.startPosX = this.itemUIWidth * this.itemUITransform.anchorX - this.contentTransform.width * this.contentTransform.anchorX + this.paddingLeft;\r\n        this.startPosY = contentHeight * (1 - this.contentTransform.anchorY) - this.itemUIHeight * (1 - this.itemUITransform.anchorY) - this.paddingTop;\r\n\r\n        // scrollView监听事件\r\n        this.node.on('scrolling', this.onScrolling, this);\r\n\r\n        // 记录每帧需要刷新的数据\r\n        this.frameUpdateArr = [];\r\n\r\n        this.addRenderChildBatch();\r\n    }\r\n\r\n    public addRenderChildBatch() {\r\n        if (sys.isNative) {\r\n            return;\r\n        }\r\n        if (this.renderChildBatch) {\r\n            return;\r\n        }\r\n        this.renderChildBatch = this.contentNode.addComponent(RenderChildBatch);\r\n    }\r\n\r\n    // 滑动中回调\r\n    onScrolling() {\r\n        if (this.itemArr.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        let start = 0;\r\n        // 垂直滚动\r\n        if (this.vertical) {\r\n            let posY = this.contentNode.getPosition().y;\r\n            if (posY > this.contentTransform.height - this.viewHeight) {\r\n                posY = this.contentTransform.height - this.viewHeight;\r\n            }\r\n            if (posY < 0) {\r\n                posY = 0;\r\n            }\r\n            // 开始行\r\n            start = Math.floor((posY + this.gapY - this.paddingTop) / (this.itemUIHeight + this.gapY));\r\n        } else {\r\n            // 水平滚动\r\n            let posX = this.contentNode.getPosition().x;\r\n            if (posX < this.viewWidth - this.contentTransform.width) {\r\n                posX = this.viewWidth - this.contentTransform.width;\r\n            }\r\n            if (posX > 0) {\r\n                posX = 0;\r\n            }\r\n            posX = Math.abs(posX);\r\n            // 开始列\r\n            start = Math.floor((posX + this.gapX - this.paddingLeft) / (this.itemUIWidth + this.gapX));\r\n        }\r\n\r\n        if (start < 0) {\r\n            start = 0;\r\n        }\r\n        if (start > this.maxLines - 1) {\r\n            start = this.maxLines - 1;\r\n        }\r\n\r\n        // 结束行\r\n        let stop = start + this.viewNum;\r\n        if (stop > this.maxLines - 1) {\r\n            stop = this.maxLines - 1;\r\n        }\r\n\r\n        // 跟上屏显示范围不一样，才会进行刷新\r\n\r\n        if (start != this.startIndex || stop != this.stopIndex) {\r\n            this.startIndex = start;\r\n            this.stopIndex = stop;\r\n            this.renderItemArr();\r\n        }\r\n    }\r\n\r\n    // 渲染屏幕范围内的itemArr\r\n    renderItemArr() {\r\n        let item = null;\r\n        // 先回收屏幕范围外的item\r\n        let hideIndex = this.startIndex * this.changeNum;\r\n        for (let i = 0; i < hideIndex; i++) {\r\n            item = this.itemArr[i];\r\n            this.recycleItem(item);\r\n        }\r\n\r\n        hideIndex = (this.stopIndex + 1) * this.changeNum;\r\n        for (let i = hideIndex; i < this.itemArr.length; i++) {\r\n            item = this.itemArr[i];\r\n            this.recycleItem(item);\r\n        }\r\n\r\n        // 再显示屏幕范围内的\r\n        for (let i = this.startIndex; i <= this.stopIndex; i++) {\r\n            let startIndex = i * this.changeNum;\r\n            let stopIndex = startIndex + this.changeNum;\r\n            for (let k = startIndex; k < stopIndex; k++) {\r\n                if (!this.itemArr[k]) {\r\n                    continue;\r\n                }\r\n                item = this.itemArr[k];\r\n                if (item.node) {\r\n                    // 已经刷新过了，就不再刷新，节省CPU开销\r\n                    continue;\r\n                }\r\n                // 更换到每帧去刷新\r\n                item.needUpdate = true;\r\n                this.frameUpdateArr.push(item);\r\n            }\r\n        }\r\n        this.startFrameUpdate();\r\n    }\r\n\r\n    // 生成node\r\n    createNode() {\r\n        let node = null;\r\n        if (this.itemUIFreeArr.length > 0) {\r\n            node = this.itemUIFreeArr.shift();\r\n        } else {\r\n            node = instantiate(this.itemUI);\r\n        }\r\n        node.parent = this.contentNode;\r\n\r\n        if (this.renderChildBatch) {\r\n            this.renderChildBatch.addRootItemNode(node);\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    startFrameUpdate() {\r\n        let startTime = new Date().getTime();\r\n        while (true) {\r\n            if (!this.frameUpdateArr || this.frameUpdateArr.length <= 0) {\r\n                this.setDataFlag = false;\r\n                break;\r\n            }\r\n\r\n            let item = this.frameUpdateArr.shift();\r\n            if (!item.needUpdate) {\r\n                continue;\r\n            }\r\n\r\n            if (!item.node) {\r\n                item.node = this.createNode();\r\n            }\r\n            if (!item.node.active) {\r\n                item.node.active = true;\r\n            }\r\n            item.node.setPosition(item.x, item.y);\r\n\r\n            item.node.item = item.data;\r\n            item.node.index = item.index;\r\n            item.node.scale = v3(1, 1, 1);\r\n            if (item.node.showTween) {\r\n                item.node.showTween.stop();\r\n                item.node.showTween = undefined;\r\n            }\r\n            this.refreshItemFunc(item.node, item.data, item.index);\r\n\r\n            if (this.itemTween && this.setDataFlag) {\r\n                item.node.setScale(0, 0, 1);\r\n                let tn = tween(item.node).to(0.2, { scale: v3(1.2, 1.2, 1) }).to(0.1, { scale: v3(1, 1, 1) }).call(() => {\r\n                    item.node.showTween = undefined;\r\n                }).start();\r\n                item.node.showTween = tn;\r\n                this.scheduleOnce(() => {\r\n                    this.startFrameUpdate();\r\n                }, 0.05);\r\n                break;\r\n            } else {\r\n                if (new Date().getTime() - startTime >= this.frameTime) {\r\n                    // 本帧跑满了，下一帧继续\r\n                    this.scheduleOnce(this.startFrameUpdate.bind(this));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 回收item.node\r\n    recycleItem(item: any) {\r\n        if (item.node && isValid(item.node)) {\r\n            if (this.itemUIFreeArr.indexOf(item.node) == -1) {\r\n                this.itemUIFreeArr.push(item.node);\r\n            }\r\n            item.node.active = false;\r\n            item.node.showTween = undefined;\r\n            item.node = null;\r\n            item.needUpdate = undefined;\r\n        }\r\n    }\r\n\r\n    // 清除所有items\r\n    clearAllItems() {\r\n        for (let item of this.itemArr) {\r\n            this.recycleItem(item);\r\n        }\r\n    }\r\n\r\n    // 初始化item\r\n    initItem(data: any, index: number) {\r\n        let item = {\r\n            node: null,\r\n            data: data,\r\n            index: index,\r\n            x: 0,\r\n            y: 0\r\n        };\r\n\r\n        return item;\r\n    }\r\n\r\n    refreshItemIndex(item: any, index: number) {\r\n        item.index = index;\r\n        if (item.node) {\r\n            item.node.index = index;\r\n        }\r\n    }\r\n\r\n    setData(dataArr: any, refreshItemFunc: Function, resetPos: boolean = true, itemTween: boolean = false) {\r\n        if (!this.scrollView) {\r\n            return;\r\n        }\r\n        this.itemTween = itemTween;\r\n        this.setDataFlag = true;\r\n\r\n        this.frameUpdateArr = [];\r\n        this.unscheduleAllCallbacks();\r\n\r\n        this.clearAllItems();\r\n        this.itemArr = [];\r\n\r\n        if (!dataArr) {\r\n            dataArr = [];\r\n        }\r\n\r\n        this.refreshItemFunc = refreshItemFunc;\r\n        for (let i = 0; i < dataArr.length; i++) {\r\n            let data = dataArr[i];\r\n            let item = this.initItem(data, i);\r\n            this.itemArr.push(item);\r\n        }\r\n\r\n        this.maxLines = Math.ceil(this.itemArr.length / this.changeNum);\r\n        if (this.maxLines < 1) {\r\n            this.maxLines = 1;\r\n        }\r\n\r\n        this.refreshItemArr(0, resetPos);\r\n    }\r\n\r\n    // 布局itemArr，计算出每个item摆放的坐标信息\r\n    layoutItemArr(start: number) {\r\n        if (this.itemArr.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        for (let index = start; index < this.itemArr.length; index++) {\r\n            let line = Math.floor(index / this.changeNum);\r\n            let line2 = index % this.changeNum;\r\n            let item = this.itemArr[index];\r\n            if (this.vertical) {\r\n                item.x = this.startPosX + line2 * (this.itemUIWidth + this.gapX);\r\n                item.y = this.startPosY - line * (this.itemUIHeight + this.gapY);\r\n            } else {\r\n                item.x = this.startPosX + line * (this.itemUIWidth + this.gapX);\r\n                item.y = this.startPosY - line2 * (this.itemUIHeight + this.gapY);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 调整content节点大小\r\n    resizeContentNode() {\r\n        if (!this.contentNode || !this.itemUI) {\r\n            return;\r\n        }\r\n        if (this.itemArr.length <= 0) {\r\n            this.contentTransform.width = 0;\r\n            this.contentTransform.height = 0;\r\n            return;\r\n        }\r\n        let lastItem = this.itemArr[this.itemArr.length - 1];\r\n        if (this.vertical) {\r\n            let height = -lastItem.y + this.itemUIHeight * this.itemUITransform.anchorY;\r\n            this.contentTransform.height = height + this.paddingBottom;\r\n        } else {\r\n            let width = lastItem.x + this.itemUIWidth * (1 - this.itemUITransform.anchorX);\r\n            this.contentTransform.width = width + this.paddingRight;\r\n        }\r\n    }\r\n\r\n    // 计算每个item的坐标位置和contentNode大小\r\n    refreshItemArr(start: number, resetPos: boolean = true) {\r\n        if (!this.scrollView) {\r\n            return;\r\n        }\r\n\r\n        this.layoutItemArr(start);\r\n        this.resizeContentNode();\r\n\r\n        this.startIndex = -1;\r\n        this.stopIndex = -1;\r\n\r\n        this.scrollView.stopAutoScroll();\r\n        let maxOffset = this.scrollView.getMaxScrollOffset();\r\n        let offset = this.scrollView.getScrollOffset();\r\n        if (this.vertical) {\r\n            let posY = 0;\r\n            if (!resetPos) {\r\n                posY = this.contentNode.getPosition().y;\r\n                if (posY > maxOffset.y) {\r\n                    posY = maxOffset.y;\r\n                }\r\n                if (posY < 0) {\r\n                    posY = 0;\r\n                }\r\n            }\r\n            offset.y = posY;\r\n            this.scrollView.scrollToOffset(offset, 0);\r\n        } else {\r\n            let posX = 0;\r\n            if (!resetPos) {\r\n                posX = Math.abs(this.contentNode.getPosition().x);\r\n                if (posX > Math.abs(maxOffset.x)) {\r\n                    posX = Math.abs(maxOffset.x);\r\n                }\r\n                if (posX < 0) {\r\n                    posX = 0;\r\n                }\r\n            }\r\n            offset.x = posX;\r\n            this.scrollView.scrollToOffset(offset, 0);\r\n        }\r\n\r\n        this.onScrolling();\r\n    }\r\n\r\n    // 刷新整个列表\r\n    refreshList() {\r\n        if (!this.refreshItemFunc) {\r\n            return;\r\n        }\r\n        this.itemArr.forEach((item: any) => {\r\n            if (!item.node) {\r\n                return;\r\n            }\r\n            this.refreshItemFunc(item.node, item.data, item.index);\r\n        });\r\n    }\r\n\r\n    // 移除某个索引item，会重新排列索引\r\n    removeByIndex(index: number, resetPos: boolean = false) {\r\n        if (index < 0 || index >= this.itemArr.length) {\r\n            console.log(\"无效的index\", index);\r\n            return;\r\n        }\r\n        let item = this.itemArr[index];\r\n        if (!item || !this.refreshItemFunc) {\r\n            return;\r\n        }\r\n\r\n        this.itemArr.splice(index, 1);\r\n        this.recycleItem(item);\r\n\r\n        // 重新排列索引\r\n        for (let i = index; i < this.itemArr.length; i++) {\r\n            let item = this.itemArr[i];\r\n            this.refreshItemIndex(item, i);\r\n        }\r\n        this.maxLines = Math.ceil(this.itemArr.length / this.changeNum);\r\n        if (this.maxLines < 1) {\r\n            this.maxLines = 1;\r\n        }\r\n        this.refreshItemArr(index, resetPos);\r\n    }\r\n\r\n    // 刷新指定索引的itemUI\r\n    refreshIndex(index: number, data?: any) {\r\n        if (index == undefined || index < 0 || index >= this.itemArr.length) {\r\n            console.log(\"无效的index\", index);\r\n            return;\r\n        }\r\n        let item = this.itemArr[index];\r\n        if (!item) {\r\n            return;\r\n        }\r\n        if (data != undefined) {\r\n            item.data = data;\r\n        }\r\n        if (item.node) {\r\n            item.node.item = item.data;\r\n            if (this.refreshItemFunc) {\r\n                this.refreshItemFunc(item.node, item.data, index);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 插入数据\r\n    insertData(index: number, arr: any, resetPos: boolean = false) {\r\n        if (!arr || arr.length == 0) {\r\n            console.log(\"没有要添加的数据\");\r\n            return;\r\n        }\r\n        if (index < 0 || index > this.itemArr.length) {\r\n            console.log(\"无效的index\", index);\r\n            return;\r\n        }\r\n        if (!this.refreshItemFunc) {\r\n            console.log(\"首次请调用setData方法\");\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let pIndex = index + i;\r\n            let item = this.initItem(arr[i], pIndex);\r\n            this.itemArr.splice(pIndex, 0, item);\r\n        }\r\n        for (let i = index + arr.length; i < this.itemArr.length; i++) {\r\n            let item = this.itemArr[i];\r\n            this.refreshItemIndex(item, i);\r\n        }\r\n\r\n        this.maxLines = Math.ceil(this.itemArr.length / this.changeNum);\r\n        if (this.maxLines < 1) {\r\n            this.maxLines = 1;\r\n        }\r\n\r\n        this.refreshItemArr(index, resetPos);\r\n\r\n    }\r\n\r\n    // 追加数据\r\n    pushData(arr: any, resetPos: boolean = false) {\r\n        this.insertData(this.itemArr.length, arr, resetPos);\r\n    }\r\n\r\n    // 是否滑动到尽头了\r\n    isScrollEnd() {\r\n        let maxOffset = this.scrollView.getMaxScrollOffset();\r\n        let offset = this.scrollView.getScrollOffset();\r\n        if (Math.abs(maxOffset.x) - Math.abs(offset.x) <= 10 && Math.abs(maxOffset.y) - Math.abs(offset.y) <= 10) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // 滑动到尽头\r\n    scrollToEnd(time?: number) {\r\n        this.scrollView.stopAutoScroll();\r\n        if (time == undefined || time < 0) {\r\n            time = 0.5;\r\n        }\r\n        if (this.vertical) {\r\n            this.scrollView.scrollToBottom(time);\r\n        } else {\r\n            this.scrollView.scrollToRight(time);\r\n        }\r\n    }\r\n\r\n    // 滑动到指定索引位置，该位置将定位到最底下(垂直滚动)或者最右边(水平滚动)\r\n    scrollToIndex(index: number, time?: number) {\r\n        if (time == undefined || time < 0) {\r\n            time = 0;\r\n        }\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        let item = this.itemArr[index];\r\n        if (!item) {\r\n            return;\r\n        }\r\n\r\n        this.scrollView.stopAutoScroll();\r\n        let maxOffset = this.scrollView.getMaxScrollOffset();\r\n        let offset = this.scrollView.getScrollOffset();\r\n        if (this.vertical) {\r\n            let dy = Math.abs(item.y) + this.itemUIHeight - this.viewHeight;\r\n            if (dy < 0) {\r\n                dy = 0;\r\n            }\r\n            if (dy > maxOffset.y) {\r\n                dy = maxOffset.y;\r\n            }\r\n            offset.y = dy;\r\n            this.scrollView.scrollToOffset(offset, time);\r\n        } else {\r\n            let dx = Math.abs(item.x) + this.itemUIWidth - this.viewWidth;\r\n            if (dx < 0) {\r\n                dx = 0;\r\n            }\r\n            if (dx > Math.abs(maxOffset.x)) {\r\n                dx = Math.abs(maxOffset.x);\r\n            }\r\n            offset.x = dx;\r\n            this.scrollView.scrollToOffset(offset, time);\r\n        }\r\n        this.onScrolling();\r\n    }\r\n\r\n    onDestroy() {\r\n        this.itemUIFreeArr = [];\r\n        this.itemArr = [];\r\n        this.frameUpdateArr = [];\r\n        this.refreshItemFunc = null;\r\n        this.node.off(\"scrolling\", this.onScrolling, this);\r\n        this.unscheduleAllCallbacks();\r\n    }\r\n}\r\n\r\n","\r\nimport { constants } from \"../game/data/constants\";\r\nimport { localText } from \"../game/data/localText\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { audioManager } from \"../game/manager/audioManager\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { mapModel } from \"../game/model/mapModel\";\r\nimport { playerModel } from \"../game/model/playerModel\";\r\nimport { UserData } from \"../game/model/UserData\";\r\nimport { localizeManager } from \"../localization\";\r\nimport { H5AdSdk4399 } from \"../tyqSDK/H5AdSdk4399\";\r\nimport { H5AdSdkTelegram } from \"../tyqSDK/H5AdSdkTelegram\";\r\nimport CronCtr from \"../tyqSDK/network/CronCtr\";\r\nimport { Channel, tyqAdManager } from \"../tyqSDK/tyqAdManager\";\r\nimport { tyqSDK } from \"../tyqSDK/tyqSDK\";\r\n\r\n\r\nclass SdkManager {\r\n\r\n    private static _instance: SdkManager;\r\n    private constructor() {\r\n\r\n    }\r\n\r\n    public static get instance(): SdkManager {\r\n        if (!this._instance) {\r\n            this._instance = new SdkManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    // 注意!!!每次打包前，要检查该变量值是否为对应的渠道，git上的版本默认为：WECHAT_MRTGD\r\n    // public channel: ChannelFlag = ChannelFlag.WECHAT_JJWS;\r\n\r\n    initSDK() {\r\n        if (tyqAdManager.getChannel() == Channel.H5_4399) {\r\n            H5AdSdk4399.instance.checkDownUrl()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 激励视频广告统一播放接口\r\n     * 完整观看广告后，获得奖励，调用：tmpFunc(1)\r\n     * 中途退出或者观看失败，调用：tmpFunc(0)\r\n     * @param cb \r\n     */\r\n    openAd(info: string, cb: Function) {\r\n        let tmpFunc = (st: number) => {\r\n            if (st == 0) {\r\n                eventManager.send(msgac.showNotice, localizeManager._localize(null, \"adAwardHint\",constants.catName.common));\r\n            } else if (st == -1) {\r\n                eventManager.send(msgac.showNotice, localizeManager._localize(null, \"noRewardAd\",constants.catName.common));\r\n            } else if (st == 2) {\r\n                eventManager.send(msgac.showNotice, localizeManager._localize(null, \"noAd\",constants.catName.common));\r\n            } else if (st != 1) {\r\n                eventManager.send(msgac.showNotice, localizeManager._localize(null, {key:\"defaultError\",cat:constants.catName.common,vars:[st]}));\r\n            }\r\n            cb(st);\r\n            if (st == 1) {\r\n                playerModel.addDayTaskNum(11);\r\n                // 好友观看视频广告累计数量\r\n                UserData.getInstance().$videoCalCnt++;\r\n                CronCtr.getInstance().saveDataToCloud(\"videoCalCnt\", UserData.getInstance().$videoCalCnt);\r\n            }\r\n            audioManager.gameOnShow(true);\r\n        };\r\n\r\n        // // test\r\n        // tmpFunc(1);\r\n        // return;\r\n\r\n        if (playerModel.isInDevelopmentEnvironment() || playerModel.isRecordAd) {\r\n            // 开发环境，默认直接成功\r\n            tmpFunc(1);\r\n            return;\r\n        }\r\n\r\n        // if (tyqAdManager.getChannel() == Channel.DEFAULT) {\r\n        //     // 电脑测试直接返回观看成功\r\n        //     tmpFunc(1);\r\n        //     return;\r\n        // }\r\n\r\n        if (mapModel.mapId > 0) {\r\n            mapModel.mapSystem.fightPause();\r\n        }\r\n\r\n        if (tyqAdManager.getChannel() == Channel.DEFAULT) {\r\n            \r\n            H5AdSdkTelegram.instance.showRewardedAd((state) => {\r\n                if (mapModel.mapId > 0) {\r\n                    mapModel.mapSystem.fightResume();\r\n                }\r\n                tmpFunc(state);\r\n            })\r\n            return\r\n        }\r\n\r\n        if (tyqAdManager.getChannel() == Channel.H5_4399) {\r\n            H5AdSdk4399.instance.showRewardedAd((state) => {\r\n                if (mapModel.mapId > 0) {\r\n                    mapModel.mapSystem.fightResume();\r\n                }\r\n                tmpFunc(state);\r\n            })\r\n        } else {\r\n            tyqSDK.showRewardedAd(info, (state) => {\r\n                if (mapModel.mapId > 0) {\r\n                    mapModel.mapSystem.fightResume();\r\n                }\r\n                tmpFunc(state);\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    getShareUid() {\r\n        let query = tyqAdManager.getEnterUrlQuery();\r\n        if (query && query.uid) {\r\n            return query.uid;\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n}\r\n\r\nexport const sdkManager = SdkManager.instance;\r\n\r\n","\r\n//normal， new，hot，maintain\r\nexport const ServerState = {\r\n    Normal: 'normal',\r\n    New: 'new',\r\n    Hot: 'hot',\r\n    Maintain: 'maintain'\r\n}\r\n\r\nimport { Component, director, _decorator } from 'cc';\r\nimport { Wechat } from '../platform/wechat/wechat';\r\nimport { GLoginState, GNetCmd, GNetConst } from './conf';\r\nimport { GameStorage } from './gameStorage';\r\nimport { WmSocket } from './wmsocket';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ServerCtr')\r\nexport default class ServerCtr extends Component {\r\n\r\n    private static instance: ServerCtr = null!;\r\n\r\n    public static GetInstance() {\r\n        if (!this.instance) {\r\n            this.instance = new ServerCtr();\r\n            this.instance.InitServerCtr();\r\n        }\r\n        return this.instance;\r\n    }\r\n    serverId: number = 1;\r\n    account: string = '';\r\n    password: string = 'hsmnq2021';\r\n    authCode: string = \"\";\r\n    token: string = '';\r\n    regionDataList: any[] = [];\r\n    uid: string = '';\r\n    regionId: string = '';\r\n    nickName: string = '测试账号';\r\n    isLogin: boolean = false;\r\n    avatar: string = '';\r\n    loginState: GLoginState = GLoginState.noYet; //服务端是否加载完成,有账号登录，无账号登录\r\n    serverDataVersion: number = 0  //服务端的版本号\r\n    serverData: any = {} //服务端数据\r\n\r\n    // regions\":{\"1\":\"{\\\"id\\\":\\\"1\\\",\\\"name\\\":\\\"先行服\\\"}\",\"2\":\"{\\\"id\\\":\\\"2\\\",\\\"name\\\":\\\"圣魂村\\\"}\"},\r\n    // \"servers\":{\"1\":\"{\\\"id\\\":\\\"1\\\",\\\"name\\\":\\\"先行服1\\\",\\\"region\\\":\\\"1\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 08:00:00\\\"}\",\r\n    // \"2\":\"{\\\"id\\\":\\\"2\\\",\\\"name\\\":\\\"先行服2\\\",\\\"region\\\":\\\"1\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 09:00:00\\\"}\",\r\n    // \"3\":\"{\\\"id\\\":\\\"3\\\",\\\"name\\\":\\\"圣魂村1\\\",\\\"region\\\":\\\"2\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 10:00:00\\\"}\",\r\n    // \"4\":\"{\\\"id\\\":\\\"4\\\",\\\"name\\\":\\\"圣魂村2\\\",\\\"region\\\":\\\"2\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 11:00:00\\\"}\",\r\n    // \"5\":\"{\\\"id\\\":\\\"5\\\",\\\"name\\\":\\\"圣魂村3\\\",\\\"region\\\":\\\"2\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 12:00:00\\\"}\",\"isUpdated\":\"0\"}\r\n    regionList: any = {};\r\n    serverList: any = {};\r\n\r\n    InitServerCtr() {\r\n        this.account = GameStorage.getStringDisk('login_account', '');\r\n        this.password = GameStorage.getStringDisk('login_password', this.password);\r\n        this.authCode = GameStorage.getStringDisk('login_authCode', this.authCode);\r\n        this.serverId = parseInt(GameStorage.getStringDisk('login_serverId', \"\"));\r\n\r\n        director.on(GNetCmd.GetInviteCode.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    //数据版本设置\r\n    get dataVersion() {\r\n        return GameStorage.getInt(\"dataVersion\", 0)\r\n    }\r\n    set dataVersion(val: number) {\r\n        if (val > this.dataVersion) {\r\n            GameStorage.setInt(\"dataVersion\", val)\r\n        }\r\n    }\r\n    addDataVersion(val: number = 1) {\r\n        GameStorage.setInt(\"dataVersion\", GameStorage.getInt(\"dataVersion\", 0) + val)\r\n    }\r\n\r\n    CheckIsHaveAccount() {\r\n        if (!this.account || this.account == '') {\r\n            // 没有账号\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    CheckHaveDataById(regionId: number) {\r\n        for (let i = 0; i < this.regionDataList.length; i++) {\r\n            const data = this.regionDataList[i];\r\n            if (data.regionId == regionId) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    get Account() {\r\n        return this.account;\r\n    }\r\n\r\n    set Account(str: string) {\r\n        this.account = str;\r\n        GameStorage.setStringDisk('login_account', this.account);\r\n    }\r\n\r\n    get PassWord() {\r\n        return this.password;\r\n    }\r\n\r\n    set PassWord(str: string) {\r\n        this.password = str;\r\n        GameStorage.setStringDisk('login_password', this.password);\r\n    }\r\n    get AuthCode() {\r\n        return this.authCode;\r\n    }\r\n\r\n    set AuthCode(str: string) {\r\n        this.authCode = str;\r\n        GameStorage.setStringDisk('login_authCode', this.authCode);\r\n    }\r\n\r\n    get ServerId() {\r\n        return this.serverId;\r\n    }\r\n    set ServerId(id: number) {\r\n        this.serverId = id;\r\n        GameStorage.setStringDisk('login_serverId', this.serverId + \"\");\r\n    }\r\n\r\n    UpdateRegions(regions: any) {\r\n        for (const key in regions) {\r\n            const data = regions[key];\r\n            this.regionList[key] = JSON.parse(data);\r\n        }\r\n    }\r\n\r\n    UpdateServers(servers: any) {\r\n        for (const key in servers) {\r\n            const data = servers[key];\r\n\r\n            this.serverList[key] = JSON.parse(data);\r\n            // if (gl.debug) {\r\n            //     switch (Number(this.serverList[key].id)) {\r\n            //         case 1:\r\n            //             this.serverList[key].status ='maintain'; \r\n            //             break;\r\n            //         case 2:\r\n            //             this.serverList[key].status = 'hot';\r\n            //             break;\r\n            //         case 5:\r\n            //             this.serverList[key].status = 'new';\r\n            //             break;\r\n            //         default:\r\n\r\n            //             break;\r\n            //     }\r\n            // }\r\n\r\n        }\r\n    }\r\n\r\n    public GetServerData(serverId: number) {\r\n        for (const key in this.serverList) {\r\n            const data = this.serverList[key];\r\n            if (data.id == serverId) {\r\n                return data;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    public GetStateIcon(status: string) {\r\n        switch (status) {\r\n            case ServerState.Normal:\r\n                return;\r\n            case ServerState.New:\r\n                return 'fm_tb_xin';\r\n            case ServerState.Hot:\r\n                return 'fm_tb_bao';\r\n            case ServerState.Maintain:\r\n                return 'fm_tb_wei';\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 获取最新的不在维护中服务器\r\n    public GetLastNewServer() {\r\n        let id = 1;\r\n        for (const key in this.serverList) {\r\n            const data = this.serverList[key];\r\n            let did = Number(data.id)\r\n            if (did > id && data.status != ServerState.Maintain) {\r\n                id = did;\r\n            }\r\n        }\r\n        return id;\r\n    }\r\n\r\n    public reqConnect() {\r\n        WmSocket.getInstance().connect();\r\n    }\r\n\r\n    public reqRegister(account: any, password: any) {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UserRegister,\r\n            \"lang\": \"zh\",\r\n            \"account\": account,\r\n            \"password\": password,\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqLogin() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UserLogin,\r\n            \"lang\": \"zh\",\r\n            \"account\": this.account,\r\n            \"password\": this.password,\r\n            'nickName': this.nickName + this.account\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqLoginByAccount(account: string, password: string, authCode: string) {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UserLogin,\r\n            \"lang\": \"zh\",\r\n            \"account\": account,\r\n            \"password\": password,\r\n            \"authCode\": authCode,\r\n            'nickName': this.nickName + this.account\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqRegionList() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.GetRegionList,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqRegionData() {\r\n        // if (!this.ServerId || this.ServerId == 0) {\r\n        //     // Notifications.emit(GDef.wdEvent.showTip, {msg:'请选择区服'})\r\n        //     return;\r\n        // }\r\n        this.ServerId = 1 //默认选一个区服\r\n        let data = {\r\n            \"cmd\": GNetCmd.GetRegionData,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"version\": ServerCtr.GetInstance().dataVersion,\r\n            \"regionId\": this.ServerId.toString()\r\n        }\r\n        console.log(\"发送服务端数据请求---11\", data)\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    //好友链接登录后，调用此接口建立关联关系\r\n    public reqSetFriendCode(shareUserId: string) {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return\r\n        }\r\n        let data = {\r\n            \"cmd\": GNetCmd.SetFriendCode,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"InviteCode\": shareUserId,\r\n        }\r\n        console.log(\"发送服务端数据请求 -- 设置好友邀请码---11\", data)\r\n        // var m = map[string]interface{}{ //不需要处理返回\r\n        //     \"cmd\":    proto.SetFriendCode,\r\n        //     \"status\": util.RES_MSG_SUCCESS,\r\n        // }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    //获得好友功能相关数据\r\n    public reqGetFriendVal() {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return\r\n        }\r\n        let data = {\r\n            \"cmd\": GNetCmd.GetFriendVal,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"keys\": \"friendPassCnt,videoCalCnt\", //相关参数\r\n            \"rules\": \"total,total\", //相关规则\r\n        }\r\n        console.log(\"发送服务端数据请求 -- 获得好友功能相关数据---11\", data)\r\n        // { 返回值参考\r\n        //     \"cmd\":        proto.SetFriendCode,\r\n        //     \"friendCnt\":  cnt,\r\n        //     \"friendData\": util.MapToJSONF(dataMap),\r\n        //     \"status\":     util.RES_MSG_SUCCESS,\r\n        // }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public onMessageEvent(value) {\r\n        if (value) {\r\n            console.log(\"处理分享的消息:\", value);\r\n            if (value.status != GNetConst.ResSuccess) {\r\n                console.error(\"服务端响应失败~!\")\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // public reqUploadOldPlayerData(isFirst:boolean = true){\r\n    //     if(Const.isActiveMemoryTmp) return\r\n    //     let datas = GameStorage.getAll(isFirst);\r\n    //     // 大数据拆分\r\n    //     console.log(\"大数据要拆分开....:\",datas);\r\n\r\n    //     // 全部发送上传\r\n    //     for (const key in datas) {\r\n    //         const value = datas[key];\r\n    //         // cc.sys.localStorage.setItem(key,value);\r\n    //         this.reqCloudSaveManual(key,value,true);\r\n    //     }\r\n    // }\r\n\r\n    public reqCloudSaveManual(key: string, val: any) {\r\n        // CronCtr.getInstance().cloudSaveManual(key,val);\r\n    }\r\n\r\n    public wxLoginBegin(failCb?: Function) {\r\n        wx.login({\r\n            success(loginResult) {\r\n                console.warn(\"-----微信登录--\", loginResult);\r\n                let data = {\r\n                    \"cmd\": GNetCmd.ReqWxSession,\r\n                    \"lang\": \"zh\",\r\n                    \"channel\": \"wx\",\r\n                    jscode: loginResult.code,\r\n                };\r\n                console.warn('发送登录数据：', data);\r\n                WmSocket.getInstance().send({ \"data\": data });\r\n            },\r\n            fail(res) {\r\n                let msg = \"登录失败：\" + res.errMsg;\r\n                if (failCb) failCb(msg);\r\n            }\r\n        });\r\n        return;\r\n\r\n        Wechat.wxGetSetting().then((res: any) => {\r\n            //授权登录，走流程\r\n            console.warn(\"微信授权结果12---\", res, res['userInfo'])\r\n            if (res.hasOwnProperty(\"userInfo\")) {\r\n                ServerCtr.GetInstance().wxLogin() //第一次授权\r\n            }\r\n            if (res.hasOwnProperty(\"authSetting\")) {\r\n                let authSetting = res.authSetting;\r\n                if (authSetting['scope.userInfo']) {//第二次授权\r\n                    ServerCtr.GetInstance().wxLogin()\r\n                }\r\n            }\r\n\r\n        }).catch((res) => {\r\n            //没有授权，直接登录\r\n            console.warn(\"没有账号登录---\",)\r\n            this.loginState = GLoginState.loginWithoutAccount\r\n        })\r\n    }\r\n\r\n    public wxLogin() {\r\n        //新方案\r\n        Wechat.getWxLoginResult((err: any, loginResult: any) => {\r\n            if (err) {\r\n                // EventMgr.getInstance().event('tipshow', '获取用户信息失败');\r\n                // App.ui.ShowPanel(\"WxScopeTipsPanel\");\r\n                console.error('登录数据err：', loginResult);\r\n                return;\r\n            }\r\n            console.log('登录数据info：', loginResult);\r\n            this.nickName = loginResult.userInfo.nickName;\r\n            this.avatar = loginResult.userInfo.avatarUrl;\r\n            // let wxEncrypted = loginResult.encryptedData;\r\n            // let wxIv = loginResult.iv;\r\n            // let wxCode = loginResult.code;\r\n            // let wxUserInfo = loginResult.userInfo;\r\n            let data = {\r\n                \"cmd\": GNetCmd.ReqWxSession,\r\n                \"lang\": \"zh\",\r\n                \"channel\": \"wx\",\r\n                jscode: loginResult.code,\r\n                nickName: this.nickName,\r\n                // wcencrypted: loginResult.encryptedData,\r\n                // wciv: loginResult.iv\r\n            };\r\n            console.warn('发送登录数据：', data);\r\n            WmSocket.getInstance().send({ \"data\": data });\r\n        });\r\n    }\r\n\r\n    public UnloadAvatarUrl() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UploadAvatar,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"avatar\": this.avatar,\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n}\r\n","import { myLog } from \"../../common/myLog\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { eventManager } from \"../manager/eventManager\";\r\nimport { mapModel } from \"../model/mapModel\";\r\nimport { playerModel } from \"../model/playerModel\";\r\n\r\nclass ServerMsg {\r\n    private static _instance: ServerMsg;\r\n    private constructor() { }\r\n    public static get instance(): ServerMsg {\r\n        if (!this._instance) {\r\n            this._instance = new ServerMsg();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n\r\n    // 模拟客户端与服务端的通信，为以后接入服务端做预留\r\n    public send(ac: number, data?: any) {\r\n        let key = msgac.ac2KeyObj[ac];\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n\r\n        // myLog.i(key, data);\r\n\r\n        if (ac > msgac.playerMsgStart && ac < msgac.playerMsgEnd) {\r\n            if (playerModel[key]) {\r\n                playerModel[key](data);\r\n            }\r\n        }\r\n        if (ac > msgac.mapMsgStart && ac < msgac.mapMsgEnd) {\r\n            if (mapModel[key]) {\r\n                mapModel[key](data);\r\n            }\r\n        }\r\n\r\n        myLog.i(key + \"Ret\", data);\r\n        data.notMyLog = true;\r\n\r\n        // // 公共消息处理\r\n        // switch (data.st) {\r\n        //     case -1:\r\n        //         // 缺少道具\r\n        //         eventManager.send(msgac.playerLackItemHint, data);\r\n        //         return;\r\n        // }\r\n\r\n        if (data.st == 1) {\r\n            eventManager.send(ac, data);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const serverMsg = ServerMsg.instance;","import {find, _decorator, Node, Toggle, ToggleContainer, instantiate} from 'cc';\r\nimport { audioManager } from '../../manager/audioManager';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport {UserData} from \"db://assets/scripts/game/model/UserData\";\r\nimport * as cc from \"cc\";\r\nimport {designManager} from \"db://assets/scripts/game/manager/designManager\";\r\nimport {localizeManager} from \"db://assets/scripts/localization\";\r\nimport {constants} from \"db://assets/scripts/game/data/constants\";\r\nimport {resManager} from \"db://assets/scripts/game/manager/resManager\";\r\nimport {eventManager} from \"db://assets/scripts/game/manager/eventManager\";\r\nimport {msgac} from \"db://assets/scripts/game/data/msgac\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SettingLayer')\r\nexport class SettingLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node }) musicToggle: Node = null;\r\n    @property({ type: Node }) effectToggle: Node = null;\r\n    @property({ type: Node }) toggleContainer: Node = null;\r\n\r\n    public textMusic : Node = null;\r\n    private textSound : Node = null;\r\n    private textTitle : Node = null;\r\n    private textClose : Node = null;\r\n\r\n    private langItem : Node = null; //语言选择Toggle，默认对象\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.textMusic = find(\"ui/bg/Layout/Label_music\",this.node);\r\n        this.textSound = find(\"ui/bg/Layout/Label_sound\",this.node);\r\n        this.textTitle = find(\"ui/info\",this.node);\r\n        this.textClose = find(\"ui/btns/btnGoOn/Label_close\",this.node);\r\n\r\n        this.langItem = this.toggleContainer.children[0];\r\n        let langObj = localizeManager.localization.lang;\r\n\r\n        // //初始化字体索引，语言选择的ToggleContainer组件使用\r\n        //\r\n        // let index = 0;\r\n        // for (const key of Object.keys(langObj)) {\r\n        //     index++;\r\n        //     lz.LangIndex[key] = index;\r\n        // }\r\n        //\r\n        // //加载字体文件\r\n        // if (!lz.myFonts){\r\n        //     lz.myFonts = {};\r\n        //     for (const key in lz.LangIndex) {\r\n        //         let fontarr = designManager.getTable(constants.tableName.font);\r\n        //         let fontpath:string = null;\r\n        //         for (const i in fontarr){\r\n        //             let row = fontarr[i];\r\n        //             if (row.key == key){\r\n        //                 fontpath = row.font;\r\n        //                 lz.myFonts[key].scale = row.scale;\r\n        //                 break;\r\n        //             }\r\n        //         }\r\n        //\r\n        //         if (fontpath){\r\n        //             resManager.loadAsset(constants.bundles.common,`font/${fontpath}`,cc.Font,null, (err,font)=>{\r\n        //                 if (err) {\r\n        //                     console.log(\"Failed to load font:\", err);\r\n        //                     lz.myFonts[key] = cc.Label.prototype.font;\r\n        //                     return;\r\n        //                 }\r\n        //                 lz.myFonts[key].font = font;\r\n        //             })\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        //初始化ToggleContainer\r\n        for (const key in localizeManager.langIndex) {\r\n            if (key == this.langItem.name){\r\n                this.langItem.getChildByName(\"text\").localizeFormat(key);\r\n                continue;\r\n            }\r\n            let node:Node = instantiate(this.langItem);\r\n            node.parent = this.toggleContainer;\r\n            node.setPosition(this.langItem.position.x, this.langItem.position.y+localizeManager.langIndex[key]*-60);\r\n            node.active = true;\r\n            node.name = key;\r\n            let texnode = node.getChildByName(\"text\");\r\n            texnode.getComponent(cc.Label).string = langObj[key];\r\n            texnode.localizeFormat(key);\r\n        }\r\n\r\n        this.textMusic.localize(\"music\",constants.layers.SettingLayer)\r\n        this.textSound.localize(\"sound\",constants.layers.SettingLayer)\r\n        this.textTitle.localize(\"title\",constants.layers.SettingLayer)\r\n        this.textClose.localize(\"close\",\"common\")\r\n    }\r\n\r\n   \r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        let isMusic = audioManager.getMusiceVolume()\r\n        let isEffect = audioManager.getEffectVolume()\r\n        let language = UserData.getInstance().$localization\r\n\r\n        this.musicToggle.getComponent(Toggle).isChecked = (isMusic > 0);\r\n        this.effectToggle.getComponent(Toggle).isChecked = (isEffect > 0);\r\n        let lToggle = this.toggleContainer.getComponent(ToggleContainer).toggleItems[localizeManager.langIndex[language]-1];\r\n        lToggle.isChecked = true;\r\n    }\r\n\r\n    onMusicCheck() {\r\n        console.log(\"onMusicCheck\", this.musicToggle.getComponent(Toggle).isChecked)\r\n        // let isMusic = audioManager.getMusiceVolume()\r\n        // if (isMusic <= 0) {\r\n        //     isMusic = 1\r\n        // } else {\r\n        //     isMusic = 0\r\n        // }\r\n        audioManager.setMusicVolume(this.musicToggle.getComponent(Toggle).isChecked ? 1 : 0)\r\n        // this.musicToggle.getComponent(Toggle).isChecked = isMusic > 0\r\n    }\r\n\r\n    onSoundCheck() {\r\n        console.log(\"onEffectCheck\", this.effectToggle.getComponent(Toggle).isChecked)\r\n        // let isEffect = audioManager.getEffectVolume()\r\n        // if (isEffect <= 0) {\r\n        //     isEffect = 1\r\n        // }else {\r\n        //     isEffect = 0\r\n        // }\r\n        audioManager.setEffectVolume(this.effectToggle.getComponent(Toggle).isChecked ? 1 : 0)\r\n    }\r\n\r\n    onSingleToggleCheck(toggle: Toggle, index: number) {\r\n        let toggleItems = this.toggleContainer.getComponent(ToggleContainer).toggleItems;\r\n        index = toggleItems.indexOf(toggle);\r\n        localizeManager.set_language(index)\r\n        eventManager.send(msgac.refreshLocalization)\r\n\r\n        this.textMusic.localize(\"music\",constants.layers.SettingLayer)\r\n        this.textSound.localize(\"sound\",constants.layers.SettingLayer)\r\n        this.textTitle.localize(\"title\",constants.layers.SettingLayer)\r\n        this.textClose.localize(\"close\",\"common\")\r\n\r\n        console.log(`toggleContainer选择索引:${index},是否选中：${toggle.isChecked}`);\r\n        // UserData.getInstance().saveData();\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer()\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","import { find, Node, tween, UITransform, v3, Vec3, view, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport CronCtr from '../../../tyqSDK/network/CronCtr';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { tyqSDKConfig } from '../../../tyqSDK/tyqSDKConfig';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { localizeManager } from '../../../localization';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SettlementLayer')\r\nexport class SettlementLayer extends BaseLayer {\r\n\r\n    winAniCtrl: AnimationCtrl;\r\n    winMapNameNode: Node;\r\n    failAniCtrl: AnimationCtrl;\r\n    failMapNameNode: Node;\r\n\r\n    winTitleNode: Node;\r\n    timeNode: Node;\r\n    bestTimeNode: Node;\r\n\r\n    monsterNode: Node;\r\n    lineNode: Node;\r\n\r\n    itemLayerBg: Node;\r\n    itemLayerNode: Node;\r\n\r\n    btnDouble: Node;\r\n    btnDoublePos: Vec3;\r\n    btnSure: Node;\r\n    btnSurePos: Vec3;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.winAniCtrl = this.getNodeByPath(\"bg2/win\").addComponent(AnimationCtrl);\r\n        this.winMapNameNode = this.getNodeByPath(\"bg2/win/mapName\");\r\n        this.failAniCtrl = this.getNodeByPath(\"bg2/fail\").addComponent(AnimationCtrl);\r\n        this.failMapNameNode = this.getNodeByPath(\"bg2/fail/mapName\");\r\n\r\n        this.winTitleNode = this.getNodeByPath(\"ui/winTitle\");\r\n        this.timeNode = this.getNodeByPath(\"ui/time\");\r\n        this.bestTimeNode = this.getNodeByPath(\"ui/bestTime\");\r\n\r\n        this.monsterNode = this.getNodeByPath(\"ui/monster\");\r\n        this.lineNode = this.getNodeByPath(\"ui/line\");\r\n        this.itemLayerBg = this.getNodeByPath(\"ui/itemLayer/bg\");\r\n        this.itemLayerNode = this.getNodeByPath(\"ui/itemLayer/itemLayer\");\r\n\r\n        this.btnDouble = this.getNodeByPath(\"ui/btns/btnDouble\");\r\n        this.btnDoublePos = this.btnDouble.position.clone();\r\n        this.btnSure = this.getNodeByPath(\"ui/btns/btnSure\");\r\n        this.btnSurePos = this.btnSure.position.clone();\r\n\r\n        this.isShowBannerAd = true;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        UserData.getInstance().mapData = null;\r\n        if (this.layerData.isWin) {\r\n            audioManager.playEffect(constants.audioNames.win);\r\n            // 好友通关次数\r\n            UserData.getInstance().$friendPassCnt++;\r\n            CronCtr.getInstance().saveDataToCloud(\"friendPassCnt\", UserData.getInstance().$friendPassCnt);\r\n        }\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        find(\"info/name\", this.bestTimeNode).localize(\"best\", constants.layers.SettlementLayer);\r\n        this.lineNode.localizeImg();\r\n        this.btnSure.getChildByName(\"icon\").localizeImg();\r\n        this.btnDouble.getChildByName(\"icon\").localizeImg();\r\n        this.winTitleNode.getChildByName(\"text\").localizeImg();\r\n\r\n        if (this.layerData.isWin) {\r\n            playerModel.addDayTaskNum(10);\r\n        }\r\n\r\n        this.winAniCtrl.node.active = false;\r\n        this.winMapNameNode.active = false;\r\n        this.failAniCtrl.node.active = false;\r\n        this.failMapNameNode.active = false;\r\n\r\n        this.winTitleNode.active = false;\r\n        this.timeNode.active = false;\r\n        this.bestTimeNode.active = false;\r\n\r\n        this.monsterNode.active = false;\r\n        this.lineNode.active = false;\r\n        this.itemLayerBg.active = false;\r\n\r\n        this.itemLayerNode.active = false;\r\n\r\n        this.btnDouble.active = false;\r\n        this.btnSure.active = false;\r\n        utilTools.waterfall([\r\n            (result: any, cb: Function) => {\r\n                if (this.layerData.isWin) {\r\n                    this.winAniCtrl.node.active = true;\r\n                    this.winAniCtrl.node.localizeAnim();\r\n                    this.winAniCtrl.playAnimation(\"a\", false, () => {\r\n                        this.winAniCtrl.playAnimation(\"b\", true);\r\n                        cb();\r\n                    });\r\n                    return;\r\n                }\r\n                this.failAniCtrl.node.active = true;\r\n                this.failAniCtrl.node.localizeAnim();\r\n                this.failAniCtrl.playAnimation(\"a\", false, () => {\r\n                    this.failAniCtrl.playAnimation(\"b\", true);\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                let row = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n                if (this.layerData.isWin) {\r\n                    this.winMapNameNode.active = true;\r\n                    // this.setString(find(\"text\", this.winMapNameNode), row.name);\r\n                    find(\"text\", this.winMapNameNode).localizeName(row.id, constants.catName.mapSystem);\r\n                    cocosUtil.tweenScaleIn2(this.winMapNameNode, 0.2, () => {\r\n                        cb();\r\n                    });\r\n                    return;\r\n                }\r\n                this.failMapNameNode.active = true;\r\n                // this.setString(find(\"text\", this.failMapNameNode), row.name);\r\n                find(\"text\", this.failMapNameNode).localizeName(row.id, constants.catName.mapSystem);\r\n                cocosUtil.tweenScaleIn2(this.failMapNameNode, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                if (this.layerData.isWin) {\r\n                    this.winTitleNode.active = true;\r\n                    cocosUtil.tweenScaleIn2(this.winTitleNode, 0.2, () => {\r\n                        cb();\r\n                    });\r\n                    return;\r\n                }\r\n                this.timeNode.active = true;\r\n                this.setString(find(\"time\", this.timeNode), utilTools.getTimeStr(this.layerData.time * 1000, true));\r\n                let newNode = find(\"new\", this.timeNode);\r\n                newNode.localize(\"new\", constants.layers.SettlementLayer);\r\n                if (this.layerData.isBest) {\r\n                    newNode.active = true;\r\n                    cocosUtil.tweenBlink(newNode);\r\n                } else {\r\n                    newNode.active = false;\r\n                }\r\n                cocosUtil.tweenScaleIn2(this.timeNode, 0.2, () => {\r\n                    this.bestTimeNode.active = true;\r\n                    cocosUtil.tweenScaleIn2(this.bestTimeNode, 0.2, () => {\r\n                        this.setString(find(\"info/time\", this.bestTimeNode), utilTools.getTimeStr(this.layerData.bestTime * 1000, true));\r\n                        cb();\r\n                    });\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.monsterNode.active = true;\r\n                this.setString(find(\"info/num\", this.monsterNode), mapModel.killMonsterNum);\r\n                cocosUtil.tweenScaleIn2(this.monsterNode, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.lineNode.active = true;\r\n                cocosUtil.tweenFadeIn(this.lineNode, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.itemLayerBg.active = true;\r\n                cocosUtil.tweenFadeIn(this.itemLayerBg, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.itemLayerNode.active = true;\r\n                this.setItemLayer(this.itemLayerNode, this.layerData.award, this.refreshPropItem.bind(this));\r\n                let num = this.itemLayerNode.children.length;\r\n                utilTools.forArr(this.itemLayerNode.children, (itemUI: Node, index: number) => {\r\n                    itemUI.scale = v3(0, 0, 0);\r\n                    this.scheduleOnce(() => {\r\n                        tween(itemUI)\r\n                            .set({ scale: v3(2, 2, 1) })\r\n                            .to(0.2, { scale: v3(1, 1, 1) })\r\n                            .to(0.05, { scale: v3(1.1, 1.1, 1) })\r\n                            .to(0.05, { scale: v3(1, 1) })\r\n                            .call(() => {\r\n                                if (index >= num - 1) {\r\n                                    cb();\r\n                                }\r\n                            })\r\n                            .start();\r\n                    }, index * 0.2);\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.btnDouble.active = true;\r\n                let pos = this.btnDoublePos.clone();\r\n                pos.x += (view.getVisibleSize().width * 0.5 + this.btnDouble.getComponent(UITransform).width);\r\n                this.btnDouble.position = pos;\r\n\r\n                this.btnSure.active = true;\r\n                pos = this.btnSurePos.clone();\r\n                pos.x -= (view.getVisibleSize().width * 0.5 + this.btnSure.getComponent(UITransform).width);\r\n                this.btnSure.position = pos;\r\n\r\n                tween(this.btnDouble).to(0.5, { position: this.btnDoublePos }).start();\r\n                tween(this.btnSure).to(0.5, { position: this.btnSurePos }).start();\r\n            },\r\n        ]);\r\n    }\r\n\r\n    refreshPropItem(itemUI: Node, data: PropItem) {\r\n        let row = designManager.getRowById(constants.tableName.prop, data.Id);\r\n        this.setSpriteFrame2(find(\"bg\", itemUI), \"prop/propbg\" + row.quality);\r\n        this.setSpriteFrame2(find(\"icon\", itemUI), \"prop/\" + row.icon);\r\n\r\n        let numNode = find(\"num\", itemUI);\r\n        if (row.type == 8 || row.type == 11) {\r\n            numNode.active = false;\r\n        } else {\r\n            numNode.active = true;\r\n            this.setNumString(find(\"num/num\", itemUI), data.Num);\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n        let obj: any = {};\r\n        obj.mapId = mapModel.mapId;\r\n        obj.floor = mapModel.floor;\r\n        obj.isWin = this.layerData.isWin;\r\n        serverMsg.send(msgac.mapLeave, obj);\r\n        if (tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > 0 && tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > UserData.getInstance().openLevel) {\r\n            if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n                this.openLayer(constants.layers.MoreGameLayer)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onClickBtnSure(node: Node) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnDouble() {\r\n        sdkManager.openAd(\"结算奖励双倍\", (st: number) => {\r\n            if (st == 1) {\r\n                UserData.getInstance().getRewardProp(this.layerData.award);\r\n                this.closeLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { director, find, Node, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { GNetCmd, GNetConst } from '../../../tyqSDK/network/conf';\r\nimport ServerCtr from '../../../tyqSDK/network/ServerCtr';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { localStorageManager } from '../../manager/localStorageManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShareLayer')\r\nexport class ShareLayer extends BaseLayer {\r\n\r\n    tabLayer: Node;\r\n    tabArr = [\r\n        { id: 1, name: \"邀请好友\" },\r\n        { id: 2, name: \"通关奖励\" },\r\n        { id: 3, name: \"视频好友\" },\r\n    ];\r\n    choseTabIndex = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        let tabLayer = this.getNodeByPath(\"ui/tabLayer\");\r\n        this.tabLayer = tabLayer;\r\n        let tabItem = tabLayer.children[0];\r\n        cocosUtil.instantiate(tabItem).parent = tabLayer;\r\n        cocosUtil.instantiate(tabItem).parent = tabLayer;\r\n        let chs = tabLayer.children;\r\n        chs.forEach((itemUI, index) => {\r\n            let info = this.tabArr[index];\r\n            this.setString(find(\"text\", itemUI), info.name);\r\n            // @ts-ignore\r\n            itemUI.index = index;\r\n        });\r\n        this.refreshTabLayer();\r\n\r\n        ServerCtr.GetInstance().reqGetFriendVal();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshTopLayer();\r\n        this.refreshTabLayer();\r\n        this.refreshListLayer();\r\n    }\r\n\r\n    onMessageEvent(value) {\r\n        if (value.status != GNetConst.ResSuccess) {\r\n            return;\r\n        }\r\n        switch (value.cmd) {\r\n            case GNetCmd.GetFriendVal:\r\n                this.initUI();\r\n                break;\r\n        }\r\n    }\r\n\r\n    refreshTopLayer() {\r\n        let remainNum = designManager.config.shareDayNum - playerModel.shareObj.dayNum;\r\n        if (remainNum < 0) {\r\n            remainNum = 0;\r\n        }\r\n        this.setString(this.getNodeByPath(\"ui/top/hintLayer/day/num\"), remainNum);\r\n        this.setString(this.getNodeByPath(\"ui/top/shareAwardItem/num/val\"), \"x\" + designManager.config.shareDayDiamond);\r\n    }\r\n\r\n    refreshListLayer() {\r\n        let arr = designManager.getRowsByType(constants.tableName.share, this.choseTabIndex + 1);\r\n        this.scrollViewSetData(this.getNodeByPath(\"ui/listbg/list\"), arr, this.refreshShareItem.bind(this));\r\n    }\r\n\r\n    refreshShareItem(itemUI: any, row: any) {\r\n        find(\"awardLayer\", itemUI).children.forEach((awardItem: any, index: number) => {\r\n            let propId = row.award[index][0];\r\n            let propNum = row.award[index][1];\r\n            this.setPropItem(propId, find(\"icon\", awardItem), propNum, find(\"bg\", awardItem), find(\"num/val\", awardItem));\r\n            awardItem.award = row.award[index];\r\n        });\r\n        let infoLayer1 = find(\"infoLayer1\", itemUI);\r\n        let infoLayer2 = find(\"infoLayer2\", itemUI);\r\n        let infoLayer3 = find(\"infoLayer3\", itemUI);\r\n        infoLayer1.active = false;\r\n        infoLayer2.active = false;\r\n        infoLayer3.active = false;\r\n        let nowNum = 0;\r\n        switch (this.choseTabIndex + 1) {\r\n            case 1:\r\n                nowNum = playerModel.shareObj.friendNum;\r\n                infoLayer1.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer1), row.num + localText.wei);\r\n                break;\r\n            case 2:\r\n                nowNum = playerModel.shareObj.friendPassNum;\r\n                infoLayer2.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer2), row.num + localText.ci);\r\n                break;\r\n            case 3:\r\n                nowNum = playerModel.shareObj.friendAdNum;\r\n                infoLayer3.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer3), row.num + localText.ge);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        let btnGet = find(\"btnGet\", itemUI);\r\n        let doneNode = find(\"done\", itemUI);\r\n        btnGet.active = false;\r\n        doneNode.active = false;\r\n        if (playerModel.shareObj.idAwardObj[row.id]) {\r\n            doneNode.active = true;\r\n        } else {\r\n            btnGet.active = true;\r\n            // @ts-ignore\r\n            btnGet.row = row;\r\n            if (nowNum >= row.num) {\r\n                // 可领取奖励\r\n                cocosUtil.setRenderableColor(btnGet, constants.colors.white, true);\r\n            } else {\r\n                // 还未满足条件\r\n                cocosUtil.setRenderableColor(btnGet, constants.colors.yin, true);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    refreshTabLayer() {\r\n        let chs = this.tabLayer.children;\r\n        chs.forEach((itemUI, index) => {\r\n            let normalNode = find(\"normal\", itemUI);\r\n            let choseNode = find(\"chose\", itemUI);\r\n            let textNode = find(\"text\", itemUI);\r\n            normalNode.active = false;\r\n            choseNode.active = false;\r\n            if (this.choseTabIndex == index) {\r\n                choseNode.active = true;\r\n                itemUI.getComponent(UITransform).width = choseNode.getComponent(UITransform).width;\r\n                textNode.scale = v3(1.3, 1.3, 1);\r\n            } else {\r\n                normalNode.active = true;\r\n                itemUI.getComponent(UITransform).width = normalNode.getComponent(UITransform).width;\r\n                textNode.scale = v3(1, 1, 1);\r\n            }\r\n        });\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickTabItem(node) {\r\n        this.choseTabIndex = node.index;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnShare() {\r\n        let uid = localStorageManager.uid;\r\n        if (!uid) {\r\n            uid = \"\";\r\n        }\r\n        let urlParmas = \"uid=\" + uid;\r\n        myLog.i(\"开始分享：\" + urlParmas);\r\n        tyqSDK.share(urlParmas, () => {\r\n            // 分享成功\r\n            myLog.i(\"分享结果回调\");\r\n            let remain = designManager.config.shareDayNum - playerModel.shareObj.dayNum;\r\n            if (remain > 0) {\r\n                let propItem = UserData.getInstance().addPropNum(constants.propIds.diamond, designManager.config.shareDayDiamond);\r\n                playerModel.shareObj.dayNum++;\r\n                this.openAwardGetLayer([propItem]);\r\n                this.refreshTopLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnGet(node: any) {\r\n        let row = node.row;\r\n        if (playerModel.shareObj.idAwardObj[row.id]) {\r\n            this.createNotice(localText.hasGet);\r\n            return;\r\n        }\r\n        let nowNum = 0;\r\n        switch (this.choseTabIndex + 1) {\r\n            case 1:\r\n                nowNum = playerModel.shareObj.friendNum;\r\n                break;\r\n            case 2:\r\n                nowNum = playerModel.shareObj.friendPassNum;\r\n                break;\r\n            case 3:\r\n                nowNum = playerModel.shareObj.friendAdNum;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (nowNum < row.num) {\r\n            this.createNotice(localText.notGet.format(nowNum));\r\n            return;\r\n        }\r\n\r\n        playerModel.shareObj.idAwardObj[row.id] = 1;\r\n        let arr = UserData.getInstance().addPropArrByDesign(row.award);\r\n        this.openAwardGetLayer(arr);\r\n        this.initUI();\r\n    }\r\n\r\n}\r\n\r\n","import { Color, Component, Material, sp, UIRenderer, v4, Vec4, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { resManager } from '../../manager/resManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShineColor')\r\nexport class ShineColor extends Component {\r\n    duration: number = 0.3;\r\n    _median: number = 0;\r\n    _time: number = 0;\r\n\r\n    isSpine: boolean = false;\r\n\r\n    uiRenderer: UIRenderer;\r\n    orignMaterial: Material;\r\n    vColor: Vec4;\r\n\r\n    onLoad() {\r\n        this.uiRenderer = this.node.getComponent(UIRenderer);\r\n        this.orignMaterial = this.uiRenderer.customMaterial;\r\n\r\n        if (this.node.getComponent(sp.Skeleton)) {\r\n            this.isSpine = true;\r\n        }\r\n    }\r\n\r\n    setMaterialProperty(val: number) {\r\n        if (this.isSpine) {\r\n            // @ts-ignore \r\n            let cache: any = this.uiRenderer._materialCache;\r\n            for (let i in cache) {\r\n                let material = cache[i];\r\n                material.setProperty(\"u_rate\", val);\r\n                if (this.vColor) {\r\n                    material.setProperty(\"u_color\", this.vColor);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        let material = this.uiRenderer.getMaterialInstance(0);\r\n        let uRate = material.passes[0].getHandle(\"u_rate\");\r\n        material.passes[0].setUniform(uRate, val);\r\n        if (this.vColor) {\r\n            let vColor = v4(1, 0, 0, 1);\r\n            let uColor = material.passes[0].getHandle(\"u_color\");\r\n            material.passes[0].setUniform(uColor, this.vColor);\r\n        }\r\n        this.uiRenderer.setMaterialInstance(material, 0);\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this._time > 0) {\r\n            this._time -= dt;\r\n            this._time = this._time < 0 ? 0 : this._time;\r\n            let rate = Math.abs(this._time - this._median) * 2 / this.duration;\r\n            this.setMaterialProperty(rate);\r\n        } else {\r\n            this.removeShineColorMaterial();\r\n        }\r\n    }\r\n\r\n    removeShineColorMaterial() {\r\n        try {\r\n            this.uiRenderer.customMaterial = this.orignMaterial;\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        \r\n        if (this.isSpine) {\r\n            // spine动画，需要重新激活，否则替换材质后会不显示\r\n            this.uiRenderer.enabled = false;\r\n            this.uiRenderer.enabled = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 闪颜色\r\n     * @param materialPath 材质路径 \r\n     * @param color 闪的颜色\r\n     * @param duration 闪的时间\r\n     */\r\n    startShine(materialPath: string, color?: Color, duration: number = 0.1) {\r\n        this.duration = duration;\r\n        this._median = this.duration / 2;\r\n\r\n        if (color) {\r\n            this.vColor = v4(color.r / 255, color.g / 255, color.b / 255, color.a / 255);\r\n        } else {\r\n            // 默认闪白\r\n            this.vColor = v4(1, 1, 1, 1);\r\n        }\r\n        resManager.loadAsset(constants.bundles.common, materialPath, Material, null, (err, material) => {\r\n            this._time = this.duration;\r\n            this.uiRenderer.customMaterial = material;\r\n            this.setMaterialProperty(1);\r\n        });\r\n    }\r\n}\r\n","import { Button, instantiate, Label, Node, PageView, sp, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport {localizeManager} from \"db://assets/scripts/localization\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShopLayer')\r\nexport class ShopLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具节点\" }) mangItem: Node = null;\r\n    @property({ type: Node, tooltip: \"宣传页\" }) pageView: Node = null;\r\n\r\n    @property({ type: sp.Skeleton, tooltip: \"\" }) mangheSpine: sp.Skeleton = null;\r\n\r\n    @property({ type: Node }) btnManghe: Node = null;\r\n\r\n    @property({ type: Node }) uiNode: Node = null;\r\n    @property({ type: Node }) btnSure: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n    @property({ type: Node }) btnVideo: Node = null;\r\n    @property({ type: Node }) btnSingle: Node = null;\r\n\r\n\r\n    @property({ type: Label }) num1: Label = null;\r\n    @property({ type: Label }) num2: Label = null;\r\n\r\n    @property({ type: Node }) layer1: Node = null;\r\n    @property({ type: Node }) layer2: Node = null;\r\n\r\n\r\n    _mangheType = 0\r\n    _curState = 0\r\n\r\n    _isDrawIng = false\r\n\r\n    gaojiProp = []\r\n    _rewardArr = []\r\n\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        // for (let index = 0; index < 12; index++) {\r\n        //     let item = instantiate(this.mangItem)\r\n        //     this.listLayer.addChild(item)\r\n        // }\r\n\r\n\r\n        this.mangItem.active = false\r\n        this.num1.string = (designManager.config.extra2 - UserData.getInstance().$drawNormalNum) + \"\"\r\n        this.num2.string = (designManager.config.extra1 - UserData.getInstance().$drawGradeNum) + \"\"\r\n\r\n        RedPointLogicMgr.ins().setRPointView(this.btnManghe, null, true)\r\n        this.setSpriteFrame2(this.btnManghe, `shopLayer/mangheNormal_@@${UserData.getInstance().$localization}`, null, constants.bundles.wwqVec)\r\n        this.pageView.getComponent(PageView).scrollToPage(0, 0)\r\n        this._mangheType = 0\r\n        this.mangheSpine.animation = \"purple1\"\r\n        this.mangheSpine.setSkin(UserData.getInstance().$localization);\r\n        this.mangheSpine.timeScale = 1\r\n        this.btnSure.active = false\r\n        let self = this\r\n        let callfun = function () {\r\n            self.animalFinish()\r\n        }\r\n        this.mangheSpine.setCompleteListener(callfun)\r\n\r\n        let arr = [10082, 10113, 10010]\r\n        let arr1 = [10066, 10155, 10118]\r\n\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let propItem = instantiate(self.propItem)\r\n            this.layer1.addChild(propItem)\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(arr[i], 1, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).setScale(100)\r\n        }\r\n\r\n        for (let i = 0; i < arr1.length; i++) {\r\n            let propItem = instantiate(self.propItem)\r\n            this.layer2.addChild(propItem)\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(arr1[i], 1, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).setScale(100)\r\n        }\r\n\r\n        this.onClickChangeManghe()\r\n\r\n        this.node.getChildByPath(\"shopbg/Node/btn2/Label-001\").localize(\"btnOnce\",constants.layers.ShopLayer);\r\n        this.node.getChildByPath(\"shopbg/Node/btn1/videoLabel\").localize(\"btnTen\",constants.layers.ShopLayer);\r\n        // this.node.getChildByPath(\"shopbg/Node/PageView/view/content/page1\").localizeImg();\r\n        this.node.getChildByPath(\"shopbg/btnSure/Label\").localize(\"btnClaim\",constants.layers.ShopLayer);\r\n\r\n    }\r\n\r\n    start() {\r\n        console.log(\"layerData = \", this.layerData)\r\n        this.initVideoBtn()\r\n\r\n    }\r\n\r\n    initVideoBtn() {\r\n        if (this.layerData.taskGo && UserData.getInstance().$freeDraw < designManager.config.taskDoge) {\r\n            this.btnVideo.getChildByName(\"ui_video\").active = false\r\n            this.btnVideo.getChildByName(\"Layout\").active = false\r\n            this.btnVideo.getChildByName(\"videoLabel\").position = v3(-40, 0, 0)\r\n            return\r\n        }\r\n\r\n        if (this._mangheType == 1) {\r\n            this.btnVideo.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.tenCard + \"\"\r\n            this.btnSingle.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.onceCard + \"\"\r\n            this.setSpriteFrame2(this.btnSingle.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_diamond2\")\r\n            this.setSpriteFrame2(this.btnVideo.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_diamond2\")\r\n\r\n            if (UserData.getInstance().baoshi >= designManager.config.tenCard) {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(-40, -10, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = false\r\n                this.btnVideo.getChildByName(\"Layout\").active = true\r\n            } else {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(-38, 0, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = true\r\n                this.btnVideo.getChildByName(\"Layout\").active = false\r\n            }\r\n        } else {\r\n            this.btnVideo.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.tenCard2 + \"\"\r\n            this.btnSingle.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.onceCard2 + \"\"\r\n            this.setSpriteFrame2(this.btnSingle.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_coin1\")\r\n            this.setSpriteFrame2(this.btnVideo.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_coin1\")\r\n\r\n            if (UserData.getInstance().coin >= designManager.config.tenCard2) {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(-40, -10, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = false\r\n                this.btnVideo.getChildByName(\"Layout\").active = true\r\n            } else {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(-38, 0, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = true\r\n                this.btnVideo.getChildByName(\"Layout\").active = false\r\n            }\r\n        }\r\n    }\r\n\r\n    onOnceCard() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.mangItem.active = false\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        let isEnougth = false\r\n        if (this._mangheType == 1) {\r\n            isEnougth = UserData.getInstance().checkAndUseBaoshi(designManager.config.onceCard, true)\r\n        } else {\r\n            isEnougth = UserData.getInstance().cheackAndUseCoin(designManager.config.onceCard2, true)\r\n        }\r\n\r\n        if (isEnougth) {\r\n            let obj: any = {};\r\n            obj.hide = true;\r\n            eventManager.send(msgac.homeHideMenu, obj);\r\n            this.showChouAnimale()\r\n            this.cancelButtonTouch(false)\r\n            this._isDrawIng = true\r\n            this.gaojiProp = []\r\n            this._rewardArr = []\r\n            let item = UserData.getInstance().getDrawItem(this._mangheType)\r\n\r\n            let propData = designManager.getRowById(constants.tableName.prop, item.award[0])\r\n            if (propData.quality >= 4) {\r\n                this.gaojiProp.push(propData)\r\n            }\r\n            this._rewardArr.push({ Id: item.award[0], Num: 1 })\r\n            this.initVideoBtn()\r\n            // if (item) {\r\n            //     arr.push(item)\r\n            //     this.openLayer(constants.layers.RewardLayer, { propArr: arr })\r\n            // }\r\n        } else {\r\n            this.toast(this._mangheType == 1 ? localizeManager._localize(null,\"noDiamond\",constants.catName.common) : localizeManager._localize(null,\"noGold\",constants.catName.common))\r\n        }\r\n    }\r\n\r\n    onTenCard() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        this.mangItem.active = false\r\n\r\n        let self = this\r\n        this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).width = 540\r\n        this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).height = 200\r\n        let getReward = function () {\r\n            self.showChouAnimale()\r\n            let obj: any = {};\r\n            obj.hide = true;\r\n\r\n            self.cancelButtonTouch(false)\r\n            self._isDrawIng = true\r\n            self.gaojiProp = []\r\n            self._rewardArr = []\r\n            eventManager.send(msgac.homeHideMenu, obj);\r\n            for (let i = 0; i < 10; i++) {\r\n                let item = UserData.getInstance().getDrawItem(self._mangheType)\r\n                if (item) {\r\n                    // let propItem = instantiate(self.propItem)\r\n                    // self.mangItem.getChildByName(\"Layout\").addChild(propItem)\r\n                    // propItem.getComponent(PropItemPrefab).setView(item.award[0], item.award[2], PropItemPrefab.Type_UnTouch)\r\n                    // propItem.getComponent(PropItemPrefab).setScale(100)\r\n\r\n                    let propData = designManager.getRowById(constants.tableName.prop, item.award[0])\r\n                    if (propData.quality >= 4) {\r\n                        self.gaojiProp.push(propData)\r\n                    }\r\n                    self._rewardArr.push({ Id: item.award[0], Num: 1 })\r\n                }\r\n            }\r\n            self.initVideoBtn()\r\n            //    self.openLayer(constants.layers.RewardLayer, { propArr: arr })\r\n        }\r\n        let isEnougth = false\r\n\r\n        if (this.layerData.taskGo && UserData.getInstance().$freeDraw < designManager.config.taskDoge) {\r\n            isEnougth = true\r\n            UserData.getInstance().$freeDraw  ++\r\n        }else{\r\n            if (this._mangheType == 1) {\r\n                isEnougth = UserData.getInstance().checkAndUseBaoshi(designManager.config.tenCard, true)\r\n            } else {\r\n                isEnougth = UserData.getInstance().cheackAndUseCoin(designManager.config.tenCard2, true)\r\n            }\r\n        }\r\n        if (isEnougth) {\r\n            getReward && getReward()\r\n\r\n        } else {\r\n            sdkManager.openAd(this._mangheType == 1 ? \"盲盒高级抽奖\" : \"盲盒普通抽奖\", (state) => {\r\n                if (state == 1) {\r\n                    getReward && getReward()\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onClickChangeManghe() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (this.pageView.getComponent(PageView).getCurrentPageIndex() == 0) {\r\n            this.pageView.getComponent(PageView).scrollToPage(1, 0.2)\r\n        } else {\r\n            this.pageView.getComponent(PageView).scrollToPage(0, 0.2)\r\n        }\r\n        this.pageView.getChildByPath(\"view/content/page1\").localizeImg();\r\n        this.pageView.getChildByPath(\"view/content/page2\").localizeImg();\r\n        this.pageView.getChildByPath(\"view/content/page1/chou1\").localizeImg();\r\n        this.pageView.getChildByPath(\"view/content/page2/chou2\").localizeImg();\r\n        this.updatebtnState()\r\n    }\r\n\r\n    updatebtnState() {\r\n        if (this._isDrawIng) {\r\n            return\r\n        }\r\n        if (this.pageView.getComponent(PageView).getCurrentPageIndex() == 1) {\r\n            this._mangheType = 1\r\n            this.setSpriteFrame2(this.btnManghe, `shopLayer/manggaoji_@@${UserData.getInstance().$localization}`, null, constants.bundles.wwqVec)\r\n            this.mangheSpine.setAnimation(0, \"qiehuan1\", false)\r\n\r\n            this.mangheSpine.timeScale = 1\r\n        } else {\r\n            this.mangheSpine.setAnimation(0, \"qiehuan2\", false)\r\n            this.mangheSpine.timeScale = 1\r\n            this._mangheType = 0\r\n            this.setSpriteFrame2(this.btnManghe, `shopLayer/mangheNormal_@@${UserData.getInstance().$localization}`, null, constants.bundles.wwqVec)\r\n        }\r\n        this.initVideoBtn()\r\n    }\r\n\r\n    showChouAnimale() {\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.setAnimation(0, aniName + \"2\", false)\r\n\r\n        // this.mangheSpine.animation = aniName + \"2\"\r\n        this.mangheSpine.timeScale = 1\r\n        this._curState = 2\r\n    }\r\n\r\n    animalFinish() {\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.loop = false\r\n\r\n        if (this._curState == 2) {\r\n            this.uiNode.active = false\r\n            this.mangheSpine.timeScale = 1\r\n            this.mangheSpine.setAnimation(0, \"bai3\", false)\r\n            this._curState = 3\r\n        } else if (this._curState == 3) {\r\n            this.checkShowGaoji()\r\n            // this.mangheSpine.animation = aniName + \"4\"\r\n            // this.btnSure.active = true\r\n            this.mangItem.active = true\r\n            // this._curState = 4\r\n        } else if (this._curState == 4) {\r\n            // this.mangheSpine.animation = this.mangheSpine.animation\r\n        }\r\n    }\r\n\r\n    checkShowGaoji() {\r\n\r\n        if (this.gaojiProp.length > 0) {\r\n            let propData = this.gaojiProp.shift()\r\n            if (propData) {\r\n                if (propData.quality >= 4) {\r\n                    this.mangheSpine.setAnimation(0, propData.quality == 4 ? \"purple4\" : \"yellow4\", true)\r\n                    this.mangheSpine.setSkin(UserData.getInstance().$localization);\r\n                    this.mangheSpine.timeScale = 1\r\n                    this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n                    let propItem = instantiate(this.propItem)\r\n                    this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).width = 300\r\n                    this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).height = 300\r\n                    this.mangItem.getChildByName(\"Layout\").addChild(propItem)\r\n                    propItem.getComponent(PropItemPrefab).setView(propData.id, 1, PropItemPrefab.Type_BigIcon)\r\n                    propItem.getComponent(PropItemPrefab).setScale(300)\r\n                    this.btnSure.active = true\r\n                    this._curState = 4\r\n                    return\r\n                }\r\n            }\r\n        }\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.setAnimation(0, aniName + \"1\", false)\r\n\r\n        this.mangheSpine.timeScale = 1\r\n        this.mangItem.active = false\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        UserData.getInstance().getRewardProp(this._rewardArr)\r\n        this.openLayer(constants.layers.RewardLayer, { propArr: this._rewardArr })\r\n\r\n        playerModel.addDayTaskNum(3, this._rewardArr.length);\r\n\r\n        this.drawFinish()\r\n        this._curState = 5\r\n\r\n    }\r\n\r\n    onBtnClickSure() {\r\n\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.checkShowGaoji()\r\n        this.mangItem.active = true\r\n        return\r\n\r\n    }\r\n\r\n    drawFinish() {\r\n        this.num1.string = (designManager.config.extra2 - UserData.getInstance().$drawNormalNum) + \"\"\r\n        this.num2.string = (designManager.config.extra1 - UserData.getInstance().$drawGradeNum) + \"\"\r\n        this.uiNode.active = true\r\n        this.btnSure.active = false\r\n        this.mangItem.active = false\r\n        eventManager.send(msgac.homeHideMenu, { hide: false });\r\n\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this._curState = 0\r\n        this.mangheSpine.setAnimation(0, aniName + \"1\", false)\r\n        this.cancelButtonTouch(true)\r\n        this._isDrawIng = false\r\n    }\r\n\r\n    cancelButtonTouch(state) {\r\n        this.btnSingle.getComponent(Button).interactable = state\r\n        this.btnVideo.getComponent(Button).interactable = state\r\n        this.btnManghe.getComponent(Button).interactable = state\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n\r\n\r\n    closeLayer() {\r\n        super.closeLayer()\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","class SingleInstance {\r\n\r\n    private static instance: any = null;\r\n    protected constructor() { };\r\n    public static getInstance<T>(): T {\r\n        if (this.instance == null) {\r\n            this.instance = new this();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n}\r\n\r\nexport { SingleInstance };\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Skill')\r\nexport class Skill extends Component {\r\n\r\n    info: any;\r\n    id: any;\r\n    row: any;\r\n\r\n    skillUtil: any;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    async init(info: any) {\r\n        this.info = info;\r\n        let id = info.id;\r\n\r\n        this.id = id;\r\n        this.unscheduleAllCallbacks();\r\n\r\n        let row = designManager.getRowById(constants.tableName.skill, id);\r\n        this.row = row;\r\n\r\n        try {\r\n            let skillUtil = cocosUtil.addComponentOnce(this, \"Skill\" + row.type);\r\n            skillUtil.unscheduleAllCallbacks();\r\n            this.skillUtil = skillUtil;\r\n            // @ts-ignore\r\n            skillUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getDuration() {\r\n        let duration = this.row.duration;\r\n        duration = duration * (1 + mapModel.skillSystem.getSkill2DurationAddPercent());\r\n\r\n        return duration;\r\n    }\r\n\r\n    getAtkCd() {\r\n        let cd = this.row.cd;\r\n        cd = cd * (1 - mapModel.skillSystem.getSkill2AtkCdSubPercent());\r\n        return cd;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (this.skillUtil && this.skillUtil.updateLogic) {\r\n            this.skillUtil.updateLogic(dt);\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n        this.unscheduleAllCallbacks();\r\n        if (this.skillUtil) {\r\n            this.skillUtil.unscheduleAllCallbacks();\r\n        }\r\n    }\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 锤子\r\n@ccclass('Skill1')\r\nexport class Skill1 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, null, this);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 轰炸机\r\n@ccclass('Skill10')\r\nexport class Skill10 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n    // 是否轰炸中\r\n    isShoting: boolean;\r\n\r\n    robotBullet: any;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n        this.isShoting = false;\r\n        this.robotBullet = null;\r\n\r\n        let extraObj = {\r\n            endCb: (bulletUtil: any) => {\r\n                if (!cocosUtil.isValid(this.node)) {\r\n                    bulletUtil.bullet.recycleSelf();\r\n                    return;\r\n                }\r\n                this.robotBullet = bulletUtil;\r\n            },\r\n            lv: this.skill.row.lv\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, null, extraObj);\r\n    }\r\n\r\n    forceDestroy() {\r\n        if (cocosUtil.isValid(this.robotBullet)) {\r\n            this.robotBullet.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n    // 开始轰炸\r\n    startShoting() {\r\n        let duration = this.skill.getDuration();\r\n        this.isShoting = true;\r\n        this.robotBullet.startShot(duration);\r\n        this.scheduleOnce(() => {\r\n            this.isShoting = false;\r\n            this.timeCount = 0;\r\n        }, duration);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (!this.robotBullet) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount += dt;\r\n\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        if (this.isShoting) {\r\n            return;\r\n        }\r\n\r\n        this.startShoting();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { Bullet } from '../bullet/Bullet';\r\nimport { Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 炮塔\r\n@ccclass('Skill11')\r\nexport class Skill11 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n\r\n    num: number = 0;\r\n\r\n    towerBulletArr: any[];\r\n\r\n    extraObj:{};\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    creatTower(extraObj?: any){\r\n        if (!extraObj) {\r\n            return;\r\n        }\r\n        // 炮塔攻击力=(拾取金币+skill2技能增加金币)*skill2技能增加金币数\r\n        let atk = extraObj.num+extraObj.addCoin;\r\n        if (extraObj.addCoin>0) {\r\n            atk = atk*extraObj.addCoin;\r\n        }\r\n        let exObj = {\r\n            endCb: (bulletUtil: any) => {\r\n                if (!cocosUtil.isValid(this.node)) {\r\n                    bulletUtil.bullet.recycleSelf();\r\n                    return;\r\n                }\r\n            },\r\n            lv: this.skill.row.lv,\r\n            atk: atk* (1 + mapModel.skillSystem.getSkill2AtkAddPercent()),\r\n            time: this.skill.getDuration(),\r\n            atkCd: this.skill.getAtkCd(),\r\n            invokeClass: this,\r\n        }\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, extraObj.pos, null, exObj);\r\n    }\r\n\r\n    updateLogic(dt: number){\r\n        \r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from '../bullet/Bullet';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 转盘\r\n@ccclass('Skill2')\r\nexport class Skill2 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    isShowing: boolean = false;\r\n    timeCount: number = 0;\r\n\r\n    bulletArr: Bullet[];\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n        this.bulletArr = [];\r\n\r\n        this.isShowing = false;\r\n    }\r\n\r\n    showDisks() {\r\n        let arr = cocosUtil.getCircleDirectionArr(this.skill.row.num, 160);\r\n        utilTools.forArr(arr, (direction: any) => {\r\n            let extraObj = {\r\n                direction: direction,\r\n                endCb: (bullet: Bullet) => {\r\n                    if (!cocosUtil.isValid(this.node)) {\r\n                        bullet.recycleSelf();\r\n                        return;\r\n                    }\r\n                    if (this.bulletArr.indexOf(bullet) == -1) {\r\n                        this.bulletArr.push(bullet);\r\n                    }\r\n                }\r\n            };\r\n            mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, null, extraObj);\r\n        });\r\n    }\r\n\r\n    hideDisks(isAtOnce: boolean = false) {\r\n        this.bulletArr.forEach((bullet: Bullet) => {\r\n            if (cocosUtil.isValid(bullet)) {\r\n                bullet.bulletUtil.hide(isAtOnce);\r\n            }\r\n        });\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (this.isShowing) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.isShowing = true;\r\n        this.scheduleOnce(() => {\r\n            this.isShowing = false;\r\n            this.hideDisks();\r\n        }, this.skill.getDuration());\r\n\r\n        this.showDisks();\r\n    }\r\n\r\n    forceDestroy() {\r\n        this.hideDisks(true);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 飞镖\r\n@ccclass('Skill3')\r\nexport class Skill3 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode();\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        let direction = targetNode.getPosition().subtract(mapModel.player.node.getPosition());\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET,\r\n            cocosUtil.convertToWorldSpace(mapModel.player.node), direction, this);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 油桶\r\n@ccclass('Skill4')\r\nexport class Skill4 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n    isShowing: boolean = false;\r\n\r\n    // 油桶扔出距离\r\n    moveDis: number = 200;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    // 扔出油桶\r\n    throwFire() {\r\n        let arr = cocosUtil.getCircleDirectionArr(this.skill.row.num);\r\n        utilTools.forArr(arr, (direction: Vec3) => {\r\n            let targetPos = mapModel.player.node.getPosition().add(direction.multiplyScalar(this.moveDis));\r\n            let extraObj = {\r\n                targetPos: targetPos,\r\n                time: this.skill.getDuration()\r\n            };\r\n            mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, direction, extraObj);\r\n        });\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (this.isShowing) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.isShowing = true;\r\n        this.scheduleOnce(() => {\r\n            this.isShowing = false;\r\n        }, this.skill.getDuration());\r\n\r\n        this.throwFire();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 导弹\r\n@ccclass('Skill5')\r\nexport class Skill5 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode();\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        let direction = targetNode.getPosition().subtract(mapModel.player.node.getPosition());\r\n\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, direction);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 科技球\r\n@ccclass('Skill6')\r\nexport class Skill6 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        // 出射方向随机\r\n        let direction = cocosUtil.getCircleDirectionArr(1)[0];\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        let extrObj = {\r\n            invokeClass: this,\r\n            time: this.skill.getDuration()\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, direction, extrObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nimport { constants } from '../../../data/constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 力场\r\n@ccclass('Skill7')\r\nexport class Skill7 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    bulletUtil: any;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n        this.bulletUtil = null;\r\n\r\n        let extraObj = {\r\n            lv: this.skill.row.lv,\r\n            endCb: (bulletUtil: any) => {\r\n                if (!cocosUtil.isValid(this.node)) {\r\n                    bulletUtil.bullet.recycleSelf();\r\n                    return;\r\n                }\r\n                this.bulletUtil = bulletUtil;\r\n            }\r\n        };\r\n\r\n        if (extraObj.lv == constants.design.maxLv) {\r\n            extraObj[\"speedCutPrecent\"] = 0.5;\r\n        }\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, null, extraObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n\r\n    }\r\n\r\n    initBulletScale() {\r\n        if (cocosUtil.isValid(this.bulletUtil)) {\r\n            this.bulletUtil.initScale();\r\n        }\r\n    }\r\n\r\n    forceDestroy() {\r\n        if (cocosUtil.isValid(this.bulletUtil)) {\r\n            this.bulletUtil.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from '../monsters/Monster';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 闪电\r\n@ccclass('Skill8')\r\nexport class Skill8 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        let arr = [];\r\n        mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n            let pos = monster.node.position;\r\n            let playerPos = mapModel.player.node.position;\r\n            if (Math.abs(pos.x - playerPos.x) > mapModel.visibleHalfSize.width - 100) {\r\n                return;\r\n            }\r\n            if (Math.abs(pos.y - playerPos.y) > mapModel.visibleHalfSize.height - 150) {\r\n                return;\r\n            }\r\n            arr.push(monster);\r\n        });\r\n        if (arr.length <= 0) {\r\n            return;\r\n        }\r\n        this.timeCount = 0;\r\n\r\n        for (let i = 0; i < this.skill.row.num; i++) {\r\n            this.scheduleOnce(() => {\r\n                if (arr.length <= 0) {\r\n                    return;\r\n                }\r\n                let index = Math.floor(Math.random() * arr.length);\r\n                let monster = arr[index];\r\n                if (monster.hp <= 0) {\r\n                    return;\r\n                }\r\n                let pos = cocosUtil.convertToWorldSpace(monster.node);\r\n                mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, pos);\r\n                audioManager.playEffect(this.skill.row.audio);\r\n            }, i * 0.3);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 钻头\r\n@ccclass('Skill9')\r\nexport class Skill9 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        // 出射方向随机\r\n        let direction = cocosUtil.getCircleDirectionArr(1)[0];\r\n        let extraObj = {\r\n            invokeClass: this,\r\n            time: this.skill.getDuration()\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, direction, extraObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Color, find, Node, Tween, tween, UIOpacity, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ItemLayer } from '../base/ItemLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkillSelectLayer')\r\nexport class SkillSelectLayer extends BaseLayer {\r\n\r\n    skill1ItemLayer: ItemLayer;\r\n    skill2ItemLayer: ItemLayer;\r\n\r\n    selectItemLayer: ItemLayer;\r\n\r\n    hasSelect: boolean;\r\n\r\n    uiNode: Node;\r\n\r\n    btnRefresh: Node;\r\n    btnGetAll: Node;\r\n\r\n    textHint: Node;\r\n    allHint: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.uiNode = this.getNodeByPath(\"ui\");\r\n\r\n        this.skill1ItemLayer = this.getNodeByPath(\"ui/skillLayer1/itemLayer\").addComponent(ItemLayer);\r\n        this.skill2ItemLayer = this.getNodeByPath(\"ui/skillLayer2/itemLayer\").addComponent(ItemLayer);\r\n\r\n        this.selectItemLayer = this.getNodeByPath(\"ui/selectLayer\").addComponent(ItemLayer);\r\n\r\n        this.btnRefresh = this.getNodeByPath(\"ui/btns/btnRefresh\");\r\n        this.btnGetAll = this.getNodeByPath(\"ui/btns/btnGetAll\");\r\n\r\n        this.textHint = this.getNodeByPath(\"ui/textHint\");\r\n        this.allHint = this.getNodeByPath(\"ui/allHint\");\r\n\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n        tyqAdManager.showDelayFullVideo()\r\n        tyqAdManager.showDelayInterstitialAd()\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n    }\r\n\r\n    initUI() {\r\n        this.getNodeByPath(\"ui/title/text\").localizeImg();\r\n        this.getNodeByPath(\"ui/skillLayer1/bg\").localizeImg();\r\n        this.getNodeByPath(\"ui/skillLayer2/bg\").localizeImg();\r\n        this.getNodeByPath(\"ui/allHint\").localizeImg();\r\n        this.getNodeByPath(\"ui/textHint/text\").localizeImg();\r\n        this.getNodeByPath(\"ui/btns/btnRefresh/info/text\").localizeImg();\r\n        this.getNodeByPath(\"ui/btns/btnRefresh/free\").localize(\"refreshFree\", constants.layers.SkillSelectLayer);\r\n\r\n        cocosUtil.tweenScaleIn2(this.uiNode);\r\n        this.hasSelect = false;\r\n\r\n        this.setString(this.getNodeByPath(\"expProgress/lv\"), mapModel.expLv);\r\n        this.refreshSkillLayer();\r\n        this.refreshSelectLayer();\r\n\r\n        this.refreshInfoLayer();\r\n\r\n\r\n    }\r\n\r\n    refreshInfoLayer() {\r\n        // // 2023-03-13 改成一直显示欧皇附体按钮\r\n        // return;\r\n        let lvCount = this.layerData.lvCount;\r\n        if (!lvCount) {\r\n            lvCount = 1;\r\n        }\r\n        if (mapModel.skillAllNum > 0 && (playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment())) {\r\n            this.btnRefresh.active = false;\r\n            this.btnGetAll.active = true;\r\n\r\n            this.textHint.active = false;\r\n            this.allHint.active = true;\r\n        } else {\r\n            this.btnRefresh.active = true;\r\n            this.btnGetAll.active = false;\r\n\r\n            this.textHint.active = true;\r\n            this.allHint.active = false;\r\n\r\n            let refreshInfoNode = this.getNodeByPath(\"ui/btns/btnRefresh/info\");\r\n            let refreshFreeNode = this.getNodeByPath(\"ui/btns/btnRefresh/free\");\r\n            if (playerModel.skillFreeRefreshCount > 0) {\r\n                refreshInfoNode.active = true;\r\n                refreshFreeNode.active = false;\r\n            } else {\r\n                refreshInfoNode.active = false;\r\n                refreshFreeNode.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    refreshSkillLayer() {\r\n        this.setNumItemLayer(this.skill1ItemLayer.node, constants.design.skillNum, this.refreshSkill1Item.bind(this));\r\n        this.setNumItemLayer(this.skill2ItemLayer.node, constants.design.skill2Num, this.refreshSkill2Item.bind(this));\r\n    }\r\n\r\n    refreshWeaponItem(itemUI: Node, num: any){\r\n        let info = mapModel.weaponSystem.weaponArr[num - 1];\r\n        let iconNode = find(\"icon\", itemUI);\r\n        if (info) {\r\n            iconNode.active = true;\r\n            let row = designManager.getRowById(constants.tableName.weapon, info.id);\r\n            this.setSpriteFrame(iconNode, row.icon);\r\n        } else {\r\n            iconNode.active = false;\r\n        }\r\n    }\r\n\r\n    refreshSkill2Item(itemUI: Node, num: any) {\r\n        let info = mapModel.skillSystem.skill2Arr[num - 1];\r\n        let iconNode = find(\"icon\", itemUI);\r\n        if (info) {\r\n            iconNode.active = true;\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n            this.setSpriteFrame(iconNode, row.icon);\r\n        } else {\r\n            iconNode.active = false;\r\n        }\r\n    }\r\n\r\n    refreshSkill1Item(itemUI: Node, num: any) {\r\n        if (num <= constants.design.weaponNum) {\r\n            this.refreshWeaponItem(itemUI, num);\r\n            return;\r\n        }\r\n        let info = mapModel.skillSystem.skillArr[num-constants.design.weaponNum - 1];\r\n        let iconNode = find(\"icon\", itemUI);\r\n        if (info) {\r\n            iconNode.active = true;\r\n            let row = designManager.getRowById(constants.tableName.skill, info.id);\r\n            this.setSpriteFrame(iconNode, row.icon);\r\n        } else {\r\n            iconNode.active = false;\r\n        }\r\n    }\r\n\r\n    refreshSelectLayer() {\r\n        let arr = mapModel.mapSystem.getSelectItemArr();\r\n        this.selectItemLayer.initUI(this, arr, this.refreshSelectItem.bind(this));\r\n    }\r\n\r\n    refreshSelectItem(itemUI: any, item: any) {\r\n        cocosUtil.setRenderableColor(itemUI, Color.WHITE, true);\r\n        let newNode = find(\"new\", itemUI);\r\n        let info = item.info;\r\n        if (info) {\r\n            newNode.active = false;\r\n        } else {\r\n            newNode.active = true;\r\n            Tween.stopAllByTarget(newNode);\r\n            cocosUtil.tweenBreath(newNode, 0.5, 1.1);\r\n        }\r\n\r\n        let row = null;\r\n        switch (item.name) {\r\n            case constants.tableName.weapon:\r\n            case constants.tableName.skill:\r\n            case constants.tableName.skill2:\r\n                let id = designManager.getFirstIdByType(item.type);\r\n                if (info) {\r\n                    id = info.id + 1;\r\n                }\r\n                row = designManager.getRowById(item.name, id);\r\n                break;\r\n            case constants.tableName.prop:\r\n                row = designManager.getRowById(item.name, item.id);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (!row) {\r\n            myLog.e(\"row is undefined:\", row, item);\r\n        }\r\n        itemUI.row = row;\r\n        // this.setString(find(\"name\", itemUI), row.name);\r\n        find(\"name\", itemUI).localizeName(row.id,item.name);\r\n\r\n        this.setSpriteFrame(find(\"icon\", itemUI), row.icon);\r\n        // this.setString(find(\"info\", itemUI), row.info);\r\n        find(\"info\", itemUI).localizeInfo(row.id, item.name);\r\n\r\n        let btnDoubleSelect = find(\"btnDoubleSelect\", itemUI);\r\n        btnDoubleSelect.active = false;\r\n        let selectEffect = find(\"selectEffect\", itemUI);\r\n        selectEffect.active = false;\r\n        cocosUtil.addComponentOnce(selectEffect, AnimationCtrl);\r\n\r\n        let starLayer = find(\"starLayer\", itemUI);\r\n        let bgNode = find(\"bg\", itemUI);\r\n        let bg2Node = find(\"bg2\", itemUI);\r\n        if (row.lv >= constants.design.maxLv) {\r\n            bgNode.active = false;\r\n            bg2Node.active = true;\r\n        } else {\r\n            bgNode.active = true;\r\n            bg2Node.active = false;\r\n        }\r\n        if (item.name == constants.tableName.prop) {\r\n            starLayer.active = false;\r\n        } else {\r\n            starLayer.active = true;\r\n            this.setNumItemLayer(starLayer, constants.design.maxLv, (starItemUI: Node, starLv: number) => {\r\n                let uiOpacity = starItemUI.getComponent(UIOpacity);\r\n                uiOpacity.opacity = 255;\r\n                Tween.stopAllByTarget(uiOpacity);\r\n\r\n                let starIcon = find(\"icon\", starItemUI);\r\n                let starIcon2 = find(\"icon2\", starItemUI);\r\n                let yinIcon = find(\"yin\", starItemUI);\r\n                if (row.lv >= starLv) {\r\n                    yinIcon.active = false;\r\n                    if (row.lv == constants.design.maxLv) {\r\n                        starIcon.active = false;\r\n                        starIcon2.active = true;\r\n                    } else {\r\n                        starIcon.active = true;\r\n                        starIcon2.active = false;\r\n                    }\r\n                    if (row.lv == starLv) {\r\n                        cocosUtil.tweenBlink(starItemUI, 0.3);\r\n                        itemUI.starNode = starItemUI;\r\n                    }\r\n                } else {\r\n                    yinIcon.active = true;\r\n                    starIcon.active = false;\r\n                    starIcon2.active = false;\r\n                }\r\n            });\r\n            if (row.lv <= constants.design.maxLv - 1 && (playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment())) {\r\n                btnDoubleSelect.active = true;\r\n            }\r\n        }\r\n\r\n        let combLayer = find(\"comb\", itemUI);\r\n        //2024-10-18 修改技能突破提示显示\r\n        // if (row.skillArr) {\r\n        if (row.breakthrough) {\r\n            combLayer.getChildByName(\"info\").localize(\"breakthrough\", constants.layers.SkillSelectLayer);\r\n            combLayer.active = true;\r\n            let iconNode = find(\"icon\", combLayer);\r\n            let skillId = 0;\r\n            // utilTools.forArr(row.skillArr, (type: number) => {\r\n            //     let sInfo = mapModel.skillSystem.getSkillInfoByType(type);\r\n            //     if (sInfo) {\r\n            //         skillId = sInfo.id;\r\n            //         return true;\r\n            //     }\r\n            // });\r\n            let sInfo = mapModel.skillSystem.getSkillInfoByType(row.breakthrough);\r\n            if (sInfo) {\r\n                skillId = sInfo.id;\r\n            }\r\n\r\n            if (skillId == 0) {\r\n                // skillId = designManager.getFirstIdByType(row.skillArr[0])\r\n                skillId = designManager.getFirstIdByType(row.breakthrough)\r\n            }\r\n            let skillRow = designManager.getRowById(constants.tableName.skill, skillId);\r\n            this.setSpriteFrame(iconNode, skillRow.icon);\r\n            Tween.stopAllByTarget(iconNode);\r\n            tween(iconNode).delay(1).to(0.3, { scale: v3(1.5, 1.5, 1) }).to(0.15, { scale: v3(1, 1, 1) }).union().repeatForever().start();\r\n        } else {\r\n            combLayer.active = false;\r\n        }\r\n    }\r\n\r\n    mapLeaveRet() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnRefresh() {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        if (playerModel.skillFreeRefreshCount > 0) {\r\n            sdkManager.openAd(\"3选1刷新\", (st: number) => {\r\n                if (st == 1) {\r\n                    this.refreshSelectLayer();\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        playerModel.skillFreeRefreshCount++;\r\n        this.refreshSelectLayer();\r\n        this.refreshInfoLayer();\r\n    }\r\n\r\n    onClickBtnGetAll() {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        sdkManager.openAd(\"3选1欧皇附体\", (st: number) => {\r\n            if (st == 1) {\r\n                mapModel.skillAllNum--;\r\n                this.hasSelect = true;\r\n                let arr = [];\r\n                this.selectItemLayer.node.children.forEach((node: any) => {\r\n                    arr.push(node);\r\n                });\r\n                let tempFunc = () => {\r\n                    let node = arr.shift();\r\n                    if (!node) {\r\n                        this.goNext();\r\n                        return;\r\n                    }\r\n                    this.doSelectItem(node, false, () => {\r\n                        tempFunc();\r\n                    });\r\n                };\r\n                tempFunc();\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    doSelectItem(node: any, isYin = true, callback?: Function, isDouble: boolean = false) {\r\n        let starNode: Node = node.starNode;\r\n        let item = node.item;\r\n        let row = node.row;\r\n        utilTools.waterfall([\r\n            (result: any, cb: Function) => {\r\n                if (isYin) {\r\n                    // 弱化其它选项\r\n                    utilTools.forArr(this.selectItemLayer.node.children, (itemUI: Node) => {\r\n                        if (node == itemUI) {\r\n                            return;\r\n                        }\r\n                        cocosUtil.setRenderableColor(itemUI, constants.colors.yin, true);\r\n                    });\r\n                }\r\n                if (starNode && starNode.activeInHierarchy) {\r\n                    // 星星选中特效\r\n                    let selectEffect = find(\"selectEffect\", node);\r\n                    selectEffect.active = true;\r\n                    let pos = cocosUtil.convertToNodeSpace(selectEffect, cocosUtil.convertToWorldSpace(starNode));\r\n                    selectEffect.setPosition(pos);\r\n                    selectEffect.getComponent(AnimationCtrl).playAnimationOnce(\"2\", () => {\r\n                        selectEffect.active = false;\r\n                    });\r\n                    starNode.scale = v3(1, 1, 1);\r\n                    tween(starNode).to(0.1, { scale: v3(1.5, 1.5, 1) }).delay(0.15).to(0.15, { scale: v3(1, 1, 1) }).call(() => {\r\n                        cb();\r\n                    }).start();\r\n                    if (isDouble) {\r\n                        // 连升两星\r\n                        let starNode2 = find(\"starLayer\", node).children[row.lv];\r\n                        if (starNode2) {\r\n                            let selectEffect2 = cocosUtil.instantiate(selectEffect);\r\n                            selectEffect2.parent = selectEffect.parent;\r\n                            pos = cocosUtil.convertToNodeSpace(selectEffect2, cocosUtil.convertToWorldSpace(starNode2));\r\n                            selectEffect2.position = pos;\r\n                            selectEffect2.getComponent(AnimationCtrl).playAnimationOnce(\"2\", () => {\r\n                                selectEffect2.removeFromParent();\r\n                            });\r\n                            starNode2.scale = v3(1, 1, 1);\r\n                            find(\"icon\", starNode2).active = true;\r\n                            tween(starNode2).to(0.1, { scale: v3(1.5, 1.5, 1) }).delay(0.15).to(0.15, { scale: v3(1, 1, 1) }).start();\r\n                        }\r\n                    }\r\n                    return;\r\n                }\r\n                this.scheduleOnce(() => {\r\n                    cb();\r\n                }, 0.2);\r\n            },\r\n            (result: any, cb: Function) => {\r\n                switch (item.name) {\r\n                    case constants.tableName.weapon:\r\n                        mapModel.weaponSystem.addWeapon(item.type);\r\n                        if (isDouble) {\r\n                            mapModel.weaponSystem.addWeapon(item.type);\r\n                        }\r\n                        break;\r\n                    case constants.tableName.skill:\r\n                        mapModel.skillSystem.addSkill(item.type);\r\n                        if (isDouble) {\r\n                            mapModel.skillSystem.addSkill(item.type);\r\n                        }\r\n                        break;\r\n                    case constants.tableName.skill2:\r\n                        mapModel.skillSystem.addSkill2(item.type);\r\n                        if (isDouble) {\r\n                            mapModel.skillSystem.addSkill2(item.type);\r\n                        }\r\n                        break;\r\n                    case constants.tableName.prop:\r\n                        mapModel.propSystem.getProp(item.id);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                cb();\r\n            },\r\n            (result: any, cb: Function) => {\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        ]);\r\n    }\r\n\r\n    goNext() {\r\n        this.layerData.lvCount--;\r\n        if (this.layerData.lvCount > 0) {\r\n            this.initUI();\r\n        } else {\r\n            this.closeLayer();\r\n            if (this.layerCb) {\r\n                this.layerCb();\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickSelectItem(node: any) {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        this.hasSelect = true;\r\n        this.doSelectItem(node, true, () => {\r\n            this.goNext();\r\n        });\r\n    }\r\n\r\n    onClickBtnDoubleSelect(node: any) {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        sdkManager.openAd(\"3选1连升两星\", (st: number) => {\r\n            if (st == 1) {\r\n                this.hasSelect = true;\r\n                let starNode: Node = node.parent.starNode;\r\n                Tween.stopAllByTarget(starNode.getComponent(UIOpacity));\r\n                starNode.getComponent(UIOpacity).opacity = 255;\r\n                find(\"yin\", starNode).active = true;\r\n                find(\"icon\", starNode).active = false;\r\n                this.scheduleOnce(() => {\r\n                    find(\"yin\", starNode).active = false;\r\n                    find(\"icon\", starNode).active = true;\r\n                    this.doSelectItem(node.parent, true, () => {\r\n                        this.goNext();\r\n                    }, true);\r\n                }, 0.3);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { find, macro, Node, UITransform, _decorator } from 'cc';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { Skill } from '../item/skill/Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkillSystem')\r\nexport class SkillSystem extends BaseLayer {\r\n\r\n    skillArr: any = [];\r\n\r\n    skill2Arr: any = [];\r\n    // 回血定时器\r\n    hasOpenScheculeAddHp: boolean = false;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getSaveData() {\r\n        let skillData: any = {};\r\n        skillData.skillArr = this.skillArr;\r\n        skillData.skill2Arr = this.skill2Arr;\r\n\r\n        return skillData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.skillArr, (info: any) => {\r\n            this.addSkill(0, info.id);\r\n        });\r\n\r\n        utilTools.forArr(data.skill2Arr, (info: any) => {\r\n            this.addSkill2(0, info.id);\r\n        });\r\n    }\r\n\r\n    // 添加主动技能\r\n    addSkill(type: number, skillId: number = 0) {\r\n        if (skillId > 0) {\r\n            type = designManager.getRowById(constants.tableName.skill, skillId).type;\r\n        }\r\n\r\n        let info = this.getSkillInfoByType(type);\r\n        if (info) {\r\n            // 升级\r\n            let row = designManager.getRowById(constants.tableName.skill, info.id + 1);\r\n            if (!row || row.lv > constants.design.maxLv) {\r\n                // 已满级\r\n                return;\r\n            }\r\n            info.id++;\r\n        } else {\r\n            if (this.skillArr.length >= constants.design.skill1Num) {\r\n                // 数量已满\r\n                return;\r\n            }\r\n            // 新增\r\n            info = {};\r\n            info.id = designManager.getFirstIdByType(type);\r\n            this.skillArr.push(info);\r\n        }\r\n\r\n        if (skillId > 0) {\r\n            info.id = skillId;\r\n        }\r\n\r\n        let name = this.getSkillNodeNameByType(type);\r\n        let node = find(name, this.node);\r\n        if (node) {\r\n            let skillUtil = node.getComponent(Skill).skillUtil;\r\n            if (skillUtil && skillUtil.forceDestroy) {\r\n                skillUtil.forceDestroy();\r\n            }\r\n            node.destroy();\r\n            node.parent = null;\r\n        }\r\n\r\n        node = new Node(name);\r\n        node.addComponent(UITransform);\r\n        node.parent = this.node;\r\n        let skill = node.addComponent(Skill);\r\n\r\n        skill.init(info);\r\n        if (skill.skillUtil) {\r\n            skill.skillUtil.timeCount = skill.row.cd;\r\n        }\r\n    }\r\n\r\n    getSkillInfoByType(type: number) {\r\n        for (let i in this.skillArr) {\r\n            let tmp = this.skillArr[i];\r\n            let row = designManager.getRowById(constants.tableName.skill, tmp.id);\r\n            if (row.type == type) {\r\n                return tmp;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getSkillNodeNameByType(type: number) {\r\n        return \"skill\" + type;\r\n    }\r\n\r\n    getSkillCompomentByType(type: number) {\r\n        let name = this.getSkillNodeNameByType(type);\r\n        let node = find(name, this.node);\r\n        if (node) {\r\n            return node.getComponent(Skill);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getSkill2InfoByType(type: number) {\r\n        for (let i = 0; i < this.skill2Arr.length; i++) {\r\n            let info = this.skill2Arr[i];\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n            if (type == row.type) {\r\n                return info;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // 添加被动技能\r\n    addSkill2(type: number, skillId: number = 0) {\r\n        if (skillId > 0) {\r\n            type = designManager.getRowById(constants.tableName.skill2, skillId).type;\r\n        }\r\n\r\n        let info = this.getSkill2InfoByType(type);\r\n        if (info) {\r\n            // 升级\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id + 1);\r\n            if (!row || row.lv > constants.design.maxLv) {\r\n                // 已满级\r\n                return;\r\n            }\r\n            info.id++;\r\n        } else {\r\n            if (this.skill2Arr.length >= constants.design.skill2Num) {\r\n                // 数量已满\r\n                return;\r\n            }\r\n            // 新增\r\n            info = {};\r\n            info.id = designManager.getFirstIdByType(type);\r\n            this.skill2Arr.push(info);\r\n        }\r\n\r\n        if (skillId > 0) {\r\n            info.id = skillId;\r\n        }\r\n\r\n        let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n        switch (row.type) {\r\n            case 6:\r\n                // 通知力场技能刷新大小\r\n                let skill = this.getSkillCompomentByType(7);\r\n                if (skill) {\r\n                    skill.skillUtil.initBulletScale();\r\n                }\r\n                break;\r\n            case 7:\r\n                // 每5秒回血\r\n                if (!this.hasOpenScheculeAddHp) {\r\n                    this.hasOpenScheculeAddHp = true;\r\n                    this.schedule(this.playerHpAdd, 5, macro.REPEAT_FOREVER);\r\n                }\r\n                break;\r\n            case 8:\r\n                // 提高生命上限\r\n                mapModel.player.addHpMaxPercent(row.p1);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    playerHpAdd() {\r\n        let hp = this.getSkill2Val(7);\r\n        mapModel.player.addHpPercent(hp);\r\n    }\r\n\r\n    getSkill2Val(type: number) {\r\n        let info = this.getSkill2InfoByType(type);\r\n        if (info) {\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n            return row.p1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * 判断主动技能当前是否能够突破组合\r\n     * @param type 主动技能类型\r\n     * @returns \r\n     */\r\n    canBreakthrough(type: number){\r\n        for (const sinfo of this.skill2Arr) {\r\n            let srow = designManager.getRowById(constants.tableName.skill2, sinfo.id);\r\n            if (srow.breakthrough == type) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // 减少攻击间隔\r\n    getSkill2AtkCdSubPercent() {\r\n        return this.getSkill2Val(12);\r\n    }\r\n\r\n    // 增加伤害\r\n    getSkill2AtkAddPercent() {\r\n        return this.getSkill2Val(11);\r\n    }\r\n\r\n    // 增加道具吸取距离\r\n    getSkill2PropGetAddDis() {\r\n        return this.getSkill2Val(10);\r\n    }\r\n\r\n    // 金币增加\r\n    getSkill2AddCoin() {\r\n        return this.getSkill2Val(9);\r\n    }\r\n\r\n    // 提升攻击范围\r\n    getSkill2RangeAddScale() {\r\n        return this.getSkill2Val(6);\r\n    }\r\n\r\n    // 减少伤害百分比\r\n    getSkill2DamSubPercent() {\r\n        return this.getSkill2Val(5);\r\n    }\r\n\r\n    // 提升技能持续时间\r\n    getSkill2DurationAddPercent() {\r\n        return this.getSkill2Val(4);\r\n    }\r\n\r\n    // 经验值增加\r\n    getSkill2AddExp() {\r\n        return this.getSkill2Val(3);\r\n    }\r\n\r\n    // 提升玩家移动速度\r\n    getSkill2PlayerSpeedAddPercent() {\r\n        return this.getSkill2Val(2);\r\n    }\r\n\r\n    // 提升子弹飞行速度\r\n    getSkill2BulletSpeedAddPercent() {\r\n        return this.getSkill2Val(1);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        utilTools.forArr(this.node.children, (node: Node) => {\r\n            node.getComponent(Skill).updateLogic(dt);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkinChangeLayer')\r\nexport class SkinChangeLayer extends BaseLayer {\r\n\r\n    listResetPos = true;\r\n\r\n    btnEquip: Node;\r\n    btnGoGet: Node;\r\n\r\n    choseId: number = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.btnEquip = this.getNodeByPath(\"ui/bottom/btns/btnEquip\");\r\n        this.btnGoGet = this.getNodeByPath(\"ui/bottom/btns/btnGoGet\");\r\n\r\n        this.choseId = UserData.getInstance().heroSkin;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.getNodeByPath(\"ui/bottom/title\").localize(\"myWardrobe\", constants.layers.SkinChangeLayer);\r\n        this.getNodeByPath(\"ui/bottom/btns/btnEquip/text\").localizeImg();\r\n        this.getNodeByPath(\"ui/bottom/btns/btnGoGet/text\").localizeImg();\r\n        \r\n        let arr = designManager.getRowsByType(constants.tableName.prop, constants.propTypes.skin);\r\n        this.scrollViewSetData(this.getNodeByPath(\"ui/bottom/list\"), arr, this.refreshSkinItem.bind(this), this.listResetPos);\r\n        this.listResetPos = false;\r\n\r\n        this.setRoleSkin(this.getNodeByPath(\"ui/top/body\"), this.choseId);\r\n        let rank = this.choseId % 2000;\r\n        this.setSpriteFrame2(this.getNodeByPath(\"ui/top/skin\"), \"skin/skin\" + rank, null, \"ui\");\r\n\r\n        this.btnEquip.active = false;\r\n        this.btnGoGet.active = false;\r\n        if (UserData.getInstance().getPropById(this.choseId) > 0) {\r\n            this.btnEquip.active = true;\r\n        } else {\r\n            this.btnGoGet.active = true;\r\n        }\r\n    }\r\n\r\n    refreshSkinItem(itemUI: Node, row: any) {\r\n        this.setSpriteFrame2(find(\"icon\", itemUI), \"prop/\" + row.icon);\r\n        let num = UserData.getInstance().getPropById(row.id);\r\n        let yinNode = find(\"yin\", itemUI);\r\n        let choseNode = find(\"chose\", itemUI);\r\n        if (num > 0) {\r\n            yinNode.active = false;\r\n        } else {\r\n            yinNode.active = true;\r\n        }\r\n        if (row.id == this.choseId) {\r\n            choseNode.active = true;\r\n        } else {\r\n            choseNode.active = false;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickSkinItem(node: any) {\r\n        let row = node.item;\r\n        this.choseId = row.id;\r\n        this.initUI();\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnGoGet() {\r\n        this.closeLayer();\r\n        let obj: any = {\r\n            layerName: constants.layers.RewardSkinLayer\r\n        };\r\n        if (this.choseId % 2000 == 5) {\r\n            obj.layerName = constants.layers.DaySignLayer;\r\n        }\r\n        eventManager.send(msgac.jumpLayer, obj);\r\n    }\r\n\r\n    onClickBtnEquip() {\r\n        let num = UserData.getInstance().getPropById(this.choseId);\r\n        if (num <= 0) {\r\n            this.createNotice(localText.notHas);\r\n            return;\r\n        }\r\n        UserData.getInstance().heroSkin = this.choseId;\r\n        this.createNotice(localText.equipSuccess);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, Tween, tween, UIOpacity, _decorator } from 'cc';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('targetPos')\r\nexport class targetPos extends Component {\r\n\r\n    hint: Hint;\r\n    body2Opacity: UIOpacity;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        if (!this.body2Opacity) {\r\n            this.body2Opacity = find(\"body2\", this.node).getComponent(UIOpacity);\r\n        }\r\n        Tween.stopAllByTarget(this.body2Opacity);\r\n\r\n        this.body2Opacity.opacity = 80;\r\n        tween(this.body2Opacity).to(0.2, { opacity: 255 }).to(0.2, { opacity: 80 }).union().repeatForever().start();\r\n\r\n        let time = this.hint.extraObj;\r\n        this.scheduleOnce(() => {\r\n            this.hint.recycleSelf();\r\n        }, time);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, Tween, tween, UIOpacity, v3, _decorator } from 'cc';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('targetPos2')\r\nexport class targetPos2 extends Component {\r\n\r\n    hint: Hint;\r\n    body2Opacity: UIOpacity;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        if (!this.body2Opacity) {\r\n            this.body2Opacity = find(\"body2\", this.node).getComponent(UIOpacity);\r\n        }\r\n        Tween.stopAllByTarget(this.body2Opacity);\r\n\r\n        this.body2Opacity.opacity = 0;\r\n        tween(this.body2Opacity).to(0.5, { opacity: 255 }).start();\r\n\r\n        this.node.scale = v3(1, 1, 1);\r\n        tween(this.node).to(0.6, { scale: v3(0.2, 0.2, 1) }).start();\r\n\r\n        this.hint.extraObj(this);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.hint.recycleSelf();\r\n        }, 1);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, UITransform, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Hint, HintNames } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('targetPos3')\r\nexport class targetPos3 extends Component {\r\n\r\n    hint: Hint;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        this.node.scale = v3(4, 4, 1);\r\n        tween(this.node).to(0.3, { scale: v3(0.9, 0.9, 1) }).to(0.1, { scale: v3(1.1, 1.1, 1) }).to(0.1, { scale: v3(1, 1, 1) }).call(() => {\r\n            this.hint.recycleSelf();\r\n            let worldPos = cocosUtil.convertToWorldSpace(this.node);\r\n            worldPos.y += this.node.getComponent(UITransform).height * 0.5;\r\n            mapModel.hintSystem.addHint(HintNames.comeShine, worldPos, 0, this.hint.extraObj);\r\n        }).start();\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator, Component, Node , sys, director} from 'cc';\r\nimport { tyqSDK } from '../tyqSDK';\r\nimport { GNetConf } from './conf';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TimeCtr')\r\nexport default class TimeCtr extends Component{\r\n\r\n    private static instance:TimeCtr = null!;\r\n\r\n    public static GetInstance(){\r\n        if (!this.instance) {\r\n            this.instance = new TimeCtr();\r\n            this.instance.InitTimeCtr();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    urls:string[] = [\r\n        \r\n        // \"http://124.71.202.184/time.php\",\r\n        // \"http://192.168.0.113/time.php\",\r\n        // 'https://otheve.beacon.qq.com/analytics/upload?tp=js',//tx2\r\n        tyqSDK.getUrl().httpUrl+'/isAlive',\r\n        // \"http://www.baidu.com\",//百度\r\n        // 'http://vv.video.qq.com/checktime?otype=json',//tx1\r\n        // 'http://api.m.taobao.com/rest/api3.do?api=mtop.common.getTimestamp',//tb //http://api.m.taobao.com/rest/api3.do?api=mtop.common.getTimestamp\r\n        // 'http://quan.suning.com/getSysTime.do',//sn http://quan.suning.com/getSysTime.do\r\n    ];\r\n\r\n    public serverTime:number = 0;\r\n    public diffServerTime:number = 0;\r\n    public isRunServerTime:boolean =false;\r\n    loginTime:string = '';\r\n    public curSystemDate = 0;\r\n    \r\n    InitTimeCtr(){\r\n\r\n    }\r\n\r\n    UpdateServerTime(time:number){\r\n        director.getScheduler().unschedule(this.updateTimer,this)\r\n        // time = new Date().getTime();// 修改服务器时间为本地进行测试 !!\r\n        this.serverTime = time;\r\n        this.curSystemDate = time;\r\n        // console.log(\"date:\",new Date(time))\r\n        director.getScheduler().schedule(this.updateTimer, this, 1);\r\n        // let now = new Date(time);\r\n        // console.log(\"now:\",now,now.getFullYear(),now.getMonth()+1,now.getDate(),\"星期:\"+now.getDay())\r\n    }\r\n\r\n    UpdateServerTimeByHeartbeat(time:number){\r\n        // console.warn(\"---时间同步----\", time)\r\n        this.serverTime = time;\r\n        this.curSystemDate = time;\r\n    }\r\n\r\n    ReInit(){\r\n       director.getScheduler().unschedule(this.updateTimer,this)\r\n    }\r\n\r\n    public updateTimer() {\r\n\t\t// this.serverTime += 1000;\r\n        this.isRunServerTime = true;\r\n        // 检查是否隔天了..\r\n        // if (App.center.GetNowDateString() != this.loginTime && this.loginTime != '') {\r\n        //     App.Instance.InitCtr();\r\n        //     this.loginTime = App.center.GetNowDateString();\r\n        // }\r\n\t}\r\n\r\n    get ServerTime(){\r\n        if (this.serverTime != 0) {\r\n            return this.serverTime;\r\n        }\r\n        return Date.now();\r\n    }\r\n\r\n    get ServerDate(){\r\n        if (this.serverTime != 0) {\r\n            return new Date(this.serverTime);\r\n        }\r\n    }\r\n\r\n    public async RequestTime(call:Function) {\r\n        for (let i = 0; i < this.urls.length; i++) {\r\n            const url = this.urls[i];\r\n            let isOk = false;\r\n            let result:any = {};\r\n            await this.request(url).then((r)=>{\r\n                isOk = true;\r\n                result = r;\r\n            }).catch((r)=>{\r\n                isOk = false;\r\n                result = r;\r\n            })\r\n\r\n            if (isOk) {\r\n                call(result);\r\n                return;\r\n            }\r\n        }\r\n\r\n        call({result:false});\r\n\t\t// let xhr = cc.loader.getXMLHttpRequest();\r\n\t\t// xhr.timeout = 1000*3 ;\r\n\t\t// xhr.onreadystatechange = () => {\r\n\t\t// \t// console.log(\"statusText:\",self.xhr.statusText);\r\n\t\t// \tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t// \t\tlet respone = xhr.responseText;\r\n\t\t// \t\tif (!respone) {\r\n\t\t// \t\t\tconsole.log('http error', respone);\r\n\t\t// \t\t\treturn;\r\n\t\t// \t\t}\r\n\t\t// \t\tconsole.log('收到的消息:',respone);\r\n        //         let message = JSON.parse(respone);\r\n        //         if (message.result == 200) {\r\n        //             // console.log(\"serverTime:\",message.serverTime);\r\n        //             let time = Number(message.serverTime);\r\n        //             // let date = new Date(time);\r\n        //             // console.log(\"date:\",date)\r\n        //             call({result:true,time:time});\r\n        //         }\r\n                \r\n\t\t// \t}\r\n        //     // console.log(\"xhr.getAllResponseHeaders():\",xhr.getAllResponseHeaders())\r\n\t\t// };\r\n\r\n\t\t// xhr.ontimeout = (res) => {\r\n\t\t// \tconsole.log('ontimeout:', res);\r\n        //     call({result:false})\r\n\t\t// \t// NetMgr.getInstance ().repeatNet(mid);\r\n\t\t// };\r\n\r\n\t\t// xhr.onerror = (error) => {\r\n\t\t// \t// 尝试重新发送\r\n\t\t// \tconsole.log('http.POST Error', error);\r\n        //     call({result:false})\r\n\t\t// };\r\n\t\t// let url = this.urls[0];\r\n\t\t// console.log('url:', url);\r\n\t\t// xhr.open('POST', url, true);\r\n        // xhr.setRequestHeader('Content-Type', 'application/json;charset=utf-8');\r\n        \r\n\r\n\t\t// // xhr.send(JSON.stringify(msg));\r\n        // xhr.send();\r\n\t}\r\n\r\n\r\n    private request(url:string){\r\n        return new Promise((resolve,reject)=>{\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.timeout = 1000*3 ;\r\n            xhr.onreadystatechange = () => {\r\n                console.log(\"statusText:\",xhr.statusText);\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    let respone = xhr.responseText;\r\n                    if (!respone) {\r\n                        console.log('http error', respone);\r\n                        return;\r\n                    }\r\n                    console.log('收到的消息:',respone);\r\n                    let message = JSON.parse(respone);\r\n                    // if (message.result == 200) {\r\n                    //     // console.log(\"serverTime:\",message.serverTime);\r\n                        \r\n                    // }\r\n                    // else{\r\n                    //     reject({result:false})\r\n                    // }\r\n                    if (message.serverTime) {\r\n                        let time = Number(message.serverTime);\r\n                        resolve({result:true,time:time});\r\n                    }\r\n                    else{\r\n                        reject({result:false})\r\n                    }\r\n                    \r\n                }\r\n                // else{\r\n                //     reject({result:false})\r\n                // }\r\n            };\r\n\r\n            xhr.ontimeout = (res) => {\r\n                // console.log('ontimeout:', res);\r\n                reject({result:false})\r\n                // NetMgr.getInstance ().repeatNet(mid);\r\n            };\r\n\r\n            xhr.onerror = (error) => {\r\n                // 尝试重新发送\r\n                // console.log('http.POST Error', error);\r\n                reject({result:false})\r\n            };\r\n            // console.log('url:', url);\r\n            xhr.open('POST', url, true);\r\n            xhr.setRequestHeader('Content-Type', 'application/json');\r\n            \r\n\r\n            // xhr.send(JSON.stringify(msg));\r\n            xhr.send();\r\n        })\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Label, Node, ProgressBar, tween, v3, Vec3, view, _decorator } from 'cc';\r\nimport { CountTimeUtil } from '../../../utils/CountTimeUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TopUILayer')\r\nexport class TopUILayer extends BaseUILayer {\r\n\r\n    @property({ type: Label, tooltip: \"体力标签\" }) powerLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"宝石标签\" }) baoshiLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"金币标签\" }) coinLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"玩家等级\" }) lvLabel: Label = null;\r\n    @property({ type: Node, tooltip: \"使用展示\" }) showNode: Node = null;\r\n    @property({ type: ProgressBar, tooltip: \"经验进度条\" }) expBar: ProgressBar = null;\r\n\r\n    @property({ type: Label, tooltip: \"体力时间\" }) tiliLabel: Label = null;\r\n    @property({ type: Node }) clearBtn: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.initLayout()\r\n    }\r\n\r\n    onEnable() {\r\n        eventManager.on(msgac.commonResRefresh, this.updateData, this);\r\n        this.clearBtn.active = false//playerModel.isInDevelopmentEnvironment()  //cocosUtil.isDesktopBrowser();\r\n    }\r\n\r\n    initLayout() {\r\n        let screen1 = view.getVisibleSize()\r\n        let scale = this.getScreenScale()\r\n        if (screen1.height / screen1.width > 2) {\r\n            this.node.position = new Vec3(this.node.position.x, screen1.height / scale / 2 - 220, this.node.position.z)\r\n        } else {\r\n            this.node.position = new Vec3(this.node.position.x, screen1.height / scale / 2 - 160, this.node.position.z)\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.updateData()\r\n    }\r\n\r\n    showUseAnimal(type, num) {\r\n        this.showNode.active = true\r\n        this.showNode.getChildByName(\"numLabel\").getComponent(Label).string = \"\" + num\r\n        tween(this.showNode).show().set({ position: v3(-88, -9, 0) }).to(0.5, { position: v3(-88, -39, 0) }).hide().start()\r\n        this.updateData()\r\n    }\r\n\r\n    onDisable() {\r\n        eventManager.off(msgac.commonResRefresh, this.updateData, this);\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    updateData() {\r\n        this.powerLabel.string = UserData.getInstance().power + \"/\" + designManager.config.energyMax\r\n        this.baoshiLabel.string = UserData.getInstance().baoshi + \"\"\r\n        this.coinLabel.string = UserData.getInstance().coin + \"\"\r\n        this.lvLabel.string = UserData.getInstance().roleLv + \"\"\r\n        this.expBar.progress = Math.min(1, UserData.getInstance().roleExp / UserData.getInstance().getNextLevelExp())\r\n        if (this.tiliLabel.node.getComponent(CountTimeUtil)) {\r\n            this.tiliLabel.node.getComponent(CountTimeUtil).setTime(UserData.getInstance().getCountTime(), function () {\r\n                UserData.getInstance().checkPowerTime()\r\n                eventManager.send(msgac.commonResRefresh);\r\n            })\r\n        }\r\n\r\n        UserData.getInstance().saveData()\r\n    }\r\n\r\n    clearData() {\r\n        UserData.getInstance().remove()\r\n    }\r\n\r\n    showRewardItem(event, data) {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (data == 1) {\r\n            if (UserData.getInstance().power < designManager.config.energyMax) {\r\n                this.openLayer(constants.layers.RewardItemLayer, { propId: 105, num: Math.min(designManager.config.adenergy, designManager.config.energyMax - UserData.getInstance().power) })\r\n            }\r\n        } else if (data == 2) {\r\n            this.openLayer(constants.layers.RewardItemLayer, { propId: 801, num: designManager.config.adDiamond })\r\n        } else if (data == 3) {\r\n            this.openLayer(constants.layers.RewardItemLayer, { propId: 104, num: designManager.config.adCoin })\r\n        }\r\n    }\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TowerFloorLayer')\r\nexport class TowerFloorLayer extends BaseLayer {\r\n\r\n    floorLayer: Node;\r\n    floor: number = 1;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.floorLayer = this.getNodeByPath(\"ui/floorLayer\");\r\n\r\n        if (tyqSDK.getSwitchValue(\"tyq_HeroLayer_open\") != 1) {\r\n            this.getNodeByPath(\"ui/btnRole\").active = false\r\n        }\r\n\r\n        if (tyqSDK.channel != ChannelFlag.WECHAT_JJWS) {\r\n            this.getNodeByPath(\"ui/btnRole\").active = true\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let arr = [];\r\n        let mapId = this.layerData.id;\r\n        let floor = UserData.getInstance().getTowerMapInfo(mapId).floor;\r\n        this.floor = floor;\r\n        let tmp = 2;\r\n        while (true) {\r\n            let f = floor - tmp;\r\n            tmp--;\r\n            if (tmp < 0) {\r\n                break;\r\n            }\r\n            if (f <= 0) {\r\n                continue;\r\n            }\r\n            arr.push(f);\r\n        }\r\n        let maxFloor = designManager.getTable(constants.tableName.towerFloor).length;\r\n        tmp = floor;\r\n        while (arr.length <= 7) {\r\n            arr.push(tmp);\r\n            tmp++;\r\n            if (tmp > maxFloor) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.setItemLayer(this.floorLayer, arr, this.refreshFloorItem.bind(this));\r\n\r\n        this.getNodeByPath(\"ui/btnRole/Label\").localize(\"weaponConfig\",constants.layers.TowerFloorLayer)\r\n    }\r\n\r\n    refreshFloorItem(itemUI: any, floor: number) {\r\n        this.setString(find(\"floor\", itemUI), floor);\r\n        let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(find(\"spine\", itemUI), AnimationCtrl);\r\n\r\n        let mapId = this.layerData.id;\r\n        let nowFloor = UserData.getInstance().getTowerMapInfo(mapId).floor;\r\n\r\n        if (nowFloor == floor) {\r\n            aniCtrl.playAnimationOnce(\"a2\", () => {\r\n                aniCtrl.playAnimation(\"a3\", true);\r\n            });\r\n        } else if (floor > nowFloor) {\r\n            aniCtrl.playAnimation(\"a1\", true);\r\n        } else {\r\n            aniCtrl.playAnimation(\"a4\", true);\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnRole() {\r\n        this.openLayer(constants.layers.TowerRoleLayer);\r\n    }\r\n\r\n    onClickFloorItem(node) {\r\n        let floor = node.item;\r\n        let mapId = this.layerData.id;\r\n        if (floor != UserData.getInstance().getTowerMapInfo(mapId).floor) {\r\n            return;\r\n        }\r\n        // this.closeLayer();\r\n        mapModel.enterMapWithMapId(mapId, floor);\r\n        tyqSDK.eventSendCustomEvent(\"参与无尽模式\")\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, find, Node, ScrollView, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TowerLayer')\r\nexport class TowerLayer extends BaseLayer {\r\n\r\n    qianShouNode: Node;\r\n    dianJvNode: Node;\r\n    xieZiNode: Node;\r\n    nianChouNode: Node;\r\n    paoDangRenNode: Node;\r\n\r\n    btnsLayer: Node;\r\n\r\n    onLoad() {\r\n        this.layerName = constants.layers.TowerLayer;\r\n        super.onLoad();\r\n\r\n        this.btnsLayer = this.getNodeByPath(\"ui/listNoUtil/view/content/map\");\r\n        let chs = this.btnsLayer.children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            find(\"monster\", chs[i]).addComponent(AnimationCtrl);\r\n            let textNode = find(\"name/text\", chs[i]);\r\n            let row = designManager.getRowById(constants.tableName.map, constants.design.towerBeginId + i);\r\n            // this.setString(textNode, row.name)\r\n            textNode.localize(`name${constants.design.towerBeginId + i}`,constants.catName.mapSystem)\r\n        }\r\n        this.qianShouNode = find(\"monster\", chs[0]);\r\n        this.dianJvNode = find(\"monster\", chs[1]);\r\n        this.xieZiNode = find(\"monster\", chs[2]);\r\n        this.nianChouNode = find(\"monster\", chs[4]);\r\n        this.paoDangRenNode = find(\"monster\", chs[5]);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.getNodeByPath(\"ui/listNoUtil\").getComponent(ScrollView).scrollToTop();\r\n        let chs = this.btnsLayer.children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            let itemUI = chs[i];\r\n            let row = designManager.getRowById(constants.tableName.map, constants.design.towerBeginId + i);\r\n            // @ts-ignore\r\n            itemUI.row = row;\r\n            // this.setString(find(\"name\", itemUI), row.name);\r\n            // find(\"name\", itemUI).getChildByName(\"text\").localizeName(row.id, constants.catName.mapSystem)\r\n            let handNode = find(\"hand\", itemUI);\r\n            if (handNode) {\r\n                handNode.active = false;\r\n            }\r\n            if (this.needHand()) {\r\n                if (i == 0) {\r\n                    itemUI.active = true;\r\n                    handNode.active = true;\r\n                } else {\r\n                    itemUI.active = false;\r\n                }\r\n            } else {\r\n                itemUI.active = true;\r\n            }\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.startQianShouUpdate();\r\n            if (!this.needHand()) {\r\n                this.startDianJvUpdate();\r\n                this.startXieziUpdate();\r\n                this.startNianChouUpdate();\r\n                this.startPaoDangRenUpdate();\r\n            }\r\n        }, 1 + Math.random());\r\n    }\r\n\r\n    needHand() {\r\n        let floorId = UserData.getInstance().getTowerMapInfo(101).floor;\r\n        if (floorId <= 1) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    startPaoDangRenUpdate() {\r\n        if (Math.random() > 0.3) {\r\n            if (this.paoDangRenNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.paoDangRenNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startPaoDangRenUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            let name = Math.random() > 0.7 ? \"attack1\" : \"attack3\";\r\n            if (name == \"attack1\") {\r\n                let num = Math.random();\r\n                if (num < 0.33) {\r\n                    name = \"attackHand1\";\r\n                } else if (num < 0.66) {\r\n                    name = \"attackHand2\";\r\n                } else {\r\n                    name = \"attackHand3\";\r\n                }\r\n            }\r\n            let animation = this.paoDangRenNode.getComponent(Animation);\r\n            animation.pause();\r\n            this.paoDangRenNode.getComponent(AnimationCtrl).playAnimationOnce(name, () => {\r\n                animation.resume();\r\n                this.startPaoDangRenUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startNianChouUpdate() {\r\n        if (Math.random() > 0.2) {\r\n            if (this.nianChouNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.nianChouNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startNianChouUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            this.nianChouNode.getComponent(AnimationCtrl).playAnimationOnce(\"attack1\", () => {\r\n                this.startNianChouUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startXieziUpdate() {\r\n        if (Math.random() > 0.2) {\r\n            if (this.xieZiNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.xieZiNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startXieziUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            let name = Math.random() > 0.5 ? \"attack1\" : \"attack4\";\r\n            this.xieZiNode.getComponent(AnimationCtrl).playAnimationOnce(name, () => {\r\n                this.startXieziUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startDianJvUpdate() {\r\n        if (Math.random() > 0.3) {\r\n            if (this.dianJvNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.dianJvNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startDianJvUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            let name = Math.random() > 0.5 ? \"attack1\" : \"attack2\";\r\n            this.dianJvNode.getComponent(AnimationCtrl).playAnimationOnce(name, () => {\r\n                this.startDianJvUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startQianShouUpdate() {\r\n        if (Math.random() > 0.5) {\r\n            if (this.qianShouNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.qianShouNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startQianShouUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            this.qianShouNode.getComponent(AnimationCtrl).playAnimationOnce(\"attack\", () => {\r\n                this.startQianShouUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    openTowerFloorLayer(mapId: number) {\r\n        let obj = {\r\n            id: mapId\r\n        };\r\n        this.openLayer(constants.layers.TowerFloorLayer, obj);\r\n    }\r\n\r\n    onClickBtnTower(node: any) {\r\n        let row = node.row;\r\n        this.openTowerFloorLayer(row.id);\r\n    }\r\n\r\n}\r\n\r\n","import { Color, find, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TowerRoleLayer')\r\nexport class TowerRoleLayer extends BaseLayer {\r\n\r\n    propItemUIArr = [];\r\n\r\n    atkNode: Node;\r\n    hpNode: Node;\r\n\r\n    weaponList: Node;\r\n\r\n    costPropIcon: Node;\r\n    costPropNum: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        let chs = this.getNodeByPath(\"ui/herobg/propLeft\").children;\r\n        for (let i in chs) {\r\n            this.propItemUIArr.push(chs[i]);\r\n        }\r\n        chs = this.getNodeByPath(\"ui/herobg/propRight\").children;\r\n        for (let i in chs) {\r\n            this.propItemUIArr.push(chs[i]);\r\n        }\r\n\r\n        this.atkNode = this.getNodeByPath(\"ui/herobg/attackbg/Label\");\r\n        this.hpNode = this.getNodeByPath(\"ui/herobg/lifebg/Label\");\r\n\r\n        this.weaponList = this.getNodeByPath(\"ui/herobg/list\");\r\n\r\n        this.costPropIcon = this.getNodeByPath(\"ui/herobg/bar/btnOpt/info/icon\");\r\n        this.costPropNum = this.getNodeByPath(\"ui/herobg/bar/btnOpt/info/num\");\r\n\r\n        this.setRoleSkin(this.getNodeByPath(\"ui/herobg/role\"));\r\n\r\n        this.getNodeByPath(\"ui/herobg/btnSkin/ui_text_clo\").localizeImg();\r\n        this.getNodeByPath(\"ui/herobg/attackbg/hp\").localizeImg();\r\n        this.getNodeByPath(\"ui/herobg/lifebg/hp\").localizeImg();\r\n        this.getNodeByPath(\"ui/herobg/bar/Label\").localize(\"myWeapon\", constants.layers.TowerRoleLayer);\r\n        this.getNodeByPath(\"ui/herobg/bar/btnOpt/Label\").localize(\"upgrade\", constants.layers.TowerRoleLayer);\r\n        this.getNodeByPath(\"ui/btnClose/Label\").localize(\"close\", constants.catName.common);\r\n\r\n        // test\r\n        // UserData.getInstance().addPropNum(106, 99999);\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n\r\n        let idArr = UserData.getInstance().wearProp;\r\n        for (let i = 0; i < idArr.length; i++) {\r\n            let itemUI = this.propItemUIArr[i];\r\n            let emptyNode = find(\"empty\", itemUI);\r\n            let uiNode = find(\"ui\", itemUI);\r\n            let id = idArr[i];\r\n            if (i == 0) {\r\n                id = UserData.getInstance().$towerWeaponId;\r\n            }\r\n            if (id > 0) {\r\n                itemUI.id = id;\r\n                emptyNode.active = false;\r\n                uiNode.active = true;\r\n                this.setPropItemIcon(uiNode, id);\r\n                this.setWeaponbLv(find(\"lv\", uiNode), id);\r\n            } else {\r\n                itemUI.id = 0;\r\n                emptyNode.active = true;\r\n                uiNode.active = false;\r\n            }\r\n        }\r\n\r\n        let info = UserData.getInstance().getTowerRoleProInfo();\r\n        this.setString(this.atkNode, info.atk);\r\n        this.setString(this.hpNode, info.hp);\r\n\r\n        this.scrollViewSetData(this.weaponList, UserData.getInstance().$towerWeaponIdArr, this.refreshWeaponItem.bind(this));\r\n\r\n        let lv = UserData.getInstance().getWeaponLv(UserData.getInstance().$towerWeaponId);\r\n        let row = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        let propRow = designManager.getRowById(constants.tableName.prop, row.propId);\r\n\r\n        let nextRow = designManager.getRowById(constants.tableName.weaponOpt, lv + 1);\r\n        if (nextRow) {\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/Label\").active = true;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/info\").active = true;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/max\").active = false;\r\n\r\n            this.setSpriteFrame(this.costPropIcon, propRow.icon);\r\n            this.setString(this.costPropNum, \"X\" + row.propNum);\r\n            if (UserData.getInstance().getPropNumById(row.propId) >= row.propNum) {\r\n                cocosUtil.setRenderableColor(this.costPropNum, Color.WHITE);\r\n            } else {\r\n                cocosUtil.setRenderableColor(this.costPropNum, Color.RED);\r\n            }\r\n        } else {\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/Label\").active = false;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/info\").active = false;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/max\").active = true;\r\n        }\r\n\r\n        this.setSpriteFrame(this.getNodeByPath(\"ui/itemLayer/icon\"), propRow.icon);\r\n        this.setNumString(this.getNodeByPath(\"ui/itemLayer/num\"), UserData.getInstance().getPropNumById(row.propId));\r\n\r\n    }\r\n\r\n    setPropItemIcon(itemUI: Node, id: number) {\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        let icon = \"prop/\" + row.icon;\r\n        if (row.type == 11) {\r\n            let wRow = designManager.getRowById(constants.tableName.weapon, row.weaponid);\r\n            icon = \"weapon/\" + wRow.icon;\r\n        }\r\n        this.setSpriteFrame2(find(\"icon\", itemUI), icon);\r\n        this.setSpriteFrame2(find(\"bg\", itemUI), \"prop/propbg\" + row.quality);\r\n    }\r\n\r\n    setWeaponbLv(lvNode: Node, id: number) {\r\n        if (!lvNode) {\r\n            return;\r\n        }\r\n        let lv = UserData.getInstance().getWeaponLv(id);\r\n        // this.setString(lvNode, localText.lv + lv);\r\n        lvNode.localize({cat:constants.layers.TowerRoleLayer, key:\"lv\", vars:[lv]});\r\n    }\r\n\r\n    refreshWeaponItem(itemUI: Node, id: number) {\r\n        this.setPropItemIcon(itemUI, id);\r\n        this.setWeaponbLv(find(\"lv\", itemUI), id);\r\n        let choseNode = find(\"chose\", itemUI);\r\n        if (id == UserData.getInstance().$towerWeaponId) {\r\n            choseNode.active = true;\r\n        } else {\r\n            choseNode.active = false;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickPropItem(node: any) {\r\n        let id = node.id;\r\n        if (id > 0) {\r\n            let row = designManager.getRowById(constants.tableName.prop, id);\r\n            let obj: any = { propId: id };\r\n            if (row.type == 11) {\r\n                obj.weaponLv = UserData.getInstance().getWeaponLv();\r\n            }\r\n            this.openLayer(constants.layers.PropInfoLayer, obj);\r\n        }\r\n    }\r\n\r\n    onClickWeaponItem(node: any) {\r\n        let id = node.item;\r\n        UserData.getInstance().$towerWeaponId = id;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnOpt() {\r\n        let ret = UserData.getInstance().towerWeaponAddLv();\r\n        switch (ret.st) {\r\n            case 1:\r\n                this.initUI();\r\n                break;\r\n            case 2:\r\n                this.createNotice(localText.maxLv);\r\n                break;\r\n            case 3:\r\n                this.showLackItem(ret.propId);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnSkin() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SkinChangeLayer, () => {\r\n            this.setRoleSkin(this.getNodeByPath(\"ui/herobg/role\"));\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Node, tween, v3, _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ProgressBar } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { mapModel } from '../../model/mapModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TransLayer')\r\nexport class TransLayer extends BaseLayer {\r\n\r\n    iconNode: Node;\r\n    blackNode: Node;\r\n    processBar: Node;\r\n    process: number;\r\n    percentNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.iconNode = this.getNodeByPath(\"icon\");\r\n        this.blackNode = this.getNodeByPath(\"black\");\r\n        this.processBar = this.getNodeByPath(\"ProgressBar\");\r\n        this.percentNode = this.getNodeByPath(\"ProgressBar/Label/percent\");\r\n\r\n        // this.processBar.active = false; //不加载进度方式\r\n\r\n        {   //加载进度方式\r\n            if (this.layerCb) {\r\n                this.layerCb((percent: number) => {\r\n                    // TODO 刷新加载进度\r\n                    this.process = percent;\r\n                }, () => {\r\n                    this.openLayer(constants.layers.MapLayer, this.layerData, null, () => {\r\n                        // 关闭加载进度\r\n                        this.closeLayer(constants.layers.TransLayer);\r\n                        this.closeLayer(constants.layers.TowerFloorLayer);\r\n                        this.closeLayer(constants.layers.HomeLayer);\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    initUI() {\r\n        this.blackNode.active = false;\r\n        this.iconNode.scale = v3(5, 5, 1);\r\n        tween(this.iconNode).to(0.5, { scale: v3(0.05, 0.05, 1) }, { easing: \"quadOut\" }).call(() => {\r\n            this.blackNode.active = true;\r\n        }).start();\r\n    }\r\n\r\n    // 加载进度方式\r\n    update(dt: number): void {\r\n        if (this.process > 0) {\r\n            let process = this.process;\r\n            process = Math.ceil(process * 10000) / 10000;\r\n            if (this.process <= 1) {\r\n                this.setProgressBar(this.processBar, process);\r\n                this.setString(this.percentNode, Math.ceil(process * 100) + \"%\");\r\n                // this.iconNode.scale = v3(5*(1-process)+0.05,5*(1-process)+0.05,1);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { native, sys, view } from \"cc\";\r\nimport { NATIVE, VIVO, WECHAT } from \"cc/env\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { VivoManager } from \"./platform/Vivo\";\r\nimport { Wechat } from \"./platform/wechat/wechat\";\r\nimport { EType, IPos, WXCustomAd } from \"./platform/wechat/WXCustomAd\";\r\nimport { tyqSDK } from \"./tyqSDK\";\r\nimport { tyqSDKConfig } from \"./tyqSDKConfig\";\r\nimport { playerModel } from \"../game/model/playerModel\";\r\n\r\n/**渠道 */\r\nexport enum Channel {\r\n    /**默认 浏览器*/\r\n    DEFAULT = 0,\r\n    /**微信小游戏 */\r\n    WECHAT = 1,\r\n    ANDROID,\r\n    IOS,\r\n    ANDROID_233,\r\n    ANDROID_4399,\r\n    H5_4399,\r\n    VIVO_MINI_GAME,\r\n    OPPO_MINI_GAME,\r\n\r\n}\r\n\r\nclass TyqAdManager {\r\n\r\n    private static _instance: TyqAdManager;\r\n    public static get instance(): TyqAdManager {\r\n        if (!this._instance) {\r\n            this._instance = new TyqAdManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    private channel: Channel = Channel.DEFAULT;\r\n\r\n\r\n\r\n\r\n\r\n    // 默认原生广告各个类型的尺寸\r\n    public customAdSizeObj: any = {\r\n        // 矩阵 行数：5\r\n        rect: {\r\n            width: 360,\r\n            height: 506\r\n        },\r\n        // 横向 尺寸：80%  默认数：5\r\n        horizontal: {\r\n            width: 288,\r\n            height: 90\r\n        },\r\n        // 竖向 尺寸：90%  默认数：5\r\n        vertical: {\r\n            width: 62,\r\n            height: 388\r\n        },\r\n        // 单个格子 尺寸：90%\r\n        grid: {\r\n            width: 68,\r\n            height: 102\r\n        }\r\n    };\r\n\r\n    // 当前显示广告的类型\r\n    private adShowType: string;\r\n    // banner广告是否正在显示中\r\n    private bannerAdShowing: boolean = false;\r\n    // banner广告显示接口调用次数\r\n    private showBannerCount = 0;\r\n\r\n    private shareTime = 0\r\n    private shareListenerSuccess = null\r\n    private shareListenerFail = null\r\n\r\n    private openID = \"\"\r\n\r\n    private strategy = 1\r\n\r\n    public videoCallBack: Function = () => { };\r\n    public videoCallBackFail: Function = () => { };\r\n\r\n    private shareopenID = \"\"\r\n\r\n    constructor() {\r\n        if (sys.platform == sys.Platform.WECHAT_GAME) {\r\n            this.channel = Channel.WECHAT;\r\n\r\n            let windowSize = view.getVisibleSize();\r\n            if (windowSize.width / windowSize.height > 720 / 1440) {\r\n                Wechat.bannerSize = { width: 300, height: 120 }\r\n            }\r\n            \r\n            return\r\n        } \r\n        if (NATIVE) {\r\n            this.channel = Channel.ANDROID_233;\r\n            return\r\n        }\r\n        this.channel = Channel.DEFAULT;\r\n    }\r\n\r\n    public getEnterUrlQuery() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            // 冷启动 wx.getLaunchOptionsSync()\r\n            // 冷启动和热启动 wx.getEnterOptionsSync()\r\n            if (wx.getEnterOptionsSync) {\r\n                let options = wx.getEnterOptionsSync();\r\n                //    console.log(\"options\", options)\r\n                if (options && options.query) {\r\n                    //  console.log(\"options.query\", options.query.toString())\r\n                    let openID = options.query.shareGameSync\r\n                    //    console.log(\"login openID = \", openID)\r\n                    if (openID) {\r\n                        // this.reportShareBehavior(6, 1, openID)\r\n                        this.shareopenID = openID\r\n                        tyqSDK.eventSendCustomEvent(\"参与激励托管分享成功进来的玩家\")\r\n                    }\r\n                    return options.query;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public showAppMessage() {\r\n        this.shareTime = new Date().getTime()\r\n        console.log(\"this.openID = \", this.openID)\r\n        Wechat.shareAppMessage(\"挑战未知敌人，化身特工\", \"\", \"shareGameSync=\" + this.openID)\r\n    }\r\n\r\n    public getOpenID() {\r\n        //只能在服务端请求\r\n        wx.login({\r\n            success: res => {\r\n                if (res.code) {\r\n                    let URL = 'https://api.weixin.qq.com/sns/jscode2session?appid=###&secret=********&js_code=' + res.code + '&grant_type=authorization_code'\r\n                    wx.request({\r\n                        url: URL,\r\n                        success: function (res) {\r\n                            console.log(res.data)//res.data中有openid\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    public getChannel() {\r\n        return this.channel;\r\n    }\r\n\r\n    public initAdIds() {\r\n\r\n        if (this.channel == Channel.WECHAT) {\r\n            // 显示当前页面的转发按钮\r\n            // \"shareAppMessage\"表示“发送给朋友”按钮，\"shareTimeline\"表示“分享到朋友圈”按钮\r\n            wx.showShareMenu({\r\n                withShareTicket: true,\r\n                menus: ['shareAppMessage', 'shareTimeline']\r\n            });\r\n\r\n            wx.onHide(this.wxOnHide.bind(this));\r\n            wx.onShow(this.wxOnShow.bind(this));\r\n\r\n            // banner广告参数\r\n            let bannerIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_banners);\r\n            if (bannerIds) {\r\n                Wechat._bannerAdUnitId = bannerIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置banner广告参数\");\r\n            }\r\n\r\n            // 插屏广告参数\r\n            let interstitialIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_interstitial);\r\n            if (interstitialIds) {\r\n                Wechat._interstitialAdUnitId = interstitialIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置banner广告参数\");\r\n            }\r\n\r\n            // 原生广告参数\r\n            let customRectIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_custom_rect);\r\n            if (customRectIds) {\r\n                WXCustomAd._customc_rect_adunit = customRectIds.split(\";\");\r\n                //  console.log(\" WXCustomAd._customc_rect_adunit = \",WXCustomAd._customc_rect_adunit)\r\n            } else {\r\n                tyqSDK.log(\"未配置原生矩阵广告参数\");\r\n            }\r\n            let customVIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_custom_v);\r\n            if (customVIds) {\r\n                WXCustomAd._customc_v_adunit = customVIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置原生垂直广告参数\");\r\n            }\r\n            let customHIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_custom_h);\r\n            if (customHIds) {\r\n                WXCustomAd._customc_h_adunit = customHIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置原生水平广告参数\");\r\n            }\r\n\r\n            // 激励视频广告参数\r\n            let rewardedIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_rewarded);\r\n            if (rewardedIds) {\r\n                Wechat._rewardedVideoAdUnitId = rewardedIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置激励视频广告参数\");\r\n            }\r\n\r\n            // 预加载广告\r\n            // banner广告必须要预加载后才能使用\r\n            Wechat.preLoadBanner();\r\n\r\n            // 为了减少初始化卡顿时间，激励视频广告可以不预加载\r\n            Wechat.createRewardedVideoAd();\r\n\r\n            // 为了减少初始化卡顿时间，插屏广告可以不预加载\r\n            // Wechat.createInterstitialAd();\r\n        } else if (this.channel == Channel.ANDROID_233 || this.channel == Channel.ANDROID_4399) {\r\n            //  if (NATIVE) {\r\n            console.log(\" NATIVE android 平台 initAdIds \")\r\n            window.rewardedVideoAdCallBack = (res: any) => {\r\n                //EventHelper.DispatchEvent(\"showTips\", \"获得奖励\");\r\n                console.log(\"AD_DEMO rewardedVideoAdCallBack \", res)\r\n                eventManager.send(msgac.showNotice, \" 发放视频奖励 \");\r\n                if (this.videoCallBack) {\r\n                    this.videoCallBack()\r\n                }\r\n            }\r\n\r\n            window.rewardedVideoAdFailCallBack = (res: any) => {\r\n                //EventHelper.DispatchEvent(\"showTips\", \"获得奖励\");\r\n                console.log(\"AD_DEMO rewardedVideoAdCallBack \", res)\r\n                //    eventManager.send(msgac.showNotice, \" 视频奖励 失败\");\r\n                if (this.videoCallBackFail) {\r\n                    this.videoCallBackFail()\r\n                }\r\n            }\r\n            //  jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"RewardVideoShow\", \"(Ljava/lang/String;)V\", \"展示广告\");\r\n            return\r\n            // }\r\n        }\r\n    }\r\n\r\n    public wxOnHide(res?) {\r\n        // tyqSDK.log(\"wx onHide:\", res, this.adShowType);\r\n        if (!res) {\r\n            return;\r\n        }\r\n\r\n        let mode = res.mode;\r\n        let action = res.targetAction;\r\n        let pagePath = res.targetPagePath;\r\n\r\n        // 8：跳转到小游戏内部页面WCCanvasPageViewController\r\n        // 9：跳转到其他微信小游戏\r\n        // 10：跳转到一个链接\r\n        let actions = [8, 9, 10];\r\n        if (actions.indexOf(action) == -1) {\r\n            // 不感兴趣的跳转，直接返回，比如：右上角的圆点或者home键最小化\r\n            return;\r\n        }\r\n\r\n        if (this.adShowType) {\r\n            // 已判断到的广告类型，直接使用\r\n            tyqSDK.adClickUpload(this.adShowType, mode, action, pagePath);\r\n            return;\r\n        }\r\n\r\n        // 要判断出是banner或者原生广告点击\r\n        if (action == 9) {\r\n            // 跳转其他微信小游戏\r\n            tyqSDK.adClickUpload(tyqSDKConfig.adShowTypes.bannerAndCustomAd, mode, action, pagePath);\r\n            return;\r\n        }\r\n        if (pagePath) {\r\n            // 跳转内部页或者广告链接\r\n            if (pagePath == \"WCCanvasPageViewController\"\r\n                || pagePath.indexOf(\"ad.weixin.qq.com\") != -1\r\n                || pagePath.indexOf(\"ad_biz_info\") != -1\r\n                || pagePath.indexOf(\"weixinadkey\") != -1\r\n            ) {\r\n                tyqSDK.adClickUpload(tyqSDKConfig.adShowTypes.bannerAndCustomAd, mode, action, pagePath);\r\n            }\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    public wxOnShow(res?) {\r\n        console.log(\"wx onShow:\", res);\r\n        if (this.shareTime > 0 && (new Date().getTime()) - this.shareTime >= 2000) {\r\n            this.shareListenerSuccess && this.shareListenerSuccess()\r\n        } else {\r\n            this.reportShareBehavior(5, this.strategy, 1)\r\n            this.shareListenerFail && this.shareListenerFail()\r\n        }\r\n        this.shareListenerFail = null\r\n        this.shareListenerSuccess = null\r\n        this.shareTime = 0\r\n    }\r\n\r\n    /**\r\n     * 显示底部banner轮播广告\r\n     * @param time 轮播间隔时间，单位：毫秒，默认5秒 \r\n     */\r\n    public showBannerAd(time?: number) {\r\n        this.showBannerCount++;\r\n\r\n        if (this.channel == Channel.WECHAT) {\r\n            if (this.bannerAdShowing) {\r\n                return true;\r\n            }\r\n            if (!time) {\r\n                time = 5000;\r\n            }\r\n            Wechat.showBannerTurns(time);\r\n            this.bannerAdShowing = true;\r\n        } else if (this.channel == Channel.ANDROID_4399) {\r\n            native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"showBanner\", \"(Ljava/lang/String;)Z\", \"展示banner广告\")\r\n        } else if (this.channel == Channel.VIVO_MINI_GAME) {\r\n            if (VIVO) {\r\n                VivoManager.showBannerAd()\r\n                return\r\n            }\r\n        }\r\n\r\n    }\r\n    /**\r\n     * 隐藏banner广告\r\n     */\r\n    public hideBannerAd(isForce?: boolean) {\r\n        this.showBannerCount--;\r\n        if (isForce) {\r\n            this.showBannerCount = 0;\r\n        }\r\n        if (this.showBannerCount > 0) {\r\n            return;\r\n        }\r\n        if (this.channel == Channel.WECHAT) {\r\n            Wechat.hideBannerAd();\r\n            this.bannerAdShowing = false;\r\n        } else if (this.channel == Channel.ANDROID_4399) {\r\n            native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"hideBanner\", \"(Ljava/lang/String;)Z\", \"隐藏banner广告\")\r\n        } else if (this.channel == Channel.VIVO_MINI_GAME) {\r\n            if (VIVO) {\r\n                VivoManager.hideBannerAd()\r\n                return\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * banner广告是否正在显示中\r\n     */\r\n    public isBannerAdShowing(): boolean {\r\n        return this.bannerAdShowing;\r\n    }\r\n\r\n    /**\r\n     * 显示插屏广告\r\n     */\r\n    public showInterstitialAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            Wechat.showInterstitialAd(() => {\r\n                // 关闭或者发生错误\r\n                this.adShowType = \"\";\r\n            }, () => {\r\n                // 成功展示\r\n                this.adShowType = tyqSDKConfig.adShowTypes.interstitialAd;\r\n            });\r\n        } else if (this.channel == Channel.ANDROID_233) {\r\n            this.showFullRewarded()\r\n            // native.reflection.callStaticMethod(\"com/cocos/game/MetaAdApiUtil\", \"showInterstitialAd\", \"(Ljava/lang/String;)Z\", \"展示插屏广告\")\r\n        } else if (this.channel == Channel.ANDROID_4399) {\r\n            native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"InterstitialShow\", \"(Ljava/lang/String;)Z\", \"展示插屏广告\")\r\n        }\r\n    }\r\n\r\n    private _delayTime = 0\r\n\r\n    public showDelayFullVideo() {\r\n        if (this.channel == Channel.ANDROID_233) {\r\n            let time = new Date().getTime()\r\n            // console.log(\"time - this._delayTime = \",time - this._delayTime)\r\n            if (time - this._delayTime >= 120000) {\r\n                this.showFullRewarded()\r\n                this._delayTime = time\r\n            }\r\n        }\r\n    }\r\n\r\n    public showDelayInterstitialAd() {\r\n        if (this.channel == Channel.ANDROID_4399) {\r\n            if (this._delayTime <= 0) {\r\n                this._delayTime = new Date().getTime()\r\n                return\r\n            }\r\n            let time = new Date().getTime()\r\n            if (time - this._delayTime >= 200000) {\r\n                this.showInterstitialAd()\r\n                this._delayTime = time\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示原生矩阵广告\r\n     */\r\n    public showCustomRectCenterAd(failcb = null) {\r\n        if (this.channel == Channel.WECHAT) {\r\n            //  console.log(\"showCustomRectCenterAd\")\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_rect\", EType.rect, {\r\n                centerX: 0,\r\n                centerY: 0\r\n            }, this.customAdSizeObj.rect, null, failcb);\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生矩阵广告\r\n     */\r\n    public hideCustomRectCenterAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_rect\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示原生垂直广告，显示在左右两边\r\n     */\r\n    public showCustomVerticalLeftRightAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_v_left\", EType.vertical, {\r\n                left: 0\r\n            }, this.customAdSizeObj.vertical);\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_v_right\", EType.vertical, {\r\n                right: 0\r\n            }, this.customAdSizeObj.vertical);\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生垂直广告\r\n     */\r\n    public hideCustomVerticalLeftRightAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_v_left\");\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_v_right\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示原生水平广告，显示在顶部\r\n     */\r\n    public showCustomHorizontalTopAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_h\", EType.horizontal, {\r\n                top: 0\r\n            }, this.customAdSizeObj.horizontal);\r\n        }\r\n    }\r\n    /**\r\n    * 隐藏原生水平广告\r\n    */\r\n    public hideCustomHorizontalTopAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_h\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 通用显示原生广告接口\r\n     * @param flag 标识 \r\n     * @param type 类型\r\n     * @param pos 位置信息\r\n     * @param adSize 尺寸\r\n     * @param adId 广告id\r\n     * @param failcb 失败回调\r\n     */\r\n    public showCustomAd(flag: string, type: EType, pos: IPos, adSize: { width: number, height: number }, adId?: any, failcb?: Function) {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.createCustomAd(flag, type, pos, adSize, adId, failcb);\r\n        }\r\n    }\r\n    /**\r\n     * 根据创建标识隐藏原生广告\r\n     * @param flag\r\n     */\r\n    public hideCustomAd(flag: string) {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(flag);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏所有原生广告\r\n     */\r\n    public hideCustomAllAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideAllAd();\r\n        }\r\n    }\r\n\r\n\r\n    public showFullRewarded() {\r\n        if (this.channel == Channel.ANDROID_233) {\r\n            // successCb && successCb()\r\n            console.log(\"showFullRewarded\")\r\n            native.reflection.callStaticMethod(\"com/cocos/game/MetaAdApiUtil\", \"ShowFullRewardVideoShow\", \"(Ljava/lang/String;)Z\", \"展示全屏视频广告\")\r\n            return\r\n        }\r\n    }\r\n\r\n    public reportShareBehavior(operation, strategy = 1, currentShow = null) {\r\n\r\n        if (tyqSDKConfig.isOpenBeHavior) {\r\n            if (this.shareopenID != \"\") {\r\n                Wechat.reportShareBehavior({ operation: 6, strategy: 1, inviteUser: this.shareopenID })\r\n                this.shareopenID = \"\"\r\n            }\r\n\r\n            Wechat.reportShareBehavior({ operation: operation, strategy: strategy, currentShow: currentShow })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示激励视频广告\r\n     */\r\n    public showRewardedAd(successCb?: Function, failCb?: Function, forceVideo = false) {\r\n        this.strategy = 1\r\n        if (tyqSDKConfig.isOpenBeHavior && this.channel == Channel.WECHAT) {\r\n            if (Wechat.isShareBehavior()) {\r\n                if (!forceVideo) {\r\n                    tyqAdManager.showAppMessage()\r\n                    this.shareListenerSuccess = successCb\r\n                    this.shareListenerFail = failCb\r\n                    Wechat.reportShareBehavior({ operation: 2, strategy: 1, currentShow: 1 })\r\n                    return\r\n                } else {\r\n                    this.strategy = 0\r\n                    Wechat.reportShareBehavior({ operation: 2, strategy: 0, currentShow: 0 })\r\n                }\r\n            } else {\r\n                Wechat.reportShareBehavior({ operation: 2, strategy: 1, currentShow: 0 })\r\n            }\r\n        }\r\n\r\n        if (tyqSDKConfig.isCloseAd && (playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment())) {\r\n            successCb && successCb()\r\n            return\r\n        }\r\n\r\n        if (this.channel == Channel.ANDROID_233) {\r\n            this.videoCallBack = successCb\r\n            this.videoCallBackFail = failCb\r\n            // console.log(\" NATIVE android 平台 \")\r\n            if (!native.reflection.callStaticMethod(\"com/cocos/game/MetaAdApiUtil\", \"RewardVideoShow\", \"(Ljava/lang/String;)Z\", \"展示广告\")) {\r\n                failCb && failCb();\r\n            }\r\n            return\r\n        }\r\n        if (this.channel == Channel.ANDROID_4399) {\r\n            this.videoCallBack = successCb\r\n            this.videoCallBackFail = failCb\r\n            console.log(\" NATIVE android 平台 com/cocos/game/SdkUtil4399\")\r\n            if (!native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"RewardVideoShow\", \"(Ljava/lang/String;)Z\", \"展示广告\")) {\r\n                failCb && failCb();\r\n            }\r\n            return\r\n        }\r\n\r\n        if (this.channel == Channel.WECHAT) {\r\n            Wechat.showRewardVideoAd(() => {\r\n                this.adShowType = tyqSDKConfig.adShowTypes.rewardedAd;\r\n            }).then((isSuccess) => {\r\n                this.adShowType = \"\";\r\n                if (isSuccess) {\r\n                    if (successCb) {\r\n                        successCb();\r\n                    }\r\n                } else {\r\n                    this.reportShareBehavior(5, this.strategy, 0)\r\n                    if (failCb) {\r\n                        failCb();\r\n                    }\r\n                }\r\n            }, () => {\r\n                this.adShowType = \"\";\r\n                this.reportShareBehavior(5, this.strategy, 0)\r\n                if (failCb) {\r\n                    failCb();\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this.channel == Channel.VIVO_MINI_GAME) {\r\n            VivoManager.showRewardVideoAd((state) => {\r\n                if (state == 1) {\r\n                    successCb && successCb()\r\n                } else {\r\n                    failCb && failCb(state)\r\n                }\r\n            })\r\n            return\r\n        }\r\n\r\n        failCb && failCb(2);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport const tyqAdManager = TyqAdManager.instance;\r\n","\r\nimport { Button, Component, find, Label, Node, RichText } from 'cc';\r\nimport { tyqSDK } from '../../tyqSDK';\r\nimport { tyqLayerManager } from '../manager/tyqLayerManager';\r\n\r\nexport class TyqBaseLayer extends Component {\r\n\r\n    public obj: any = {};\r\n    public cb: Function;\r\n    public layerName: string = \"DefaultLayer\";\r\n\r\n    // {路径:节点对象}\r\n    public pathNodeObj: Map<string, Node> = new Map();\r\n\r\n    onLoad() {\r\n        this.addButtonListener(this.node);\r\n        this.addPathNode(this.node, \"\");\r\n    }\r\n\r\n    addPathNode(node: Node, path: string) {\r\n        if (node != this.node) {\r\n            this.pathNodeObj.set(path, node);\r\n        }\r\n        if (path) {\r\n            path += \"/\";\r\n        }\r\n        let chs = node.children;\r\n        for (let i = 0, len = chs.length; i < len; i++) {\r\n            let pNode = chs[i];\r\n            this.addPathNode(pNode, path + pNode.name);\r\n        }\r\n    }\r\n\r\n    getNodeByPath(path: string) {\r\n        let node = this.pathNodeObj.get(path);\r\n        if (node) {\r\n            return node;\r\n        }\r\n\r\n        node = find(path, this.node);\r\n        if (node) {\r\n            this.pathNodeObj.set(path, node);\r\n            return node;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    addButtonListener(node: Node) {\r\n        if (node.getComponent(Button)) {\r\n            node.on(\"click\", this.preOnButtonClick, this);\r\n        }\r\n\r\n        let chs = node.children;\r\n        for (let i = 0, max = chs.length; i < max; i++) {\r\n            let ch = chs[i];\r\n            this.addButtonListener(ch);\r\n        }\r\n\r\n    };\r\n\r\n    preOnButtonClick(btn: any) {\r\n        let node = btn.node;\r\n        let name = node.name;\r\n        tyqSDK.log(this.layerName + \" onButtonClick \" + name);\r\n\r\n        this.onButtonClick(node, node.name);\r\n\r\n    }\r\n\r\n    onButtonClick(node: Node, name: String) {\r\n\r\n    }\r\n\r\n    openLayer(layerName: string, data?: any, cb?: Function) {\r\n        tyqLayerManager.openLayer(layerName, data, cb);\r\n    }\r\n\r\n    closeLayer() {\r\n        tyqLayerManager.closeLayer(this);\r\n    }\r\n\r\n    setString(node: Node, info: any) {\r\n        info = info + \"\";\r\n        let label = node.getComponent(Label);\r\n        if (label) {\r\n            label.string = info;\r\n            return;\r\n        }\r\n\r\n        let rich = node.getComponent(RichText);\r\n        if (rich) {\r\n            rich.string = info;\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nexport const tyqConstants = {\r\n\r\n    paths: {\r\n        layer: \"layer/\",\r\n    },\r\n\r\n    bundles: {\r\n        tyqSDKBundle: \"tyqSDKBundle\",\r\n    },\r\n\r\n    layers: {\r\n        TyqMoreGameLayer: \"TyqMoreGameLayer\",\r\n    }\r\n}\r\n","\r\nimport { find, instantiate, Prefab, UITransform } from 'cc';\r\nimport { tyqSDK } from '../../tyqSDK';\r\nimport { tyqConstants } from '../tyqConstants';\r\nimport { TyqBaseLayer } from './../layer/TyqBaseLayer';\r\nimport { tyqResManager } from './tyqResManager';\r\n\r\nclass TyqLayerManager {\r\n\r\n    private static _instance: TyqLayerManager;\r\n    private constructor() {\r\n    }\r\n    public static get instance(): TyqLayerManager {\r\n        if (this._instance == null) {\r\n            this._instance = new TyqLayerManager();\r\n        }\r\n\r\n        return this._instance;\r\n    }\r\n\r\n    openLayer(layerName: string, obj?: any, cb?: Function) {\r\n        let path = tyqConstants.paths.layer + layerName;\r\n        tyqResManager.loadAsset(tyqConstants.bundles.tyqSDKBundle, path, Prefab, null, (err, prefab) => {\r\n            if (err) {\r\n                tyqSDK.log(\"LayerManager.openLayer error:\" + err.message, layerName, err);\r\n                return;\r\n            }\r\n            let node = instantiate(prefab);\r\n            let com = node.addComponent(layerName);\r\n            com.obj = obj;\r\n            com.cb = cb;\r\n            com.layerName = layerName;\r\n\r\n            // 设置显示层级，保证在最上面\r\n            node.getComponent(UITransform).priority = 999;\r\n            node.parent = find(\"Canvas\");\r\n\r\n            tyqSDK.log(\"openLayer \" + layerName, obj);\r\n        });\r\n    }\r\n\r\n    closeLayer(layer: TyqBaseLayer) {\r\n        let layerName = layer.layerName;\r\n        layer.node.destroy();\r\n    }\r\n\r\n}\r\n\r\nexport const tyqLayerManager = TyqLayerManager.instance;\r\n","import { Node, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../tyqSDK';\r\nimport { tyqSDKConfig } from '../../tyqSDKConfig';\r\nimport { TyqBaseLayer } from './TyqBaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TyqMoreGameLayer')\r\nexport class TyqMoreGameLayer extends TyqBaseLayer {\r\n\r\n    private level: number = 0;\r\n\r\n    private isShowBanner: boolean = false;\r\n    private lastBannerShow: boolean = false;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.level = this.obj.level;\r\n\r\n        this.lastBannerShow = tyqSDK.isBannerAdShowing();\r\n        tyqSDK.hideBannerAd();\r\n\r\n        tyqSDK.showCustomHorizontalTopAd(true);\r\n        tyqSDK.showCustomRectCenterAd();\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            case \"btnGoOn\":\r\n                this.onClickBtnGoOn(node);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGoOn(node: Node) {\r\n        let val = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_banner_touch);\r\n        if (val && this.level > parseInt(val)) {\r\n            if (!this.isShowBanner) {\r\n                this.isShowBanner = true;\r\n                tyqSDK.showBannerAd();\r\n                this.scheduleOnce(() => {\r\n                    tyqSDK.hideBannerAd();\r\n                }, 1.5 + Math.random());\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.unscheduleAllCallbacks();\r\n        this.closeLayer();\r\n        if (this.cb) {\r\n            this.cb();\r\n        }\r\n\r\n        if (this.lastBannerShow) {\r\n            tyqSDK.showBannerAd();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { assetManager } from \"cc\";\r\nimport { tyqSDK } from \"../../tyqSDK\";\r\n\r\nclass TyqResManager {\r\n    private static _instance: TyqResManager;\r\n    private constructor() {\r\n    }\r\n    public static get instance(): TyqResManager {\r\n        if (this._instance == null) {\r\n            this._instance = new TyqResManager();\r\n        }\r\n\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * 从bundle中加载某个资源，优先使用缓存中的\r\n     * @param bundleName bundle名称\r\n     * @param path 资源路径\r\n     * @param assetType 资源类型\r\n     * @param onProgress 加载进度回调\r\n     * @param onComplete 加载完成回调\r\n     */\r\n    loadAsset(bundleName: string, path: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        let bundle = assetManager.getBundle(bundleName);\r\n        if (bundle && bundle.get(path, assetType)) {\r\n            if (onComplete) {\r\n                onComplete(null, bundle.get(path, assetType));\r\n            }\r\n            return;\r\n        }\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.load(path, assetType, (finish: number, total: number) => {\r\n                if (onProgress) {\r\n                    onProgress(finish, total);\r\n                }\r\n            }, (err, asset) => {\r\n                if (err) {\r\n                    tyqSDK.log(\"ResManager.loadAsset error:\" + err.message, bundleName, path, err);\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(null, asset);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n}\r\n\r\nexport const tyqResManager = TyqResManager.instance;\r\n\r\n","import { Game, game, sys } from \"cc\";\r\nimport { VIVO } from \"cc/env\";\r\nimport { tyqLayerManager } from \"./cocos/manager/tyqLayerManager\";\r\nimport { tyqConstants } from \"./cocos/tyqConstants\";\r\nimport { GNetConf } from \"./network/conf\";\r\nimport { VivoManager } from \"./platform/Vivo\";\r\nimport { EType, IPos } from \"./platform/wechat/WXCustomAd\";\r\nimport { Channel, tyqAdManager } from \"./tyqAdManager\";\r\nimport { tyqSDKConfig } from \"./tyqSDKConfig\";\r\nimport { Http } from \"./utils/weHttp\";\r\nimport { NetworkMgr } from \"./utils/weNetworkMgr\";\r\n\r\nexport interface jumpIconData {\r\n    name: string,\r\n    appid: string,\r\n    imgUrl: string,\r\n    weixin_ads_data: string,\r\n    key: string,\r\n}\r\n\r\nexport enum TyqSDKAppVersion {\r\n    VERSION_1 = 1,\r\n    VERSION_2 = 2\r\n}\r\n\r\nexport enum ChannelFlag {\r\n    // 微信小游戏-末日特工队\r\n    WECHAT_MRTGD = 1,\r\n    // 微信小游戏-机甲舞神\r\n    WECHAT_JJWS = 2,\r\n\r\n    WECHAT_Box4399 = 3,\r\n\r\n    VIVO_MINI_GAME = 4,\r\n\r\n    OPPO_MINI_GAME = 5,\r\n\r\n}\r\n\r\nclass TyqSDK {\r\n    public static readonly instance = new TyqSDK();\r\n\r\n    /**开关对象合集 */\r\n    private switch_info: any = {};\r\n    /**总开关 1是开 0是关*/\r\n    private master_switch: number = 0;\r\n    /**用户唯一openID */\r\n    private openid: string = \"\"\r\n    /**游玩时间 */\r\n    private _playTime: number = 0;\r\n\r\n\r\n    private _gameLevel: number = 0;\r\n    private item_openId = \"tyq_item_openid\";\r\n    private item_watermark = \"tyq_item_watermark_\";\r\n    private _watermark: string = \"\";\r\n    private _onlineTime = 0;\r\n\r\n    public weixin_ads_data: Array<Object>[][] = null;\r\n    public wxGameIconData: Array<jumpIconData> = [];\r\n\r\n    // 完成关卡数累计\r\n    private levelCount: number = 0;\r\n    // 服务器与本地的时间差，单位：秒\r\n    private timeDiff: number = 0;\r\n\r\n    // 打包渠道标识\r\n    public channel;\r\n\r\n    // 开始分享时间点\r\n    private shareTime: Date;\r\n    // 分享结果回调\r\n    private shareCallback: Function;\r\n\r\n    public initGame() {\r\n        this.channel = ChannelFlag.WECHAT_MRTGD;\r\n        this.setLogOpen(true);\r\n        this.setAppVersion(1);\r\n        if (tyqAdManager.getChannel() == Channel.ANDROID_233) {\r\n            this.init(\"TyqApp20230213163724\", \"1iK3I97Mx6VuTjPKgUur1RUeV2eHH3OB\"); //233apk\r\n        } else if (tyqAdManager.getChannel() == Channel.ANDROID_4399) {\r\n            this.init(\"TyqApp20230214154427\", \"o4gt48BCrJHyAxBco6aY6ydxwhPsJUxl\"); //4399apk\r\n        } else if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n            switch (this.channel) {\r\n                case ChannelFlag.WECHAT_MRTGD:\r\n                    this.init(\"TyqApp20221110115330\", \"VE3URwtUCEWyoxCdOqxDs8SxBNTnNpm1\"); // 微信小游戏\r\n                    break;\r\n                case ChannelFlag.WECHAT_JJWS:\r\n                    this.init(\"TyqApp20230302154121\", \"J1PRD20Bu8rPTtHj2A64xrTiplCRvqbu\"); // 微信小游戏\r\n                    break;\r\n                case ChannelFlag.WECHAT_Box4399:\r\n                    this.init(\"TyqApp20230214154438\", \"NXdhVUkArhQO3izZAdkMUDeYd4XVNSQl\"); //4399 游戏盒小游戏\r\n                    break;\r\n            }\r\n        }else if(tyqAdManager.getChannel() == Channel.VIVO_MINI_GAME){\r\n            this.init(\"TyqApp20230506150422\", \"RFJowvHuA3CX3ArprdniQo93OPmrN8Sq\"); //vivo小游戏\r\n        }else if(tyqAdManager.getChannel() == Channel.OPPO_MINI_GAME){\r\n            this.init(\"TyqApp20230518113406\", \"Mo9qrwx4GKfZuFPdW5qp8BZLD1qlUA8S\"); //oppo小游戏\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns 返回真实的url\r\n     */\r\n    public getUrl() {\r\n        if (this.channel == ChannelFlag.WECHAT_MRTGD) {\r\n            return {\r\n                httpUrl: GNetConf.mrtgd_HttpUrl,\r\n                wsUrl: GNetConf.mrtgd_WsUrl\r\n            }\r\n        } else if (this.channel == ChannelFlag.WECHAT_JJWS) {\r\n            return {\r\n                httpUrl: GNetConf.mrtgd_jjws_HttpUrl,\r\n                wsUrl: GNetConf.mrtgd_jjws_WsUrl\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化接口，尽量早调用\r\n     * @param appId 运营后台提供 \r\n     * @param apiKey 运营后台提供 \r\n     * @param cb 初始化结果回调 st:1成功  st:0失败\r\n     */\r\n    public init(appId: string, apiKey: string, cb?: (st: number) => void) {\r\n        tyqSDKConfig.appId = appId;\r\n        tyqSDKConfig.apiKey = apiKey;\r\n\r\n        Http.init(tyqSDKConfig.server, tyqSDKConfig.apiKey);\r\n\r\n        this._watermark = sys.localStorage.getItem(this.item_watermark) || \"\";\r\n        this.openid = this.initOpenId();\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            tyqAdManager.initAdIds();\r\n        }\r\n\r\n        this.httpPost(\"api/v1/switch_info\", null, (ret: any) => {\r\n            if (ret.data) {\r\n                this.timeDiff = ret.data.current_time_stamp - this.getTimeStamp(true);\r\n\r\n                this.switch_info = ret.data.switch_info;\r\n                this.master_switch = ret.data.master_switch;\r\n                if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n                    tyqAdManager.initAdIds();\r\n                }\r\n\r\n\r\n                if (ret.data.weixin_ads_data) {\r\n                    this.weixin_ads_data = ret.data.weixin_ads_data;\r\n                    for (let key in this.weixin_ads_data) {\r\n                        let arr = [];\r\n                        this.log('key', key);\r\n                        if (typeof (key)) {\r\n                            for (let i = 0; i < this.weixin_ads_data[key].length; i++) {\r\n                                arr = [];\r\n                                for (let keys in this.weixin_ads_data[key][i]) {\r\n                                    arr.push(this.weixin_ads_data[key][i][keys]);\r\n                                }\r\n                                var jumpIconData: jumpIconData = {\r\n                                    name: arr[0],\r\n                                    appid: arr[1],\r\n                                    imgUrl: arr[2],\r\n                                    weixin_ads_data: arr[3],\r\n                                    key: key,\r\n                                }\r\n                                this.wxGameIconData.push(jumpIconData);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.login();\r\n            if (cb) {\r\n                cb(1);\r\n            }\r\n        }, () => {\r\n            if (cb) {\r\n                cb(0);\r\n            }\r\n        });\r\n\r\n        //开始统计玩家停留时间\r\n        this._onlineTime = this.getTimeStamp();\r\n        game.on(Game.EVENT_HIDE, () => {\r\n            this.collectPlayeTime();\r\n        });\r\n        game.on(Game.EVENT_SHOW, () => {\r\n            this._onlineTime = this.getTimeStamp();\r\n            if (this.shareTime) {\r\n                let dt = new Date().getTime() - this.shareTime.getTime();\r\n                this.shareTime = undefined;\r\n                if (dt >= 3000) {\r\n                    if (this.shareCallback) {\r\n                        this.shareCallback();\r\n                        this.shareCallback = undefined;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 登陆接口，初始化接口回调成功后调用\r\n     */\r\n    private login() {\r\n        if (!this.openid) {\r\n            this.error(\"openId为空\");\r\n            return;\r\n        }\r\n\r\n        let urlQuery = tyqAdManager.getEnterUrlQuery();\r\n\r\n        let obj: any = {};\r\n        if (urlQuery) {\r\n            if (urlQuery.ads_id) {\r\n                obj.ads_id = urlQuery.ads_id;\r\n            }\r\n            if (urlQuery.source_openid) {\r\n                obj.source_openid = urlQuery.source_openid;\r\n            }\r\n            if (urlQuery.pull_in_ads_id) {\r\n                obj.pull_in_ads_id = urlQuery.pull_in_ads_id;\r\n            }\r\n        }\r\n        this.httpPost(\"api/v1/login\", obj, (res: any) => {\r\n            this.log(\"登陆：\" + this.openid);\r\n            if (res.data) {\r\n                this._watermark = encodeURIComponent(res.data.watermark);\r\n                sys.localStorage.setItem(this.item_watermark, this._watermark);\r\n            }\r\n        }, () => {\r\n            this.error(\"登录失败,网络错误\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 分享\r\n     * @param params 分享url参数 格式：key1=val1&key2=val2\r\n     * @param cb 有回调，就代表分享成功\r\n     */\r\n    share(params?: string, cb?: Function) {\r\n        if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n            this.shareTime = new Date();\r\n            this.shareCallback = cb;\r\n            wx.shareAppMessage({\r\n                query: params\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 用于区分审核版和正式版的开关参数 1和2，对应后台版本一和版本二参数设置 默认值：1\r\n     * 注意：该接口要在init接口调用之前调用才有效\r\n     * @param version \r\n     */\r\n    public setAppVersion(version: TyqSDKAppVersion) {\r\n        tyqSDKConfig.appVersion = version;\r\n    }\r\n\r\n    /**\r\n     * 直接获取开关值，优先判断总开关，总开关如果是关的，那将全部返回关闭状态\r\n     */\r\n    public getSwitchValue(str: string, df?: any): any {\r\n        if (this.master_switch == 0) {\r\n            return 0;\r\n        }\r\n        if (!this.switch_info[str]) {//不存在这个开关\r\n            this.log(str + \"开关不存在\");\r\n            return df || 0;\r\n        } else if (this.switch_info[str] == \"0\") {\r\n            return 0;\r\n        } else {\r\n            return this.switch_info[str];\r\n        }\r\n    }\r\n    /**\r\n     * 概率开关值\r\n     * @param str \r\n     * @returns \r\n     */\r\n    public getConfigProbability(str: string) {\r\n        let value = this.getSwitchValue(str);\r\n        if (!value) {\r\n            return false;\r\n        }\r\n        let rand = Math.random();\r\n        if (rand < value) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 收集用户玩游戏停留时间\r\n     */\r\n    private collectPlayeTime() {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n\r\n        var nowTime = this.getTimeStamp();\r\n        let elapsed = nowTime - this._onlineTime;\r\n        this.log(\"上传停留\", elapsed);\r\n        let info = {\r\n            duration_time: elapsed\r\n        }\r\n        this.httpPost(\"api/v1/collect_open_game_play_time\", info);\r\n    }\r\n\r\n    private httpPost(url: string, info: any, successCb?: Function, failCb?: Function) {\r\n        if (!info) {\r\n            info = {};\r\n        }\r\n        // 添加公共参数\r\n        info.appid = tyqSDKConfig.appId;\r\n        info.nonce_str = this.randomStr();\r\n        info.time_stamp = this.getTimeStamp(true) + this.timeDiff;\r\n        info.app_version = tyqSDKConfig.appVersion;\r\n        info.openid = this.openid;\r\n        info.watermark = this._watermark;\r\n\r\n        this.log(\"请求\", url, info);\r\n        NetworkMgr.xhrPost(url, info, (ret: any) => {\r\n            // 成功回调\r\n            this.log(\"请求返回\", url, ret);\r\n            if (successCb) {\r\n                successCb(ret);\r\n            }\r\n        }, () => {\r\n            // 失败回调\r\n            if (failCb) {\r\n                failCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    public wxIconData(): Array<jumpIconData> {\r\n        return this.wxGameIconData;\r\n    }\r\n    public wxJumpData(): Array<Object> {\r\n        return this.weixin_ads_data;\r\n    }\r\n\r\n    /**\r\n     * 收集用户点击跳转信息，关于跳转后台小游戏接口触活量统计\r\n     * @param event 时间名称\r\n     * @param weixin_ads_id 后台所对应图片展示位\r\n     */\r\n    public collectClickEventGame(event: string, weixin_ads_id: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let info = {\r\n            event_id: event,\r\n            weixin_ads_id: weixin_ads_id,\r\n        }\r\n        this.httpPost(\"api/v1/collect_weixin_ads_jumb_ok_cb\", info);\r\n    }\r\n\r\n    /**\r\n     * 获取随机字符串\r\n    */\r\n    private randomStr(strLen: number = 32) {\r\n        let len = strLen;\r\n        let $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'; /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/\r\n        let maxPos = $chars.length;\r\n        let pwd = '';\r\n        for (let idx = 0; idx < len; idx++) {\r\n            pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n        }\r\n        return pwd;\r\n    }\r\n\r\n    /**\r\n     * 获取时间戳\r\n     * @param isSecond true 单位：秒    默认单位：毫秒\r\n     * @returns \r\n     */\r\n    private getTimeStamp(isSecond = false) {\r\n        let time = Date.now();\r\n        if (isSecond) {\r\n            time = Math.floor(time / 1000);\r\n        }\r\n        return time;\r\n    }\r\n\r\n    /**\r\n     * openId初始化\r\n     */\r\n    private initOpenId(): string {\r\n        let openId = sys.localStorage.getItem(this.item_openId);\r\n        if (!openId) {\r\n            openId = this.randOpenId();\r\n            sys.localStorage.setItem(this.item_openId, openId);\r\n            this.log(\"注册：\" + openId);\r\n        }\r\n        this.log(\"openid=\", openId);\r\n\r\n        return openId;\r\n    }\r\n    private randOpenId() {\r\n        var s = [], hexDigits = \"0123456789abcdef\";\r\n        for (var i = 0; i < 40; i++) {\r\n            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n        }\r\n        s[14] = \"4\";\r\n        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n        s[8] = s[13] = s[18] = s[23] = s[28] = \"-\";\r\n        return s.join(\"\");\r\n    }\r\n\r\n    /**\r\n     * 埋点事件：某个关卡开始时调用\r\n     * @param level 第几个关卡\r\n     */\r\n    public eventLevelStart(level: number) {\r\n        this._gameLevel = level;\r\n        this.collectLevelInfo(1);\r\n    }\r\n    /**\r\n     * 埋点事件：关卡挑战结束时调用\r\n     * @param level 第几个关卡\r\n     * @param isWin 是否成功\r\n     */\r\n    public eventLevelEnd(level: number, isWin: boolean) {\r\n        this._gameLevel = level;\r\n        this.collectLevelInfo(isWin ? 2 : 3);\r\n    }\r\n    /**\r\n     * 自定义埋点事件\r\n     * @param eventType 事件类型 \r\n     * @param eventName 事件名称\r\n     */\r\n    public eventSendCustomEvent(eventType: string, eventName?: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let name = eventName ? eventType + \"-\" + eventName : eventType;\r\n        this.log(\"%cevent:\" + name, \"color:#FF0000\");\r\n        let info = {\r\n            event_id: name,\r\n        }\r\n        this.httpPost(\"api/v1/collect_click_event\", info);\r\n    }\r\n\r\n    public adClickUpload(adType: string, mode: string, action: number, pagePath: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        if (pagePath) {\r\n            pagePath = encodeURIComponent(pagePath);\r\n        }\r\n        this.log(\"广告点击上报：\" + adType, mode, action, pagePath);\r\n\r\n        let status = 0;\r\n        if (adType == tyqSDKConfig.adShowTypes.rewardedAd) {\r\n            status == 1;\r\n        } else if (adType == tyqSDKConfig.adShowTypes.interstitialAd) {\r\n            status = 2;\r\n        } else if (adType == tyqSDKConfig.adShowTypes.bannerAndCustomAd) {\r\n            status = 3;\r\n        }\r\n\r\n        let info: any = {};\r\n        info.status = status;\r\n        let urlQuery = tyqAdManager.getEnterUrlQuery();\r\n        if (urlQuery && urlQuery.pull_in_ads_id) {\r\n            info.pull_in_ads_id = urlQuery.pull_in_ads_id;\r\n        }\r\n        this.httpPost(\"api/v1/collect_weixin_ads_mb_act_info\", info);\r\n    }\r\n\r\n\r\n    /**\r\n     * 收集关卡游玩信息\r\n     * @param stata 1：关卡挑战开始  2：胜利  3：失败\r\n     */\r\n    private collectLevelInfo(stata: number) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let curTime = this.getTimeStamp(false);\r\n        var play_time = 0;\r\n        if (stata == 1) {\r\n            // 关卡开始，记录下开始时间点\r\n            this._playTime = curTime;\r\n        } else {\r\n            // 关卡结束，计算花费时长\r\n            play_time = curTime - this._playTime;\r\n            this._playTime = 0;\r\n        }\r\n\r\n        let info = {\r\n            game_level: this._gameLevel,\r\n            status: stata,\r\n            play_time: play_time\r\n        }\r\n        this.httpPost(\"api/v1/collect_user_play_game_level\", info);\r\n    }\r\n\r\n    /**\r\n     * 设置SDK输出日志开关，默认是关闭的\r\n     * @param isOpen \r\n     */\r\n    public setLogOpen(isOpen: boolean) {\r\n        tyqSDKConfig.isLogOpen = isOpen;\r\n    }\r\n\r\n    public log(message?: any, ...optionalParams: any[]) {\r\n        if (!tyqSDKConfig.isLogOpen) {\r\n            return;\r\n        }\r\n        if (typeof (message) == \"string\") {\r\n            console.log(\"[TyqSDK]\" + message, ...optionalParams);\r\n        } else {\r\n            console.log(\"[TyqSDK]\", message, ...optionalParams);\r\n        }\r\n    }\r\n    public error(message?: any, ...optionalParams: any[]) {\r\n        if (!tyqSDKConfig.isLogOpen) {\r\n            return;\r\n        }\r\n        console.error(\"[TyqSDK]\" + message, ...optionalParams);\r\n    }\r\n\r\n\r\n    // 广告相关接口===========================================start\r\n    /**\r\n     * 显示底部banner广告，内部有调用计数机制，调用+1，调用hideBannerAd会减1，计数为0才会真正隐藏banner广告\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showBannerAd(forceShow?: boolean) {\r\n        let time = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_banner_turns);\r\n        if (time) {\r\n            tyqAdManager.showBannerAd(parseInt(time));\r\n            return;\r\n        }\r\n        if (forceShow) {\r\n            tyqAdManager.showBannerAd();\r\n            return;\r\n        }\r\n      \r\n    }\r\n    /**\r\n     * 隐藏bannner广告\r\n     * @param isForce 是否强制将计数置为零，并强制隐藏\r\n     */\r\n    public hideBannerAd(isForce?: boolean) {\r\n        tyqAdManager.hideBannerAd(isForce);\r\n    }\r\n    /**\r\n     * banner广告是否正在显示中\r\n     */\r\n    public isBannerAdShowing(): boolean {\r\n        return tyqAdManager.isBannerAdShowing();\r\n    }\r\n\r\n    /**\r\n     * 显示插屏广告\r\n     */\r\n    public showInterstitialAd() {\r\n        tyqAdManager.showInterstitialAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生矩阵广告\r\n     */\r\n    public showCustomRectCenterAd(failcb = null) {\r\n        tyqAdManager.showCustomRectCenterAd(failcb);\r\n    }\r\n    /**\r\n     * 隐藏原生矩阵广告\r\n     */\r\n    public hideCustomRectCenterAd() {\r\n        tyqAdManager.hideCustomRectCenterAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生垂直广告，显示在左右两边\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showCustomVerticalLeftRightAd(forceShow?: boolean) {\r\n        if (forceShow || this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_custom_v_switch)) {\r\n            tyqAdManager.showCustomVerticalLeftRightAd();\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生垂直广告\r\n     */\r\n    public hideCustomVerticalLeftRightAd() {\r\n        tyqAdManager.hideCustomVerticalLeftRightAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生水平广告，显示在顶部\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showCustomHorizontalTopAd(forceShow?: boolean) {\r\n        if (forceShow || this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_custom_h_switch)) {\r\n            tyqAdManager.showCustomHorizontalTopAd();\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生水平广告\r\n     */\r\n    public hideCustomHorizontalTopAd() {\r\n        tyqAdManager.hideCustomHorizontalTopAd();\r\n    }\r\n\r\n    /**\r\n     * 通用显示原生广告接口\r\n     * @param flag 标识 \r\n     * @param type 类型 1矩阵；2横向；3竖向；4单格子\r\n     * @param pos 位置信息\r\n     * @param adSize 尺寸\r\n     * @param adId 广告id\r\n     * @param failcb 失败回调\r\n     */\r\n    public showCustomAd(flag: string, type: EType, pos: IPos, adSize?: { width: number, height: number }, adId?: any, failcb?: Function) {\r\n        if (!adSize) {\r\n            switch (type) {\r\n                case EType.rect:\r\n                    adSize = tyqAdManager.customAdSizeObj.rect;\r\n                    break;\r\n                case EType.horizontal:\r\n                    adSize = tyqAdManager.customAdSizeObj.horizontal;\r\n                    break;\r\n                case EType.vertical:\r\n                    adSize = tyqAdManager.customAdSizeObj.vertical;\r\n                    break;\r\n                default:\r\n                    adSize = tyqAdManager.customAdSizeObj.gird;\r\n                    break;\r\n            }\r\n        }\r\n        tyqAdManager.showCustomAd(flag, type, pos, adSize, adId, failcb);\r\n    }\r\n    /**\r\n     * 根据创建标识隐藏原生广告\r\n     * @param flag \r\n     */\r\n    public hideCustomAd(flag: string) {\r\n        tyqAdManager.hideCustomAd(flag);\r\n    }\r\n\r\n    /**\r\n     * 隐藏所有原生广告\r\n     */\r\n    public hideCustomAllAd() {\r\n        tyqAdManager.hideCustomAllAd();\r\n    }\r\n\r\n    /**\r\n     * 修改通用原生矩阵广告的尺寸\r\n     * 后台默认参数 行数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomRectAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.rect.width = width;\r\n        tyqAdManager.customAdSizeObj.rect.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生水平广告的尺寸\r\n     * 后台默认参数 尺寸：80%  默认数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomHorizontalAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.horizontal.width = width;\r\n        tyqAdManager.customAdSizeObj.horizontal.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生垂直广告的尺寸\r\n     * 后台默认参数 尺寸：90%  默认数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomVerticalAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.vertical.width = width;\r\n        tyqAdManager.customAdSizeObj.vertical.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生单个格子广告的尺寸\r\n     * 后台默认参数 单个格子 尺寸：90%\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomGridAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.grid.width = width;\r\n        tyqAdManager.customAdSizeObj.grid.height = height;\r\n    }\r\n\r\n    /**\r\n     * 显示激励视频广告\r\n     * @param info 观看激励视频位置描述，如果有值，会自动埋点该位置的观看激励视频与观看完激励视频事件\r\n     * @param cb 结果回调，参数st  1成功，发放奖励   其他失败\r\n     */\r\n    public showRewardedAd(info?: string, cb?: (st: number) => void) {\r\n        if (info) {\r\n            this.eventSendCustomEvent(tyqSDKConfig.eventNames.rewardedAdStart + info);\r\n        }\r\n        tyqAdManager.showRewardedAd(() => {\r\n            if (info) {\r\n                this.eventSendCustomEvent(tyqSDKConfig.eventNames.rewardedAdSuccess + info);\r\n            }\r\n            if (cb) {\r\n                cb(1);\r\n            }\r\n        }, (state) => {\r\n            if (cb) {\r\n                if(state){\r\n                    cb(state);\r\n                }else{\r\n                    cb(0);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // 广告相关接口===========================================end\r\n    /**\r\n     * 进入加载页，需要调用该接口\r\n     */\r\n    public onShowLoadingLayer() {\r\n        this.eventSendCustomEvent(tyqSDKConfig.eventNames.enterLoadingLayer);\r\n    }\r\n\r\n    /**\r\n     * 游戏显示主界面，需要调用该接口\r\n     */\r\n    public onShowHomeLayer() {\r\n        this.eventSendCustomEvent(tyqSDKConfig.eventNames.enterHomeLayer);\r\n\r\n        let val = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_show_main_layer);\r\n        if (!val) {\r\n            return;\r\n        }\r\n        val = parseInt(val);\r\n        if (val == 1) {\r\n            // 显示插屏广告\r\n            this.showInterstitialAd();\r\n        } else if (val == 2) {\r\n            // 显示矩阵广告\r\n            this.showCustomRectCenterAd(null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 完成某局或者某个关卡，需要调用该接口，不管成功或者失败，都要调用\r\n     * @param level 当前进行到的关卡\r\n     */\r\n    public addLevelCount(level: number) {\r\n        let startLevel = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_reward_level);\r\n        if (!startLevel) {\r\n            return;\r\n        }\r\n\r\n        startLevel = parseInt(startLevel);\r\n        if (level <= startLevel) {\r\n            return;\r\n        }\r\n\r\n        this.levelCount++;\r\n        let val = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_level_count);\r\n        if (val) {\r\n            val = parseInt(val);\r\n            if (this.levelCount >= val) {\r\n                this.levelCount = 0;\r\n                this.showRewardedAd();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 游戏显示结算界面，需要调用该接口\r\n     */\r\n    public onShowSettlementLayer() {\r\n        this.showInterstitialAd();\r\n    }\r\n\r\n    /**\r\n     * 在游戏结算界面展示之前，调用该接口，显示SDK的【更多游戏】界面\r\n     * @param level 当前进行到的关卡\r\n     * @param closeCb 更多游戏界面关闭后的回调，继续执行展示游戏结算界面的逻辑\r\n     */\r\n    public showMoreGameLayer(level: number, closeCb: Function) {\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            return\r\n        }\r\n        let startLevel = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level);\r\n        if (!startLevel) {\r\n            closeCb();\r\n            return;\r\n        }\r\n\r\n        startLevel = parseInt(startLevel);\r\n        if (level <= startLevel) {\r\n            closeCb();\r\n            return;\r\n        }\r\n\r\n        let obj: any = {};\r\n        obj.level = level;\r\n        tyqLayerManager.openLayer(tyqConstants.layers.TyqMoreGameLayer, obj, () => {\r\n            closeCb();\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const tyqSDK = TyqSDK.instance;\r\n","export const tyqSDKConfig = {\r\n    /**游戏名称 */\r\n    gameName: '末日特工队',\r\n    /**游戏版本号 */\r\n    gameVersion: '1.0.3',\r\n    /**用于区分审核版和正式版，每次上传都需要改这个值 1和2*/\r\n    appVersion: 1,\r\n    //后台appid\r\n    appId: '',\r\n    //后台分配的key \r\n    apiKey: '',\r\n    //后台app秘钥\r\n    AppSecret: \"1\",\r\n    // SDK服务端域名\r\n    server: 'https://api.game.xmtyq.com/china_app_game_sdk/',\r\n\r\n    // SDK日志输出开关\r\n    isLogOpen: false,\r\n\r\n    //是否关闭视频广告\r\n    isCloseAd: true,\r\n\r\n    /**\r\n     * 是否开启激励托管\r\n     */\r\n    isOpenBeHavior: false,\r\n\r\n    // 后台参数key值\r\n    paramsKeys: {\r\n        // 各种类型的广告id\r\n        tyq_ad_banners: \"tyq_ad_banners\",\r\n        tyq_ad_interstitial: \"tyq_ad_interstitial\",\r\n        tyq_ad_custom_rect: \"tyq_ad_custom_rect\",\r\n        tyq_ad_custom_v: \"tyq_ad_custom_v\",\r\n        tyq_ad_custom_h: \"tyq_ad_custom_h\",\r\n        tyq_ad_rewarded: \"tyq_ad_rewarded\",\r\n\r\n        // banner轮流展示间隔时间（单位：毫秒，0表示关闭）\r\n        tyq_banner_turns: \"tyq_banner_turns\",\r\n        // 界面顶部水平格子广告（0：关闭 1：开启）\r\n        tyq_custom_h_switch: \"tyq_custom_h_switch\",\r\n        // 界面左右两侧垂直格子广告（0：关闭 1：开启）\r\n        tyq_custom_v_switch: \"tyq_custom_v_switch\",\r\n        // 进入主界面强弹插屏或者矩阵(0：关闭，1：插屏，2：矩阵格子）\r\n        tyq_show_main_layer: \"tyq_show_main_layer\",\r\n        // 完成（包括失败）任意局数强弹激励视频，与tyq_reward_level配合使用（0：关闭，>=1：局数）\r\n        tyq_level_count: \"tyq_level_count\",\r\n        // 强弹激励视频在指定关卡后才展示，不包括本身（0：关闭，>=1：关卡数）\r\n        tyq_reward_level: \"tyq_reward_level\",\r\n        // 底部bannner广告误触开关，与参数tyq_more_game_level配合使用(0：关闭，>=1：第x关之后开启，不包括x）\r\n        tyq_banner_touch: \"tyq_banner_touch\",\r\n        // 控制更多游戏页面在指定关卡后(0：关闭，>=1：第x关之后开启，不包括x）\r\n        tyq_more_game_level: \"tyq_more_game_level\",\r\n        tyq_ad_custom_rect_switch: \"tyq_ad_custom_rect_switch\"\r\n\r\n    },\r\n\r\n    // 广告点击类型\r\n    adShowTypes: {\r\n        rewardedAd: \"激励视频广告点击\",\r\n        interstitialAd: \"插屏广告点击\",\r\n        bannerAndCustomAd: \"banner与原生广告点击\",\r\n    },\r\n\r\n    eventNames: {\r\n        enterLoadingLayer: \"进入加载页\",\r\n        enterHomeLayer: \"进入主界面\",\r\n        rewardedAdStart: \"观看激励视频-\",\r\n        rewardedAdSuccess: \"观看完激励视频-\",\r\n    }\r\n}\r\n\r\n","import { Component, Game, game, instantiate, js, sys, tween, v3 } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { GLoginState } from \"../../tyqSDK/network/conf\";\r\nimport CronCtr from \"../../tyqSDK/network/CronCtr\";\r\nimport ServerCtr from \"../../tyqSDK/network/ServerCtr\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { constants } from \"../data/constants\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { audioManager } from \"../manager/audioManager\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { eventManager } from \"../manager/eventManager\";\r\nimport { RedPointLogicMgr, RPointMask } from \"../manager/RedPointLogicMgr\";\r\nimport { playerModel } from \"./playerModel\";\r\n\r\n\r\nexport interface LevelDataItem {\r\n    Level: number   //\r\n    Time: number //  最大生存时间 ，单位秒\r\n    ReceiveState: number[] //[0,0,0] //3个级别章节奖励领取状态。0:未领取 1：已领取\r\n}\r\n\r\nexport interface PropItem {\r\n    Id: number\r\n    Num: number\r\n}\r\n\r\nexport class UserData extends Component {\r\n\r\n    private static _instance: UserData = null\r\n\r\n    public $localKey: string = \"UserData\";\r\n    private $time: number = null;\r\n\r\n    /**关卡 */\r\n    private $roleLv: number = 1\r\n\r\n    /**关卡 */\r\n    private $roleExp: number = 1\r\n\r\n    /**体力 */\r\n    private $power: number = 30\r\n\r\n    /**体力上限 */\r\n    private _maxPower: number = 30\r\n\r\n    private _powerRevoverTime = 60\r\n    /**体力倒计时 */\r\n    private $powerTime: number = 0\r\n\r\n    /** 宝石 */\r\n    private $baoShi: number = 1000\r\n\r\n    private $optStone: number = 0;\r\n    private $dayAct: number = 0;\r\n\r\n    /** 金币 */\r\n    private $coin: number = 1000\r\n\r\n    // 小手指引\r\n    private $mapHand: number = 0;\r\n    // 攻击力\r\n    private _attack: number = 0\r\n    // 生命值\r\n    private _life: number = 0\r\n\r\n    private $curMap = 1\r\n\r\n    private $openLevel = 1\r\n\r\n    private $levelData = []\r\n\r\n    private $mapData: any\r\n\r\n    private $propData = [{ id: 301, num: 0, iswear: 0 }]\r\n\r\n    private $wearProp = [0, 0, 0, 0, 0, 0]\r\n\r\n    private $playerData: any = {};\r\n\r\n    private $patrolStartTime = 0\r\n\r\n    private $patrolRewardProp = []\r\n    private $patrolRewardPropArr = []\r\n\r\n    private $heroSkin = 2001\r\n\r\n    public $drawNormalNum = 0\r\n    public $drawGradeNum = 0\r\n\r\n    // 语言设置，本地化\r\n    public $localization:string = null;\r\n\r\n    // 爬塔\r\n    public $towerWeaponIdArr = [10130, 10135, 10140, 10145, 10150, 10155, 10160, 10165];\r\n    public $towerWeaponId = 0;\r\n    public $towerWeaponLvObj = {};\r\n    public $towerMapIdObj = {};\r\n\r\n\r\n    public $pyramidState: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    public $pyramidDrawTime = 0\r\n\r\n    public $friendPassCnt = 0 //好友通关数\r\n    public $videoCalCnt = 0 //视频累计\r\n\r\n    public $freeDraw = 0\r\n\r\n    public static getInstance() {\r\n        if (this._instance == null) {\r\n            this._instance = new UserData()\r\n            this._instance.onInit()\r\n        }\r\n        return this._instance\r\n    }\r\n\r\n    onInit() {\r\n        //使用服务端数据\r\n        console.log(\"-----比较服务端数据版本号---\", ServerCtr.GetInstance().dataVersion, ServerCtr.GetInstance().serverDataVersion)\r\n        if (ServerCtr.GetInstance().loginState == GLoginState.loginWithAccount) {\r\n            if (ServerCtr.GetInstance().dataVersion < ServerCtr.GetInstance().serverDataVersion) {\r\n                this.loadServerData(ServerCtr.GetInstance().serverData)\r\n            } else {\r\n                this.load();\r\n            }\r\n        } else {\r\n            this.load();\r\n        }\r\n\r\n        // console.error(\"-----跟踪----\")\r\n\r\n        this.$time = 0;\r\n        this.initEvent();\r\n        this.setBaseConfig()\r\n        //   this.$wearProp = [10001, 0, 0, 10003, 0, 0]\r\n        this.afterLoadData();\r\n\r\n\r\n        //上传数据\r\n        if (ServerCtr.GetInstance().dataVersion > ServerCtr.GetInstance().serverDataVersion) {\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        }\r\n\r\n        this.schedule(() => {\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        }, 300)\r\n\r\n    }\r\n\r\n\r\n    setBaseConfig() {\r\n        this._maxPower = designManager.config.energyMax\r\n        this._powerRevoverTime = designManager.config.energyRecoverTime\r\n        this.updateRoleAtkHp()\r\n    }\r\n\r\n    afterLoadData() {\r\n        if (!this.$towerWeaponId) {\r\n            this.$towerWeaponId = this.$towerWeaponIdArr[0];\r\n        }\r\n        if (this.getPropById(2001) <= 0) {\r\n            this.addPropNum(2001, 1);\r\n        }\r\n    }\r\n\r\n    setConfig() {\r\n        this.$baoShi = designManager.config.basicGem\r\n        this.$coin = designManager.config.basicGold\r\n        this.$propData = [{ id: 301, num: 0, iswear: 0 }]\r\n        this.$wearProp = [0, 0, 0, 0, 0, 0]\r\n        this.$levelData = []\r\n        this.$curMap = 1\r\n        this.$openLevel = 1\r\n        this.$power = designManager.config.energyMax\r\n\r\n        this.$mapData = null\r\n        this.$roleExp = 0\r\n        this.$roleLv = 1\r\n        this.$mapHand = 0;\r\n        this.$patrolRewardProp = []\r\n        this.$patrolRewardPropArr = []\r\n\r\n        this.$patrolStartTime = (new Date()).getTime()\r\n\r\n        this.$drawNormalNum = 0\r\n        this.$drawGradeNum = 0\r\n\r\n        this.$pyramidState = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n\r\n        this.$friendPassCnt = 0;\r\n        this.$videoCalCnt = 0;\r\n    }\r\n\r\n    public getHeroSkin(id: number = 0) {\r\n        if (!id) {\r\n            id = this.$heroSkin;\r\n        }\r\n        let data = designManager.getRowById(constants.tableName.prop, id)\r\n        if (data) {\r\n            return \"skin\" + data.p2\r\n        }\r\n        return \"skin1\"\r\n    }\r\n\r\n    public set heroSkin(skinID) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            if (this.$propData[index].id == skinID && this.$propData[index].num > 0) {\r\n                this.$heroSkin = skinID\r\n                return\r\n            }\r\n        }\r\n    }\r\n\r\n    public get heroSkin() {\r\n        return this.$heroSkin;\r\n    }\r\n\r\n    public isHaveProp(id: number | any[]) {\r\n        if (typeof (id) === \"number\") {\r\n            for (let index = 0; index < this.$propData.length; index++) {\r\n                if (this.$propData[index].id == id && this.$propData[index].num > 0) {\r\n                    return true\r\n                }\r\n            }\r\n        } else {\r\n            let havenum = 0\r\n            for (let i = 0; i < id.length; i++) {\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    if (this.$propData[index].id == id[i] && this.$propData[index].num > 0) {\r\n                        havenum++\r\n                    }\r\n                }\r\n            }\r\n            if (havenum >= id.length) {\r\n                return true\r\n            }\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    public get roleLv() {\r\n        return this.$roleLv;\r\n    }\r\n\r\n    public get power() {\r\n        this.checkPowerTime()\r\n        return this.$power;\r\n    }\r\n\r\n    public towerWeaponAddLv() {\r\n        let ret: any = {};\r\n        let lv = this.getWeaponLv(this.$towerWeaponId);\r\n        let nextRow = designManager.getRowById(constants.tableName.weaponOpt, lv + 1);\r\n        if (!nextRow) {\r\n            // 已满级\r\n            ret.st = 2;\r\n            return ret;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        let num = this.getPropNumById(row.propId);\r\n        if (num < row.propNum) {\r\n            // 消耗道具不足\r\n            ret.st = 3;\r\n            ret.propId = row.propId;\r\n            return ret;\r\n        }\r\n\r\n        this.addPropNum(row.propId, -row.propNum);\r\n        this.$towerWeaponLvObj[this.$towerWeaponId] = lv + 1;\r\n\r\n        ret.st = 1;\r\n\r\n        return ret;\r\n\r\n    }\r\n\r\n    public getTowerMapInfo(mapId: number) {\r\n        let info = this.$towerMapIdObj[mapId];\r\n        if (!info) {\r\n            info = {\r\n                floor: 1\r\n            };\r\n        }\r\n\r\n        return info;\r\n    }\r\n    public addTowerMapFloor(mapId: number) {\r\n        let info = this.getTowerMapInfo(mapId);\r\n        let nextFloor = info.floor + 1;\r\n        if (!designManager.getRowById(constants.tableName.towerFloor, nextFloor)) {\r\n            // 已到达最顶层\r\n            return;\r\n        }\r\n        info.floor++;\r\n        this.$towerMapIdObj[mapId] = info;\r\n    }\r\n\r\n    public getWeaponLv(id: number = this.$towerWeaponId) {\r\n        let lv = this.$towerWeaponLvObj[id];\r\n        if (!lv) {\r\n            lv = 1;\r\n        }\r\n\r\n        return lv;\r\n    }\r\n\r\n    public checkPowerTime() {\r\n        if (this.$power < this._maxPower) {\r\n            if (this.$powerTime == 0) {\r\n                this.$powerTime = new Date().getTime()\r\n            } else {\r\n                let time = new Date().getTime() - this.$powerTime\r\n                let num = Math.floor(time / 1000 / this._powerRevoverTime)\r\n                if (num > 0) {\r\n                    this.$power += num\r\n                    this.$power = Math.min(this._maxPower, Math.max(0, this.$power))\r\n                    this.$powerTime = this.$powerTime + num * this._powerRevoverTime * 1000\r\n                }\r\n            }\r\n        } else {\r\n            this.$powerTime = 0\r\n        }\r\n    }\r\n\r\n    public getCountTime() {\r\n        if (this.$power < this._maxPower) {\r\n            return Math.max(0, Math.min(this._powerRevoverTime, this._powerRevoverTime - (new Date().getTime() - this.$powerTime) / 1000))\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public usePower(num) {\r\n        this.$power += num\r\n        this.$power = Math.min(this._maxPower, Math.max(0, this.$power))\r\n        this.checkPowerTime()\r\n    }\r\n\r\n    public get baoshi() {\r\n        return this.$baoShi\r\n    }\r\n\r\n    public useBaoShi(num: number, update = false) {\r\n        this.$baoShi += num;\r\n        this.$baoShi = Math.max(0, this.$baoShi);\r\n        if (update) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n    }\r\n\r\n    public get optStone() {\r\n        return this.$optStone;\r\n    }\r\n    public useOptStone(num: number) {\r\n        this.$optStone += num;\r\n        this.$optStone = Math.max(0, this.$optStone);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get dayAct() {\r\n        return this.$dayAct;\r\n    }\r\n    public set dayAct(num: number) {\r\n        this.$dayAct = num;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public useDayAct(num: number) {\r\n        this.$dayAct += num;\r\n        this.$dayAct = Math.max(0, this.$dayAct);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get energy() {\r\n        return playerModel.energyObj.num;\r\n    }\r\n    public useEnergy(num: number) {\r\n        playerModel.energyObj.num += num;\r\n        playerModel.energyObj.num = Math.max(0, playerModel.energyObj.num);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public checkAndUseBaoshi(num: number, update = false) {\r\n        if (this.$baoShi >= num) {\r\n            this.useBaoShi(0 - num, update)\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    public useCoin(num: number, update = false) {\r\n        this.$coin += num\r\n        this.$coin = Math.max(0, this.$coin)\r\n        if (update) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public cheackAndUseCoin(num: number, update = false) {\r\n        if (this.$coin >= num) {\r\n            this.useCoin(0 - num, update)\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    public get coin() {\r\n        return this.$coin\r\n    }\r\n\r\n    public get attack() {\r\n        return this._attack\r\n    }\r\n\r\n    public get life() {\r\n        return this._life\r\n    }\r\n\r\n    public addExp(num) {\r\n        this.$roleExp += num\r\n        let roleData = designManager.getTable(constants.tableName.heroLevel)\r\n        for (let index = this.roleLv + 1; index < roleData.length; index++) {\r\n            let element = roleData[index - 1];\r\n            if (this.$roleExp >= element.exp) {\r\n                this.$roleLv = index\r\n                this.updateRoleAtkHp()\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public updateRoleAtkHp() {\r\n        let roleData = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv)\r\n        this._attack = roleData.atk\r\n        this._life = roleData.hp\r\n\r\n        for (let i = 0; i < this.$wearProp.length; i++) {\r\n            if (this.$wearProp[i] > 0) {\r\n                let propData = designManager.getRowById(constants.tableName.prop, this.$wearProp[i])\r\n                if (propData && propData.atk) {\r\n                    this._attack += propData.atk\r\n                }\r\n                if (propData && propData.hp) {\r\n                    this._life += propData.hp\r\n                }\r\n            }\r\n        }\r\n\r\n        let suitInfo = this.getSuitPercentAdd();\r\n        this._attack *= 1 + suitInfo.atk;\r\n        this._life *= 1 + suitInfo.hp;\r\n        this._attack = Math.floor(this._attack)\r\n        this._life = Math.floor(this._life)\r\n    }\r\n\r\n    public getSuitPercentAdd() {\r\n        let suitData = this.getSuitId()\r\n        let atkAdd = 0;\r\n        let hpAdd = 0;\r\n        if (suitData != 0) {\r\n            let suitId = suitData[0]\r\n            let suitNum = suitData[1]\r\n            let suitAttr = designManager.getRowById(constants.tableName.suit, suitId)\r\n            if (suitNum >= 5) {\r\n                atkAdd = suitAttr.effectAtk_5\r\n                hpAdd = suitAttr.effectHP_5\r\n            } else if (suitNum >= 3) {\r\n                atkAdd = suitAttr.effectAtk_3\r\n                hpAdd = suitAttr.effectHP_3\r\n            }\r\n        }\r\n        let ret = {\r\n            atk: atkAdd / 100,\r\n            hp: hpAdd / 100\r\n        };\r\n\r\n        return ret;\r\n    }\r\n\r\n    public weaponOptLvEffect(val: number, lv: number) {\r\n        let optRow = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        if (optRow) {\r\n            val = val * (1 + optRow.atk / 100);\r\n            val = Math.ceil(val);\r\n        }\r\n        return val;\r\n    }\r\n\r\n    public getTowerRoleProInfo(isEnter: boolean = false) {\r\n        let roleData = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv);\r\n\r\n        // 等级加成\r\n        let atk = roleData.atk;\r\n        let hp = roleData.hp;\r\n\r\n        // 装备加成\r\n        for (let i = 0; i < this.$wearProp.length; i++) {\r\n            let id = this.$wearProp[i];\r\n            if (i == 0) {\r\n                id = this.$towerWeaponId;\r\n                if (isEnter) {\r\n                    id = 0;\r\n                }\r\n            }\r\n            if (id > 0) {\r\n                let propData = designManager.getRowById(constants.tableName.prop, id);\r\n                if (propData && propData.atk) {\r\n                    let val = propData.atk;\r\n                    if (i == 0) {\r\n                        let lv = this.getWeaponLv(id);\r\n                        val = this.weaponOptLvEffect(val, lv);\r\n                    }\r\n                    atk += val;\r\n                }\r\n                if (propData && propData.hp) {\r\n                    hp += propData.hp;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 套装加成\r\n        let suitInfo = this.getSuitPercentAdd();\r\n        atk *= 1 + suitInfo.atk;\r\n        hp *= 1 + suitInfo.hp;\r\n\r\n        atk = Math.floor(atk);\r\n        hp = Math.floor(hp);\r\n\r\n        return {\r\n            atk: atk,\r\n            hp: hp\r\n        };\r\n\r\n    }\r\n\r\n    public get roleExp() {\r\n        return this.$roleExp\r\n    }\r\n\r\n    public getNextLevelExp() {\r\n        let nextdata = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv + 1)\r\n        if (nextdata) {\r\n            return nextdata.exp\r\n        }\r\n        return this.$roleExp\r\n    }\r\n\r\n    public setCurMap(mapid) {\r\n        this.$curMap = mapid\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public getCurMap() {\r\n        return this.$curMap\r\n    }\r\n\r\n    public set openLevel(level) {\r\n        this.$openLevel = level\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get openLevel() {\r\n        //return 2\r\n        return this.$openLevel\r\n    }\r\n\r\n    public set mapData(data: any) {\r\n        this.$mapData = data\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get mapData() {\r\n        return this.$mapData\r\n    }\r\n\r\n    public set playerData(data: any) {\r\n        this.$playerData = data;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public get playerData() {\r\n        return this.$playerData;\r\n    }\r\n\r\n    public set mapHand(st: number) {\r\n        this.$mapHand = st;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public get mapHand() {\r\n        return this.$mapHand;\r\n    }\r\n\r\n    public get wearProp() {\r\n        return this.$wearProp\r\n    }\r\n\r\n    /**\r\n     *  穿戴装备\r\n     * @param propdata cj\r\n     * @returns \r\n     */\r\n    public setWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) { //相同装备\r\n                return\r\n            } else if (this.$wearProp[propdata.wearIndex - 1] == 0) { //空槽装备\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            } else { //替换装备\r\n                this.setPropWearById(this.$wearProp[propdata.wearIndex - 1], 0)\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            }\r\n            RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n            this.updateRoleAtkHp()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 卸下装备\r\n     */\r\n    public unWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                this.$wearProp[propdata.wearIndex - 1] = 0\r\n                this.setPropWearById(propdata.id, 0)\r\n                this.updateRoleAtkHp()\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n                ServerCtr.GetInstance().addDataVersion()\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 自动判断是穿戴 还是 卸下 操作\r\n     * @param propdata \r\n     */\r\n    public autoWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                this.$wearProp[propdata.wearIndex - 1] = 0\r\n                this.setPropWearById(propdata.id, 0)\r\n            } else {\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            }\r\n            this.updateRoleAtkHp()\r\n            RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n            ServerCtr.GetInstance().addDataVersion()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 检查当前装备是否穿戴在身上\r\n     * @param propdata \r\n     * @returns \r\n     */\r\n    public checkWearProp(propdata) {\r\n        if (propdata) {\r\n            return this.$wearProp[propdata.wearIndex - 1] == propdata.id\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查当前装备是否 比穿戴在身上的 装备更好\r\n     * @param propId \r\n     * @returns \r\n     */\r\n    public checkThisPropBestToWear(propId) {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, propId)\r\n        if (propdata.wearIndex > 0) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    let item = designManager.getRowById(constants.tableName.prop, this.$propData[index].id);\r\n                    if (item.wearIndex == propdata.wearIndex) {\r\n                        if (propdata.quality < item.quality) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n                return true\r\n            }\r\n\r\n            let wearpropdata = designManager.getRowById(constants.tableName.prop, this.$wearProp[propdata.wearIndex - 1])\r\n            if (wearpropdata.quality < propdata.quality) {\r\n\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    let item = designManager.getRowById(constants.tableName.prop, this.$propData[index].id);\r\n                    if (item.wearIndex == propdata.wearIndex) {\r\n                        if (propdata.quality < item.quality) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查是否有可以穿戴的装备\r\n     * @returns \r\n     */\r\n    public checkBestPropToWear() {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            let propdata = designManager.getRowById(constants.tableName.prop, value.id)\r\n            if (propdata.wearIndex > 0) {\r\n                if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                    return true\r\n                }\r\n\r\n                let wearpropdata = designManager.getRowById(constants.tableName.prop, this.$wearProp[propdata.wearIndex - 1])\r\n                if (wearpropdata.quality < propdata.quality) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     *  获得 装备\r\n     * @param id 装备ID\r\n     * @param num 获得数量\r\n     * @returns \r\n     */\r\n    public setPropById(id, num) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                value.num += num\r\n                return\r\n            }\r\n        }\r\n        this.$propData.push({ id: id, num: num, iswear: 0 })\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    /**\r\n     * 合成装备\r\n     * @param blessId 合成装备ID\r\n     * @param getPropId 获得装备ID\r\n     * @param needNum 需要数量\r\n     */\r\n    public blessProp(blessId, getPropId, needNum) {\r\n        this.setPropById(getPropId, 1)\r\n        this.setPropById(blessId, needNum)\r\n        RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_BlessProp, false)\r\n\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            if (this.$wearProp[index] == blessId) {\r\n                this.$wearProp[index] = getPropId\r\n                this.setPropWearById(getPropId, 1)\r\n                this.setPropWearById(blessId, 0)\r\n                this.updateRoleAtkHp()\r\n            }\r\n        }\r\n        eventManager.send(msgac.updateDropData)\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    /**\r\n     * 检查 是否有可以合成的装备\r\n     * @returns \r\n     */\r\n    public checkPropCanBless() {\r\n        let arr = this.$propData\r\n        for (let index = 0; index < arr.length; index++) {\r\n            if (arr[index].num >= 3) {\r\n                let curProp = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查当前章节是否可以领取宝箱\r\n     */\r\n    public checkChapterCanReward() {\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        for (let i = 0; i < 3; i++) {\r\n            if (leveldata.Time >= (i * 5 + 5) * 60) {\r\n                if (leveldata.ReceiveState[i] == 0) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    public setPropWearById(id, isWear) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                value.iswear = isWear\r\n                return\r\n            }\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n\r\n    public _isShowOpenLevel = false\r\n    /**\r\n     * 保存关卡完成情况的数据\r\n     * @param data \r\n     */\r\n    public setLevelData(data: LevelDataItem) {\r\n        let row = designManager.getRowById(constants.tableName.map, data.Level);\r\n        if (row.type != constants.mapTypes.main) {\r\n            return;\r\n        }\r\n        let index = data.Level - 1\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n        if (this.$levelData[index] == null) {\r\n            this.$levelData[index] = data\r\n        } else {\r\n            if (data.Time > this.$levelData[index].Time) {\r\n                this.$levelData[index].Time = data.Time\r\n            }\r\n        }\r\n        if (this.$levelData[index].Time >= 15 * 60) {\r\n            if (this.$openLevel <= data.Level) {\r\n                let nextId = this.$openLevel + 1;\r\n                if (designManager.getRowById(constants.tableName.map, nextId)) {\r\n                    this.$openLevel++\r\n                    this.$curMap = this.$openLevel\r\n                    this._isShowOpenLevel = true\r\n                }\r\n                ServerCtr.GetInstance().addDataVersion()\r\n            }\r\n        }\r\n    }\r\n\r\n    public getLevelData(level) {\r\n        let index = level - 1\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n\r\n        if (this.$levelData[index]) {\r\n            return this.$levelData[index]\r\n        }\r\n\r\n        let ld: LevelDataItem = {\r\n            Level: level,\r\n            Time: 0,\r\n            ReceiveState: [0, 0, 0],\r\n        }\r\n\r\n        UserData.getInstance().setLevelData(ld)\r\n        return ld\r\n    }\r\n\r\n    public get propData() {\r\n        return this.$propData\r\n    }\r\n\r\n    public getPropSort() {\r\n        let dataArr = [];\r\n        for (let i in this.$propData) {\r\n            let prop = this.$propData[i];\r\n            let row = designManager.getRowById(constants.tableName.prop, prop.id);\r\n            if (row.type == 8 || row.type == 11) {\r\n                dataArr.push(prop);\r\n            }\r\n        }\r\n        let equipSort = (a: { id }, b: { id }) => {\r\n            let equipDataA = designManager.getRowById(constants.tableName.prop, a.id)\r\n            let equipDataB = designManager.getRowById(constants.tableName.prop, b.id)\r\n            return equipDataA.wearIndex - equipDataB.wearIndex;\r\n        }\r\n        dataArr.sort(equipSort);\r\n        return dataArr;\r\n    }\r\n\r\n    public getPropById(id) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                return value.num\r\n            }\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public getSuitId() {\r\n        let suitId = []\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            let element = this.$wearProp[index];\r\n            if (element > 0) {\r\n                let propData1 = designManager.getRowById(constants.tableName.prop, element)\r\n                if (!suitId[propData1.suit_id]) {\r\n                    suitId[propData1.suit_id] = 0\r\n                }\r\n                suitId[propData1.suit_id]++\r\n            }\r\n        }\r\n        for (let index = 0; index < suitId.length; index++) {\r\n            if (suitId[index] >= 3) {\r\n                return [index, suitId[index]]\r\n            }\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public getSuitNum(propData) {\r\n        let suitId = propData.suit_id\r\n        let num = 0\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            let element = this.$wearProp[index];\r\n            if (element > 0) {\r\n                let propData1 = designManager.getRowById(constants.tableName.prop, element)\r\n                if (propData1.suit_id == suitId) {\r\n                    num++\r\n                }\r\n            }\r\n        }\r\n        return num\r\n    }\r\n\r\n    public tobePropItem(arr: any[]) {\r\n        let propArr = []\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let prop: PropItem = {\r\n                Id: arr[i][0],\r\n                Num: arr[i][1],\r\n            }\r\n            propArr.push(prop)\r\n        }\r\n        return propArr\r\n    }\r\n\r\n    public getPropNumById(id: number) {\r\n        let num = 0;\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        switch (row.type) {\r\n            case 1:\r\n                num = this.$coin;\r\n                break;\r\n            case 9:\r\n                num = this.$baoShi;\r\n                break;\r\n            case 10:\r\n                num = this.$roleExp;\r\n                break;\r\n            case 12:\r\n                num = this.$power;\r\n                break;\r\n            case 14:\r\n                num = this.$optStone;\r\n                break;\r\n            case 15:\r\n                num = this.$dayAct;\r\n                break;\r\n            default:\r\n                for (let i in this.$propData) {\r\n                    let prop = this.$propData[i];\r\n                    if (prop.id == id) {\r\n                        num = prop.num;\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return num;\r\n    }\r\n\r\n    /**\r\n     * 获得/扣减道具\r\n     * @param id 道具id \r\n     * @param num 道具数量，负数表示 扣减\r\n     */\r\n    public addPropNum(id: number, num: number) {\r\n        let propItem: PropItem = {\r\n            Id: id,\r\n            Num: num\r\n        };\r\n        this.getRewardProp([propItem]);\r\n\r\n        return propItem;\r\n    }\r\n\r\n    public addPropByDesign(award: any) {\r\n        return this.addPropNum(award[0], award[1]);\r\n    }\r\n\r\n    public addPropArrByDesign(awardArr: any) {\r\n        let arr = [];\r\n        for (let i in awardArr) {\r\n            let award = awardArr[i];\r\n            let propItem: PropItem = {\r\n                Id: award[0],\r\n                Num: award[1]\r\n            };\r\n            arr.push(propItem);\r\n        }\r\n        this.getRewardProp(arr);\r\n\r\n        return arr;\r\n    }\r\n\r\n    /**；領取獎勵 格式 [10001,1];[10002,2];[10003,1] */\r\n    public getRewardProp(rewardArr: PropItem[], double = 1) {\r\n        for (let i = 0; i < rewardArr.length; i++) {\r\n            let dataArr = rewardArr[i];\r\n            let propdata = designManager.getRowById(constants.tableName.prop, dataArr.Id)\r\n            if (!propdata) {\r\n                myLog.e(\"prop is not in design\", propdata);\r\n                continue;\r\n            }\r\n            if (propdata.type == 1) {\r\n                this.useCoin(dataArr.Num * double)\r\n            } else if (propdata.type == 10) {\r\n                this.addExp(dataArr.Num * double)\r\n            } else if (propdata.type == 8 || propdata.type == 11) {\r\n                this.setPropById(dataArr.Id, dataArr.Num * double)\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_BlessProp, false)\r\n\r\n            } else if (propdata.type == 9) {\r\n                this.useBaoShi(dataArr.Num * double)\r\n            } else if (propdata.type == 12) {\r\n                this.usePower(dataArr.Num * double)\r\n            } else if (propdata.type == 14) {\r\n                // 魂晶\r\n                this.useOptStone(dataArr.Num * double);\r\n            } else if (propdata.type == 15) {\r\n                // 日活跃\r\n                this.useDayAct(dataArr.Num * double);\r\n            } else if (propdata.type == 16) {\r\n                // 能量战令\r\n                this.useEnergy(dataArr.Num * double);\r\n            } else {\r\n                this.setPropById(dataArr.Id, dataArr.Num * double)\r\n            }\r\n        }\r\n        eventManager.send(msgac.commonResRefresh)\r\n        this.saveData()\r\n    }\r\n\r\n    /**\r\n     *  使用道具。\r\n     * @param dataArr \r\n     * @returns  true 表示道具充足并使用。false 表示资源不够\r\n     */\r\n    public checkUseProp(dataArr: PropItem) {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, dataArr.Id)\r\n        if (!propdata) {\r\n            myLog.e(\"prop is not in design\", propdata);\r\n            return\r\n        }\r\n\r\n        if (propdata.type == 1) {\r\n            if (this.$coin >= dataArr.Num) {\r\n                this.useCoin(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        } else if (propdata.type == 9) {\r\n            if (this.$baoShi >= dataArr.Num) {\r\n                this.useBaoShi(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        } else if (propdata.type == 14) {\r\n            if (this.$optStone >= dataArr.Num) {\r\n                this.useOptStone(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        }\r\n    }\r\n\r\n\r\n    showGetAnimal(parent, node, start, end) {\r\n        let arr = cocosUtil.getCircleDirectionArr(10, 100);\r\n        for (let index = 0; index < 10; index++) {\r\n            let node1 = instantiate(node)\r\n            parent.addChild(node1)\r\n            node1.layer = parent.layer\r\n            tween(node1).set({ positon: v3(start[0], start[1], 0) }).to(0.2, { positon: v3(arr[index].x, arr[index].y, 0) }).to(0.5, { positon: v3(end[0], end[1], 0) }).start()\r\n            cocosUtil.drawCurvePath(node1, [arr[index].x, arr[index].y], [end[0], end[1]], 0.2 + Math.random() * 0.2, 30, 0.1 + index * 0.05)\r\n        }\r\n        return\r\n    }\r\n\r\n    stringToArr(str: string) {\r\n        let index = str.indexOf(\"[\")\r\n        let endIndex = str.indexOf(\"]\")\r\n        let newStr = str.substring(index + 1, endIndex)\r\n        return newStr.split(\",\")\r\n    }\r\n\r\n    /**注冊事件*/\r\n    protected initEvent() {\r\n        game.on(Game.EVENT_HIDE, () => {\r\n            console.log(\"切到后台了\");\r\n            // @ts-ignore\r\n            if (this.resetAccount) {\r\n                return;\r\n            }\r\n            // 如果是开发者模式，先读一次浏览器存储的数据，方便浏览器开发者模式中直接改数据\r\n            if (playerModel.isInDevelopmentEnvironment()) {\r\n                this.load();\r\n            }\r\n            this.$time = Date.now()\r\n            this.saveData()\r\n            console.log(\"保存结束了\");\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n            console.log(\"执行到这里了结束了\");\r\n        });\r\n        game.on(Game.EVENT_SHOW, () => {\r\n            audioManager.gameOnShow();\r\n        });\r\n    }\r\n\r\n    public saveData() {\r\n        eventManager.send(msgac.saveDataBefore);\r\n        let obj = js.createMap(true);\r\n        for (let key in this) {\r\n            if (key.indexOf('$') != -1) {\r\n                obj[key] = this[key];\r\n            }\r\n        }\r\n        sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n        ServerCtr.GetInstance().addDataVersion()\r\n        eventManager.send(msgac.saveDataAfter);\r\n    }\r\n\r\n    public getLocalData() {\r\n        let obj = js.createMap(true);\r\n        for (let key in this) {\r\n            if (key.indexOf('$') != -1) {\r\n                obj[key] = this[key];\r\n            }\r\n        }\r\n        return {\r\n            \"userData\": JSON.stringify(obj),\r\n            \"version\": ServerCtr.GetInstance().dataVersion,\r\n            \"friendPassCnt\": this.$friendPassCnt, //通关数 好友最大值\r\n            \"videoCalCnt\": this.$videoCalCnt, //累积观看视频数量，累积值\r\n        }\r\n        // sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n    }\r\n\r\n    public loadServerData(jsonData) {\r\n        console.log(\"---------各种问题---\", jsonData)\r\n        ServerCtr.GetInstance().dataVersion = jsonData[\"version\"]\r\n        let obj = jsonData[\"userData\"];\r\n        if (obj) {\r\n            js.mixin(this, JSON.parse(obj));\r\n        }\r\n        sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n    }\r\n\r\n    public remove() {\r\n        sys.localStorage.removeItem(this.$localKey);\r\n        this.onInit()\r\n        eventManager.send(msgac.commonResRefresh)\r\n    }\r\n\r\n    // 注销账号\r\n    public clearAccountData() {\r\n        ServerCtr.GetInstance().addDataVersion();\r\n        CronCtr.getInstance().uploadAllRecord({ \"version\": ServerCtr.GetInstance().dataVersion + 1 });\r\n        sys.localStorage.removeItem(\"dataVersion\");\r\n        // @ts-ignore\r\n        this.resetAccount = true;\r\n    }\r\n\r\n    public load() {\r\n        let obj = sys.localStorage.getItem(this.$localKey);\r\n        console.log(\"---------读取本地数据---\", obj)\r\n        if (obj) {\r\n            console.log(\"---------本地数据存在---\")\r\n            js.mixin(this, JSON.parse(obj));\r\n        } else {\r\n            console.log(\"---------本地数据不存在---\")\r\n            this.setConfig()\r\n        }\r\n    }\r\n\r\n\r\n    private _drawAllWeight = [0, 0, 0]\r\n    private _drawAllSureWeight = [0, 0, 0]\r\n\r\n    /**\r\n     * 获得一次抽卡数据\r\n     */\r\n    public getDrawItem(drawType) {\r\n        let type = 2\r\n        if (drawType == 0) {\r\n            this.$drawNormalNum++\r\n            type = 2\r\n        } else {\r\n            this.$drawGradeNum++\r\n            type = 1\r\n        }\r\n        let isBichou = false\r\n        //  console.log(\"this.$drawGradeNum = \",this.$drawGradeNum)\r\n        //  console.log(\"this.$drawNormalNum = \",this.$drawNormalNum)\r\n\r\n        if (type == 2) {\r\n            if (this.$drawNormalNum >= designManager.config.extra2) {\r\n                //     console.log(\" 普通必抽\")\r\n                isBichou = true\r\n                this.$drawNormalNum = 0\r\n            }\r\n        } else {\r\n            if (this.$drawGradeNum >= designManager.config.extra1) {\r\n                isBichou = true\r\n                // console.log(\" 高级 必抽\")\r\n                this.$drawGradeNum = 0\r\n            }\r\n        }\r\n\r\n\r\n        let drawData = designManager.getRowsByType(constants.tableName.draw, type)\r\n        if (this._drawAllWeight[type] == NaN || this._drawAllWeight[type] <= 0) {\r\n            this._drawAllSureWeight[type] = 0\r\n            drawData.forEach(element => {\r\n                if (type == element.type) {\r\n                    this._drawAllWeight[type] += element.weight\r\n                    if (element.extra != \"\")\r\n                        this._drawAllSureWeight[type] += parseInt(element.extra)\r\n                }\r\n            });\r\n        }\r\n        let item = null\r\n        if (isBichou) {\r\n            let rand = Math.floor(Math.random() * this._drawAllSureWeight[type])\r\n            for (let index = 0; index < drawData.length; index++) {\r\n                let element = drawData[index];\r\n                if (type == element.type && element.extra) {\r\n                    rand -= element.extra\r\n                    if (rand <= 0) {\r\n                        item = element\r\n                        // console.log(\" 必抽，\", item)\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            let rand = Math.floor(Math.random() * this._drawAllWeight[type])\r\n            for (let index = 0; index < drawData.length; index++) {\r\n                let element = drawData[index];\r\n                if (type == element.type) {\r\n                    rand -= element.weight\r\n                    if (rand <= 0) {\r\n                        item = element\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // if (item && item.extra && item.extra > 0) {\r\n        //     // if (type == 2) {\r\n        //     //     this.$drawNormalNum = 0\r\n        //     // } else {\r\n        //     //     this.$drawGradeNum = 0\r\n        //     // }\r\n        // }\r\n        if (item == null) {\r\n            console.log(\"item null 没抽中 \")\r\n        }\r\n        return item\r\n    }\r\n\r\n\r\n    /**添加巡逻奖励 */\r\n    public getCurPatrolData() {\r\n        if (this.$patrolStartTime <= 0) {\r\n            this.$patrolStartTime = (new Date()).getTime()\r\n            return\r\n        }\r\n\r\n        let curTime = (new Date()).getTime()\r\n        let rewardArr = this.getPatrolReward()\r\n\r\n        this.$patrolStartTime = curTime\r\n        this.$patrolRewardPropArr = []\r\n        this.$patrolRewardProp = []\r\n\r\n        this.getRewardProp(rewardArr)\r\n        // this.getRewardProp(this.$patrolRewardPropArr)\r\n\r\n    }\r\n\r\n    public getPatrolTime() {\r\n        let curTime = (new Date()).getTime()\r\n        let passTime = Math.min(designManager.config.towerTop * 60, Math.floor((curTime - this.$patrolStartTime) / 1000))\r\n        return passTime\r\n    }\r\n\r\n    public getPatrolReward() {\r\n        let passTime = this.getPatrolTime()\r\n        let towerExp = Math.floor(passTime * designManager.config.towerExp / 60)\r\n        let getCoin = Math.floor(passTime * designManager.config.towerCoin / 60)\r\n\r\n        let rewardArr = []\r\n        // let prop: PropItem = {\r\n        //     Id: 101,\r\n        //     Num: getCoin,\r\n        // }\r\n        rewardArr.push({\r\n            Id: 101,\r\n            Num: getCoin,\r\n        })\r\n\r\n        rewardArr.push({\r\n            Id: 901,\r\n            Num: towerExp,\r\n        })\r\n        let towerItem = designManager.config.towerItem\r\n        // console.log(\"towerItem = \", towerItem)\r\n        let drawCount = Math.floor(passTime / 600)\r\n        for (let i = 0; i < drawCount; i++) {\r\n            if (this.$patrolRewardProp[i] != 1) {\r\n                for (let j = 0; j < towerItem.length; j++) {\r\n                    let curr = Math.random()\r\n                    if (curr < towerItem[j][1] / 10000) {\r\n                        let prop: PropItem = {\r\n                            Id: towerItem[j][0],\r\n                            Num: 1,\r\n                        }\r\n                        myLog.i(\"抽中 \", towerItem[j][0])\r\n                        this.$patrolRewardPropArr.push(prop)\r\n                    } else {\r\n                      //  myLog.i(\"未抽中\", curr, towerItem[j][1] / 10000)\r\n                    }\r\n                }\r\n                this.$patrolRewardProp[i] = 1\r\n            }\r\n        }\r\n        // this.getRewardProp()\r\n        this.$patrolRewardPropArr.forEach(element => {\r\n            rewardArr.push(element)\r\n        });\r\n        return rewardArr\r\n    }\r\n\r\n    public getPatrolState() {\r\n        let passTime = this.getPatrolTime()\r\n        if (passTime < 600) {\r\n            return 600 - passTime\r\n        }\r\n\r\n        return 0\r\n    }\r\n\r\n    public getPatrolRewardByTime(time) {\r\n        let towerExp = Math.floor(time * designManager.config.towerExp / 60)\r\n        let getCoin = Math.floor(time * designManager.config.towerCoin / 60)\r\n\r\n        let rewardArr = []\r\n        rewardArr.push({\r\n            Id: 101,\r\n            Num: getCoin,\r\n        })\r\n\r\n        rewardArr.push({\r\n            Id: 901,\r\n            Num: towerExp,\r\n        })\r\n        let towerItem = designManager.config.towerItem\r\n        // console.log(\"towerItem = \", towerItem)\r\n        let drawCount = Math.floor(time / 600)\r\n        for (let i = 0; i < drawCount; i++) {\r\n            for (let j = 0; j < towerItem.length; j++) {\r\n                let curr = Math.random()\r\n                if (curr < towerItem[j][1] / 10000) {\r\n                    let prop: PropItem = {\r\n                        Id: towerItem[j][0],\r\n                        Num: 1,\r\n                    }\r\n                    myLog.i(\"抽中 \", towerItem[j][0])\r\n                    rewardArr.push(prop)\r\n                } else {\r\n                    //   myLog.i(\"未抽中\", curr, towerItem[j][1] / 10000)\r\n                }\r\n            }\r\n        }\r\n        return rewardArr\r\n    }\r\n\r\n\r\n    public setPyramidState(index) {\r\n        this.$pyramidState[index] = 1\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n\r\n\r\n}","/**\r\n * 拓展String.format方法\r\n * 需要在cc.d.ts中添加以下声明代码，使用过程中才会有提示，并且不会报错\r\ndeclare interface String {\r\n    format(...agrs: any[]): string;\r\n    parseColor();\r\n}\r\n */\r\nimport {Localization, localizeManager} from \"db://assets/scripts/localization\";\r\nimport {designManager} from \"db://assets/scripts/game/manager/designManager\";\r\nimport { resources } from \"cc\";\r\nimport { version } from \"os\";\r\nimport { JsonAsset } from \"cc\";\r\n\r\nString.prototype.format = function () {\r\n    let str = this;\r\n    for (let i in arguments) {\r\n        str = str.replace(/\\%\\w/, arguments[i]);\r\n    }\r\n    return str;\r\n}\r\n// // 错误提示去不掉，暂时不用了\r\n// Object.defineProperty(Array.prototype, \"sortArr\", {\r\n//     value: function (compareFunc: Function) {\r\n//         let arr = this;\r\n//         if (arr.length <= 1) {\r\n//             return;\r\n//         }\r\n//         for (let i = 0; i < arr.length - 1; i++) {\r\n//             for (let j = i + 1; j < arr.length; j++) {\r\n//                 let item1 = arr[i];\r\n//                 let item2 = arr[j];\r\n//                 if (compareFunc(item1, item2)) {\r\n//                     arr[i] = item2;\r\n//                     arr[j] = item1;\r\n//                 }\r\n//             }\r\n//         }\r\n//     }\r\n// });\r\n\r\nexport const utilTools = {\r\n\r\n    // 获取当前游戏版本\r\n    getCurGameVersion(){\r\n        return new Promise((resolve, reject) => {\r\n            resources.load<JsonAsset>(\"version\", (err, data)=>{\r\n                if (err) {\r\n                    console.error(\"加载 version.json 失败：\", err);\r\n                    reject(err);\r\n                    return;\r\n                }\r\n                let parseData = data.json;\r\n                if (parseData.version) {\r\n                    resolve(parseData.version);\r\n                } else{\r\n                    reject(\"the version is null\")\r\n                }\r\n                \r\n            })\r\n        })\r\n    },\r\n\r\n    getRandomSign() {\r\n        return Math.random() > 0.5 ? 1 : -1;\r\n    },\r\n\r\n    // 角度值与弧度制之间的转换\r\n    radianToAngle(radian: number) {\r\n        return radian / Math.PI * 180;\r\n    },\r\n    angleToRadian(angle: number) {\r\n        return angle / 180 * Math.PI;\r\n    },\r\n\r\n    // 性能最好的数组遍历方式\r\n    forArr(arr: any, cb: Function) {\r\n        let len = arr.length;\r\n        if (len <= 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            let info = arr[i];\r\n            if (info == undefined) {\r\n                continue;\r\n            }\r\n            let ret = cb(info, i);\r\n            if (ret) {\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 模仿async.waterfall写得，按顺序执行各个方法\r\n     * @param taskArr 要顺序执行的方法数组\r\n     * @param callback 执行结果回调\r\n     */\r\n    waterfall(taskArr: any, callback?: any) {\r\n        if (!callback) {\r\n            callback = function () { };\r\n        }\r\n        if (!Array.isArray(taskArr) || taskArr.length <= 0) {\r\n            callback(\"taskArr is null\");\r\n            return;\r\n        }\r\n        let taskIndex = 0;\r\n        let result = {};\r\n        let loadNextTask = function () {\r\n            let task = taskArr[taskIndex];\r\n            if (task) {\r\n                task(result, function (err) {\r\n                    if (err) {\r\n                        callback(err, null);\r\n                        return;\r\n                    }\r\n                    taskIndex++;\r\n                    loadNextTask();\r\n                });\r\n                return;\r\n            }\r\n            callback(null, result);\r\n        };\r\n        loadNextTask();\r\n    },\r\n\r\n    // 数字转化为百分比显示\r\n    valToPercent(val: number, fixNum?: number) {\r\n        // 保证舍去不显示的那部分\r\n        val = Math.floor(val * 10000);\r\n        val = val / 10000;\r\n\r\n        if (fixNum == undefined) {\r\n            fixNum = 2;\r\n        }\r\n        let ret = (val * 100).toFixed(fixNum) + \"%\";\r\n\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n     * 获取如下格式的时间\r\n     * 05:00:56\r\n     * @param d 单位：豪秒\r\n     * @param isM 是否强制只显示到分\r\n     * @returns {string}\r\n     */\r\n    getTimeStr(d: number, isM?: boolean) {\r\n        var ret = \"\";\r\n        if (d < 0) {\r\n            d = 0;\r\n        }\r\n\r\n        d = d / 1000;\r\n        var hours = Math.floor(d / 3600);\r\n        var mins = Math.floor((d - hours * 3600) / 60);\r\n        var seconds = Math.floor(d - hours * 3600 - mins * 60);\r\n\r\n        if (isM) {\r\n            mins = mins + hours * 60;\r\n        } else {\r\n            if (hours >= 10) {\r\n                ret = ret + hours + \":\";\r\n            } else {\r\n                ret = ret + \"0\" + hours + \":\";\r\n            }\r\n        }\r\n\r\n        if (mins >= 10) {\r\n            ret = ret + mins + \":\";\r\n        } else {\r\n            ret = ret + \"0\" + mins + \":\";\r\n        }\r\n        if (seconds >= 10) {\r\n            ret = ret + seconds;\r\n        } else {\r\n            ret = ret + \"0\" + seconds;\r\n        }\r\n\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n       * 获取如下格式的时间\r\n       * 05:00:56\r\n       * @param d 单位：豪秒\r\n       * @param isM 是否强制只显示到分\r\n       * @returns {string}\r\n       */\r\n    getTimeStrChinese(d: number, isSce = true, isM = true, isHour = true) {\r\n        var ret = \"\";\r\n        if (d < 0) {\r\n            d = 0;\r\n        }\r\n\r\n        d = d / 1000;\r\n        var hours = Math.floor(d / 3600);\r\n        var mins = Math.floor((d - hours * 3600) / 60);\r\n        var seconds = Math.floor(d - hours * 3600 - mins * 60);\r\n\r\n\r\n        if (hours > 0) {\r\n            ret = ret + hours + localizeManager._localize(null,\"hour\",\"common\");\r\n        }\r\n\r\n        if (mins >= 10) {\r\n            ret = ret + mins + localizeManager._localize(null,\"min\",\"common\");\r\n        } else {\r\n            ret = ret + \"0\" + mins + localizeManager._localize(null,\"min\",\"common\");\r\n        }\r\n        if (isSce) {\r\n            if (seconds >= 10) {\r\n                ret = ret + seconds + localizeManager._localize(null,\"sec\",\"common\");\r\n            } else {\r\n                ret = ret + \"0\" + seconds + localizeManager._localize(null,\"sec\",\"common\");\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n     * 将对象obj中以time(不区分大小写)为结尾的key字符串值，转换为js时间对象Date\r\n     * @param obj\r\n     */\r\n    timeStrToDate(obj: any) {\r\n        if (typeof (obj) != \"object\" || obj == null) {\r\n            return obj;\r\n        }\r\n\r\n        if (Array.isArray(obj)) {\r\n            for (let i in obj) {\r\n                let item = obj[i];\r\n                if (item && typeof (item) == \"object\") {\r\n                    utilTools.timeStrToDate(item);\r\n                }\r\n            }\r\n        } else {\r\n            let keyArr = Object.keys(obj);\r\n            for (let i in keyArr) {\r\n                let key = keyArr[i] + \"\";\r\n                let val = obj[key];\r\n                if (val && typeof (val) == \"object\") {\r\n                    utilTools.timeStrToDate(val);\r\n                    continue;\r\n                }\r\n\r\n                try {\r\n                    let endStr = \"\";\r\n                    if (key.length >= 4) {\r\n                        endStr = key.substring(key.length - 4, key.length);\r\n                        if (endStr.toLocaleLowerCase() == \"time\" && val && typeof (val) == \"string\") {\r\n                            obj[key] = new Date(val);\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    console.log(\"utilTools.timeStrToDate error:\" + e.message, e, obj);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    },\r\n\r\n    /**\r\n     * 数组排序\r\n     * @param arr \r\n     * @param compareFunc \r\n     */\r\n    sortArr(arr: any, compareFunc: Function) {\r\n        if (!arr || arr.length <= 1) {\r\n            return arr;\r\n        }\r\n        for (let i = 0; i < arr.length - 1; i++) {\r\n            for (let j = i + 1; j < arr.length; j++) {\r\n                let item1 = arr[i];\r\n                let item2 = arr[j];\r\n                if (compareFunc(item1, item2)) {\r\n                    arr[i] = item2;\r\n                    arr[j] = item1;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 概率是否满足\r\n     * @param val 概率值 0到1\r\n     */\r\n    isProb(val: number) {\r\n        if (!val) {\r\n            val = 0;\r\n        }\r\n        if (Math.random() < val) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * 打乱数组元素，默认不改变原有的数组，返回新的打乱后的数组\r\n     * @param arr \r\n     * @param isOrign true:原数组会被修改\r\n     */\r\n    randomArr(arr: any, isOrign: boolean = false): any {\r\n        if (!isOrign) {\r\n            arr = JSON.parse(JSON.stringify(arr));\r\n        }\r\n        let tmpArr = [];\r\n        while (arr.length > 0) {\r\n            let index = Math.floor(Math.random() * arr.length);\r\n            tmpArr.push(arr[index]);\r\n            arr.splice(index, 1);\r\n        }\r\n        return tmpArr;\r\n    },\r\n\r\n    /**\r\n     * 返回给定范围内的随机数值,整数包括左右边界\r\n     * @param min 最小值\r\n     * @param max 最大值\r\n     * @param isInt 是否整数化\r\n     * @returns {number}\r\n     */\r\n    getFloatValue(min: number, max: number, isInt?: boolean) {\r\n        let dv = max - min;\r\n        if (dv == 0) {\r\n            return min;\r\n        }\r\n        if (dv < 0) {\r\n            return 0;\r\n        }\r\n        if (isInt) {\r\n            let val = min + Math.floor(Math.random() * (dv + 1));\r\n            return val;\r\n        }\r\n\r\n        let val = min + Math.random() * dv;\r\n        return val;\r\n    },\r\n\r\n    // 跨天判断\r\n    overDay(date: any, now?: any) {\r\n        if (!date) {\r\n            return true;\r\n        }\r\n\r\n        if (!now) {\r\n            now = new Date();\r\n        }\r\n        let overDay = false;\r\n        if (date.getDate() == now.getDate()) {\r\n            if (now.getTime() - date.getTime() >= 24 * 60 * 60 * 1000) {\r\n                overDay = true;\r\n            }\r\n        } else {\r\n            overDay = true;\r\n        }\r\n\r\n        return overDay;\r\n    },\r\n\r\n    /**\r\n     * 根据权重从数组中返回指定的个数元素\r\n     * @param arr 数组\r\n     * @param num 返回个数\r\n     * @param canRepeat 是否可以重复取，默认不可以\r\n     * @returns {Array} 返回结果数组\r\n     */\r\n    getRowsByWeightAndNum(arr: any, num: number, canRepeat?: boolean) {\r\n        if (!num) {\r\n            num = 1;\r\n        }\r\n        var ret = [];\r\n        arr = utilTools.copyObj(arr);\r\n        for (var i = 0; i < num; i++) {\r\n            if (arr.length <= 0) {\r\n                break;\r\n            }\r\n            var row = this.getRowByWeight(arr);\r\n            ret.push(row);\r\n            if (!canRepeat) {\r\n                var index = arr.indexOf(row);\r\n                arr.splice(index, 1);\r\n            }\r\n        }\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n     * 根据权重从数组中返回一个元素\r\n     * @param arr\r\n     * @param totalWeight\r\n     */\r\n    getRowByWeight(arr: any, totalWeight?: number) {\r\n        if (!totalWeight) {\r\n            totalWeight = 0;\r\n            for (var i in arr) {\r\n                var weight = arr[i].weight;\r\n                if (!weight) {\r\n                    weight = 0;\r\n                }\r\n                totalWeight += weight;\r\n            }\r\n        }\r\n        var random = Math.random() * totalWeight;\r\n        var left = 0;\r\n        var row = null;\r\n        for (var i in arr) {\r\n            var tmpRow = arr[i];\r\n            var weight = tmpRow.weight;\r\n            if (!weight) {\r\n                weight = 0;\r\n            }\r\n            if (random >= left && random < left + weight) {\r\n                row = tmpRow;\r\n                break;\r\n            }\r\n            left += weight;\r\n        }\r\n\r\n        return row;\r\n    },\r\n\r\n    /**\r\n     * 从给定的数组中，随机取出一个元素\r\n     * @param arr 数组\r\n     * @param isRemove 是否将该元素从数组中移除\r\n     * @return {null|*} 返回随机到的元素\r\n     */\r\n    getRandomItemByArr(arr: any, isRemove: boolean = false) {\r\n        if (!arr || arr.length <= 0) {\r\n            return null;\r\n        }\r\n        let index = Math.floor(Math.random() * arr.length);\r\n        let item = arr[index];\r\n        if (isRemove) {\r\n            arr.splice(index, 1);\r\n        }\r\n\r\n        return item;\r\n    },\r\n\r\n    /**\r\n     * 深度拷贝对象\r\n     * @param obj 要拷贝的对象内容\r\n     */\r\n    copyObj(obj: object) {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    },\r\n\r\n}\r\n\r\n","import { find, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('VipLayer')\r\nexport class VipLayer extends BaseLayer {\r\n\r\n    choseVip: number;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.choseVip = playerModel.vipObj.vip;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.getNodeByPath(\"ui/title\").localize(\"title\", constants.layers.VipLayer);\r\n        this.getNodeByPath(\"ui/info/itemLayer/btnBox1/flag/text\").localizeImg();\r\n        this.getNodeByPath(\"ui/info/itemLayer/btnBox2/flag/text\").localizeImg();\r\n\r\n        let vip = playerModel.vipObj.vip;\r\n        this.setString(this.getNodeByPath(\"ui/top/rank/val\"), vip);\r\n\r\n        let infoLayer = this.getNodeByPath(\"ui/top/bar/info\");\r\n        let row = designManager.getRowById(constants.tableName.vip, vip);\r\n        let nextRow = designManager.getRowById(constants.tableName.vip, vip + 1);\r\n        let btnGet = this.getNodeByPath(\"ui/top/btnGet\");\r\n        btnGet.getChildByName(\"text\").localize(\"get\", constants.catName.common);\r\n\r\n        if (nextRow) {\r\n            infoLayer.active = true;\r\n            btnGet.active = true;\r\n            find(\"text1\", infoLayer).localize(\"text1\", constants.layers.VipLayer);\r\n            find(\"text2\", infoLayer).localize(\"text2\", constants.layers.VipLayer);\r\n            \r\n            this.setString(find(\"val\", infoLayer), row.adNum);\r\n            this.setString(find(\"vip\", infoLayer), \"VIP\" + nextRow.id);\r\n            this.setProgressBar(this.getNodeByPath(\"ui/top/bar\"), playerModel.vipObj.adNum / row.adNum);\r\n            this.setString(this.getNodeByPath(\"ui/top/bar/val\"), playerModel.vipObj.adNum + \"/\" + row.adNum);\r\n        } else {\r\n            btnGet.active = false;\r\n            infoLayer.active = false;\r\n            this.setProgressBar(this.getNodeByPath(\"ui/top/bar\"), 1);\r\n            this.setString(this.getNodeByPath(\"ui/top/bar/val\"), localText.full);\r\n        }\r\n\r\n        // this.setString(this.getNodeByPath(\"ui/vip\"), \"VIP\" + this.choseVip + \"特权\");\r\n        this.getNodeByPath(\"ui/vip\").localize({cat:constants.layers.VipLayer, key:\"hint\", vars:[this.choseVip]});\r\n        let choseRow = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        // this.setString(this.getNodeByPath(\"ui/text\"), localText.weaponEquipAdd.format(choseRow.atkAdd * 100));\r\n        this.getNodeByPath(\"ui/text\").localize({cat:constants.layers.VipLayer, key:\"info\", vars:[choseRow.atkAdd * 100]})\r\n\r\n        let btnGetBox1 = this.getNodeByPath(\"ui/info/itemLayer/btnBox1/btnGetBox1\");\r\n        let hasGet1 = this.getNodeByPath(\"ui/info/itemLayer/btnBox1/hasGet\");\r\n        btnGetBox1.getChildByName(\"text\").localize(\"get\", constants.catName.common);\r\n        hasGet1.getChildByName(\"text\").localize(\"hasGet\", constants.catName.common);\r\n\r\n        btnGetBox1.active = false;\r\n        hasGet1.active = false;\r\n        if (playerModel.vipObj.onceObj[this.choseVip]) {\r\n            // 已领取首次奖励\r\n            hasGet1.active = true;\r\n        } else if (this.choseVip <= vip) {\r\n            btnGetBox1.active = true;\r\n        }\r\n\r\n        let btnGetBox2 = this.getNodeByPath(\"ui/info/itemLayer/btnBox2/btnGetBox2\");\r\n        let hasGet2 = this.getNodeByPath(\"ui/info/itemLayer/btnBox2/hasGet\");\r\n        btnGetBox2.getChildByName(\"text\").localize(\"get\", constants.catName.common);\r\n        hasGet2.getChildByName(\"text\").localize(\"hasGet\", constants.catName.common);\r\n\r\n        btnGetBox2.active = false;\r\n        hasGet2.active = false;\r\n        if (this.choseVip == vip) {\r\n            if (playerModel.vipObj.dayAward) {\r\n                hasGet2.active = true;\r\n            } else {\r\n                btnGetBox2.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGetBox1() {\r\n        if (this.choseVip > playerModel.vipObj.vip) {\r\n            return;\r\n        }\r\n        if (playerModel.vipObj.onceObj[this.choseVip]) {\r\n            // 已领取\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        let awardArr = UserData.getInstance().addPropArrByDesign(row.award);\r\n        this.openAwardGetLayer(awardArr);\r\n        playerModel.vipObj.onceObj[this.choseVip] = 1;\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBtnGetBox2() {\r\n        if (this.choseVip > playerModel.vipObj.vip) {\r\n            return;\r\n        }\r\n        if (playerModel.vipObj.dayAward) {\r\n            // 已领取\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        let awardArr = UserData.getInstance().addPropArrByDesign(row.dayAward);\r\n        this.openAwardGetLayer(awardArr);\r\n        playerModel.vipObj.dayAward = 1;\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBtnLeft() {\r\n        if (this.choseVip <= 1) {\r\n            return;\r\n        }\r\n        this.choseVip--;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnRight() {\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip + 1);\r\n        if (!row) {\r\n            return;\r\n        }\r\n        this.choseVip++;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnBox1() {\r\n        if (!playerModel.vipObj.onceObj[this.choseVip]) {\r\n            this.onClickBtnGetBox1();\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        this.openAwardInfoLayer(row.award);\r\n    }\r\n\r\n    onClickBtnBox2() {\r\n        if (!playerModel.vipObj.dayAward) {\r\n            this.onClickBtnGetBox2();\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        this.openAwardInfoLayer(row.dayAward);\r\n    }\r\n\r\n    onClickBtnGet() {\r\n        sdkManager.openAd(\"VIP特权\", (st: number) => {\r\n            if (st == 1) {\r\n                let hasUp = playerModel.addVipAdNum();\r\n                if (hasUp) {\r\n                    this.choseVip = playerModel.vipObj.vip;\r\n                }\r\n                this.initUI();\r\n                eventManager.send(msgac.refreshRedPoint);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","\r\ninterface tempVideoAd {\r\n    adObj: any\r\n    isInVideo: boolean\r\n    callBack: Function\r\n}\r\nclass vivo {\r\n    public static readonly _instance: vivo = new vivo();\r\n\r\n    private videoAd!: tempVideoAd\r\n    private bannerAd: any\r\n    private interstitialAd: any\r\n    private nativeAd: any\r\n\r\n    private videoPosId = '74668129b4b442539bed19caae5c8d9d';\r\n    private bannerPosId = '6caa9e6062d243e195ca6ca8e9a50a0d';\r\n    private interstitialPosId = '965c0f038e5a4b278940ad5864e1436c';\r\n    private nativePosId = '9b47cc8e3ec04c6b9232da4618439804';\r\n\r\n    constructor() {\r\n    }\r\n\r\n    //获取系统信息的同步版本\r\n    get systemInfo() {\r\n        return qg.getSystemInfoSync();\r\n    }\r\n    //设置屏幕是否常量\r\n    public setKeepScreenOn(bol: any) {\r\n        qg.setKeepScreenOn({\r\n            keepSrceenOn: bol,\r\n            success: () => { console.log('设置屏幕常亮成功') },\r\n            fail: () => { },\r\n            complete: () => { },\r\n        })\r\n    }\r\n    //登录授权\r\n    public authorize_code() {\r\n        return new Promise((resolve, reject) => {\r\n            qg.authorize({\r\n                type: \"code\",\r\n                success: function (data: any) {\r\n                    resolve(data);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n                }\r\n            })\r\n        });\r\n    }\r\n    // 旧版本获取token\r\n    public authorize_token() {\r\n        return new Promise((resolve, reject) => {\r\n            qg.authorize({\r\n                type: \"token\",\r\n                success: function (obj: any) {\r\n                    resolve(obj);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n                }\r\n            })\r\n        })\r\n    }\r\n    // 获取授权信息 \r\n    public getProfile(_token: any) {\r\n        return new Promise((resolve, reject) => {\r\n            qg.getProfile({\r\n                token: _token,\r\n                success: function (data: any) {\r\n                    resolve(data);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n\r\n                }\r\n            })\r\n        });\r\n    }\r\n    /*\r\n    *  qg.exitApplication()\r\n    *  退出游戏，同步方法\r\n    */\r\n    exitApplication(cb: any) {\r\n        qg.exitApplication();\r\n    }\r\n    /**\r\n     * 使手机发生较长时间的振动。\r\n     * @param callback 回调 (isSuccess, res)\r\n     */\r\n    public vibrateLong(callback?: Function): void {\r\n        qg.vibrateLong();\r\n        if (callback) {\r\n            callback()\r\n        }\r\n\r\n    };\r\n    /**\r\n     * 使手机发生较短时间的振动\r\n     * \r\n     */\r\n    public vibrateShort(cb?: Function): void {\r\n        qg.vibrateShort();\r\n        if (cb) {\r\n            cb()\r\n        }\r\n    };\r\n\r\n    //=============================广告\r\n\r\n    //播放激励视频\r\n    showRewardVideoAd(next: any) {\r\n        if (this.systemInfo.platformVersionCode < 1041) return next && next(false);\r\n        if (!qg.createRewardedVideoAd) return next && next(false);\r\n        if (this.videoAd) {\r\n        } else {\r\n            this.videoAd = {\r\n                adObj: null,\r\n                isInVideo: false,\r\n                callBack: null!\r\n            }\r\n            this.videoAd.adObj = qg.createRewardedVideoAd({\r\n                posId: this.videoPosId\r\n            });\r\n            this.videoAd.adObj.onError((err: any) => {\r\n                this.videoAd.isInVideo = false;\r\n                this.videoAd.callBack && this.videoAd.callBack(false);\r\n                // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n\r\n                console.log(\"视频广告创建失败\")\r\n                switch (err.errCode) {\r\n                    case -3:\r\n                        console.log(\"激励广告加载失败---调用太频繁\", JSON.stringify(err));\r\n\r\n\r\n                        break;\r\n                    case -4:\r\n                        console.log(\"激励广告加载失败--- 一分钟内不能重复加载\", JSON.stringify(err));\r\n\r\n\r\n                        break;\r\n                    case 30008:\r\n                        // 当前启动来源不支持激励视频广告，请选择其他激励策略\r\n                        break;\r\n                    default:\r\n                        console.log(\"激励广告展示失败\", err)\r\n\r\n\r\n                        break;\r\n                }\r\n            })\r\n            this.videoAd.adObj.onLoad(() => {\r\n                let adshow = this.videoAd.adObj.show();\r\n                adshow && adshow.then(() => {// 捕捉show失败的错误\r\n                    console.log(\"激励视频广告显示成功\");\r\n                    // if (AudioMgr.isOpen) {\r\n                    //     AudioMgr.pause();\r\n                    // }\r\n                    this.videoAd.isInVideo = true;\r\n                }).catch((err: any) => {\r\n                    console.log(\"激励视频广告显示失败\", err);\r\n                    this.videoAd.isInVideo = false;\r\n                    this.videoAd.callBack && this.videoAd.callBack(-1);\r\n                    // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n                });\r\n            })\r\n            this.videoAd.adObj.onClose((res: any) => {\r\n                this.videoAd.isInVideo = false;\r\n                console.log('onClose!', res)\r\n                if (res && res[\"isEnded\"]) {\r\n                    this.videoAd.callBack && this.videoAd.callBack(1);\r\n                } else {\r\n                    // Emitter.getInstance().emit(\"showADTip\", '提前关闭视频不能得到奖励哦！');\r\n                    this.videoAd.callBack && this.videoAd.callBack(0);\r\n                }\r\n                // if (AudioMgr.isOpen) {\r\n                //     AudioMgr.resume();\r\n                // }\r\n                this.videoAd.callBack = null!;\r\n                // this.rewardedVideoAd.offClose();\r\n            });\r\n        }\r\n        this.videoAd.isInVideo = true;\r\n        this.videoAd.callBack = next;\r\n        let adLoad = this.videoAd.adObj.load();//第一次调用 可能会报-3  广告能正常展示就可以忽略\r\n        // 捕捉load失败的错误\r\n        adLoad && adLoad.then(() => {\r\n            console.log(\"激励视频广告加载成功\");\r\n            this.videoAd.isInVideo = true;\r\n        }).catch((err: any) => {\r\n            this.videoAd.isInVideo = false;\r\n            console.log(\"激励视频广告加载失败\", err);\r\n            // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n            this.videoAd.callBack && this.videoAd.callBack(-1);\r\n        });\r\n    }\r\n\r\n    //------\r\n\r\n    showBannerAd() {\r\n        if (this.systemInfo.platformVersionCode < 1041) return;\r\n        if (this.bannerAd) return;\r\n        console.log('显示banner广告3')\r\n        let doBannerShow = () => {\r\n            let adshow = this.bannerAd.show();\r\n            adshow && adshow.then(() => {\r\n                console.log(\"banner广告展示成功\");\r\n            }).catch((err: any) => {\r\n                switch (err.code) {\r\n                    case 30003:\r\n                        console.log(\"新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                        break;\r\n                    case 30009:\r\n                        console.log(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                        break;\r\n                    case 30002:\r\n                        console.log(\"加载广告失败，重新加载广告\")\r\n                        break;\r\n                    default:\r\n                        console.log(\"banner广告展示失败\")\r\n                        console.log(JSON.stringify(err))\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n        this.bannerAd = qg.createBannerAd({\r\n            posId: this.bannerPosId,\r\n            style: {\r\n            }\r\n        });\r\n        console.log('创建banner广告第一步', this.bannerAd)\r\n        this.bannerAd.onSize((res: any) => {\r\n            console.log('banner onResize', res);\r\n            // gl.bannerSize = {\r\n            //     width: res.width,\r\n            //     height: (res.width / 16 * 9),\r\n            //     winHeight: this.systemInfo.screenHeight\r\n            // };\r\n            // this.bannerAd.style.left = (this.systemInfo.screenWidth - res.width) / 2;\r\n            // this.bannerAd.style.top = this.systemInfo.screenHeight - (res.width / 16 * 9);\r\n        })\r\n        this.bannerAd.onLoad(() => {\r\n            this.bannerAd.offLoad && this.bannerAd.offLoad();\r\n            console.log(\"banner 广告加载成功 ...\");\r\n            doBannerShow();\r\n        });\r\n        this.bannerAd.onError((err: any) => {\r\n            this.bannerAd.offError && this.bannerAd.offError();\r\n            console.log(\"banner 广告创建失败 ...\", err);\r\n        });\r\n        this.bannerAd.onClose((err: any) => {\r\n            this.bannerAd.offClose();\r\n            console.log(\"onClose 广告创建 ...\", err);\r\n        });\r\n    }\r\n    hideBannerAd() {\r\n        if (!this.bannerAd) {\r\n            return;\r\n        }\r\n        var addestroy = this.bannerAd.destroy();\r\n        // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n        addestroy && addestroy.then(() => {\r\n            console.log(\"banner广告销毁成功\");\r\n            this.bannerAd.offLoad();\r\n            this.bannerAd.offError();\r\n            this.bannerAd.offSize();\r\n        }).catch((err: any) => {\r\n            console.log(\"banner广告销毁失败\", err);\r\n        });\r\n    }\r\n\r\n    //-------\r\n    //显示插屏广告\r\n    showInterstitialAd(next?: any) {\r\n        if (this.systemInfo.platformVersionCode < 1031) return next && next(false);\r\n        if (this.interstitialAd) return;\r\n        console.log(\"显示插屏广告\");\r\n        this.interstitialAd = qg.createInterstitialAd({\r\n            posId: this.interstitialPosId,\r\n        });\r\n        var doShow = () => {\r\n            let adShow = this.interstitialAd.show();\r\n            // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n            adShow && adShow.then(() => {\r\n                console.log(\"插屏广告展示成功\");\r\n                next && next();\r\n            }).catch((err: any) => {\r\n                this.interstitialAd = null;\r\n                switch (err.code) {\r\n                    case 30003:\r\n                        console.log(\"新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                        break;\r\n                    case 30009:\r\n                        console.log(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                        break;\r\n                    case 30002:\r\n                        console.log(\"load广告失败，重新加载广告\")\r\n                        break;\r\n                    case 30000:\r\n                        break;\r\n                    default:\r\n                        console.log(\"插屏广告展示失败\")\r\n                        console.log(err)\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n        this.interstitialAd.onLoad(() => {\r\n            console.log('加载插屏广告成功')\r\n            doShow();\r\n        }, () => {\r\n            console.log('加载插屏广告失败')\r\n            this.interstitialAd = null;\r\n        })\r\n        this.interstitialAd.onError((err: any) => {\r\n            console.log(\"插屏广告创建失败 ...\", err)\r\n            this.interstitialAd = null;\r\n        })\r\n        this.interstitialAd.onClose(() => {\r\n            console.log(\"插屏 关闭 ...\")\r\n            this.interstitialAd && this.interstitialAd.offClose();\r\n            this.interstitialAd = null;\r\n        })\r\n    }\r\n    //----------\r\n\r\n    //创建原生广告\r\n    createNativeAd(next?: Function, resS?: Function) {\r\n        if (this.systemInfo.platformVersionCode < 1053) return next && next(false);\r\n        this.nativeAd = qg.createNativeAd({\r\n            posId: this.nativePosId\r\n        })\r\n        console.log(\"原生广告原生广告\", this.nativeAd)\r\n        this.nativeAd.onLoad((res: any) => {\r\n            if (res && res.adList) {\r\n                console.log(\"原生广告\", res);\r\n                console.log(res.adList)\r\n                console.log(res.adList[0])\r\n                next && next(res.adList[0]);\r\n            }\r\n            else {\r\n                next && next(null);\r\n            }\r\n            this.reportAdShow(res.adList[0].adId);\r\n        })\r\n        this.nativeAd.onError((res: any) => {\r\n            console.log('原生广告加载失败', res)\r\n            // next && next()\r\n            if (resS) {\r\n                resS()\r\n            }\r\n        })\r\n        let adLoad = this.nativeAd.load()\r\n        adLoad && adLoad.then(() => {\r\n            console.log(\"原生广告加载成功\");\r\n        }).catch((err: any) => {\r\n            console.log('原生广告加载失败', JSON.stringify(err));\r\n            // next && next()\r\n            if (resS) {\r\n                resS()\r\n            }\r\n        });\r\n    }\r\n\r\n    /**上报原生点击 */\r\n    clickNativeAd(adId: any) {\r\n        if (!this.nativeAd) return;\r\n        this.nativeAd.reportAdClick({\r\n            adId: adId,\r\n        });\r\n    }\r\n\r\n    /**上报广告曝光 */\r\n    reportAdShow(adId: any) {\r\n        if (!this.nativeAd) return;\r\n        this.nativeAd.reportAdShow({\r\n            adId: adId\r\n        })\r\n    }\r\n\r\n    /**销毁广告组件，释放资源 */\r\n    desNativeAd() {\r\n        console.log(\"销毁广告组件，释放资源\", this.nativeAd);\r\n        this.nativeAd.destroy();\r\n    }\r\n\r\n\r\n    // 检查登录信息 5分钟后token 失效\r\n    public getSetting(cbOK: any, cbFail = null) {\r\n\r\n    }\r\n}\r\n\r\nexport const VivoManager = vivo._instance;","import { BoxCollider2D, Collider2D, Contact2DType, find, Node, tween, Tween, v3, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { playerModel } from '../../../model/playerModel';\r\nimport { UserData } from '../../../model/UserData';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { BaseLayer } from '../../base/BaseLayer';\r\nimport { Monster } from '../monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Weapon')\r\nexport class Weapon extends BaseLayer {\r\n\r\n    info: any;\r\n    id: any;\r\n    direction: Vec3;\r\n    row: any;\r\n\r\n    atk: number;\r\n    atkPercentAdd: number;\r\n\r\n    bodyNode: Node;\r\n    collider: BoxCollider2D;\r\n    lightNode: Node;\r\n\r\n    forward: boolean;\r\n\r\n    targetNode: Node;\r\n    outV3: any = v3(0, 0, 0);\r\n    canFace: boolean = true;\r\n    parentPos: Vec3;\r\n\r\n    timeCount: number = 0;\r\n\r\n    weaponUtil: any;\r\n\r\n    onLoad() {\r\n        this.collider = this.node.getComponent(BoxCollider2D);\r\n        if (this.collider) {\r\n            this.collider.enabled = false;\r\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n        }\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.lightNode = find(\"light\", this.node);\r\n\r\n        this.parentPos = this.node.parent.getPosition();\r\n    }\r\n\r\n    onDestroy() {\r\n        this.unscheduleAllCallbacks();\r\n        if (this.weaponUtil) {\r\n            this.weaponUtil.unscheduleAllCallbacks();\r\n        }\r\n    }\r\n\r\n    init(info: any) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n\r\n        this.info = info;\r\n        let id = info.id;\r\n\r\n        this.id = id;\r\n        this.unscheduleAllCallbacks();\r\n        Tween.stopAllByTarget(this.bodyNode);\r\n\r\n        let row = designManager.getRowById(constants.tableName.weapon, id);\r\n        this.row = row;\r\n\r\n        this.atk = row.atk;\r\n\r\n        try {\r\n            let weaponUtil = cocosUtil.addComponentOnce(this, \"Weapon\" + row.type);\r\n            weaponUtil.unscheduleAllCallbacks();\r\n            this.weaponUtil = weaponUtil;\r\n            // @ts-ignore\r\n            weaponUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n        if (this.weaponUtil && this.weaponUtil.isFixedPos) {\r\n            let scale = this.node.getScale();\r\n            if (info.uiIndex == 0 || info.uiIndex == 3) {\r\n                this.node.setScale(v3(Math.abs(scale.x), scale.y, scale.z));\r\n            } else {\r\n                this.node.setScale(v3(-Math.abs(scale.x), scale.y, scale.z));\r\n            }\r\n        }\r\n\r\n        this.atkPercentAdd = 0;\r\n        if (this.weaponUtil && this.weaponUtil.weaponId > 0 && mapModel.floor > 0) {\r\n            // 爬塔武器等级加成\r\n            let lv = UserData.getInstance().getWeaponLv(this.weaponUtil.weaponId);\r\n            let row = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n            this.atkPercentAdd = row.atk / 100;\r\n        }\r\n\r\n        if (mapModel.weaponSystem.weaponArr[0] == info) {\r\n            // 主武器攻击力收到vip等级加成\r\n            let vipRow = designManager.getRowById(constants.tableName.vip, playerModel.vipObj.vip);\r\n            if (vipRow) {\r\n                this.atkPercentAdd += vipRow.atkAdd;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    // 飞镖类\r\n    atkByDart() {\r\n        audioManager.playEffect(this.row.audio);\r\n        let p = cocosUtil.convertToWorldSpace(this.node);\r\n        let extraObj: any = {};\r\n        extraObj.atkPercentAdd = this.atkPercentAdd;\r\n        mapModel.bulletSystem.addBullet(this.row.bulletId, physicsGroup.PLAYER_BULLET, p, this.direction, extraObj);\r\n        this.timeCount = 0;\r\n        this.bodyNode.active = false;\r\n        tween(this.bodyNode).delay(this.row.atkTime - 0.2).call(() => {\r\n            this.bodyNode.active = true;\r\n            this.bodyNode.setScale(v3(0.1, 0.1, 1));\r\n        }).to(0.2, { scale: v3(1, 1, 1) }, { easing: \"quadOut\" }).start();\r\n    }\r\n\r\n    // 子弹类\r\n    atkByShot() {\r\n        audioManager.playEffect(this.row.audio);\r\n        if (this.lightNode) {\r\n            // 枪口闪光\r\n            this.lightNode.active = true;\r\n            this.scheduleOnce(() => {\r\n                this.lightNode.active = false;\r\n            }, 0.03);\r\n        }\r\n\r\n        // 后摇动作\r\n        this.canFace = false;\r\n        let back = this.direction.clone().normalize().negative().multiplyScalar(20);\r\n        let orignPos = this.node.getPosition();\r\n        let time = 0.05;\r\n        tween(this.node)\r\n            .to(time, { position: back }, { easing: \"quadOut\" })\r\n            .to(time, { position: orignPos }, { easing: \"quadIn\" })\r\n            .call(() => {\r\n                this.canFace = true;\r\n                this.timeCount = 0;\r\n            }).start();\r\n    }\r\n\r\n    // 拳头类\r\n    atkByFist(atkDis: number, time: number) {\r\n        // 攻击距离判断\r\n        if (this.getDisTargetNode() > atkDis) {\r\n            return true;\r\n        }\r\n        audioManager.playEffect(this.row.audio);\r\n        let back = this.direction.clone().normalize().negative().multiplyScalar(20);\r\n        let target = this.direction.clone().normalize().multiplyScalar(atkDis);\r\n        let pos = this.node.getPosition();\r\n        this.canFace = false;\r\n        this.forward = false;\r\n        tween(this.node)\r\n            .to(time, { position: back }, { easing: \"quadOut\" })\r\n            .call(() => {\r\n                this.forward = true;\r\n                this.collider.enabled = true;\r\n            })\r\n            .to(time * 2, { position: target }, { easing: \"quadOut\" })\r\n            .call(() => {\r\n                this.forward = false;\r\n                this.collider.enabled = false;\r\n                if (this.weaponUtil && this.weaponUtil.moveMaxFar) {\r\n                    this.weaponUtil.moveMaxFar();\r\n                }\r\n            })\r\n            .to(time * 2, { position: pos }, { easing: \"quadIn\" })\r\n            .call(() => {\r\n                this.canFace = true;\r\n                this.timeCount = 0;\r\n            })\r\n            .start();\r\n    }\r\n\r\n    // 甩棍类\r\n    atkByStick(atkDis: number) {\r\n        // 攻击距离判断\r\n        if (this.getDisTargetNode() > atkDis) {\r\n            return;\r\n        }\r\n        audioManager.playEffect(this.row.audio);\r\n        this.canFace = false;\r\n        let angle = this.node.angle;\r\n        let da = 90;\r\n        let time = 0.03;\r\n        tween(this.node).to(time, { angle: angle + da }).call(() => {\r\n            let extraObj: any = {};\r\n            extraObj.atkPercentAdd = this.atkPercentAdd;\r\n            mapModel.bulletSystem.addBullet(this.row.bulletId, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node), this.direction, extraObj);\r\n        }).to(time, { angle: angle }).to(time, { angle: angle - da }).call(() => {\r\n            this.canFace = true;\r\n            this.timeCount = 0;\r\n        }).start();\r\n    }\r\n\r\n    // 强制敌人后退一点点\r\n    targetForceMoveBack(node: Node) {\r\n        if (!this.forward) {\r\n            return;\r\n        }\r\n        let monster = node.getComponent(Monster);\r\n        if (!monster || monster.row.type == constants.monsterTypes.boss) {\r\n            return;\r\n        }\r\n        let direction = this.direction.clone().normalize().multiplyScalar(50);\r\n        tween(node).by(0.02, { position: direction }).start();\r\n    }\r\n\r\n    getInfoPosition(index?: number, isWorld?: boolean) {\r\n        let pos = this.node.getPosition();\r\n        let infoNode = find(\"info\", this.node);\r\n        if (index > 0) {\r\n            infoNode = find(\"info\" + index, this.node);\r\n        }\r\n        if (infoNode) {\r\n            infoNode.active = false;\r\n            // 位置修正\r\n            let infoPos = infoNode.getPosition();\r\n            Vec3.rotateZ(infoPos, infoPos, Vec3.ZERO, utilTools.angleToRadian(this.node.angle));\r\n            pos.x += infoPos.x;\r\n            pos.y += infoPos.y;\r\n        }\r\n        if (this.weaponUtil && this.weaponUtil.isFixedPos) {\r\n            if (this.node.scale.x < 0) {\r\n                pos.x = -pos.x;\r\n            }\r\n        }\r\n        if (isWorld) {\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(this.node, pos);\r\n        }\r\n\r\n        return pos;\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            let monster = otherCollider.getComponent(Monster);\r\n            if (monster) {\r\n                let dam = this.atk;\r\n                if (this.atkPercentAdd > 0) {\r\n                    dam = dam * (1 + this.atkPercentAdd);\r\n                    dam = Math.ceil(dam);\r\n                }\r\n                monster.hitWithDam(dam);\r\n            }\r\n        }\r\n        if (this.weaponUtil && this.weaponUtil.contactBegin) {\r\n            this.weaponUtil.contactBegin(otherCollider.node);\r\n        }\r\n    }\r\n\r\n    getCalPosition() {\r\n        let pos = mapModel.player.node.getPosition();\r\n        pos.x += this.parentPos.x;\r\n        pos.y += this.parentPos.y;\r\n\r\n        return pos;\r\n    }\r\n\r\n    getDisTargetNode() {\r\n        if (!this.targetNode) {\r\n            return 999999;\r\n        }\r\n        let dis = Vec2.distance(this.getCalPosition(), this.targetNode.position);\r\n\r\n        return dis;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.targetNode = null;\r\n\r\n        // 找出距离最近的怪物或木箱\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode(this.getCalPosition());\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        if (!this.canFace) {\r\n            return;\r\n        }\r\n\r\n        this.targetNode = targetNode;\r\n        let pos1 = cocosUtil.convertToWorldSpace(this.node);\r\n        let pos2 = cocosUtil.convertToWorldSpace(targetNode);\r\n        // 左右情况\r\n        let scale = this.node.getScale();\r\n        if (!this.weaponUtil || !this.weaponUtil.isFixedPos) {\r\n            if (pos1.x <= pos2.x) {\r\n                this.node.setScale(v3(scale.x, Math.abs(scale.y), scale.z));\r\n            } else {\r\n                this.node.setScale(v3(scale.x, -Math.abs(scale.y), scale.z));\r\n            }\r\n        }\r\n\r\n        // 瞄准最近怪物\r\n        pos2.subtract(pos1);\r\n        this.direction = pos2;\r\n        let angle = utilTools.radianToAngle(Math.atan2(pos2.y, pos2.x));\r\n        if (this.weaponUtil) {\r\n            if (this.weaponUtil.isFixedDirection) {\r\n                if (angle > -90 && angle <= 90) {\r\n                    angle = 0;\r\n                } else {\r\n                    angle = 180;\r\n                }\r\n            }\r\n            if (this.weaponUtil.isFixedPos) {\r\n                angle = 0;\r\n            }\r\n        }\r\n        this.node.angle = angle;\r\n\r\n        if (!this.weaponUtil || !this.weaponUtil.stopTimeCount) {\r\n            this.timeCount += dt;\r\n            if (this.timeCount >= this.row.atkTime) {\r\n                if (this.weaponUtil && cocosUtil.isValid(this.targetNode)) {\r\n                    this.weaponUtil.atk();\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 勇士匕首\r\n@ccclass('Weapon1')\r\nexport class Weapon1 extends Component {\r\n\r\n    weapon: Weapon;\r\n\r\n    weaponId = 10130;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByDart();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 如来神掌\r\n@ccclass('Weapon2')\r\nexport class Weapon2 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10135;\r\n\r\n    bulletId = 7;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByFist(300, 0.1);\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 受击特效\r\n        mapModel.hintSystem.addHint(HintNames.hit1, cocosUtil.convertToWorldSpace(node));\r\n        this.weapon.targetForceMoveBack(node);\r\n\r\n    }\r\n\r\n    moveMaxFar() {\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            // 额外释放如来神掌\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.weapon.node), null, this.weapon.node.angle);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 雷霆之拳\r\n@ccclass('Weapon3')\r\nexport class Weapon3 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10140;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByFist(300, 0.1);\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 受击特效\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            mapModel.hintSystem.addHint(HintNames.hit7, cocosUtil.convertToWorldSpace(node));\r\n        } else {\r\n            mapModel.hintSystem.addHint(HintNames.hit3, cocosUtil.convertToWorldSpace(node));\r\n        }\r\n        this.weapon.targetForceMoveBack(node);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 葱\r\n@ccclass('Weapon4')\r\nexport class Weapon4 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10145;\r\n\r\n    // 固定只会瞄准左边或者右边\r\n    isFixedDirection: boolean = true;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByStick(500);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Weapon } from './Weapon';\r\nimport { constants } from '../../../data/constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 光剑\r\n@ccclass('Weapon5')\r\nexport class Weapon5 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10150;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        let time = 0.05;\r\n        let atkDis = 300;\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            atkDis = 400;\r\n        }\r\n        let ret = this.weapon.atkByFist(atkDis, time);\r\n        if (!ret) {\r\n            this.scheduleOnce(() => {\r\n                if (this.weapon.row.lv == constants.design.maxLv) {\r\n                    mapModel.hintSystem.addHint(HintNames.hit4, cocosUtil.convertToWorldSpace(this.weapon.node), this.weapon.node.angle);\r\n                } else {\r\n                    mapModel.hintSystem.addHint(HintNames.hit6, cocosUtil.convertToWorldSpace(this.weapon.node), this.weapon.node.angle);\r\n                }\r\n            }, time * 2);\r\n        }\r\n\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 受击特效\r\n        mapModel.hintSystem.addHint(HintNames.hit5, cocosUtil.convertToWorldSpace(node));\r\n        this.weapon.targetForceMoveBack(node);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 锤子\r\n@ccclass('Weapon6')\r\nexport class Weapon6 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10155;\r\n\r\n    // 固定位置，不跟随目标瞄准\r\n    isFixedPos: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n        this.unscheduleAllCallbacks();\r\n\r\n        // @ts-ignore\r\n        this.aniCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n        this.aniCtrl.playAnimation(\"1\", true);\r\n    }\r\n\r\n    atk() {\r\n        if (this.weapon.getDisTargetNode() > 200) {\r\n            return;\r\n        }\r\n\r\n        audioManager.playEffect(this.weapon.row.audio);\r\n\r\n        this.weapon.canFace = false;\r\n        this.aniCtrl.playAnimationOnce(\"2\");\r\n        this.scheduleOnce(() => {\r\n            let pos = this.weapon.getInfoPosition(0, true);\r\n            let extraObj: any = {};\r\n            extraObj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n            mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, pos, null, extraObj);\r\n            if (this.weapon.row.lv == constants.design.maxLv) {\r\n                // 往外扩散\r\n                let direction = this.weapon.direction.clone().normalize();\r\n                let dis = 0;\r\n                let arr = [100, 80, 60, 40];\r\n                for (let i = 0; i < 3; i++) {\r\n                    this.scheduleOnce(() => {\r\n                        dis += arr[i] + arr[i + 1];\r\n                        let target = pos.clone().add(direction.clone().multiplyScalar(dis));\r\n                        let eobj: any = {};\r\n                        eobj.scale = 0.8 - i * 0.2;\r\n                        eobj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n                        mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, target, null, eobj);\r\n                    }, i * 0.2 + 0.2);\r\n                }\r\n            }\r\n        }, 0.1);\r\n        this.scheduleOnce(() => {\r\n            this.weapon.canFace = true;\r\n            this.weapon.timeCount = 0;\r\n        }, 0.32);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, UITransform, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from '../bullet/Bullet';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 激光枪\r\n@ccclass('Weapon7')\r\nexport class Weapon7 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10160;\r\n\r\n    stopTimeCount: boolean;\r\n    // 射程\r\n    atkDis: number = 400;\r\n    // 是否穿透\r\n    isHitPass: boolean = false;\r\n\r\n    bullet: Bullet;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n        this.stopTimeCount = false;\r\n\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            this.isHitPass = true;\r\n            this.atkDis = 1000;\r\n        } else {\r\n            this.isHitPass = false;\r\n            this.atkDis = 400;\r\n        }\r\n\r\n    }\r\n\r\n    atk() {\r\n        // 攻击距离判断\r\n        if (this.weapon.getDisTargetNode() > this.atkDis) {\r\n            return;\r\n        }\r\n\r\n        this.stopTimeCount = true;\r\n        let pos = this.weapon.getInfoPosition(0, true);\r\n        this.bullet = null;\r\n\r\n        let extraObj: any = {};\r\n        extraObj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n        extraObj.invokeClass = (bullet: Bullet) => {\r\n            if (!cocosUtil.isValid(this.node)) {\r\n                this.bullet.recycleSelf();\r\n                return;\r\n            }\r\n            audioManager.playEffect(this.weapon.row.audio);\r\n            this.bullet = bullet;\r\n            this.update();\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, pos, this.weapon.direction, extraObj);\r\n\r\n        this.scheduleOnce(this.atkEnd, this.weapon.row.lv);\r\n    }\r\n\r\n    atkEnd() {\r\n        this.unschedule(this.atkEnd);\r\n        this.weapon.timeCount = 0;\r\n        this.stopTimeCount = false;\r\n        if (cocosUtil.isValid(this.bullet)) {\r\n            this.bullet.recycleSelf();\r\n            this.bullet = null;\r\n        }\r\n    }\r\n\r\n    forceDestroy() {\r\n        this.atkEnd();\r\n    }\r\n\r\n    update() {\r\n        if (!this.bullet) {\r\n            return;\r\n        }\r\n        // 旋转角度\r\n        this.bullet.node.angle = this.node.angle;\r\n\r\n        // 位置\r\n        let pos = this.weapon.getInfoPosition(0, true);\r\n        pos = cocosUtil.convertToNodeSpace(this.bullet.node, pos);\r\n        this.bullet.node.setPosition(pos);\r\n\r\n        if (!this.weapon.targetNode) {\r\n            return;\r\n        }\r\n\r\n        // 长度\r\n        let width = this.weapon.getDisTargetNode();\r\n        if (this.isHitPass) {\r\n            width = this.atkDis;\r\n        }\r\n        this.bullet.bulletUtil.setBodyWidth(width - this.weapon.targetNode.getComponent(UITransform).height * 0.2);\r\n\r\n        if (width > this.atkDis) {\r\n            this.atkEnd();\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 魔法弩\r\n@ccclass('Weapon8')\r\nexport class Weapon8 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10165;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n    }\r\n\r\n    atk() {\r\n        // 发出子弹\r\n        let pos = this.weapon.getInfoPosition(0, true);\r\n        let num = 1;\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            num = 3;\r\n        }\r\n        let directionArr = cocosUtil.getSectorDirectionArr(this.weapon.direction, 15, num);\r\n        let extraObj: any = {};\r\n        extraObj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n        directionArr.forEach((dir: Vec3) => {\r\n            mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, pos, dir, extraObj);\r\n        });\r\n\r\n        // 枪口发光和后摇动作\r\n        this.weapon.atkByShot();\r\n    }\r\n\r\n}\r\n\r\n","import { Node, Prefab, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { Weapon } from '../item/weapon/Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('WeaponSystem')\r\nexport class WeaponSystem extends BaseLayer {\r\n\r\n    weaponArr: any;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.weaponArr = [];\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n    }\r\n\r\n    initData(data: any) {\r\n        // test\r\n        // return;\r\n        \r\n        // 初始武器\r\n        this.addWeapon(1, data.weaponId);\r\n    }\r\n\r\n    getSaveData() {\r\n        let weaponData: any = {};\r\n        weaponData.arr = this.weaponArr;\r\n\r\n        return weaponData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.arr, (info: any) => {\r\n            this.addWeapon(0, info.id);\r\n        });\r\n    }\r\n\r\n    loadWeaponPrefab(path: string) {\r\n        return new Promise((resolve, reject) => {\r\n            resManager.loadAsset(constants.bundles.weapon, path, Prefab, null, (err, prefab) => {\r\n                if (err) {\r\n                    reject();\r\n                    return;\r\n                }\r\n                resolve(prefab);\r\n            });\r\n        });\r\n    }\r\n\r\n    getWeaponInfoByType(type: number) {\r\n        for (let i in this.weaponArr) {\r\n            let tmp = this.weaponArr[i];\r\n            let row = designManager.getRowById(constants.tableName.weapon, tmp.id);\r\n            if (row.type == type) {\r\n                return tmp;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 添加武器\r\n     * @param type 武器类型 \r\n     * @param weaponId 可选，强制设置武器id\r\n     */\r\n    async addWeapon(type: number, weaponId: number = 0) {\r\n        if (weaponId > 0) {\r\n            type = designManager.getRowById(constants.tableName.weapon, weaponId).type;\r\n        }\r\n\r\n        let info = null;\r\n        let uiIndex = 0;\r\n        for (let i in this.weaponArr) {\r\n            let tmp = this.weaponArr[i];\r\n            let row = designManager.getRowById(constants.tableName.weapon, tmp.id);\r\n            if (row.type == type) {\r\n                info = tmp;\r\n                uiIndex = parseInt(i);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (info) {\r\n            // 升级\r\n            let row = designManager.getRowById(constants.tableName.weapon, info.id + 1);\r\n            if (!row || row.lv > constants.design.maxLv) {\r\n                // 已满级\r\n                return;\r\n            }\r\n            info.id++;\r\n        } else {\r\n            if (this.weaponArr.length >= constants.design.weaponNum) {\r\n                // 武器槽位已满\r\n                return;\r\n            }\r\n            // 新增\r\n            info = {};\r\n            info.id = designManager.getFirstIdByType(type);\r\n            this.weaponArr.push(info);\r\n            uiIndex = this.weaponArr.length - 1;\r\n        }\r\n\r\n        if (weaponId > 0) {\r\n            info.id = weaponId;\r\n        }\r\n\r\n        let weaponLayer = this.node.children[uiIndex];\r\n        if (!weaponLayer) {\r\n            return;\r\n        }\r\n        utilTools.forArr(weaponLayer.children, (node: Node) => {\r\n            let weaponUtil = node.getComponent(Weapon).weaponUtil;\r\n            if (weaponUtil && weaponUtil.forceDestroy) {\r\n                weaponUtil.forceDestroy();\r\n            }\r\n            node.destroy();\r\n        });\r\n\r\n        info.uiIndex = uiIndex;\r\n        let id = info.id;\r\n        let row = designManager.getRowById(constants.tableName.weapon, id);\r\n        let prefab = await this.loadWeaponPrefab(row.prefab);\r\n        if (id != info.id || !cocosUtil.isValid(this)) {\r\n            return;\r\n        }\r\n        let node = cocosUtil.instantiate(prefab);\r\n        let weapon = node.addComponent(Weapon);\r\n        node.parent = weaponLayer;\r\n        weapon.init(info);\r\n\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        // 武器\r\n        utilTools.forArr(this.node.children, (weaponNode: Node, index: number) => {\r\n            if (!weaponNode.active) {\r\n                return;\r\n            }\r\n            let node = weaponNode.children[0];\r\n            if (!node) {\r\n                return;\r\n            }\r\n            node.getComponent(Weapon).updateLogic(dt);\r\n        });\r\n    }\r\n}\r\n\r\n","//import AD from \"../../../AD/AD\";\r\n\r\nimport { view } from \"cc\";\r\nimport { tyqSDK } from \"../../tyqSDK\";\r\n\r\nconst global = {\r\n\t/**临时处理加的 2020-12-29 */\r\n\tlatticeAdunit: null,\r\n\t/**临时处理加的 2020-12-29 */\r\n\ticonCount: null,\r\n}\r\nclass wechat {\r\n\t////////////////////////////\r\n\t// 类成员\r\n\t///////////////////////////\r\n\tpublic static readonly _instance: wechat = new wechat();\r\n\t/**是否授权登录 */\r\n\tpublic isWxAuthorize: boolean = false;\r\n\t/** 系统信息 */\r\n\tprivate systemInfo: wx.types.SystemInfo = null;\r\n\t/** 登录按钮对象 */\r\n\tprivate userInfoButton: UserInfoButton = null;\r\n\t/** banner广告对象 */\r\n\tprivate bannerAd: BannerAd = null;\r\n\t/** 奖励视频广告对象 */\r\n\tprivate rewardedVideoAd: RewardedVideoAd = null;\r\n\t/** 插屏广告对象 */\r\n\tprivate interstitialAd = null;\r\n\t/**推荐位广告对象 */\r\n\tprivate RiconAD: iconAd = null;\r\n\tprivate LiconAD: iconAd = null;\r\n\t/**格子广告对象 */\r\n\tprivate gridAd: gridAd = null;\r\n\t/**格子广告数量 */\r\n\tprivate gridAdCunt: number = null;\r\n\t/** 游戏画面录制对象 */\r\n\tprivate GameRecorder: GameRecorder = null;\r\n\t/** 录屏开始事件 */\r\n\tprivate startListener: Function = null;\r\n\t/** 监听录屏继续事件 */\r\n\tprivate resumeListener: Function = null;\r\n\t/** 录屏暂停事件 */\r\n\tprivate pauseListener: Function = null;\r\n\t/**  录屏结束事件 */\r\n\tprivate stopListener: Function = null;\r\n\t/**  录屏错误事件 */\r\n\tprivate errorListener: Function = null;\r\n\t/** 录屏取消事件 */\r\n\tprivate abortListener: Function = null;\r\n\t/** 录制时间更新事件。在录制过程中触发该事件 */\r\n\tprivate timeUpdateListener: Function = null;\r\n\t/** 游戏圈对象 */\r\n\tprivate gameClub: GameClubButton = null;\r\n\t/** 意见反馈按钮 */\r\n\tprivate feedbackButton: FeedbackButton = null;\r\n\t/** 切换到前台事件 */\r\n\tprivate showListener: Function = null;\r\n\t/** 切换到后台事件 */\r\n\tprivate hideListener: Function = null;\r\n\t/** banner广告id */\r\n\tpublic _bannerAdUnitId = [];\r\n\tprivate _bannerAdObjList: BannerAd[] = [];\r\n\tprivate _bannerShowIndex = 0;\r\n\tprivate _bannerTimer = -1;\r\n\tprivate _bannerAdRefreshTimeOutId: number = 0;\r\n\t/** 奖励视频广告id */\r\n\tpublic _rewardedVideoAdUnitId = [];\r\n\r\n\tpublic _curRewardVideoAdUnitId = \"\"\r\n\tprivate _shareValue: number = 0\r\n\tprivate _rewardValue: number = 1\r\n\r\n\t/** 插屏广告id */\r\n\tpublic _interstitialAdUnitId = [];\r\n\t/**格子广告ID */\r\n\tprivate _latticeAdUnitId = ''\r\n\r\n\t/**推荐位广告，左右 */\r\n\tprivate _RIconAdunit = ''\r\n\tprivate _LIconAdunit = ''\r\n\r\n\t/** 登录按钮信息 */\r\n\tprivate mainBannerAD = null;\r\n\tprivate _userInfoButtonData = {\r\n\t\twidth: null,\r\n\t\theight: null,\r\n\t\tx: null,\r\n\t\ty: null,\r\n\t\turl: null\r\n\t};\r\n\t/** 反馈页面的按钮信息 */\r\n\tprivate _feedbackButtonData = {\r\n\t\twidth: null,\r\n\t\theight: null,\r\n\t\tx: null,\r\n\t\ty: null,\r\n\t\turl: null\r\n\t};\r\n\t/** banner广告的像素大小 */\r\n\tprivate _bannerSize = {\r\n\t\twidth: 600,\r\n\t\theight: 172\r\n\t};\r\n\r\n\tprivate _gameClubSize = {\r\n\t\ticon: '',\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\twidth: 0,\r\n\t\theight: 0\r\n\t};\r\n\tprivate _closeRewardVideoListener: Function = null;\r\n\t////////////////////////////\r\n\t// get、set访问器\r\n\t///////////////////////////\r\n\tpublic set RIconAduni(adUnitId: string) {\r\n\t\tthis._RIconAdunit = adUnitId;\r\n\t}\r\n\r\n\tpublic set LIconAduni(adUnitId: string) {\r\n\t\tthis._LIconAdunit = adUnitId;\r\n\t}\r\n\r\n\tpublic set bannerAdUnitId(adUnitId: string) {\r\n\t\t// this._bannerAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set rewardedVideoAdUnitId(adUnitId: string) {\r\n\t\t// this._rewardedVideoAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set interstitialAdUnitId(adUnitId: string) {\r\n\t\t// this._interstitialAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set bannerSize(size: any) {\r\n\t\tthis._bannerSize.width = size.width;\r\n\t\tthis._bannerSize.height = size.height;\r\n\t\tconsole.log(\"this._bannerSize = \", this._bannerSize)\r\n\t}\r\n\r\n\tpublic set latticeAdUnitId(adUnitId: string) {\r\n\t\tthis._latticeAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set gameClubSize(size: any) {\r\n\t\tthis._gameClubSize.x = size.x;\r\n\t\tthis._gameClubSize.y = size.y;\r\n\t\tthis._gameClubSize.width = size.width;\r\n\t\tthis._gameClubSize.height = size.height;\r\n\t\tthis._gameClubSize.icon = size.icon;\r\n\t}\r\n\r\n\tpublic set userInfoButtonData(data: any) {\r\n\t\tthis._userInfoButtonData.width = data.width;\r\n\t\tthis._userInfoButtonData.height = data.height;\r\n\t\tthis._userInfoButtonData.x = data.x;\r\n\t\tthis._userInfoButtonData.y = data.y;\r\n\t\tthis._userInfoButtonData.url = data.url;\r\n\t}\r\n\r\n\tpublic set closeRewardVideoListener(cb: Function) {\r\n\t\tthis._closeRewardVideoListener = cb;\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// get、set访问器\r\n\t///////////////////////////\r\n\tpublic constructor() {\r\n\t\tif (window.wx) {\r\n\t\t\t// this.registerRecordScreenEvent();\r\n\t\t\tthis.getSystemInfoSync();\r\n\t\t}\r\n\t}\r\n\t//预加载所有广告\r\n\tpublic preLoadAd() {\r\n\t\tthis.createRewardedVideoAd();\r\n\t\tthis.preLoadBanner();\r\n\t\tthis.createInterstitialAd();\r\n\t}\r\n\t//预加载所有banner广告\r\n\tpublic preLoadBanner() {\r\n\r\n\t\tfor (let i = 0; i < this._bannerAdUnitId.length; i++) {\r\n\t\t\tlet id = this._bannerAdUnitId[i];\r\n\t\t\tlet bannerAd = this.createBanner(id);\r\n\t\t\tthis._bannerAdObjList.push(bannerAd);\r\n\t\t}\r\n\r\n\t}\r\n\tprivate createBanner(id) {\r\n\t\tlet bannerSize = {\r\n\t\t\t// width: this._bannerSize.width / this.systemInfo.pixelRatio,\r\n\t\t\t// height: this._bannerSize.height / this.systemInfo.pixelRatio\r\n\t\t\twidth: this._bannerSize.width * 0.65,\r\n\t\t\theight: this._bannerSize.height * 0.35\r\n\t\t};\r\n\t\t// let id = this._bannerAdUnitId[Math.floor(Math.random() * this._bannerAdUnitId.length)];\r\n\t\tlet bannerObj = wx.createBannerAd({\r\n\t\t\t// 广告单元 id\r\n\t\t\tadUnitId: id,\r\n\t\t\t// 广告自动刷新的间隔时间，单位为秒，参数值必须大于等于30（该参数不传入时 Banner 广告不会自动刷新）\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this.systemInfo.windowWidth / 2 - bannerSize.width / 2,\r\n\t\t\t\ttop: this.systemInfo.windowHeight - bannerSize.height + this.systemInfo.windowHeight * 0.1,\r\n\t\t\t\theight: bannerSize.height,\r\n\t\t\t\twidth: bannerSize.width\r\n\t\t\t}\r\n\t\t});\r\n\t\t// tyqSDK.log('bannerSize: ', bannerSize, ', systemInfo: ', this.systemInfo, ',this.bannerAd.style: ', this.bannerAd.style);\r\n\r\n\t\tbannerObj.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载成功' + id);\r\n\r\n\t\t\t// 移除setTimeout\r\n\t\t\t// if (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\t// \tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t\t// }\r\n\t\t\t// if (isShow) this.bannerAd.show();\r\n\t\t\t// 延时刷新banner\r\n\t\t\t// if (refreshTime > 0) {\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = setTimeout(() => {\r\n\t\t\t// \t\tif (this.bannerAd)\r\n\t\t\t// \t\t\tthis.showBannerAd(refreshTime);\r\n\t\t\t// \t}, refreshTime * 1000);\r\n\t\t\t// }\r\n\t\t\t// next && next(true);\r\n\t\t});\r\n\t\tbannerObj.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载失败：', id, res);\r\n\t\t\t// next && next(false);\r\n\t\t});\r\n\t\tbannerObj.onResize((res: { width: number; height: number }) => {\r\n\t\t\tbannerObj.style.left = this.systemInfo.windowWidth / 2 - res.width / 2 - 0.1;\r\n\t\t\tbannerObj.style.top = this.systemInfo.windowHeight - res.height + 0.1;\r\n\t\t\t//AD.setErrNodeY(-((this.bannerAd.style.top * winSize.height / this.systemInfo.windowHeight) - winSize.height / 2));\r\n\t\t});\r\n\t\treturn bannerObj;\r\n\t}\r\n\t////////////////////////////\r\n\t// 登录模块\r\n\t///////////////////////////\r\n\t/**\r\n\t * 登陆接口\r\n\t * @param cbOK\r\n\t * @param cbFail\r\n\t */\r\n\tpublic wetchatLogin(cbOK, cbFail): void {\r\n\t\tlet data = {\r\n\t\t\twccode: null,\r\n\t\t\twcencrypted: null,\r\n\t\t\twciv: null,\r\n\t\t\t// userInfo: null\r\n\t\t};\r\n\t\t// 获取玩家数据\r\n\t\tlet getLoginData = () => {\r\n\t\t\tthis.login((code: any) => {\r\n\t\t\t\tdata.wccode = code;\r\n\t\t\t\tif (cbOK)\r\n\t\t\t\t\tcbOK(code);\r\n\t\t\t}, (res: any) => {\r\n\t\t\t\tdata.wcencrypted = res.encryptedData;\r\n\t\t\t\tdata.wciv = res.iv;\r\n\t\t\t\tif (cbFail)\r\n\t\t\t\t\tcbFail(data);\r\n\t\t\t});\r\n\t\t};\r\n\t\tgetLoginData();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取用户的当前设置。返回值中只会出现小程序已经向用户请求过的权限\r\n\t *\r\n\t * @param cbDone 登陆成功后回调\r\n\t * @param cbFail 登陆失败后回调\r\n\t */\r\n\tpublic getSetting(cbDone, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.getSetting)) {\r\n\t\t\twx.getSetting({\r\n\t\t\t\tsuccess: (res: { authSetting: wx.types.AuthSetting }) => {\r\n\t\t\t\t\t// if (res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t// \tif (cbDone)\r\n\t\t\t\t\t// \t\tcbDone(res.authSetting['scope.userInfo']);\r\n\t\t\t\t\t// } else\r\n\t\t\t\t\t// \tif (cbFail) cbFail(\"开关无\");\r\n\t\t\t\t\tcbDone(res.authSetting['scope.userInfo']);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (res) => {\r\n\t\t\t\t\tif (cbFail) cbFail(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconsole.error(\"----> 微信版本不支持getSetting API\");\r\n\t\t\tif (cbFail) cbFail(\"----> 微信版本不支持getSetting API\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建用户登录按钮\r\n\t */\r\n\tpublic createUserInfoButton(x = 0, y = 0, width = view.getVisibleSize().width, height = view.getVisibleSize().height): void {\r\n\t\tif (wechat.isSupportedAPI(wx.createUserInfoButton)) {\r\n\t\t\tthis.userInfoButton = wx.createUserInfoButton({\r\n\t\t\t\ttype: 'image',\r\n\t\t\t\t// image: this._userInfoButtonData.url,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\t// left: this.systemInfo.screenWidth * this._userInfoButtonData.x - this._userInfoButtonData.width / 2,\r\n\t\t\t\t\t// top: this.systemInfo.screenHeight * this._userInfoButtonData.y - this._userInfoButtonData.height / 2,\r\n\t\t\t\t\t// width: this._userInfoButtonData.width,\r\n\t\t\t\t\t// height: this._userInfoButtonData.height\r\n\t\t\t\t\tleft: x,\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\twidth: view.getVisibleSize().width,\r\n\t\t\t\t\theight: view.getVisibleSize().height\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用授权按钮，请升级到最新微信版本后重试');\r\n\t\t}\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 根据node的属性，创建一个授权按钮\r\n\t//  * @param btnNode\r\n\t//  * @param cbOk 成功后回调\r\n\t//  * @param cbFail 失败后回调\r\n\t//  */\r\n\t// public createAuthorizeBtnByNode(btnNode: Node, cbOk?: Function, cbFail?: Function): void {\r\n\t// \tif (!wechat.isSupportedAPI(wx.createUserInfoButton)) {\r\n\t// \t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用授权按钮，请升级到最新微信版本后重试');\r\n\t// \t\treturn;\r\n\t// \t}\r\n\t// \tthis.destroyAuthorizeBtn()\r\n\r\n\t// \tlet btnSize = size(btnNode.width + 10, btnNode.height + 10);\r\n\t// \tlet btnPosI = btnNode.convertToWorldSpaceAR(v2(0, 0));\r\n\t// \tlet frameSize = view.getFrameSize();\r\n\t// \tlet winSize = director.getWinSize();\r\n\t// \t//适配不同机型来创建微信授权按钮\r\n\t// \tlet left = (btnPosI.x - btnSize.width * 0.5) / winSize.width * frameSize.width;\r\n\t// \tlet top = (winSize.height - btnPosI.y - btnSize.height * 0.5) / winSize.height * frameSize.height;\r\n\t// \tlet width = btnSize.width / winSize.width * frameSize.width;\r\n\t// \tlet height = btnSize.height / winSize.height * frameSize.height;\r\n\r\n\t// \tthis.userInfoButton = wx.createUserInfoButton({\r\n\t// \t\ttype: 'text',\r\n\t// \t\ttext: '',\r\n\t// \t\t// type: 'image',\r\n\t// \t\t// image: this._userInfoButtonData.url,\r\n\t// \t\tstyle: {\r\n\t// \t\t\tleft: left,\r\n\t// \t\t\ttop: top,\r\n\t// \t\t\twidth: width,\r\n\t// \t\t\theight: height,\r\n\t// \t\t\t// lineHeight: 0,\r\n\t// \t\t\t// backgroundColor: '',\r\n\t// \t\t\t// color: '#ffffff',\r\n\t// \t\t\t// textAlign: 'center',\r\n\t// \t\t\t// fontSize: 16,\r\n\t// \t\t\t// borderRadius: 4\r\n\t// \t\t}\r\n\t// \t})\r\n\r\n\t// \tthis.onTapUserInfoButton(cbOk, cbFail)\r\n\t// }\r\n\r\n\tpublic destroyAuthorizeBtn(): void {\r\n\t\tif (this.userInfoButton) {\r\n\t\t\tthis.userInfoButton.destroy();\r\n\t\t\tthis.userInfoButton = null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * @description 监听用户点击登录按钮的事件\r\n\t */\r\n\tprivate onTapUserInfoButton(cbOK, cbFail): void {\r\n\t\tif (this.userInfoButton) {\r\n\t\t\tthis.userInfoButton.onTap((res: any) => {\r\n\t\t\t\t// 点击登录按钮，用户授权成功\r\n\t\t\t\ttyqSDK.log('onTap', res);\r\n\t\t\t\tif (res.userInfo) {\r\n\t\t\t\t\tthis.destroyAuthorizeBtn();\r\n\t\t\t\t\tif (cbOK)\r\n\t\t\t\t\t\tcbOK(res);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcbFail(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail(null);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @description 登录游戏服务\r\n\t */\r\n\tpublic login(cbOk, cbFail): void {\r\n\t\twx.login({\r\n\t\t\tsuccess: (res: { code: string }) => {\r\n\t\t\t\tcbOk(res.code);\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tcbFail();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 微信登录，获取 code 和 encryptData(未测试)\r\n\t */\r\n\tpublic getWxLoginResult(cb) {\r\n\t\twx.login({\r\n\t\t\tsuccess(loginResult) {\r\n\t\t\t\tconsole.warn(\"-----微信登录--\", loginResult)\r\n\t\t\t\twx.getUserInfo({\r\n\t\t\t\t\twithCredentials: true,\r\n\t\t\t\t\tsuccess(userResult) {\r\n\t\t\t\t\t\tconsole.warn(\"-----获取用户信息结果--\", userResult)\r\n\t\t\t\t\t\tcb(null, {\r\n\t\t\t\t\t\t\tcode: loginResult.code,\r\n\t\t\t\t\t\t\tencryptedData: userResult.encryptedData,\r\n\t\t\t\t\t\t\tiv: userResult.iv,\r\n\t\t\t\t\t\t\tuserInfo: userResult.userInfo\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.error(\"-----获取用户信息失败--\")\r\n\t\t\t\t\t\tcb(new Error('获取微信用户信息失败，请检查网络状态'), null);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfail() {\r\n\t\t\t\tcb(new Error('微信登录失败，请检查网络状态'), null);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\t/** 微信获得设置 */\r\n\tpublic wxGetSetting() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\twx.getSetting({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(\"微信授权信息1\", res);\r\n\t\t\t\t\t\t//是否授权\r\n\t\t\t\t\t\tif (!res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t\t\tconsole.log(\"未授权----\")\r\n\t\t\t\t\t\t\tlet sysInfo = wx.getSystemInfoSync();\r\n\t\t\t\t\t\t\t// 获取微信界面大小\r\n\t\t\t\t\t\t\tlet screenWidth = sysInfo.screenWidth;\r\n\t\t\t\t\t\t\tlet screenHeight = sysInfo.screenHeight;\r\n\t\t\t\t\t\t\tlet button = wx.createUserInfoButton({\r\n\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\ttext: '',\r\n\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t//   left: screenWidth/2-260/2,\r\n\t\t\t\t\t\t\t\t\t//   top: screenHeight-260,\r\n\t\t\t\t\t\t\t\t\t//   width: 260,\r\n\t\t\t\t\t\t\t\t\t//   height: 60,\r\n\t\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\t\twidth: screenWidth,\r\n\t\t\t\t\t\t\t\t\theight: screenHeight,\r\n\t\t\t\t\t\t\t\t\tlineHeight: 60,\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0)',\r\n\t\t\t\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0)',\r\n\t\t\t\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\t\t\t\tfontSize: 24,\r\n\t\t\t\t\t\t\t\t\tborderRadius: 4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbutton.onTap((res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"授权结果\", res)\r\n\t\t\t\t\t\t\t\tif (res.errMsg == \"getUserInfo:ok\") {\r\n\t\t\t\t\t\t\t\t\tthis.isWxAuthorize = true\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权结果1 resolve\", res)\r\n\t\t\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权结果2 reject\", res)\r\n\t\t\t\t\t\t\t\t\treject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbutton.hide()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tconsole.log(\"显示授权按钮\", button)\r\n\t\t\t\t\t\t\tbutton.show();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isWxAuthorize = true\r\n\t\t\t\t\t\t\tconsole.log(\"已经授权了2\")\r\n\t\t\t\t\t\t\t//已经授权了\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(\"微信授权失败处理函数11\");\r\n\t\t\t\t\t\treject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(\"微信授权异常处理函数11\");\r\n\t\t\t\treject(e);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// wx.getSetting({\r\n\t\t\t// \tsuccess(res) {\r\n\t\t\t// \t\tconsole.log(\"----微信授权\", res)\r\n\t\t\t// \t  if (res.authSetting['scope.userInfo']==false) {\r\n\t\t\t// \t\twx.authorize({\r\n\t\t\t// \t\t  scope: 'scope.userInfo',\r\n\t\t\t// \t\t  success () {\r\n\t\t\t// \t\t\tconsole.log(\"-----成功\")\r\n\t\t\t// \t\t\twx.getUserInfo({\r\n\t\t\t// \t\t\t\tsuccess: (res: any) => {\r\n\t\t\t// \t\t\t\t\tif (resolve)\r\n\t\t\t// \t\t\t\t\t\tresolve(res);\r\n\t\t\t// \t\t\t\t},\r\n\t\t\t// \t\t\t\tfail: (err) => {\r\n\t\t\t// \t\t\t\t\tif (reject)\r\n\t\t\t// \t\t\t\t\t\treject(err);\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t});\r\n\t\t\t// \t\t  },\r\n\t\t\t// \t\t  fail(){\r\n\t\t\t// \t\t\tconsole.log(\"-----微信授权失败处理函数11\")\r\n\t\t\t// \t\t\treject(res);\r\n\t\t\t// \t\t  }\r\n\t\t\t// \t\t})\r\n\t\t\t// \t  }else{\r\n\t\t\t// \t\tthis.isWxAuthorize = true\r\n\t\t\t// \t\tconsole.log(\"已经授权了2\")\r\n\t\t\t// \t\t//已经授权了\t\t\t\t\t\t\r\n\t\t\t// \t\tresolve(res);\r\n\t\t\t// \t  }\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: (err) => {\r\n\t\t\t// \t\tif (reject)\r\n\t\t\t// \t\t\treject(err);\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\r\n\r\n\r\n\t\t\t// wx.getSetting({\r\n\t\t\t// \tsuccess(res) {\r\n\t\t\t// \t\tresolve(res);\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: (err) => {\r\n\t\t\t// \t\tif (reject)\r\n\t\t\t// \t\t\treject(err);\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取用户信息\r\n\t */\r\n\tpublic getUserInfo(resolve?, reject?): void {\r\n\t\tthis.getSetting((res: any) => {\r\n\t\t\twx.getUserInfo({\r\n\t\t\t\tsuccess: (res: any) => {\r\n\t\t\t\t\tif (resolve)\r\n\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tif (reject)\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, (res) => {\r\n\t\t\tif (reject) {\r\n\t\t\t\ttyqSDK.log(res);\r\n\t\t\t\treject(\"getsetting 失败\");\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 分享\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 分享，主动拉起转发，进入选择通讯录界面\r\n\t * @param _title\r\n\t * @param _imageUrl\r\n\t * @param _query\r\n\t */\r\n\tpublic shareAppMessage(_title: string, _imageUrl: string, _query: string): void {\r\n\t\twx.shareAppMessage({\r\n\t\t\ttitle: _title,\r\n\t\t\timageUrl: _imageUrl,\r\n\t\t\tquery: _query\r\n\t\t});\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// banner广告\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 显示banner广告\r\n\t   * @param refreshTime 自动刷新时间，默认30秒，必须>=30秒；\r\n\t */\r\n\tpublic showBannerAd(next?, refreshTime: number = 30) {\r\n\t\tif (!wechat.isSupportedAPI(wx.createBannerAd)) return;\r\n\t\tif (!this.bannerAd) {\r\n\t\t\tthis.createBannerAd(refreshTime, next);\r\n\t\t\tthis.bannerAd.show();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.bannerAd.show();\r\n\t\t\tnext && next(true);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//轮流显示banner\r\n\tpublic showBannerTurns(times: number) {\r\n\t\tif (!wechat.isSupportedAPI(wx.createBannerAd)) return;\r\n\t\tclearInterval(this._bannerTimer);\r\n\t\tthis.showBannerNext();\r\n\r\n\t\tthis._bannerTimer = setInterval(() => {\r\n\t\t\tthis.showBannerNext();\r\n\t\t}, times)\r\n\t}\r\n\r\n\r\n\tprivate showBannerNext() {\r\n\t\tif (this._bannerAdObjList.length <= 0) {\r\n\t\t\tconsole.error('zzzzzzz无banner广告');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._bannerAdObjList.forEach(ad => {\r\n\t\t\tad.hide();\r\n\t\t})\r\n\t\tthis._bannerAdObjList[this._bannerShowIndex].hide();\r\n\t\tthis._bannerShowIndex++;\r\n\t\tif (this._bannerShowIndex >= this._bannerAdObjList.length) {\r\n\t\t\tthis._bannerShowIndex = 0;\r\n\t\t}\r\n\t\tlet bannerAd = this._bannerAdObjList[this._bannerShowIndex];\r\n\r\n\t\tif (bannerAd) {\r\n\t\t\tbannerAd.show().catch(() => {\r\n\t\t\t\tlet id = this._bannerAdUnitId[this._bannerShowIndex];\r\n\t\t\t\tbannerAd = this.createBanner(id);\r\n\t\t\t\tif (bannerAd) {\r\n\t\t\t\t\tbannerAd.show();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet id = this._bannerAdUnitId[this._bannerShowIndex];\r\n\t\t\tbannerAd = this.createBanner(id);\r\n\t\t\tif (bannerAd) {\r\n\t\t\t\tbannerAd.show();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @description 隐藏banner广告\r\n\t */\r\n\tpublic hideBannerAd() {\r\n\t\tif (this.bannerAd) {\r\n\t\t\tthis.bannerAd.hide();\r\n\t\t}\r\n\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t}\r\n\t\tclearInterval(this._bannerTimer);\r\n\t\tthis._bannerAdObjList.forEach(ad => {\r\n\t\t\tad.hide();\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t* @description 销毁banner广告\r\n\t*/\r\n\tpublic destroyBannerAd() {\r\n\t\tif (this.bannerAd) {\r\n\t\t\tthis.bannerAd.destroy();\r\n\t\t\tthis.bannerAd = null;\r\n\t\t}\r\n\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建banner广告\r\n\t */\r\n\tpublic createBannerAd(refreshTime, next?, isShow = true) {\r\n\t\ttyqSDK.log(\"banner width= \", this._bannerSize.width, this._bannerAdUnitId)\r\n\t\tlet bannerSize = {\r\n\t\t\t// width: this._bannerSize.width / this.systemInfo.pixelRatio,\r\n\t\t\t// height: this._bannerSize.height / this.systemInfo.pixelRatio\r\n\t\t\twidth: this._bannerSize.width * 0.65,\r\n\t\t\theight: this._bannerSize.height * 0.35\r\n\t\t};\r\n\t\tlet id = this._bannerAdUnitId[Math.floor(Math.random() * this._bannerAdUnitId.length)];\r\n\t\tthis.bannerAd = wx.createBannerAd({\r\n\t\t\t// 广告单元 id\r\n\t\t\tadUnitId: id,\r\n\t\t\t// 广告自动刷新的间隔时间，单位为秒，参数值必须大于等于30（该参数不传入时 Banner 广告不会自动刷新）\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this.systemInfo.windowWidth / 2 - bannerSize.width / 2,\r\n\t\t\t\ttop: this.systemInfo.windowHeight - bannerSize.height + this.systemInfo.windowHeight * 0.1,\r\n\t\t\t\theight: bannerSize.height,\r\n\t\t\t\twidth: bannerSize.width\r\n\t\t\t}\r\n\t\t});\r\n\t\ttyqSDK.log('bannerSize: ', bannerSize, ', systemInfo: ', this.systemInfo, ',this.bannerAd.style: ', this.bannerAd.style);\r\n\r\n\t\tthis.bannerAd.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载成功');\r\n\t\t\t// 移除setTimeout\r\n\t\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t\t}\r\n\t\t\tif (isShow) this.bannerAd.show();\r\n\t\t\t// 延时刷新banner\r\n\t\t\t// if (refreshTime > 0) {\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = setTimeout(() => {\r\n\t\t\t// \t\tif (this.bannerAd)\r\n\t\t\t// \t\t\tthis.showBannerAd(refreshTime);\r\n\t\t\t// \t}, refreshTime * 1000);\r\n\t\t\t// }\r\n\t\t\tnext && next(true);\r\n\t\t});\r\n\t\tthis.bannerAd.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载失败：', res);\r\n\t\t\tnext && next(false);\r\n\t\t});\r\n\t\tthis.bannerAd.onResize((res: { width: number; height: number }) => {\r\n\t\t\tthis.bannerAd.style.left = this.systemInfo.windowWidth / 2 - res.width / 2 - 0.1;\r\n\t\t\tthis.bannerAd.style.top = this.systemInfo.windowHeight - res.height + 0.1;\r\n\t\t\t//AD.setErrNodeY(-((this.bannerAd.style.top * winSize.height / this.systemInfo.windowHeight) - winSize.height / 2));\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t////////////////////////////\r\n\t// 奖励广告\r\n\t///////////////////////////\r\n\tpublic showRewardVideoAd(successShowCb?: Function) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.createRewardedVideoAd();\r\n\t\t\tif (!this.rewardedVideoAd) {\r\n\t\t\t\ttyqSDK.log('=====> @framework, 奖励视频对象为不存在');\r\n\t\t\t\treject();\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tlet closeListener = (res: { isEnded: boolean }) => {\r\n\t\t\t\tlet isComplete: boolean;\r\n\t\t\t\t// 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n\t\t\t\tif (res && res.isEnded || res === undefined) {\r\n\t\t\t\t\tisComplete = true;\r\n\t\t\t\t\tresolve(isComplete);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tisComplete = false;\r\n\t\t\t\t\tresolve(isComplete);\r\n\t\t\t\t}\r\n\t\t\t\tthis.closeRewardVideo();\r\n\t\t\t\tthis.rewardedVideoAd.offClose(closeListener);\r\n\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\tthis.rewardedVideoAd = null;\r\n\t\t\t\tthis.createRewardedVideoAd();\r\n\t\t\t};\r\n\r\n\t\t\tlet errorListener = (res: { errMsg: string; errCode: number }) => {\r\n\t\t\t\ttyqSDK.log('=====> @framework, 奖励视频发生错误：', res);\r\n\t\t\t\t// 再拉一次视频\r\n\t\t\t\tthis.rewardedVideoAd.load()\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\treturn this.rewardedVideoAd.show();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(errorListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(errorListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tthis.rewardedVideoAd.onClose(closeListener);\r\n\t\t\tthis.rewardedVideoAd.onError(errorListener);\r\n\r\n\t\t\tthis.rewardedVideoAd.load().then(() => {\r\n\t\t\t\tthis.rewardedVideoAd.show().then(() => {\r\n\t\t\t\t\tif (successShowCb) {\r\n\t\t\t\t\t\tsuccessShowCb();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建奖励视频单例（小游戏端是全局单例）\r\n\t */\r\n\tpublic createRewardedVideoAd(): void {\r\n\t\tif (!wx.createRewardedVideoAd) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用奖励视频功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.rewardedVideoAd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet id = Math.floor(Math.random() * this._rewardedVideoAdUnitId.length);\r\n\t\tthis.rewardedVideoAd = wx.createRewardedVideoAd({\r\n\t\t\tadUnitId: this._rewardedVideoAdUnitId[id]\r\n\t\t});\r\n\t\tthis._curRewardVideoAdUnitId = this._rewardedVideoAdUnitId[id]\r\n\t\tthis.rewardedVideoAd.onLoad(this.rewardedVideoAdOnLoadListener.bind(this));\r\n\t\tthis.rewardedVideoAd.onError(this.rewardedVideoAdOnErrorListener);\r\n\t}\r\n\r\n\tprivate rewardedVideoAdOnErrorListener() {\r\n\t\ttyqSDK.log('=====> @framework, 加载视频广告失败');\r\n\t}\r\n\r\n\tprivate rewardedVideoAdOnLoadListener(res) {\r\n\t\ttyqSDK.log('=====> @framework, 加载视频广告成功', res);\r\n\t\tif (res) {\r\n\t\t\tif (res.shareValue) {\r\n\t\t\t\tthis._shareValue = parseInt(res.shareValue)\r\n\t\t\t}\r\n\r\n\t\t\tif (res.rewardValue) {\r\n\t\t\t\tthis._rewardValue = parseInt(res.rewardValue)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic isShareBehavior() {\r\n\t\treturn this._shareValue == 1\r\n\t}\r\n\r\n\tpublic isRewardBehavior() {\r\n\t\treturn this._rewardValue == 1\r\n\t}\r\n\r\n\r\n\tpublic reportShareBehavior(data: any) {\r\n\t\tdata.adunit = this._curRewardVideoAdUnitId\r\n\t\tdata.sceneID = 1\r\n\t\tdata.shareValue = this._shareValue\r\n\t\tdata.rewardValue = this._rewardValue\r\n\r\n\t\tconst result = this.rewardedVideoAd.reportShareBehavior(data)\r\n\t\tif (result) {\r\n\t\t\ttyqSDK.log('=====> @framework, 视频广告行为上报-成功', data);\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework, 视频广告行为上报-失败', data);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate closeRewardVideo(): void {\r\n\t\tif (this._closeRewardVideoListener) {\r\n\t\t\tthis._closeRewardVideoListener();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 插屏广告\r\n\t///////////////////////////\r\n\tpublic showInterstitialAd(closeCb?, successShowCb?: Function): void {\r\n\t\tif (!wx.createInterstitialAd) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用插屏广告功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.createInterstitialAd();\r\n\r\n\t\tlet onErrorListener = (res) => {\r\n\t\t\tthis.interstitialAd.offError(onErrorListener);\r\n\t\t\tthis.interstitialAd.offClose(onCloseListener);\r\n\t\t\tthis.interstitialAd.offLoad(this.interstitialAdOnLoadListener);\r\n\t\t\tthis.interstitialAd = null;\r\n\t\t\ttyqSDK.log('=====> @framework,插屏创建失败: ', res);\r\n\t\t\tcloseCb && closeCb();\r\n\t\t};\r\n\t\tthis.interstitialAd.onError(onErrorListener);\r\n\r\n\t\tlet onCloseListener = (res) => {\r\n\t\t\tthis.interstitialAd.offError(onErrorListener);\r\n\t\t\tthis.interstitialAd.offClose(onCloseListener);\r\n\t\t\tthis.interstitialAd.offLoad(this.interstitialAdOnLoadListener);\r\n\t\t\tthis.interstitialAd = null;\r\n\t\t\ttyqSDK.log('----> 插屏 广告关闭')\r\n\t\t\tcloseCb && closeCb();\r\n\t\t\tthis.createInterstitialAd();\r\n\t\t};\r\n\t\tthis.interstitialAd.onClose(onCloseListener);\r\n\r\n\t\tthis.interstitialAd.show().then(() => {\r\n\t\t\ttyqSDK.log(\"----> 成功显示插屏广告\");\r\n\t\t\tif (successShowCb) {\r\n\t\t\t\tsuccessShowCb();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tpublic createInterstitialAd() {\r\n\t\tif (!this.interstitialAd) {\r\n\t\t\tlet id = this._interstitialAdUnitId[Math.floor(Math.random() * this._interstitialAdUnitId.length)];\r\n\t\t\tthis.interstitialAd = wx.createInterstitialAd({\r\n\t\t\t\tadUnitId: id\r\n\t\t\t});\r\n\t\t\tthis.interstitialAd.onLoad(this.interstitialAdOnLoadListener);\r\n\t\t\t// this.interstitialAd.onError(() => {\r\n\t\t\t// \ttyqSDK.log('=====> @framework,插屏创建失败');\r\n\t\t\t// });\r\n\t\t}\r\n\r\n\t}\r\n\tprivate interstitialAdOnLoadListener() {\r\n\t\ttyqSDK.log('=====> @framework,插屏创建成功');\r\n\t}\r\n\t////////////////////////////\r\n\t// 游戏圈\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 创建微信游戏圈\r\n\t */\r\n\tpublic createGameClubButton(): void {\r\n\t\t// 微信圈是用户必要的功能，不需求弹出提示\r\n\t\tif (!wx.createGameClubButton) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用游戏圈功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.gameClub) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.gameClub = wx.createGameClubButton({\r\n\t\t\ticon: this._gameClubSize.icon,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this._gameClubSize.x / this.systemInfo.pixelRatio,\r\n\t\t\t\ttop: this._gameClubSize.y / this.systemInfo.pixelRatio,\r\n\t\t\t\twidth: this._gameClubSize.width,\r\n\t\t\t\theight: this._gameClubSize.height\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.gameClub.hide();\r\n\t\ttyqSDK.log('gameClub', this.gameClub);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 显示微信游戏圈\r\n\t */\r\n\tpublic showGameClub(): void {\r\n\t\ttyqSDK.log('显示游戏圈：', this.gameClub);\r\n\t\tthis.createGameClubButton();\r\n\t\tif (this.gameClub) {\r\n\t\t\tthis.gameClub.show();\r\n\t\t\ttyqSDK.log('显示游戏圈成功');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 隐藏微信游戏圈\r\n\t */\r\n\tpublic hideGameClub(): void {\r\n\t\tif (this.gameClub) {\r\n\t\t\tthis.gameClub.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 开放数据域\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 向开放数据域发送消息\r\n\t * @param msg 要发送的消息，message 中及嵌套对象中 key 的 value 只能是 primitive value。即 number、string、boolean、null、undefined\r\n\t */\r\n\tpublic postMessage(msg: any, info?: any): void {\r\n\t\tlet data = {\r\n\t\t\tmessage: '',\r\n\t\t\tvalue: info\r\n\t\t}\r\n\t\tdata.message = msg;\r\n\t\tdata.value = info;\r\n\t\ttyqSDK.log('发送信息: ', data);\r\n\t\twx.getOpenDataContext().postMessage(data);\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 意见反馈\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 创建打开意见反馈页面的按钮, 默认使用图片按钮的形式创建\r\n\t */\r\n\tpublic createFeedbackButton(cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.createFeedbackButton)) {\r\n\t\t\tthis.feedbackButton = wx.createFeedbackButton({\r\n\t\t\t\ttype: 'image', // 按钮的类型.支持text、image\r\n\t\t\t\timage: this._feedbackButtonData.url,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tleft: this._feedbackButtonData.x, // 左上角横坐标\r\n\t\t\t\t\ttop: this._feedbackButtonData.y, // 左上角纵坐标\r\n\t\t\t\t\twidth: this._feedbackButtonData.width, // 宽度\r\n\t\t\t\t\theight: this._feedbackButtonData.height // 高度\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcbOk(this.feedbackButton);\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用反馈按钮，请升级到最新微信版本后重试');\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 监听意见反馈按钮的点击事件(在创建意见反馈按钮后，立即执行该函数，注册点击事件)，只能使用一次\r\n\t */\r\n\tpublic onTapFeedbackButton(cbOk, cbFail): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.onTap(() => {\r\n\t\t\t\tcbOk();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 显示意见反馈按钮\r\n\t */\r\n\tpublic showFeedbackButton(): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.show();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 隐藏意见反馈按钮\r\n\t */\r\n\tpublic hideFeedbackButton(): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 录屏\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 获取全局唯一的游戏画面录制对象\r\n\t */\r\n\tpublic getGameRecorder(cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.getGameRecorder)) {\r\n\t\t\tthis.GameRecorder = wx.getGameRecorder();\r\n\t\t\tcbOk();\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic registerRecordScreenEvent(): void {\r\n\t\tif (!wechat.isSupportedAPI(wx.getGameRecorder)) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前客户端版过低，无法使用录制功能，请升级到最新客户端版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.GameRecorder = wx.getGameRecorder();\r\n\t\t// 监听录屏继续事件\r\n\t\tthis.GameRecorder.on('start', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.resumeListener) {\r\n\t\t\t\tthis.resumeListener();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 监听录屏暂停事件\r\n\t\tthis.GameRecorder.on('pause', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.pauseListener) {\r\n\t\t\t\tthis.pauseListener();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 监听录屏结束事件。可以通过 onStop 接口监听录屏结束事件，获得录屏地址\r\n\t\tthis.GameRecorder.on('stop', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.stopListener) {\r\n\t\t\t\ttyqSDK.log('视频的时长：', res.duration);\r\n\t\t\t\tthis.stopListener(res.duration);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 监听录屏错误事件\r\n\t\tthis.GameRecorder.on('error', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\ttyqSDK.log('=====> @framework,录屏错误：', res.error.message, ',code: ', res.error.code);\r\n\t\t\tif (this.errorListener) {\r\n\t\t\t\tthis.errorListener();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 录制时间更新事件。在录制过程中触发该事件\r\n\t\tthis.GameRecorder.on('timeUpdate', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\ttyqSDK.log('=====> @framework,录屏到第几秒：', res.currentTime);\r\n\t\t\tif (this.timeUpdateListener) {\r\n\t\t\t\tthis.timeUpdateListener();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 录制取消事件\r\n\t\tthis.GameRecorder.on('abort', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.abortListener) {\r\n\t\t\t\tthis.abortListener();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *  @description 开始录屏\r\n\t * @param callback\r\n\t */\r\n\tpublic startRecordScreen(callback?: Function): void {\r\n\t\treturn\r\n\t\tthis.startListener = callback;\r\n\t\tthis.GameRecorder.start({\r\n\t\t\tfps: 24,\r\n\t\t\tduration: 7200,\r\n\t\t\tbitrate: 1000,\r\n\t\t\tgop: 12\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 暂停录屏\r\n\t */\r\n\tpublic pauseRecordScreen(callback?: Function): void {\r\n\t\tthis.pauseListener = callback;\r\n\t\tthis.GameRecorder.pause();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 恢复录制游戏画面\r\n\t * @param callback\r\n\t */\r\n\tpublic resumeRecordScreen(callback?: Function): void {\r\n\t\tthis.resumeListener = callback;\r\n\t\tthis.GameRecorder.resume();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 结束录制游戏画面。结束录制后可以发起分享\r\n\t * @param callback\r\n\t */\r\n\tpublic stopRecordScreen(callback?: Function): void {\r\n\t\tthis.stopListener = callback;\r\n\t\tthis.GameRecorder.stop();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 放弃录制游戏画面。此时已经录制的内容会被丢弃\r\n\t * @param callback\r\n\t */\r\n\tpublic abortRecordScreen(callback?: Function): void {\r\n\t\tthis.abortListener = callback;\r\n\t\tthis.GameRecorder.abort();\r\n\t}\r\n\r\n\tpublic createGameRecorderShareButton(): void {\r\n\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 其他能力\r\n\t///////////////////////////\r\n\t/**\r\n\t * 监听小游戏回到前台的事件\r\n\t * @param callbak\r\n\t */\r\n\tpublic onShow(callbak): void {\r\n\t\tthis.showListener = callbak;\r\n\t\twx.onShow(this.onShowListener.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * @description 取消监听小游戏回到前台的事件\r\n\t */\r\n\tpublic offShow(): void {\r\n\t\twx.offShow(this.onShowListener);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 监听小游戏隐藏到后台事件。锁屏、按 HOME 键退到桌面、显示在聊天顶部等操作会触发此事件\r\n\t * @param callbak\r\n\t */\r\n\tpublic onHide(callbak): void {\r\n\t\tthis.hideListener = callbak;\r\n\t\twx.onHide(this.onHideListener.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * @description 取消监听小游戏隐藏到后台事件\r\n\t */\r\n\tpublic offHide(): void {\r\n\t\tthis.hideListener = null;\r\n\t\twx.offHide(this.onHideListener);\r\n\t}\r\n\r\n\tpublic onShowListener(res): void {\r\n\t\tif (this.showListener) {\r\n\t\t\tthis.showListener(res);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic onHideListener(): void {\r\n\t\tif (this.hideListener) {\r\n\t\t\tthis.hideListener();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 打开另一个小程序\r\n\t * @param _appId\r\n\t * @param _path\r\n\t */\r\n\tpublic navigateToMiniProgram(_appId: string, _path: string, cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.navigateToMiniProgram)) {\r\n\t\t\twx.navigateToMiniProgram({\r\n\t\t\t\tappId: _appId,\r\n\t\t\t\tpath: _path,\r\n\t\t\t\tenvVersion: 'release',\r\n\t\t\t\tsuccess: () => {\r\n\t\t\t\t\tcbOk();\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tcbFail();\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 震动\r\n\t///////////////////////////\r\n\t/**\r\n\t\t * 使手机发生较长时间的振动。\r\n\t\t */\r\n\t/**\r\n\t * 使手机发生较长时间的振动。\r\n\t * @param cb 回调\r\n\t */\r\n\tpublic vibrateLong(cb?: Function): void {\r\n\t\tif (cb)\r\n\t\t\tconsole.warn(\"----> vibrateLong 微信可能没有cb\");\r\n\t\twx.vibrateLong();\r\n\t};\r\n\t/**\r\n\t * 使手机发生较短时间的振动\r\n\t * @param cb 回调\r\n\t */\r\n\tpublic vibrateShort(cb?: Function): void {\r\n\t\tconsole.warn(\"----> vibrateShort 微信可能没有cb\");\r\n\t\twx.vibrateShort();\r\n\t};\r\n\t////////////////////////////\r\n\t// 通用\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 获取系统信息\r\n\t */\r\n\tpublic getSystemInfoSync(): void {\r\n\t\tthis.systemInfo = wx.getSystemInfoSync();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 是否支持改API\r\n\t * @param api\r\n\t */\r\n\tprivate static isSupportedAPI(api: any): boolean {\r\n\t\tif (api) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\twx.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 退出小程序\r\n\t * @param cb\r\n\t */\r\n\tpublic exitMiniProgram(cb: any): void {\r\n\t\twx.exitMiniProgram(cb);\r\n\t};\r\n\r\n\t/**\r\n\t * 显示灰色背景的消息提示框\r\n\t * @param title 内容\r\n\t * @param duration 提示框停留时间，单位ms\r\n\t * @param callback 成功后回调\r\n\t */\r\n\tpublic showToast(title: string, duration: number = 3000, callback?: Function): void {\r\n\t\twx.showToast({\r\n\t\t\ttitle: title,\r\n\t\t\tduration: duration,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tif (callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 获取系统信息\r\n\t * @param callback 成功后回调\r\n\t */\r\n\tpublic getSystemInfo(callback?: Function): void {\r\n\t\twx.getSystemInfo({\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (callback) callback(res);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * 阿拉丁事件\r\n\t * @param str\r\n\t * @param objOrStr {key:string,value:string}\r\n\t */\r\n\tpublic aldSendEvent(str, objOrStr?): void {\r\n\t\ttyqSDK.log('send msg: ', str);\r\n\t\tif (wx.aldSendEvent) {\r\n\t\t\tif (objOrStr)\r\n\t\t\t\twx.aldSendEvent(str);\r\n\t\t\telse\r\n\t\t\t\twx.aldSendEvent(str, objOrStr);\r\n\t\t} else\r\n\t\t\tconsole.error(\"----> 阿拉丁接入失败，请检查game.js\");\r\n\t}\r\n\r\n\t/**\r\n\t * 创建供量主广告实例\r\n\t */\r\n\tpublic createIconAd() {\r\n\r\n\t\tlet styleItemArray = [...Array(global.iconCount + 1).map((_, i) => ({\r\n\t\t\tappNameHidden: false,\r\n\t\t\tcolor: 'white',\r\n\t\t\tsize: 100,\r\n\t\t\tborderWidth: 100,\r\n\t\t\tborderColor: 'white',\r\n\t\t\tleft: 100 * i,\r\n\t\t\ttop: 100,\r\n\t\t}))]\r\n\t\t// 创建推荐位实例，提前初始化\r\n\t\tthis.LiconAD = wx.createGameIcon({\r\n\t\t\tadUnitId: this._LIconAdunit,\r\n\t\t\tcount: global.iconCount,\r\n\t\t\tstyle: styleItemArray\r\n\t\t})\r\n\r\n\t\t// this.RiconAD = wx.createGameIcon({\r\n\t\t// \tadUnitId:this._RIconAdunit,\r\n\t\t// \tcount:global.iconCount,\r\n\t\t// \tstyle:styleItemArray\r\n\t\t// })\r\n\t\tthis.LiconAD.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, 小游戏推荐左边icon加载失败：', res);\r\n\t\t\t//next && next(false);\r\n\t\t});\r\n\t\tthis.LiconAD.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, 小游戏推荐左边icon加载成功');\r\n\t\t})\r\n\t\t// this.RiconAD.onError((res)=>{\r\n\t\t// \ttyqSDK.log('=====> @framework, 小游戏推荐右边icon加载失败：',res);\r\n\t\t// \t//next && next(false);\r\n\t\t// });\r\n\t\t// this.RiconAD.onLoad(()=>{\r\n\t\t// \ttyqSDK.log('=====> @framework, 小游戏推荐右边icon加载成功');\r\n\t\t// })\r\n\t\tthis.LiconAD.onResize(size => {\r\n\t\t\t//偶数  自适应排位置\r\n\t\t\tvar starTop = 0;\r\n\t\t\tif (global.iconCount % 2 === 0) {\r\n\t\t\t\tstarTop = this.systemInfo.windowHeight / 2 - global.iconCount / 2 * size[0].height;\r\n\t\t\t} else {\r\n\t\t\t\tstarTop = this.systemInfo.windowHeight / 2 - global.iconCount / 2 * size[0].height + size[0].height / 2;\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < size.length; i++) {\r\n\t\t\t\tsize[i].left = 10\r\n\t\t\t\tsize[i].top = starTop + (72 * i);\r\n\t\t\t}\r\n\t\t})\r\n\t\t//同一时间只能展示一个，放弃右边的\r\n\t\t// this.RiconAD.onResize(size =>{\r\n\t\t// \t//偶数  自适应排位置\r\n\t\t// \tvar starTop = 0;\r\n\t\t// \tif(global.iconCount%2 === 0){\r\n\t\t// \t\tstarTop = this.systemInfo.windowHeight/2 - global.iconCount/2*size[0].height;\r\n\t\t// \t}else{\r\n\t\t// \t\tstarTop = this.systemInfo.windowHeight/2 - global.iconCount/2*size[0].height+size[0].height/2;\r\n\t\t// \t}\r\n\t\t// \tfor (let i = 0; i < size.length; i++) {\r\n\t\t// \t\tsize[i].left = this.systemInfo.windowWidth-10\r\n\t\t// \t\tsize[i].top = starTop + (72*i);\r\n\t\t// \t}\r\n\t\t// })\r\n\t}\r\n\r\n\t/**\r\n\t * 显示小游戏推荐广告\r\n\t */\r\n\tpublic showIconAd(dir: string) {\r\n\t\tif (dir == 'R') {\r\n\t\t\tif (this.RiconAD) {\r\n\t\t\t\tthis.RiconAD.load().then(() => {\r\n\t\t\t\t\tthis.RiconAD.show()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(this.createIconAd, 1000)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.LiconAD) {\r\n\t\t\t\tthis.LiconAD.load().then(() => {\r\n\t\t\t\t\tthis.LiconAD.show()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(this.createIconAd, 1000)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**创建格子广告 */\r\n\tpublic createGridAd(count: number) {\r\n\t\tthis.gridAd = wx.createGridAd({\r\n\t\t\tadUnitId: global.latticeAdunit,\r\n\t\t\tadTheme: 'white',\r\n\t\t\tgridCount: count,\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: this.systemInfo.windowHeight / 2 - 350,\r\n\t\t\t\twidth: 500,\r\n\t\t\t\topacity: 0.8\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.gridAd.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, 格子广告加载成功');\r\n\t\t\tthis.gridAdCunt = count;\r\n\t\t});\r\n\t\tthis.gridAd.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, 格子广告加载失败：', res);\r\n\t\t});\r\n\t}\r\n\r\n\t/**显示格子广告 */\r\n\tpublic showGridAd(count: number) {\r\n\t\t//数量不一样的时候重新创建格子\r\n\t\tif (count != this.gridAdCunt) {\r\n\t\t\tif (this.gridAd) {\r\n\t\t\t\tthis.gridAd.destroy();\r\n\t\t\t}\r\n\t\t\tthis.createGridAd(count);\r\n\t\t}\r\n\t\tthis.gridAd.show();\r\n\t}\r\n\r\n\t/**隐藏格子广告 */\r\n\tpublic hideGridAd() {\r\n\t\tthis.gridAd.hide();\r\n\t}\r\n\r\n\t/**\r\n\t * 显示转发和分享到朋友圈\r\n\t * @param bool 是否使用带 shareTicket 的转发详情\r\n\t */\r\n\tpublic showShareMenu(bool: boolean = false) {\r\n\t\tif (window.wx) {\r\n\t\t\twx.showShareMenu({\r\n\t\t\t\twithShareTicket: bool,\r\n\t\t\t\tmenus: ['shareAppMessage', 'shareTimeline']\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const Wechat = wechat._instance;\r\n","\r\nimport { NetworkMgr } from \"./weNetworkMgr\";\r\n\r\nclass http {\r\n\t////////////////////////////\r\n\t// 类成员\r\n\t///////////////////////////\r\n\tpublic static readonly _instance = new http();\r\n\tprivate _timeOut = 10 * 1000;\r\n\tprivate _httpUrl = \"\";\r\n\tprivate _apiKey = \"\";\r\n\t////////////////////////////\r\n\t// get、set构造器\r\n\t///////////////////////////\r\n\tpublic set timeOut(time: number) {\r\n\t\tthis._timeOut = time;\r\n\t}\r\n\r\n\tpublic set httpUrl(url: string) {\r\n\t\tthis._httpUrl = url;\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 构造函数\r\n\t///////////////////////////\r\n\tpublic constructor() {\r\n\t}\r\n\r\n\tpublic init(httpUrl: string, apiKey: string) {\r\n\t\tthis._httpUrl = httpUrl;\r\n\t\tthis._apiKey = apiKey;\r\n\t}\r\n\r\n\t/**\r\n\t * 发送请求\r\n\t * @param route 注册事件，通过消息机制返回服务端回调的信息\r\n\t * @param msg 请求数据\r\n\t * @param mid \r\n\t */\r\n\tpublic post(route: string, msg: Object, mid?: number) {\r\n\t\t//计算请求时间//////\r\n\t\t// let time = new Date().getTime();\r\n\t\t////////////\r\n\t\tvar dataStr = \"\";\r\n\t\tif (msg) {\r\n\t\t\tdataStr = this.createSign(msg);\r\n\t\t}\r\n\t\tlet xhr = new XMLHttpRequest();//cc.loader.getXMLHttpRequest();\r\n\t\t// 超时时间1s，单位是毫秒\r\n\t\txhr.timeout = this._timeOut;\r\n\t\txhr.open('POST', this._httpUrl + route, true);\r\n\t\t// 服务端也需要设置\r\n\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\");\r\n\t\t//DES3加密\r\n\t\t// dataStr = this.strToDES3(dataStr);\r\n\t\txhr.send(dataStr);\r\n\t\txhr.onreadystatechange = function onreadystatechange() {\r\n\t\t\t//////////\r\n\t\t\t// let time2 = new Date().getTime();\r\n\t\t\t// const dis = time2 - time;\r\n\t\t\t///////////\r\n\t\t\t// 请求完成。在此进行处理。\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\tlet respone: any = xhr.responseText;\r\n\t\t\t\tif (!respone) {\r\n\t\t\t\t\t// console.error('http request respone is null');\r\n\t\t\t\t\tNetworkMgr.onHttpError(mid, null, 'http request respone is null');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tNetworkMgr.checkRespone(route, respone, mid);\r\n\t\t\t}\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 超时\r\n\t\txhr.ontimeout = function ontimeout(error) {\r\n\t\t\tconsole.error('http request timeout: ', error);\r\n\t\t\tNetworkMgr.onHttpError(mid, null, 'http request timeout: ');\r\n\t\t\t// NetworkMgr.onHttpError(mid, res, 'http request timeout: ');\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 错误\r\n\t\txhr.onerror = function onerror(error) {\r\n\t\t\t// console.error('http request error: ', error);\r\n\t\t\tNetworkMgr.onHttpError(mid, error, 'http request error: ');\r\n\t\t\t// alert('网络通信失败，请刷新重试。');\r\n\t\t}.bind(this);\r\n\t}\r\n\r\n\t/**\r\n\t * GET 请求\r\n\t * @param route \r\n\t * @param msg \r\n\t * @param mid \r\n\t */\r\n\tpublic post2(route: string, msg: Object, mid?: number) {\r\n\t\tconst str = this.MsgToString(msg)\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\t// 超时时间1s，单位是毫秒\r\n\t\txhr.timeout = this._timeOut;\r\n\t\txhr.open('GET', this._httpUrl + route + \"?\" + str, true);\r\n\t\t// 服务端也需要设置\r\n\t\txhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\r\n\t\txhr.send(JSON.stringify(msg));\r\n\t\txhr.onreadystatechange = function onreadystatechange() {\r\n\t\t\t// 请求完成。在此进行处理。\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\tlet respone: any = xhr.responseText;\r\n\t\t\t\tif (!respone) {\r\n\t\t\t\t\t// console.error('http request respone is null');\r\n\t\t\t\t\tNetworkMgr.onHttpError(mid, null, 'http request respone is null');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tNetworkMgr.checkRespone(route, respone, mid);\r\n\t\t\t}\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 超时\r\n\t\txhr.ontimeout = function ontimeout(error) {\r\n\t\t\tconsole.error('http request timeout: ', error);\r\n\t\t\t// NetworkMgr.onHttpError(mid, res, 'http request timeout: ');\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 错误\r\n\t\txhr.onerror = function onerror(error) {\r\n\t\t\tNetworkMgr.onHttpError(mid, error, 'http request error: ');\r\n\t\t}.bind(this);\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t/**\r\n\t * Get请求，将json转换成字符串数据\r\n\t */\r\n\tMsgToString(msg: any): string {\r\n\t\tlet arr = Object.keys(msg);\r\n\t\tlet str = \"\";\r\n\t\tfor (let value of arr) {\r\n\t\t\tstr += value + \"=\" + '\"' + msg[value] + '\"' + \"&\"\r\n\t\t}\r\n\t\treturn str;\r\n\t}\r\n\r\n\t/**\r\n\t * 数据加密\r\n\t */\r\n\tstrToDES3(data): any {\r\n\t\t// let des3Data: string = window.DES3.encrypt(global.DES3_KEY, data);\r\n\t\t// let newData = des3Data.replace(/\\+/g, \"%2B\");\r\n\t\t// return newData;\r\n\t}\r\n\r\n\t/**生成sign加密 */\r\n\tprivate createSign(obj: Object) {\r\n\t\tvar arr = new Array();\r\n\t\tvar num = 0;\r\n\t\tfor (var i in obj) {\r\n\t\t\tarr[num] = i;\r\n\t\t\tnum++;\r\n\t\t}\r\n\t\tvar sortArr = arr.sort();//参数名ASCII字典序排序\r\n\t\tvar str = \"\"\r\n\t\tfor (var i in sortArr) {\r\n\t\t\tif (!obj[sortArr[i]] && typeof (obj[sortArr[i]]) != \"number\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tstr += sortArr[i] + \"=\" + obj[sortArr[i]] + \"&&\";\r\n\t\t}\r\n\t\tvar signstr = str;\r\n\t\tsignstr += \"api_key=\" + this._apiKey;\r\n\t\tstr += \"sign=\" + this.MD5(decodeURIComponent(signstr));\r\n\t\treturn str;\r\n\t}\r\n\r\n\t/**md5加密*/\r\n\tprivate md5encode(str: string) {\r\n\t\tvar hexcase = 0;\r\n\t\tvar b64pad = \"\";\r\n\t\tvar chrsz = 8;\r\n\t\tlet hex_md5 = (s) => {\r\n\t\t\treturn binl2hex(core_md5(str2binl(s), s.length * chrsz));\r\n\t\t}\r\n\t\tlet b64_md5 = (s) => {\r\n\t\t\treturn binl2b64(core_md5(str2binl(s), s.length * chrsz));\r\n\t\t}\r\n\t\tlet str_md5 = (s) => {\r\n\t\t\treturn binl2str(core_md5(str2binl(s), s.length * chrsz));\r\n\t\t}\r\n\t\tlet hex_hmac_md5 = (key, data) => {\r\n\t\t\treturn binl2hex(core_hmac_md5(key, data));\r\n\t\t}\r\n\t\tlet b64_hmac_md5 = (key, data) => {\r\n\t\t\treturn binl2b64(core_hmac_md5(key, data));\r\n\t\t}\r\n\t\tlet str_hmac_md5 = (key, data) => {\r\n\t\t\treturn binl2str(core_hmac_md5(key, data));\r\n\t\t}\r\n\t\tlet md5_vm_test = () => {\r\n\t\t\treturn hex_md5(\"abc\") == \"900150983cd24fb0d6963f7d28e17f72\";\r\n\t\t}\r\n\t\tlet core_md5 = (x, len) => {\r\n\t\t\tx[len >> 5] |= 0x80 << ((len) % 32);\r\n\t\t\tx[(((len + 64) >>> 9) << 4) + 14] = len;\r\n\t\t\tvar a = 1732584193;\r\n\t\t\tvar b = -271733879;\r\n\t\t\tvar c = -1732584194;\r\n\t\t\tvar d = 271733878;\r\n\t\t\tfor (var i = 0; i < x.length; i += 16) {\r\n\t\t\t\tvar olda = a;\r\n\t\t\t\tvar oldb = b;\r\n\t\t\t\tvar oldc = c;\r\n\t\t\t\tvar oldd = d;\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\t\t\t\ta = safe_add(a, olda);\r\n\t\t\t\tb = safe_add(b, oldb);\r\n\t\t\t\tc = safe_add(c, oldc);\r\n\t\t\t\td = safe_add(d, oldd);\r\n\t\t\t}\r\n\t\t\treturn Array(a, b, c, d);\r\n\t\t}\r\n\t\tlet md5_cmn = (q, a, b, x, s, t) => {\r\n\t\t\treturn safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\r\n\t\t}\r\n\t\tlet md5_ff = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n\t\t}\r\n\t\tlet md5_gg = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n\t\t}\r\n\t\tlet md5_hh = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn(b ^ c ^ d, a, b, x, s, t);\r\n\t\t}\r\n\t\tlet md5_ii = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n\t\t}\r\n\t\tlet core_hmac_md5 = (key, data) => {\r\n\t\t\tvar bkey = str2binl(key);\r\n\t\t\tif (bkey.length > 16) bkey = core_md5(bkey, key.length * chrsz);\r\n\t\t\tvar ipad = Array(16),\r\n\t\t\t\topad = Array(16);\r\n\t\t\tfor (var i = 0; i < 16; i++) {\r\n\t\t\t\tipad[i] = bkey[i] ^ 0x36363636;\r\n\t\t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n\t\t\t}\r\n\t\t\tvar hash = core_md5(ipad.concat(str2binl(data)), 512 + data.length * chrsz);\r\n\t\t\treturn core_md5(opad.concat(hash), 512 + 128);\r\n\t\t}\r\n\t\tlet safe_add = (x, y) => {\r\n\t\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n\t\t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n\t\t\treturn (msw << 16) | (lsw & 0xFFFF);\r\n\t\t}\r\n\t\tlet bit_rol = (num, cnt) => {\r\n\t\t\treturn (num << cnt) | (num >>> (32 - cnt));\r\n\t\t}\r\n\t\tlet str2binl = (str) => {\r\n\t\t\tvar bin = Array();\r\n\t\t\tvar mask = (1 << chrsz) - 1;\r\n\t\t\tfor (var i = 0; i < str.length * chrsz; i += chrsz)\r\n\t\t\t\tbin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (i % 32);\r\n\t\t\treturn bin;\r\n\t\t}\r\n\t\tlet binl2str = (bin) => {\r\n\t\t\tvar str = \"\";\r\n\t\t\tvar mask = (1 << chrsz) - 1;\r\n\t\t\tfor (var i = 0; i < bin.length * 32; i += chrsz)\r\n\t\t\t\tstr += String.fromCharCode((bin[i >> 5] >>> (i % 32)) & mask);\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\tlet binl2hex = (binarray) => {\r\n\t\t\tvar hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n\t\t\tvar str = \"\";\r\n\t\t\tfor (var i = 0; i < binarray.length * 4; i++) {\r\n\t\t\t\tstr += hex_tab.charAt((binarray[i >> 2] >> ((i % 4) * 8 + 4)) & 0xF) +\r\n\t\t\t\t\thex_tab.charAt((binarray[i >> 2] >> ((i % 4) * 8)) & 0xF);\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\tlet binl2b64 = (binarray) => {\r\n\t\t\tvar tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\t\t\tvar str = \"\";\r\n\t\t\tfor (var i = 0; i < binarray.length * 4; i += 3) {\r\n\t\t\t\tvar triplet = (((binarray[i >> 2] >> 8 * (i % 4)) & 0xFF) << 16) |\r\n\t\t\t\t\t(((binarray[i + 1 >> 2] >> 8 * ((i + 1) % 4)) & 0xFF) << 8) |\r\n\t\t\t\t\t((binarray[i + 2 >> 2] >> 8 * ((i + 2) % 4)) & 0xFF);\r\n\t\t\t\tfor (var j = 0; j < 4; j++) {\r\n\t\t\t\t\tif (i * 8 + j * 6 > binarray.length * 32) str += b64pad;\r\n\t\t\t\t\telse str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\treturn hex_md5(str);\r\n\t}\r\n\r\n\tprivate MD5(instring) {\r\n\t\tvar hexcase = 0;   /* hex output format. 0 - lowercase; 1 - uppercase        */\r\n\t\tvar b64pad = \"\";  /* base-64 pad character. \"=\" for strict RFC compliance   */\r\n\r\n\t\t/*\r\n\t\t * These are the functions you'll usually want to call\r\n\t\t * They take string arguments and return either hex or base-64 encoded strings\r\n\t\t */\r\n\t\tfunction hex_md5(s) { return rstr2hex(rstr_md5(str2rstr_utf8(s))); }\r\n\t\tfunction b64_md5(s) { return rstr2b64(rstr_md5(str2rstr_utf8(s))); }\r\n\t\tfunction any_md5(s, e) { return rstr2any(rstr_md5(str2rstr_utf8(s)), e); }\r\n\t\tfunction hex_hmac_md5(k, d) { return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); }\r\n\t\tfunction b64_hmac_md5(k, d) { return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); }\r\n\t\tfunction any_hmac_md5(k, d, e) { return rstr2any(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)), e); }\r\n\r\n\t\t/*\r\n\t\t * Perform a simple self-test to see if the VM is working\r\n\t\t */\r\n\t\tfunction md5_vm_test() {\r\n\t\t\treturn hex_md5(\"abc\").toLowerCase() == \"900150983cd24fb0d6963f7d28e17f72\";\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Calculate the MD5 of a raw string\r\n\t\t */\r\n\t\tfunction rstr_md5(s) {\r\n\t\t\treturn binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Calculate the HMAC-MD5, of a key and some data (raw strings)\r\n\t\t */\r\n\t\tfunction rstr_hmac_md5(key, data) {\r\n\t\t\tvar bkey = rstr2binl(key);\r\n\t\t\tif (bkey.length > 16) bkey = binl_md5(bkey, key.length * 8);\r\n\r\n\t\t\tvar ipad = Array(16), opad = Array(16);\r\n\t\t\tfor (var i = 0; i < 16; i++) {\r\n\t\t\t\tipad[i] = bkey[i] ^ 0x36363636;\r\n\t\t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n\t\t\t}\r\n\r\n\t\t\tvar hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\r\n\t\t\treturn binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to a hex string\r\n\t\t */\r\n\t\tfunction rstr2hex(input) {\r\n\t\t\ttry { hexcase } catch (e) { hexcase = 0; }\r\n\t\t\tvar hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar x;\r\n\t\t\tfor (var i = 0; i < input.length; i++) {\r\n\t\t\t\tx = input.charCodeAt(i);\r\n\t\t\t\toutput += hex_tab.charAt((x >>> 4) & 0x0F)\r\n\t\t\t\t\t+ hex_tab.charAt(x & 0x0F);\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to a base-64 string\r\n\t\t */\r\n\t\tfunction rstr2b64(input) {\r\n\t\t\ttry { b64pad } catch (e) { b64pad = ''; }\r\n\t\t\tvar tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar len = input.length;\r\n\t\t\tfor (var i = 0; i < len; i += 3) {\r\n\t\t\t\tvar triplet = (input.charCodeAt(i) << 16)\r\n\t\t\t\t\t| (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0)\r\n\t\t\t\t\t| (i + 2 < len ? input.charCodeAt(i + 2) : 0);\r\n\t\t\t\tfor (var j = 0; j < 4; j++) {\r\n\t\t\t\t\tif (i * 8 + j * 6 > input.length * 8) output += b64pad;\r\n\t\t\t\t\telse output += tab.charAt((triplet >>> 6 * (3 - j)) & 0x3F);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to an arbitrary string encoding\r\n\t\t */\r\n\t\tfunction rstr2any(input, encoding) {\r\n\t\t\tvar divisor = encoding.length;\r\n\t\t\tvar i, j, q, x, quotient;\r\n\r\n\t\t\t/* Convert to an array of 16-bit big-endian values, forming the dividend */\r\n\t\t\tvar dividend = Array(Math.ceil(input.length / 2));\r\n\t\t\tfor (i = 0; i < dividend.length; i++) {\r\n\t\t\t\tdividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Repeatedly perform a long division. The binary array forms the dividend,\r\n\t\t\t * the length of the encoding is the divisor. Once computed, the quotient\r\n\t\t\t * forms the dividend for the next step. All remainders are stored for later\r\n\t\t\t * use.\r\n\t\t\t */\r\n\t\t\tvar full_length = Math.ceil(input.length * 8 /\r\n\t\t\t\t(Math.log(encoding.length) / Math.log(2)));\r\n\t\t\tvar remainders = Array(full_length);\r\n\t\t\tfor (j = 0; j < full_length; j++) {\r\n\t\t\t\tquotient = Array();\r\n\t\t\t\tx = 0;\r\n\t\t\t\tfor (i = 0; i < dividend.length; i++) {\r\n\t\t\t\t\tx = (x << 16) + dividend[i];\r\n\t\t\t\t\tq = Math.floor(x / divisor);\r\n\t\t\t\t\tx -= q * divisor;\r\n\t\t\t\t\tif (quotient.length > 0 || q > 0)\r\n\t\t\t\t\t\tquotient[quotient.length] = q;\r\n\t\t\t\t}\r\n\t\t\t\tremainders[j] = x;\r\n\t\t\t\tdividend = quotient;\r\n\t\t\t}\r\n\r\n\t\t\t/* Convert the remainders to the output string */\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (i = remainders.length - 1; i >= 0; i--)\r\n\t\t\t\toutput += encoding.charAt(remainders[i]);\r\n\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Encode a string as utf-8.\r\n\t\t * For efficiency, this assumes the input is valid utf-16.\r\n\t\t */\r\n\t\tfunction str2rstr_utf8(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar i = -1;\r\n\t\t\tvar x, y;\r\n\r\n\t\t\twhile (++i < input.length) {\r\n\t\t\t\t/* Decode utf-16 surrogate pairs */\r\n\t\t\t\tx = input.charCodeAt(i);\r\n\t\t\t\ty = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\r\n\t\t\t\tif (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {\r\n\t\t\t\t\tx = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* Encode output as utf-8 */\r\n\t\t\t\tif (x <= 0x7F)\r\n\t\t\t\t\toutput += String.fromCharCode(x);\r\n\t\t\t\telse if (x <= 0x7FF)\r\n\t\t\t\t\toutput += String.fromCharCode(0xC0 | ((x >>> 6) & 0x1F),\r\n\t\t\t\t\t\t0x80 | (x & 0x3F));\r\n\t\t\t\telse if (x <= 0xFFFF)\r\n\t\t\t\t\toutput += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\r\n\t\t\t\t\t\t0x80 | ((x >>> 6) & 0x3F),\r\n\t\t\t\t\t\t0x80 | (x & 0x3F));\r\n\t\t\t\telse if (x <= 0x1FFFFF)\r\n\t\t\t\t\toutput += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\r\n\t\t\t\t\t\t0x80 | ((x >>> 12) & 0x3F),\r\n\t\t\t\t\t\t0x80 | ((x >>> 6) & 0x3F),\r\n\t\t\t\t\t\t0x80 | (x & 0x3F));\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Encode a string as utf-16\r\n\t\t */\r\n\t\tfunction str2rstr_utf16le(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (var i = 0; i < input.length; i++)\r\n\t\t\t\toutput += String.fromCharCode(input.charCodeAt(i) & 0xFF,\r\n\t\t\t\t\t(input.charCodeAt(i) >>> 8) & 0xFF);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\tfunction str2rstr_utf16be(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (var i = 0; i < input.length; i++)\r\n\t\t\t\toutput += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,\r\n\t\t\t\t\tinput.charCodeAt(i) & 0xFF);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to an array of little-endian words\r\n\t\t * Characters >255 have their high-byte silently ignored.\r\n\t\t */\r\n\t\tfunction rstr2binl(input) {\r\n\t\t\tvar output = Array(input.length >> 2);\r\n\t\t\tfor (var i = 0; i < output.length; i++)\r\n\t\t\t\toutput[i] = 0;\r\n\t\t\tfor (var i = 0; i < input.length * 8; i += 8)\r\n\t\t\t\toutput[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert an array of little-endian words to a string\r\n\t\t */\r\n\t\tfunction binl2rstr(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (var i = 0; i < input.length * 32; i += 8)\r\n\t\t\t\toutput += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Calculate the MD5 of an array of little-endian words, and a bit length.\r\n\t\t */\r\n\t\tfunction binl_md5(x, len) {\r\n\t\t\t/* append padding */\r\n\t\t\tx[len >> 5] |= 0x80 << ((len) % 32);\r\n\t\t\tx[(((len + 64) >>> 9) << 4) + 14] = len;\r\n\r\n\t\t\tvar a = 1732584193;\r\n\t\t\tvar b = -271733879;\r\n\t\t\tvar c = -1732584194;\r\n\t\t\tvar d = 271733878;\r\n\r\n\t\t\tfor (var i = 0; i < x.length; i += 16) {\r\n\t\t\t\tvar olda = a;\r\n\t\t\t\tvar oldb = b;\r\n\t\t\t\tvar oldc = c;\r\n\t\t\t\tvar oldd = d;\r\n\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\r\n\t\t\t\ta = safe_add(a, olda);\r\n\t\t\t\tb = safe_add(b, oldb);\r\n\t\t\t\tc = safe_add(c, oldc);\r\n\t\t\t\td = safe_add(d, oldd);\r\n\t\t\t}\r\n\t\t\treturn Array(a, b, c, d);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * These functions implement the four basic operations the algorithm uses.\r\n\t\t */\r\n\t\tfunction md5_cmn(q, a, b, x, s, t) {\r\n\t\t\treturn safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\r\n\t\t}\r\n\t\tfunction md5_ff(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n\t\t}\r\n\t\tfunction md5_gg(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n\t\t}\r\n\t\tfunction md5_hh(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn(b ^ c ^ d, a, b, x, s, t);\r\n\t\t}\r\n\t\tfunction md5_ii(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n\t\t * to work around bugs in some JS interpreters.\r\n\t\t */\r\n\t\tfunction safe_add(x, y) {\r\n\t\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n\t\t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n\t\t\treturn (msw << 16) | (lsw & 0xFFFF);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Bitwise rotate a 32-bit number to the left.\r\n\t\t */\r\n\t\tfunction bit_rol(num, cnt) {\r\n\t\t\treturn (num << cnt) | (num >>> (32 - cnt));\r\n\t\t}\r\n\r\n\t\treturn hex_md5(instring);\r\n\t}\r\n\r\n\tpublic get(path: string, data: any, handler: any, extraUrl?: string): XMLHttpRequest {\r\n\t\t// var xhr = cc.loader.getXMLHttpRequest();\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.timeout = 5000;\r\n\t\tvar str = \"?\";\r\n\t\tfor (let k in data) {\r\n\t\t\tif (str != \"?\") {\r\n\t\t\t\tstr += \"&\";\r\n\t\t\t}\r\n\t\t\tstr += `${k}=${data[k]}`;\r\n\t\t}\r\n\t\tif (extraUrl == null) extraUrl = GHttpClient.url;\r\n\t\tvar requestURL = extraUrl + path + str;\r\n\t\txhr.open('GET', requestURL, true);\r\n\t\t// if (cc.sys.isNative){\r\n\t\t//     xhr.setRequestHeader(\"Accept-Encoding\",\"gzip,deflate\");\r\n\t\t//     xhr.setRequestHeader(\"CONTENT-TYPE\", \"text/html;charset=UTF-8\");\r\n\t\t// }\r\n\t\txhr.onreadystatechange = () => {\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar ret = JSON.parse(xhr.responseText);\r\n\t\t\t\t\tif (handler !== null) {\r\n\t\t\t\t\t\thandler(null, ret);\r\n\t\t\t\t\t}                        /* code */\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (handler !== null) {\r\n\t\t\t\t\t\thandler(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfinally {\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\txhr.send();\r\n\t\treturn xhr;\r\n\t}\r\n}\r\n\r\nexport const Http = http._instance;\r\n","// import { Notifications } from '../notifications';\r\n\r\nimport { Http } from \"./weHttp\";\r\n\r\nclass networkMgr {\r\n\t////////////////////////////\r\n\t// 类成员\r\n\t///////////////////////////\r\n\tpublic static readonly _instance = new networkMgr();\r\n\t/** 消息ID */\r\n\tprivate mid = 0;\r\n\t/** 消息队列 */\r\n\tprivate messageList: any = {};\r\n\t/** 每条消息最多的发送次数 */\r\n\tprivate limitMessageNum = 5;\r\n\t/** 时间 */\r\n\tprivate timer: number | null = null;\r\n\t/** token */\r\n\tprivate token = '';\r\n\t/** 消息锁: false, 可以正常发送消息，已上锁 */\r\n\tprivate isLock = false;\r\n\tprivate _dealHeadListener: Function | null = null;\r\n\t/** 加密规则 */\r\n\tprivate _encryptRule = ['mid:', 'uid:', 'key:', 'data:'];\r\n\t/** 加密code, 服务端客户端要统一 */\r\n\tprivate _encryptCode = 'zqkg';\r\n\t/** 计时时间: 1s */\r\n\tprivate _intervalTime = 3000;\r\n\t/** 服务器报错 */\r\n\tprivate _errorServerCode = 500;\r\n\t/** 成功回包code */\r\n\tprivate _successCode = 0;\r\n\t/** 重起游戏的错误码 */\r\n\tprivate _errorRestartGameCode = [102];\r\n\t/** 错误码列表 */\r\n\tprivate _errorNetCode: any = {};\r\n\t/** 超过时间 */\r\n\tprivate _overTime = 5000;\r\n\t/** uid */\r\n\tprivate _uid = 0;\r\n\r\n\tprivate lastMessage = null;\r\n\t////////////////////////////\r\n\t// get、set构造器\r\n\t///////////////////////////\r\n\tpublic set errorNetCode(codes: Object) {\r\n\t\tthis._errorNetCode = codes;\r\n\t}\r\n\r\n\tpublic set encryptCode(str: string) {\r\n\t\tthis._encryptCode = str;\r\n\t}\r\n\r\n\tpublic set errorRestartGameCode(array: Array<number>) {\r\n\t\tthis._errorRestartGameCode = array;\r\n\t}\r\n\r\n\tpublic set successCode(code: number) {\r\n\t\tthis._successCode = code;\r\n\t}\r\n\r\n\tpublic set errorServerCode(code: number) {\r\n\t\tthis._errorServerCode = code;\r\n\t}\r\n\r\n\tpublic set encryptRule(array: Array<string>) {\r\n\t\tthis._encryptRule = array;\r\n\t}\r\n\r\n\tpublic set intervalTime(time: number) {\r\n\t\tthis._intervalTime = time;\r\n\t}\r\n\r\n\tpublic set overTime(time: number) {\r\n\t\tthis._overTime = time;\r\n\t}\r\n\r\n\tpublic set dealHeadListener(cb: Function) {\r\n\t\tthis._dealHeadListener = cb;\r\n\t}\r\n\r\n\tpublic set uid(uid: number) {\r\n\t\tthis._uid = uid;\r\n\t}\r\n\t////////////////////////////\r\n\t// 接口\r\n\t///////////////////////////\r\n\tpublic constructor() {\r\n\t\tthis.mid = 0;\r\n\t\tthis.messageList = {};\r\n\t\tthis.timer = null;\r\n\t}\r\n\t/**\r\n\t * @description 发送xhr消息\r\n\t * @param {string} _route\r\n\t * @param {Object} data\r\n\t * @param {Function} cb\r\n\t * @param isRepeat 是否重复发送事件\r\n\t * @param fail 失败回调\r\n\t */\r\n\tpublic xhrPost(_route: string, data: Object, cb?: Function, fail?: Function, isRepeat = false) {\r\n\t\tthis.mid += 1;\r\n\t\t// 包\r\n\t\tlet msg = {\r\n\t\t\thead: {\r\n\t\t\t\troute: _route,\r\n\t\t\t\tmid: this.mid.toString(),\r\n\t\t\t\tuid: this._uid\r\n\t\t\t},\r\n\t\t\tbody: data\r\n\t\t};\r\n\t\t// 消息队列的数据结构\r\n\t\tlet netPackage = new NetworkPackage();\r\n\t\tnetPackage.route = _route;\r\n\t\tnetPackage.mid = this.mid;\r\n\t\tnetPackage.data = msg;\r\n\t\tif (cb) {\r\n\t\t\tnetPackage.callback = cb;\r\n\t\t}\r\n\t\tnetPackage.isRepeat = isRepeat;\r\n\t\tif (fail) {\r\n\t\t\tnetPackage.failCallBack = fail;\r\n\t\t}\r\n\t\tthis.messageList[this.mid] = netPackage;\r\n\t\t// 开始计时\r\n\t\tthis.startTimer();\r\n\t\tif (!this.isLock) {\r\n\t\t\tthis.sendMessage(this.mid);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 检查回包\r\n\t * @param _respone\r\n\t */\r\n\tpublic checkRespone(route: any, _respone: any, mid: any) {\r\n\t\t// 解密\r\n\t\tlet respone: any = this.jsdecrypt(_respone);\r\n\t\tlet data = respone;\r\n\t\t// if (respone.result) {\r\n\t\t// \tdata = this.jsdecrypt(respone.result);\r\n\t\t// }\r\n\t\t// respone = this.jsdecrypt(respone);\r\n\t\t// let head: any = respone.head;\r\n\t\t// let body: any = respone.body;\r\n\t\t// let code = head.code || 0;\r\n\t\t// let mid = 0;\r\n\t\t// 刷新token\r\n\t\t// this.token = head.token;\r\n\t\tlet message = this.messageList[mid];\r\n\t\t// 头部回包处理\r\n\t\t// this.succeedResponeHead(head);\r\n\t\t// 服务端回包，返回需要的数据\r\n\t\t// if (code === this._successCode) {\r\n\t\tthis.succeedResponeBody(message, data, mid);\r\n\t\t// 服务端回包中出现错误码\r\n\t\t// } else {\r\n\t\t// this.checkErrorCode(code, mid);\r\n\t\t// }\r\n\t}\r\n\r\n\tprivate succeedResponeHead(head: any) {\r\n\t\tif (this._dealHeadListener)\r\n\t\t\tthis._dealHeadListener(head);\r\n\t}\r\n\t////////////////////////////\r\n\t// 业务逻辑\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 没有错误信息，把服务端数据发送到业务逻辑层\r\n\t * @param message\r\n\t * @param body\r\n\t * @param mid\r\n\t */\r\n\tprivate succeedResponeBody(message: any, body: any, mid: number) {\r\n\t\tthis.isLock = false;\r\n\t\tthis.clearTimer();\r\n\t\tthis.deleteMessageListItem(mid, false);\r\n\t\tthis.checkNextMessage();\r\n\t\tif (message && message.callback) {\r\n\t\t\tmessage.callback(body);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * @description 网络消息code检查\r\n\t * @param code 错误码；需要和服务端协定\r\n\t * @param mid\r\n\t */\r\n\tprivate checkErrorCode(code: number, mid: number) {\r\n\t\t// 收到消息500 则继续重发直到发送次数限制.\r\n\t\tif (code !== this._errorServerCode) {\r\n\t\t\tthis.deleteMessageListItem(mid, true);\r\n\t\t}\r\n\t\t// 重启游戏\r\n\t\tfor (let index = 0; index < this._errorRestartGameCode.length; index++) {\r\n\t\t\tlet errorCode = this._errorRestartGameCode[index];\r\n\t\t\tif (code === errorCode) {\r\n\t\t\t\tthis.restartGame();\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet resultStr = this.getErrorCodeMeaning(code);\r\n\t\tconsole.error(\"----> 返回错误, code:\", code, resultStr);\r\n\t\t// TODO: 把错误码信息返回给业务逻辑\r\n\t\t// Notifications.emit('sys_http_error', { code: code, mid: mid });\r\n\t}\r\n\r\n\tprivate checkNextMessage() {\r\n\t\tfor (let key in this.messageList) {\r\n\t\t\tlet message = this.messageList[key];\r\n\t\t\tif (message.sendNum === 0) {\r\n\t\t\t\tthis.sendMessage(message.mid);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 删除消息队列中的元素\r\n\t * @param mid\r\n\t * @param fail 是否是失败\r\n\t */\r\n\tprivate deleteMessageListItem(mid: number, fail: boolean) {\r\n\t\tif (this.messageList && this.messageList[mid]) {\r\n\t\t\tif (this.messageList[mid].failCallBack && fail) {\r\n\t\t\t\tthis.messageList[mid].failCallBack();\r\n\t\t\t}\r\n\t\t\tdelete this.messageList[mid];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 数据加密（需要和服务端约定）\r\n\t * @param data\r\n\t//  */\r\n\t// private jsencrypt(data: any) {\r\n\t// \t// let head = data.head;\r\n\t// \t// let body = JSON.stringify(data.body);\r\n\t// \t// let encryptData = `${this._encryptRule[0]}${head.mid}&${this._encryptRule[1]}${head.uid}&${this._encryptRule[2]}${this._encryptCode}&${this._encryptRule[3]}${body}`;\r\n\t// \t// data.head.mi = Sha1.hex_hmac_sha1(this._encryptCode, encryptData).slice(5);\r\n\t// \treturn data;\r\n\t// }\r\n\r\n\t/**\r\n\t * @description 解密\r\n\t * @param _data\r\n\t */\r\n\tprivate jsdecrypt(_data: any) {\r\n\t\tlet obj = null;\r\n\t\tif (typeof _data == 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tobj = JSON.parse(_data);\r\n\t\t\t} catch (e) {\r\n\t\t\t}\r\n\t\t}\r\n\t\t// if (obj.result && obj) {\r\n\t\t// \tobj.result = window.DES3.decrypt(global.DES3_KEY, obj.result);\r\n\t\t// }\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t/**\r\n\t * @description 发送消息队列\r\n\t * @param {number} mid\r\n\t * @param {number} isCheck 是否检查包的发送次数是否超过上限\r\n\t */\r\n\tprivate sendMessage(mid: number, isCheck: boolean = true) {\r\n\t\t// 消息队列为空\r\n\t\tif (Object.keys(this.messageList).length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet message = this.messageList[mid];\r\n\t\t// 一条消息的发送次数大于限制次数，建议重启游戏\r\n\t\tif (isCheck && message.sendNum >= this.limitMessageNum\r\n\t\t\t|| !isCheck && message.errorNum >= this.limitMessageNum) {\r\n\t\t\tconsole.error(message.data.head.route, 'message send too much times');\r\n\t\t\tthis.deleteMessageListItem(mid, false);\r\n\t\t\t// Notifications.emit('sys_http_try_too_many_time');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tmessage.sendNum += 1;\r\n\t\tlet data = message.data;\r\n\t\tlet route = data.head.route;\r\n\t\tdata.head.token = this.token;\r\n\t\t// 加密\r\n\t\tthis.lastMessage = message;\r\n\t\tHttp.post(route, data.body, mid);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取错误码对应的意思\r\n\t * @param code\r\n\t */\r\n\tprivate getErrorCodeMeaning(code: number) {\r\n\t\tlet errStr = this._errorNetCode[code];\r\n\t\tlet resultStr = errStr;\r\n\t\tif (!errStr) {\r\n\t\t\tresultStr = `服务器错误码： ${code}`;\r\n\t\t}\r\n\t\treturn resultStr;\r\n\t}\r\n\r\n\t/**\r\n\t * @description 重起游戏\r\n\t */\r\n\tprivate restartGame() {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @description 开始定时器\r\n\t */\r\n\tprivate startTimer() {\r\n\t\tif (!this.timer) {\r\n\t\t\tthis.timer = setInterval(this.checkPackage.bind(this), this._intervalTime);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 检查发包\r\n\t */\r\n\tprivate checkPackage() {\r\n\t\tif (Object.keys(this.messageList).length !== 0) {\r\n\t\t\tfor (let key in this.messageList) {\r\n\t\t\t\tlet message = this.messageList[key];\r\n\t\t\t\tlet time = Date.now();\r\n\t\t\t\tif (time - message.time > this._overTime && message.isRepeat) {\r\n\t\t\t\t\tlet mid = message.mid;\r\n\t\t\t\t\tthis.sendMessage(mid);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.deleteMessageListItem(message.mid, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.clearTimer();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 清理定时器\r\n\t */\r\n\tprivate clearTimer() {\r\n\t\tif (this.timer) {\r\n\t\t\tclearInterval(this.timer);\r\n\t\t\tthis.timer = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * http请求err处理\r\n\t * @param mid 消息id\r\n\t * @param error 错误内容\r\n\t * @param tip 错误提示文本\r\n\t */\r\n\tpublic onHttpError(mid: any, error?: any, tip?: string): void {\r\n\t\tif (tip)\r\n\t\t\tconsole.error(\"----> onHttpError\", tip, error);\r\n\t\telse\r\n\t\t\tconsole.error(\"----> onHttpError\", error);\r\n\r\n\t\tlet pack: NetworkPackage = this.messageList[mid];\r\n\t\tif (pack) {\r\n\t\t\t//如果需要重复\r\n\t\t\tif (pack.isRepeat) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tpack.errorNum++\r\n\t\t\t\t\tthis.sendMessage(mid, false);\r\n\t\t\t\t}, 3000);\r\n\t\t\t} else {\r\n\t\t\t\tthis.deleteMessageListItem(mid, true);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport const NetworkMgr = networkMgr._instance;\r\n\r\n/**\r\n * NetworkPackage\r\n * 网络包\r\n */\r\n\r\n// main\r\nexport default class NetworkPackage {\r\n\tpublic route: string = '';\r\n\tpublic lock: boolean = false;\r\n\tpublic mid: number = 0;\r\n\tpublic data: any = null;\r\n\t/**接口成功回调 */\r\n\tpublic callback: Function | null = null;\r\n\t/**接口失败回调 */\r\n\tpublic failCallBack: Function | null = null;\r\n\r\n\tpublic time: number = 0;\r\n\tpublic sendNum: number = 0;\r\n\tpublic errorNum: number = 0;\r\n\t/**是否重复调用 */\r\n\tpublic isRepeat: boolean = false;\r\n\r\n\tpublic constructor(msg?: any) {\r\n\t\tthis.time = Date.now();\r\n\r\n\t\tfor (let key in msg) {\r\n\t\t\tlet that = this as any\r\n\t\t\tthat[key] = msg[key];\r\n\t\t}\r\n\t}\r\n};\r\n","import { director, _decorator } from 'cc';\r\nimport { NATIVE } from 'cc/env';\r\nimport { tyqSDK } from '../tyqSDK';\r\nimport { GLoginState, GNetCmd } from './conf';\r\nimport ServerCtr from './ServerCtr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('WmSocket')\r\nexport class WmSocket {\r\n\teventHandlers: any = [];\r\n\r\n\tpublic lastHeartbeatTime: number = 0;\r\n\tpublic isWsConnect: boolean = false;\r\n\tws: WebSocket = null!;\r\n\twxws: any = null;\r\n\r\n\tmsgBuff: any = {}; //key为stickId, val为stick数组\r\n\t// Stick_Id = \"stick_id\"\r\n\t// Stick_Len = \"stick_len\"\r\n\t// Stick_No = \"stick_no\" //服务端不处理，只判断字符总长度，前端自己用是否发送结束\r\n\t// Stick_Body = \"stick_val\"\r\n\t/**\r\n\t * 单例\r\n\t */\r\n\tprivate static _instance: WmSocket;\r\n\tpublic static getInstance(): WmSocket {\r\n\t\tif (!this._instance) {\r\n\t\t\tthis._instance = new WmSocket();\r\n\t\t}\r\n\t\treturn this._instance;\r\n\t}\r\n\r\n\tprivate isFirst = true;\r\n\r\n\tconstructor() {\r\n\t\tthis.addListener();\r\n\t}\r\n\r\n\taddListener() {\r\n\t\tdirector.on(\"ws_reconnect\", this.onReconnect, this);\r\n\t\tdirector.on(\"ws_close\", this.onClose, this);\r\n\t\tdirector.on(GNetCmd.StickPack, this.respStickPack, this)\r\n\t}\r\n\r\n\trespStickPack(data: any) {\r\n\t\t// cc.log(\"粘包接受情况--\", data)\r\n\t\tif (data[\"isEnd\"] == false) {\r\n\t\t\tthis.sendStickPack(data[\"stick_id\"], data[\"idx\"] + 1)\r\n\t\t} else {\r\n\t\t\tdelete this.msgBuff[data[\"stick_id\"]] //清空本地缓存\r\n\t\t}\r\n\t}\r\n\r\n\tgetGuid() {\r\n\t\tlet d = new Date().getTime();\r\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n\t\t\tlet r = (d + Math.random() * 16) % 16 | 0;\r\n\t\t\td = Math.floor(d / 16);\r\n\t\t\treturn (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n\tgetTotalLen(arr: any[]) {\r\n\t\tlet len = 0;\r\n\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\tlen += arr[i].length;\r\n\t\t}\r\n\t\treturn len;\r\n\t}\r\n\r\n\tsendStickPack(uuid: string, i: number) {\r\n\t\tlet data = {\r\n\t\t\t\"cmd\": GNetCmd.StickPack,\r\n\t\t\t\"stick_id\": uuid,\r\n\t\t\t\"stick_len\": this.getTotalLen(this.msgBuff[uuid]),\r\n\t\t\t\"stick_val\": this.msgBuff[uuid][i],\r\n\t\t\t\"isEnd\": i == this.msgBuff[uuid].length - 1,\r\n\t\t\t\"isStart\": i == 0,\r\n\t\t\t\"idx\": i\r\n\t\t}\r\n\t\t// cc.log(\"分段存储\", data)\r\n\t\tWmSocket.getInstance().sendSP(JSON.stringify(data));\r\n\t}\r\n\r\n\tonReconnect() {\r\n\t\t// 重连..\r\n\t\tif (this.isFirst) {\r\n\t\t\tthis.isFirst = false;\r\n\t\t\tthis.connect();\r\n\t\t\tconsole.log(\"发起第一次连-------\")\r\n\t\t} else {\r\n\t\t\tif (!this.isConnected()) {\r\n\t\t\t\tthis.connect();\r\n\t\t\t\tconsole.log(\"发起重连-------\")\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonClose() {\r\n\t\t// 断开连接..\r\n\t\tif (!this.isConnected()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!WmSocket.getInstance().isWsConnect) {\r\n\t\t\tthis.ws.close();\r\n\t\t} else {\r\n\t\t\tthis.wxws.close();\r\n\t\t}\r\n\t}\r\n\r\n\tconnect() {\r\n\t\tthis.ws_connect();\r\n\t}\r\n\r\n\tws_connect() {\r\n\t\tconsole.log(\"ws_connect...........................\")\r\n\t\ttry {\r\n\t\t\t// let cerUrl = cc.url.raw('resources/ssl/fishing.cer');\r\n\t\t\t// if (cc.loader.md5Pipe) {\r\n\t\t\t// \tcerUrl = cc.loader.md5Pipe.transformURL(cerUrl);\r\n\t\t\t// }\r\n\t\t\t// this._socket = new WebSocket(this._url, [], cerUrl);\r\n\r\n\t\t\t// let pemUrl = cc.url.raw(\"resources/ssl/5556166_obeliskgames.cn.cer\");\r\n\t\t\t// cc.log(pemUrl)\r\n\t\t\t// pemUrl = cc.loader.md5Pipe.transformURL(pemUrl)\r\n\t\t\t// cc.log(pemUrl)\r\n\t\t\t// this.ws = new WebSocket(gl.ws_url,  pemUrl);\r\n\r\n\t\t\tif (NATIVE) {\r\n\t\t\t\t// let pemUrl = ;\r\n\t\t\t\t// pemUrl = loader.md5Pipe.transformURL(pemUrl)\r\n\r\n\t\t\t\t// let cerUrl = url.raw(\"resources/ssl/Digicert-OV-DV-root.cer\");\r\n\t\t\t\t// if (loader.md5Pipe) {\r\n\t\t\t\t// \tcerUrl = loader.md5Pipe.transformURL(cerUrl);\r\n\t\t\t\t// }\r\n\t\t\t\t// this.ws = new WebSocket(gl.ws_url, null, cerUrl);\r\n\r\n\t\t\t\tthis.ws = new WebSocket(tyqSDK.getUrl().wsUrl); // GNetConf.mrtgd_WsUrl\r\n\r\n\t\t\t\t// assetManager.getBundle('resources').load(\"ssl/www.obeliskgames.cn.cer\", Asset, (err,res)=>{\r\n\t\t\t\t// \t// let pemUrl = url.raw(\"resources/5556166_obeliskgames.cn.cer\");\r\n\t\t\t\t// \t// pemUrl = loader.md5Pipe.transformURL(pemUrl)\r\n\t\t\t\t// \tthis.ws = new WebSocket(gl.ws_url,  res.nativeUrl);\r\n\t\t\t\t// });\r\n\t\t\t} else {\r\n\t\t\t\tthis.ws = new WebSocket(tyqSDK.getUrl().wsUrl);\r\n\t\t\t}\r\n\r\n\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"网络连接异常 --- exception---------------- \", e);\r\n\t\t}\r\n\r\n\t\tthis.ws.onopen = (event) => {\r\n\t\t\tthis.isWsConnect = true;\r\n\t\t\tconsole.log(\"Send Text WS was opened.\");\r\n\t\t\tServerCtr.GetInstance().wxLoginBegin();\r\n\t\t\t// console.log(\"onopen this.ws.readyState:\",this.ws.readyState);\r\n\t\t\t// Notifications.emit(\"ws_connect\",{type:'connect'});\r\n\t\t};\r\n\t\tthis.ws.onmessage = (event) => {\r\n\t\t\t// console.log(\"response text msg: \" + event.data, event.data.toString());\r\n\t\t\t// console.log(\"onmessage this.ws.readyState:\",this.ws.readyState);\r\n\t\t\tthis.onMessage(event.data);\r\n\t\t};\r\n\t\tthis.ws.onerror = (event) => {\r\n\t\t\tconsole.error(\"Send Text fired an error\", event);\r\n\t\t\tServerCtr.GetInstance().loginState = GLoginState.loginWithoutAccount;\r\n\t\t\t// console.log(\"onerror this.ws.readyState:\",this.ws.readyState);\r\n\t\t\t// Notifications.emit(\"ws_connect\",{type:'disconnect'});\r\n\t\t};\r\n\t\tthis.ws.onclose = (event) => {\r\n\t\t\tthis.isWsConnect = false;\r\n\t\t\tconsole.log(\"WebSocket instance closed.\");\r\n\t\t\tServerCtr.GetInstance().loginState = GLoginState.loginWithoutAccount;\r\n\t\t\t// console.log(\"onclose this.ws.readyState:\",this.ws.readyState);\r\n\t\t\t// Notifications.emit(\"ws_connect\",{type:'disconnect'});\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tonMessage(resp: string) {\r\n\t\tlet respJson = JSON.parse(resp)\r\n\t\t// log(\"onMessage resp base64解开后JSON对象:\", respJson)\r\n\t\t// console.log(\"onMessage resp:\", respJson.cmd, respJson)\r\n\t\tdirector.emit(respJson.cmd + \"\", respJson)\r\n\t}\r\n\r\n\tisConnected() {\r\n\t\treturn this.isWsConnect;\r\n\t}\r\n\tsendSP(jsonData: string) {\r\n\t\tif (!this.isConnected()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.ws.send(jsonData)//NetMgr.getInstance ().jsencrypt()\r\n\t}\r\n\r\n\tsend(netdata: any) {\r\n\t\t// log(\"###isConnected :\",this.isConnected())\r\n\t\tif (!this.isConnected()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//以下是粘包处理\r\n\t\tlet jsonData = JSON.stringify(netdata.data);\r\n\t\tlet ontTimeLimit = 109586 / 5  //这里差不错20k 109586/5，必须小于80k\r\n\t\t// log(\"-------粘包-------\", jsonData.length, ontTimeLimit, jsonData.length/ontTimeLimit+1)\r\n\t\tif (jsonData.length > ontTimeLimit) {\r\n\t\t\tlet str = jsonData\r\n\t\t\tlet strArr = [];\r\n\t\t\tlet n = jsonData.length / ontTimeLimit + 1;\r\n\t\t\tfor (let i = 0, l = str.length; i < n; i++) {\r\n\t\t\t\tlet a = str.slice(ontTimeLimit * i, ontTimeLimit * (i + 1));\r\n\t\t\t\t// let a = str.substr(i*ontTimeLimit,ontTimeLimit)\r\n\t\t\t\t// log(\"分段存储1111\", a)\r\n\t\t\t\tstrArr.push(a);\r\n\t\t\t}\r\n\t\t\tlet uuid = this.getGuid()\r\n\t\t\tthis.msgBuff[uuid] = strArr\r\n\t\t\tthis.sendStickPack(uuid, 0);\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// let data = JSON.stringify(netdata.data)\r\n\t\t// log(\"### client send data base64处理:\", data)\r\n\t\tthis.ws.send(jsonData) //NetMgr.getInstance ().jsencrypt()\r\n\r\n\t}\r\n\r\n}\r\n\r\n","import { tyqSDK } from \"../../tyqSDK\";\r\n\r\nexport interface IPos {\r\n    left?: number;\r\n    right?: number;\r\n    top?: number;\r\n    bottom?: number;\r\n    centerX?: number;\r\n    centerY?: number;\r\n}\r\n\r\nexport enum EType {\r\n    // * @param type 1矩阵；2横向；3竖向；4单格子\r\n    rect = 1,\r\n    horizontal,\r\n    vertical,\r\n    grid,\r\n}\r\nexport class WXCustomAd {\r\n\r\n    /**原生模板广告矩阵样式id\t */\r\n    public static _customc_rect_adunit = [];\r\n\r\n    /**原生模板广告横向样式id\t */\r\n    public static _customc_h_adunit = [];\r\n\r\n    /**原生模板广告竖向样式id\t */\r\n    public static _customc_v_adunit = [];\r\n\r\n    /**原生模板广告单个样式id\t */\r\n    private static _customc_one_adunit = [];\r\n\r\n    /**广告缓存 */\r\n    private static _ads = {};\r\n\r\n    /** */\r\n    private static _waits = [];\r\n\r\n    private static sysInfo = null;\r\n\r\n    private cb: any;\r\n    static cb: Function;\r\n    /**\r\n     * 设置广告id\r\n     * @param rectid 矩阵样式id\r\n     * @param hid 横向样式id\r\n     * @param vid 竖向样式id\r\n     * @param oneid 单格子样式id\r\n     */\r\n    static setadunit(rectid, hid, vid, oneid) {\r\n        this._customc_rect_adunit = rectid;\r\n        this._customc_h_adunit = hid;\r\n        this._customc_v_adunit = vid;\r\n        this._customc_one_adunit = oneid;\r\n    }\r\n\r\n    /**\r\n     * 创建一个原生广告对象\r\n     * @param flag 创建来源标识（用标识来控制显示和隐藏）\r\n     * @param type 1矩阵；2横向；3竖向；4单格子\r\n     * @param pos 位置(对象可包含left、right、top、bottom、centerX、centerY字段)。分别表示距离左右上下和中心点的距离\r\n     * @param adSize 广告尺寸\r\n     * @param extraId 指定广告id参数\r\n     * @param failcb:当未拉取到广告（目前仅限报1004错误，如拉取其他错误需自行更改回调）之后，可执行回调。 \r\n     * @returns \r\n     */\r\n    static createCustomAd(flag, type: EType, pos: IPos, adSize: { width: number, height: number }, extraId?: any, failcb?: Function) {\r\n        if (!window.wx) return;\r\n        if (!this.sysInfo) {\r\n            this.sysInfo = wx.getSystemInfoSync();\r\n        }\r\n        let version = this.sysInfo.SDKVersion;\r\n        let ad = null;\r\n        let id = \"\";\r\n        let self = this;\r\n\r\n        if (failcb) {\r\n            this.cb = failcb;\r\n        }\r\n\r\n        if (type == 1) {\r\n            id = this._customc_rect_adunit[this.rand(0, this._customc_rect_adunit.length - 1)];\r\n        } else if (type == 2) {\r\n            id = this._customc_h_adunit[this.rand(0, this._customc_h_adunit.length - 1)];\r\n        } else if (type == 3) {\r\n            id = this._customc_v_adunit[this.rand(0, this._customc_v_adunit.length - 1)];\r\n        }\r\n        else if (type == 4) {\r\n            id = this._customc_one_adunit[this.rand(0, this._customc_one_adunit.length - 1)];\r\n        }\r\n        if (extraId && extraId !== \"\") {\r\n            if (typeof extraId == \"string\") {\r\n                id = extraId;\r\n            } else if (extraId instanceof Array) {\r\n                id = extraId[this.rand(0, extraId.length - 1)];\r\n            }\r\n        }\r\n\r\n        //id不存在\r\n        if (id == \"\") return;\r\n\r\n        tyqSDK.log(\"显示原生模板广告\", flag, this._ads, this._waits);\r\n        //缓存有\r\n        if (this._ads[flag]) {\r\n            ad = this._ads[flag];\r\n            tyqSDK.log(\"缓存有\");\r\n            if (!ad.isShow()) ad.show();\r\n        }\r\n        else if (this.compareVersion(version, '2.11.1') >= 0) {\r\n            tyqSDK.log(\"创建原生模板广告\" + flag, \"id:\" + id, \"pos:\", pos);\r\n            let p = self.getPos(adSize, pos);\r\n            ad = wx.createCustomAd({\r\n                adUnitId: id,\r\n                adIntervals: 30,\r\n                style: {\r\n                    top: p.top,\r\n                    left: p.left,\r\n                    width: adSize.width, // 用于设置组件宽度，只有部分模板才支持，如矩阵格子模板\r\n                    fixed: false // fixed 只适用于小程序环境\r\n                }\r\n            })\r\n\r\n            ad.onLoad(() => {\r\n                self._ads[flag] = ad;\r\n                let index = self._waits.indexOf(flag);\r\n                tyqSDK.log(\"原生模板广告加载完成：\" + flag, self._waits, index);\r\n                if (index == -1)\r\n                    ad.show();\r\n                else {\r\n                    self._waits = self._waits.filter(x => x != flag);\r\n                    // self._waits.splice(index, 1);\r\n                    ad.hide().then(() => {\r\n\r\n                    }).catch(() => {\r\n                        // self.hideCustomAd(flag);\r\n                        tyqSDK.log(\"第二次hide\");\r\n                        ad.hide().catch(() => {\r\n                            tyqSDK.log(\"第三次hide\");\r\n                        });\r\n                    });\r\n                }\r\n\r\n            });\r\n            ad.onError((res) => {\r\n                tyqSDK.log('原生模板广告加载失败:', res.errCode, ' ', res.errMsg);\r\n                if (parseInt(res.errCode) === 1004 && this.cb) {\r\n                    tyqSDK.log(\"拉取失败\");\r\n                    this.cb();\r\n                }\r\n            });\r\n            ad.onClose(() => {\r\n                tyqSDK.log(\"原生模板广告关闭\");\r\n            });\r\n        } else {\r\n            // 如果希望用户在最新版本的客户端上体验您的小程序，可以这样子提示\r\n            // wx.showModal({\r\n            //     title: '提示',\r\n            //     content: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\r\n            // })\r\n        }\r\n    }\r\n\r\n    public static rand(min, max) {\r\n        return min + Math.floor(Math.random() * (max - min + 1));\r\n    }\r\n    \r\n    /**\r\n     * 隐藏原生模板广告\r\n     * @param flag \r\n     */\r\n    public static hideCustomAd(flag) {\r\n        let ad = null;\r\n\r\n        tyqSDK.log(\"隐藏原生模板广告\", flag, this._ads, this._waits);\r\n        if (this._ads[flag]) {\r\n            ad = this._ads[flag];\r\n            if (ad.isShow())\r\n                ad.hide().then(() => {\r\n\r\n                }).catch(() => {\r\n                    // self.hideCustomAd(flag);\r\n                    tyqSDK.log(\"第二次hide\");\r\n                    ad.hide().catch(() => {\r\n                        tyqSDK.log(\"第三次hide\");\r\n                    });\r\n                });\r\n        } else {\r\n            if (this._waits.indexOf(flag) == -1) {\r\n                this._waits.push(flag);\r\n            }\r\n\r\n        }\r\n    }\r\n    public static destroyCustomAd(flag) {\r\n        if (this._ads[flag]) {\r\n            this._ads[flag].destroy();\r\n            this._ads[flag] = null;\r\n        }\r\n    }\r\n\r\n    private static compareVersion(v1, v2) {\r\n        v1 = v1.split('.')\r\n        v2 = v2.split('.')\r\n        const len = Math.max(v1.length, v2.length)\r\n\r\n        while (v1.length < len) {\r\n            v1.push('0')\r\n        }\r\n        while (v2.length < len) {\r\n            v2.push('0')\r\n        }\r\n\r\n        for (let i = 0; i < len; i++) {\r\n            const num1 = parseInt(v1[i])\r\n            const num2 = parseInt(v2[i])\r\n\r\n            if (num1 > num2) {\r\n                return 1\r\n            } else if (num1 < num2) {\r\n                return -1\r\n            }\r\n        }\r\n\r\n        return 0\r\n    }\r\n\r\n    /**\r\n     * 获取实际的位置\r\n     * @param adSize 广告尺寸\r\n     * @param pos 游戏中的相对位置\r\n     * @returns \r\n     */\r\n    private static getPos(adSize: any, pos: IPos) {\r\n        if (!this.sysInfo) {\r\n            this.sysInfo = wx.getSystemInfoSync();\r\n        }\r\n        let sysInfo = this.sysInfo;\r\n        let w = adSize.width;\r\n        let h = adSize.height;\r\n\r\n        let sc_w = sysInfo.windowWidth / cc.winSize.width;\r\n        let sc_h = sysInfo.windowHeight / cc.winSize.height;\r\n\r\n        let l = (sysInfo.windowWidth - w) / 2;\r\n        let t = (sysInfo.windowHeight - h) / 2;\r\n        if (pos && pos.left != undefined) l = pos.left * sc_w;\r\n        if (pos && pos.top != undefined) t = pos.top * sc_h;\r\n        if (pos && pos.right != undefined) l = sysInfo.windowWidth - w - pos.right * sc_w;\r\n        if (pos && pos.bottom != undefined) t = sysInfo.windowHeight - h - pos.bottom * sc_h;\r\n        if (pos && pos.centerX != undefined) l = (sysInfo.windowWidth - w) / 2 + pos.centerX * sc_w;\r\n        if (pos && pos.centerY != undefined) t = (sysInfo.windowHeight - h) / 2 + pos.centerY * sc_h;\r\n\r\n        return {\r\n            left: l,\r\n            top: t\r\n        }\r\n    }\r\n    public static hideAllAd() {\r\n        for (const key in this._ads) {\r\n            this.hideCustomAd(key);\r\n        }\r\n    }\r\n}"]}